<script type="text/javascript">(function SANDBOX_CLOSURE(){
  var require;
 require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"async":[function(require,module,exports){
(function (process,global){
/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
(function () {

    var async = {};
    function noop() {}
    function identity(v) {
        return v;
    }
    function toBool(v) {
        return !!v;
    }
    function notId(v) {
        return !v;
    }

    // global on the server, window in the browser
    var previous_async;

    // Establish the root object, `window` (`self`) in the browser, `global`
    // on the server, or `this` in some virtual machines. We use `self`
    // instead of `window` for `WebWorker` support.
    var root = typeof self === 'object' && self.self === self && self ||
            typeof global === 'object' && global.global === global && global ||
            this;

    if (root != null) {
        previous_async = root.async;
    }

    async.noConflict = function () {
        root.async = previous_async;
        return async;
    };

    function only_once(fn) {
        return function() {
            if (fn === null) throw new Error("Callback was already called.");
            fn.apply(this, arguments);
            fn = null;
        };
    }

    function _once(fn) {
        return function() {
            if (fn === null) return;
            fn.apply(this, arguments);
            fn = null;
        };
    }

    //// cross-browser compatiblity functions ////

    var _toString = Object.prototype.toString;

    var _isArray = Array.isArray || function (obj) {
        return _toString.call(obj) === '[object Array]';
    };

    // Ported from underscore.js isObject
    var _isObject = function(obj) {
        var type = typeof obj;
        return type === 'function' || type === 'object' && !!obj;
    };

    function _isArrayLike(arr) {
        return _isArray(arr) || (
            // has a positive integer length property
            typeof arr.length === "number" &&
            arr.length >= 0 &&
            arr.length % 1 === 0
        );
    }

    function _arrayEach(arr, iterator) {
        var index = -1,
            length = arr.length;

        while (++index < length) {
            iterator(arr[index], index, arr);
        }
    }

    function _map(arr, iterator) {
        var index = -1,
            length = arr.length,
            result = Array(length);

        while (++index < length) {
            result[index] = iterator(arr[index], index, arr);
        }
        return result;
    }

    function _range(count) {
        return _map(Array(count), function (v, i) { return i; });
    }

    function _reduce(arr, iterator, memo) {
        _arrayEach(arr, function (x, i, a) {
            memo = iterator(memo, x, i, a);
        });
        return memo;
    }

    function _forEachOf(object, iterator) {
        _arrayEach(_keys(object), function (key) {
            iterator(object[key], key);
        });
    }

    function _indexOf(arr, item) {
        for (var i = 0; i < arr.length; i++) {
            if (arr[i] === item) return i;
        }
        return -1;
    }

    var _keys = Object.keys || function (obj) {
        var keys = [];
        for (var k in obj) {
            if (obj.hasOwnProperty(k)) {
                keys.push(k);
            }
        }
        return keys;
    };

    function _keyIterator(coll) {
        var i = -1;
        var len;
        var keys;
        if (_isArrayLike(coll)) {
            len = coll.length;
            return function next() {
                i++;
                return i < len ? i : null;
            };
        } else {
            keys = _keys(coll);
            len = keys.length;
            return function next() {
                i++;
                return i < len ? keys[i] : null;
            };
        }
    }

    // Similar to ES6's rest param (http://ariya.ofilabs.com/2013/03/es6-and-rest-parameter.html)
    // This accumulates the arguments passed into an array, after a given index.
    // From underscore.js (https://github.com/jashkenas/underscore/pull/2140).
    function _restParam(func, startIndex) {
        startIndex = startIndex == null ? func.length - 1 : +startIndex;
        return function() {
            var length = Math.max(arguments.length - startIndex, 0);
            var rest = Array(length);
            for (var index = 0; index < length; index++) {
                rest[index] = arguments[index + startIndex];
            }
            switch (startIndex) {
                case 0: return func.call(this, rest);
                case 1: return func.call(this, arguments[0], rest);
            }
            // Currently unused but handle cases outside of the switch statement:
            // var args = Array(startIndex + 1);
            // for (index = 0; index < startIndex; index++) {
            //     args[index] = arguments[index];
            // }
            // args[startIndex] = rest;
            // return func.apply(this, args);
        };
    }

    function _withoutIndex(iterator) {
        return function (value, index, callback) {
            return iterator(value, callback);
        };
    }

    //// exported async module functions ////

    //// nextTick implementation with browser-compatible fallback ////

    // capture the global reference to guard against fakeTimer mocks
    var _setImmediate = typeof setImmediate === 'function' && setImmediate;

    var _delay = _setImmediate ? function(fn) {
        // not a direct alias for IE10 compatibility
        _setImmediate(fn);
    } : function(fn) {
        setTimeout(fn, 0);
    };

    if (typeof process === 'object' && typeof process.nextTick === 'function') {
        async.nextTick = process.nextTick;
    } else {
        async.nextTick = _delay;
    }
    async.setImmediate = _setImmediate ? _delay : async.nextTick;


    async.forEach =
    async.each = function (arr, iterator, callback) {
        return async.eachOf(arr, _withoutIndex(iterator), callback);
    };

    async.forEachSeries =
    async.eachSeries = function (arr, iterator, callback) {
        return async.eachOfSeries(arr, _withoutIndex(iterator), callback);
    };


    async.forEachLimit =
    async.eachLimit = function (arr, limit, iterator, callback) {
        return _eachOfLimit(limit)(arr, _withoutIndex(iterator), callback);
    };

    async.forEachOf =
    async.eachOf = function (object, iterator, callback) {
        callback = _once(callback || noop);
        object = object || [];

        var iter = _keyIterator(object);
        var key, completed = 0;

        while ((key = iter()) != null) {
            completed += 1;
            iterator(object[key], key, only_once(done));
        }

        if (completed === 0) callback(null);

        function done(err) {
            completed--;
            if (err) {
                callback(err);
            }
            // Check key is null in case iterator isn't exhausted
            // and done resolved synchronously.
            else if (key === null && completed <= 0) {
                callback(null);
            }
        }
    };

    async.forEachOfSeries =
    async.eachOfSeries = function (obj, iterator, callback) {
        callback = _once(callback || noop);
        obj = obj || [];
        var nextKey = _keyIterator(obj);
        var key = nextKey();
        function iterate() {
            var sync = true;
            if (key === null) {
                return callback(null);
            }
            iterator(obj[key], key, only_once(function (err) {
                if (err) {
                    callback(err);
                }
                else {
                    key = nextKey();
                    if (key === null) {
                        return callback(null);
                    } else {
                        if (sync) {
                            async.setImmediate(iterate);
                        } else {
                            iterate();
                        }
                    }
                }
            }));
            sync = false;
        }
        iterate();
    };



    async.forEachOfLimit =
    async.eachOfLimit = function (obj, limit, iterator, callback) {
        _eachOfLimit(limit)(obj, iterator, callback);
    };

    function _eachOfLimit(limit) {

        return function (obj, iterator, callback) {
            callback = _once(callback || noop);
            obj = obj || [];
            var nextKey = _keyIterator(obj);
            if (limit <= 0) {
                return callback(null);
            }
            var done = false;
            var running = 0;
            var errored = false;

            (function replenish () {
                if (done && running <= 0) {
                    return callback(null);
                }

                while (running < limit && !errored) {
                    var key = nextKey();
                    if (key === null) {
                        done = true;
                        if (running <= 0) {
                            callback(null);
                        }
                        return;
                    }
                    running += 1;
                    iterator(obj[key], key, only_once(function (err) {
                        running -= 1;
                        if (err) {
                            callback(err);
                            errored = true;
                        }
                        else {
                            replenish();
                        }
                    }));
                }
            })();
        };
    }


    function doParallel(fn) {
        return function (obj, iterator, callback) {
            return fn(async.eachOf, obj, iterator, callback);
        };
    }
    function doParallelLimit(fn) {
        return function (obj, limit, iterator, callback) {
            return fn(_eachOfLimit(limit), obj, iterator, callback);
        };
    }
    function doSeries(fn) {
        return function (obj, iterator, callback) {
            return fn(async.eachOfSeries, obj, iterator, callback);
        };
    }

    function _asyncMap(eachfn, arr, iterator, callback) {
        callback = _once(callback || noop);
        arr = arr || [];
        var results = _isArrayLike(arr) ? [] : {};
        eachfn(arr, function (value, index, callback) {
            iterator(value, function (err, v) {
                results[index] = v;
                callback(err);
            });
        }, function (err) {
            callback(err, results);
        });
    }

    async.map = doParallel(_asyncMap);
    async.mapSeries = doSeries(_asyncMap);
    async.mapLimit = doParallelLimit(_asyncMap);

    // reduce only has a series version, as doing reduce in parallel won't
    // work in many situations.
    async.inject =
    async.foldl =
    async.reduce = function (arr, memo, iterator, callback) {
        async.eachOfSeries(arr, function (x, i, callback) {
            iterator(memo, x, function (err, v) {
                memo = v;
                callback(err);
            });
        }, function (err) {
            callback(err, memo);
        });
    };

    async.foldr =
    async.reduceRight = function (arr, memo, iterator, callback) {
        var reversed = _map(arr, identity).reverse();
        async.reduce(reversed, memo, iterator, callback);
    };

    async.transform = function (arr, memo, iterator, callback) {
        if (arguments.length === 3) {
            callback = iterator;
            iterator = memo;
            memo = _isArray(arr) ? [] : {};
        }

        async.eachOf(arr, function(v, k, cb) {
            iterator(memo, v, k, cb);
        }, function(err) {
            callback(err, memo);
        });
    };

    function _filter(eachfn, arr, iterator, callback) {
        var results = [];
        eachfn(arr, function (x, index, callback) {
            iterator(x, function (v) {
                if (v) {
                    results.push({index: index, value: x});
                }
                callback();
            });
        }, function () {
            callback(_map(results.sort(function (a, b) {
                return a.index - b.index;
            }), function (x) {
                return x.value;
            }));
        });
    }

    async.select =
    async.filter = doParallel(_filter);

    async.selectLimit =
    async.filterLimit = doParallelLimit(_filter);

    async.selectSeries =
    async.filterSeries = doSeries(_filter);

    function _reject(eachfn, arr, iterator, callback) {
        _filter(eachfn, arr, function(value, cb) {
            iterator(value, function(v) {
                cb(!v);
            });
        }, callback);
    }
    async.reject = doParallel(_reject);
    async.rejectLimit = doParallelLimit(_reject);
    async.rejectSeries = doSeries(_reject);

    function _createTester(eachfn, check, getResult) {
        return function(arr, limit, iterator, cb) {
            function done() {
                if (cb) cb(getResult(false, void 0));
            }
            function iteratee(x, _, callback) {
                if (!cb) return callback();
                iterator(x, function (v) {
                    if (cb && check(v)) {
                        cb(getResult(true, x));
                        cb = iterator = false;
                    }
                    callback();
                });
            }
            if (arguments.length > 3) {
                eachfn(arr, limit, iteratee, done);
            } else {
                cb = iterator;
                iterator = limit;
                eachfn(arr, iteratee, done);
            }
        };
    }

    async.any =
    async.some = _createTester(async.eachOf, toBool, identity);

    async.someLimit = _createTester(async.eachOfLimit, toBool, identity);

    async.all =
    async.every = _createTester(async.eachOf, notId, notId);

    async.everyLimit = _createTester(async.eachOfLimit, notId, notId);

    function _findGetResult(v, x) {
        return x;
    }
    async.detect = _createTester(async.eachOf, identity, _findGetResult);
    async.detectSeries = _createTester(async.eachOfSeries, identity, _findGetResult);
    async.detectLimit = _createTester(async.eachOfLimit, identity, _findGetResult);

    async.sortBy = function (arr, iterator, callback) {
        async.map(arr, function (x, callback) {
            iterator(x, function (err, criteria) {
                if (err) {
                    callback(err);
                }
                else {
                    callback(null, {value: x, criteria: criteria});
                }
            });
        }, function (err, results) {
            if (err) {
                return callback(err);
            }
            else {
                callback(null, _map(results.sort(comparator), function (x) {
                    return x.value;
                }));
            }

        });

        function comparator(left, right) {
            var a = left.criteria, b = right.criteria;
            return a < b ? -1 : a > b ? 1 : 0;
        }
    };

    async.auto = function (tasks, concurrency, callback) {
        if (typeof arguments[1] === 'function') {
            // concurrency is optional, shift the args.
            callback = concurrency;
            concurrency = null;
        }
        callback = _once(callback || noop);
        var keys = _keys(tasks);
        var remainingTasks = keys.length;
        if (!remainingTasks) {
            return callback(null);
        }
        if (!concurrency) {
            concurrency = remainingTasks;
        }

        var results = {};
        var runningTasks = 0;

        var hasError = false;

        var listeners = [];
        function addListener(fn) {
            listeners.unshift(fn);
        }
        function removeListener(fn) {
            var idx = _indexOf(listeners, fn);
            if (idx >= 0) listeners.splice(idx, 1);
        }
        function taskComplete() {
            remainingTasks--;
            _arrayEach(listeners.slice(0), function (fn) {
                fn();
            });
        }

        addListener(function () {
            if (!remainingTasks) {
                callback(null, results);
            }
        });

        _arrayEach(keys, function (k) {
            if (hasError) return;
            var task = _isArray(tasks[k]) ? tasks[k]: [tasks[k]];
            var taskCallback = _restParam(function(err, args) {
                runningTasks--;
                if (args.length <= 1) {
                    args = args[0];
                }
                if (err) {
                    var safeResults = {};
                    _forEachOf(results, function(val, rkey) {
                        safeResults[rkey] = val;
                    });
                    safeResults[k] = args;
                    hasError = true;

                    callback(err, safeResults);
                }
                else {
                    results[k] = args;
                    async.setImmediate(taskComplete);
                }
            });
            var requires = task.slice(0, task.length - 1);
            // prevent dead-locks
            var len = requires.length;
            var dep;
            while (len--) {
                if (!(dep = tasks[requires[len]])) {
                    throw new Error('Has nonexistent dependency in ' + requires.join(', '));
                }
                if (_isArray(dep) && _indexOf(dep, k) >= 0) {
                    throw new Error('Has cyclic dependencies');
                }
            }
            function ready() {
                return runningTasks < concurrency && _reduce(requires, function (a, x) {
                    return (a && results.hasOwnProperty(x));
                }, true) && !results.hasOwnProperty(k);
            }
            if (ready()) {
                runningTasks++;
                task[task.length - 1](taskCallback, results);
            }
            else {
                addListener(listener);
            }
            function listener() {
                if (ready()) {
                    runningTasks++;
                    removeListener(listener);
                    task[task.length - 1](taskCallback, results);
                }
            }
        });
    };



    async.retry = function(times, task, callback) {
        var DEFAULT_TIMES = 5;
        var DEFAULT_INTERVAL = 0;

        var attempts = [];

        var opts = {
            times: DEFAULT_TIMES,
            interval: DEFAULT_INTERVAL
        };

        function parseTimes(acc, t){
            if(typeof t === 'number'){
                acc.times = parseInt(t, 10) || DEFAULT_TIMES;
            } else if(typeof t === 'object'){
                acc.times = parseInt(t.times, 10) || DEFAULT_TIMES;
                acc.interval = parseInt(t.interval, 10) || DEFAULT_INTERVAL;
            } else {
                throw new Error('Unsupported argument type for \'times\': ' + typeof t);
            }
        }

        var length = arguments.length;
        if (length < 1 || length > 3) {
            throw new Error('Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)');
        } else if (length <= 2 && typeof times === 'function') {
            callback = task;
            task = times;
        }
        if (typeof times !== 'function') {
            parseTimes(opts, times);
        }
        opts.callback = callback;
        opts.task = task;

        function wrappedTask(wrappedCallback, wrappedResults) {
            function retryAttempt(task, finalAttempt) {
                return function(seriesCallback) {
                    task(function(err, result){
                        seriesCallback(!err || finalAttempt, {err: err, result: result});
                    }, wrappedResults);
                };
            }

            function retryInterval(interval){
                return function(seriesCallback){
                    setTimeout(function(){
                        seriesCallback(null);
                    }, interval);
                };
            }

            while (opts.times) {

                var finalAttempt = !(opts.times-=1);
                attempts.push(retryAttempt(opts.task, finalAttempt));
                if(!finalAttempt && opts.interval > 0){
                    attempts.push(retryInterval(opts.interval));
                }
            }

            async.series(attempts, function(done, data){
                data = data[data.length - 1];
                (wrappedCallback || opts.callback)(data.err, data.result);
            });
        }

        // If a callback is passed, run this as a controll flow
        return opts.callback ? wrappedTask() : wrappedTask;
    };

    async.waterfall = function (tasks, callback) {
        callback = _once(callback || noop);
        if (!_isArray(tasks)) {
            var err = new Error('First argument to waterfall must be an array of functions');
            return callback(err);
        }
        if (!tasks.length) {
            return callback();
        }
        function wrapIterator(iterator) {
            return _restParam(function (err, args) {
                if (err) {
                    callback.apply(null, [err].concat(args));
                }
                else {
                    var next = iterator.next();
                    if (next) {
                        args.push(wrapIterator(next));
                    }
                    else {
                        args.push(callback);
                    }
                    ensureAsync(iterator).apply(null, args);
                }
            });
        }
        wrapIterator(async.iterator(tasks))();
    };

    function _parallel(eachfn, tasks, callback) {
        callback = callback || noop;
        var results = _isArrayLike(tasks) ? [] : {};

        eachfn(tasks, function (task, key, callback) {
            task(_restParam(function (err, args) {
                if (args.length <= 1) {
                    args = args[0];
                }
                results[key] = args;
                callback(err);
            }));
        }, function (err) {
            callback(err, results);
        });
    }

    async.parallel = function (tasks, callback) {
        _parallel(async.eachOf, tasks, callback);
    };

    async.parallelLimit = function(tasks, limit, callback) {
        _parallel(_eachOfLimit(limit), tasks, callback);
    };

    async.series = function(tasks, callback) {
        _parallel(async.eachOfSeries, tasks, callback);
    };

    async.iterator = function (tasks) {
        function makeCallback(index) {
            function fn() {
                if (tasks.length) {
                    tasks[index].apply(null, arguments);
                }
                return fn.next();
            }
            fn.next = function () {
                return (index < tasks.length - 1) ? makeCallback(index + 1): null;
            };
            return fn;
        }
        return makeCallback(0);
    };

    async.apply = _restParam(function (fn, args) {
        return _restParam(function (callArgs) {
            return fn.apply(
                null, args.concat(callArgs)
            );
        });
    });

    function _concat(eachfn, arr, fn, callback) {
        var result = [];
        eachfn(arr, function (x, index, cb) {
            fn(x, function (err, y) {
                result = result.concat(y || []);
                cb(err);
            });
        }, function (err) {
            callback(err, result);
        });
    }
    async.concat = doParallel(_concat);
    async.concatSeries = doSeries(_concat);

    async.whilst = function (test, iterator, callback) {
        callback = callback || noop;
        if (test()) {
            var next = _restParam(function(err, args) {
                if (err) {
                    callback(err);
                } else if (test.apply(this, args)) {
                    iterator(next);
                } else {
                    callback.apply(null, [null].concat(args));
                }
            });
            iterator(next);
        } else {
            callback(null);
        }
    };

    async.doWhilst = function (iterator, test, callback) {
        var calls = 0;
        return async.whilst(function() {
            return ++calls <= 1 || test.apply(this, arguments);
        }, iterator, callback);
    };

    async.until = function (test, iterator, callback) {
        return async.whilst(function() {
            return !test.apply(this, arguments);
        }, iterator, callback);
    };

    async.doUntil = function (iterator, test, callback) {
        return async.doWhilst(iterator, function() {
            return !test.apply(this, arguments);
        }, callback);
    };

    async.during = function (test, iterator, callback) {
        callback = callback || noop;

        var next = _restParam(function(err, args) {
            if (err) {
                callback(err);
            } else {
                args.push(check);
                test.apply(this, args);
            }
        });

        var check = function(err, truth) {
            if (err) {
                callback(err);
            } else if (truth) {
                iterator(next);
            } else {
                callback(null);
            }
        };

        test(check);
    };

    async.doDuring = function (iterator, test, callback) {
        var calls = 0;
        async.during(function(next) {
            if (calls++ < 1) {
                next(null, true);
            } else {
                test.apply(this, arguments);
            }
        }, iterator, callback);
    };

    function _queue(worker, concurrency, payload) {
        if (concurrency == null) {
            concurrency = 1;
        }
        else if(concurrency === 0) {
            throw new Error('Concurrency must not be zero');
        }
        function _insert(q, data, pos, callback) {
            if (callback != null && typeof callback !== "function") {
                throw new Error("task callback must be a function");
            }
            q.started = true;
            if (!_isArray(data)) {
                data = [data];
            }
            if(data.length === 0 && q.idle()) {
                // call drain immediately if there are no tasks
                return async.setImmediate(function() {
                    q.drain();
                });
            }
            _arrayEach(data, function(task) {
                var item = {
                    data: task,
                    callback: callback || noop
                };

                if (pos) {
                    q.tasks.unshift(item);
                } else {
                    q.tasks.push(item);
                }

                if (q.tasks.length === q.concurrency) {
                    q.saturated();
                }
            });
            async.setImmediate(q.process);
        }
        function _next(q, tasks) {
            return function(){
                workers -= 1;

                var removed = false;
                var args = arguments;
                _arrayEach(tasks, function (task) {
                    _arrayEach(workersList, function (worker, index) {
                        if (worker === task && !removed) {
                            workersList.splice(index, 1);
                            removed = true;
                        }
                    });

                    task.callback.apply(task, args);
                });
                if (q.tasks.length + workers === 0) {
                    q.drain();
                }
                q.process();
            };
        }

        var workers = 0;
        var workersList = [];
        var q = {
            tasks: [],
            concurrency: concurrency,
            payload: payload,
            saturated: noop,
            empty: noop,
            drain: noop,
            started: false,
            paused: false,
            push: function (data, callback) {
                _insert(q, data, false, callback);
            },
            kill: function () {
                q.drain = noop;
                q.tasks = [];
            },
            unshift: function (data, callback) {
                _insert(q, data, true, callback);
            },
            process: function () {
                while(!q.paused && workers < q.concurrency && q.tasks.length){

                    var tasks = q.payload ?
                        q.tasks.splice(0, q.payload) :
                        q.tasks.splice(0, q.tasks.length);

                    var data = _map(tasks, function (task) {
                        return task.data;
                    });

                    if (q.tasks.length === 0) {
                        q.empty();
                    }
                    workers += 1;
                    workersList.push(tasks[0]);
                    var cb = only_once(_next(q, tasks));
                    worker(data, cb);
                }
            },
            length: function () {
                return q.tasks.length;
            },
            running: function () {
                return workers;
            },
            workersList: function () {
                return workersList;
            },
            idle: function() {
                return q.tasks.length + workers === 0;
            },
            pause: function () {
                q.paused = true;
            },
            resume: function () {
                if (q.paused === false) { return; }
                q.paused = false;
                var resumeCount = Math.min(q.concurrency, q.tasks.length);
                // Need to call q.process once per concurrent
                // worker to preserve full concurrency after pause
                for (var w = 1; w <= resumeCount; w++) {
                    async.setImmediate(q.process);
                }
            }
        };
        return q;
    }

    async.queue = function (worker, concurrency) {
        var q = _queue(function (items, cb) {
            worker(items[0], cb);
        }, concurrency, 1);

        return q;
    };

    async.priorityQueue = function (worker, concurrency) {

        function _compareTasks(a, b){
            return a.priority - b.priority;
        }

        function _binarySearch(sequence, item, compare) {
            var beg = -1,
                end = sequence.length - 1;
            while (beg < end) {
                var mid = beg + ((end - beg + 1) >>> 1);
                if (compare(item, sequence[mid]) >= 0) {
                    beg = mid;
                } else {
                    end = mid - 1;
                }
            }
            return beg;
        }

        function _insert(q, data, priority, callback) {
            if (callback != null && typeof callback !== "function") {
                throw new Error("task callback must be a function");
            }
            q.started = true;
            if (!_isArray(data)) {
                data = [data];
            }
            if(data.length === 0) {
                // call drain immediately if there are no tasks
                return async.setImmediate(function() {
                    q.drain();
                });
            }
            _arrayEach(data, function(task) {
                var item = {
                    data: task,
                    priority: priority,
                    callback: typeof callback === 'function' ? callback : noop
                };

                q.tasks.splice(_binarySearch(q.tasks, item, _compareTasks) + 1, 0, item);

                if (q.tasks.length === q.concurrency) {
                    q.saturated();
                }
                async.setImmediate(q.process);
            });
        }

        // Start with a normal queue
        var q = async.queue(worker, concurrency);

        // Override push to accept second parameter representing priority
        q.push = function (data, priority, callback) {
            _insert(q, data, priority, callback);
        };

        // Remove unshift function
        delete q.unshift;

        return q;
    };

    async.cargo = function (worker, payload) {
        return _queue(worker, 1, payload);
    };

    function _console_fn(name) {
        return _restParam(function (fn, args) {
            fn.apply(null, args.concat([_restParam(function (err, args) {
                if (typeof console === 'object') {
                    if (err) {
                        if (console.error) {
                            console.error(err);
                        }
                    }
                    else if (console[name]) {
                        _arrayEach(args, function (x) {
                            console[name](x);
                        });
                    }
                }
            })]));
        });
    }
    async.log = _console_fn('log');
    async.dir = _console_fn('dir');
    /*async.info = _console_fn('info');
    async.warn = _console_fn('warn');
    async.error = _console_fn('error');*/

    async.memoize = function (fn, hasher) {
        var memo = {};
        var queues = {};
        var has = Object.prototype.hasOwnProperty;
        hasher = hasher || identity;
        var memoized = _restParam(function memoized(args) {
            var callback = args.pop();
            var key = hasher.apply(null, args);
            if (has.call(memo, key)) {
                async.setImmediate(function () {
                    callback.apply(null, memo[key]);
                });
            }
            else if (has.call(queues, key)) {
                queues[key].push(callback);
            }
            else {
                queues[key] = [callback];
                fn.apply(null, args.concat([_restParam(function (args) {
                    memo[key] = args;
                    var q = queues[key];
                    delete queues[key];
                    for (var i = 0, l = q.length; i < l; i++) {
                        q[i].apply(null, args);
                    }
                })]));
            }
        });
        memoized.memo = memo;
        memoized.unmemoized = fn;
        return memoized;
    };

    async.unmemoize = function (fn) {
        return function () {
            return (fn.unmemoized || fn).apply(null, arguments);
        };
    };

    function _times(mapper) {
        return function (count, iterator, callback) {
            mapper(_range(count), iterator, callback);
        };
    }

    async.times = _times(async.map);
    async.timesSeries = _times(async.mapSeries);
    async.timesLimit = function (count, limit, iterator, callback) {
        return async.mapLimit(_range(count), limit, iterator, callback);
    };

    async.seq = function (/* functions... */) {
        var fns = arguments;
        return _restParam(function (args) {
            var that = this;

            var callback = args[args.length - 1];
            if (typeof callback == 'function') {
                args.pop();
            } else {
                callback = noop;
            }

            async.reduce(fns, args, function (newargs, fn, cb) {
                fn.apply(that, newargs.concat([_restParam(function (err, nextargs) {
                    cb(err, nextargs);
                })]));
            },
            function (err, results) {
                callback.apply(that, [err].concat(results));
            });
        });
    };

    async.compose = function (/* functions... */) {
        return async.seq.apply(null, Array.prototype.reverse.call(arguments));
    };


    function _applyEach(eachfn) {
        return _restParam(function(fns, args) {
            var go = _restParam(function(args) {
                var that = this;
                var callback = args.pop();
                return eachfn(fns, function (fn, _, cb) {
                    fn.apply(that, args.concat([cb]));
                },
                callback);
            });
            if (args.length) {
                return go.apply(this, args);
            }
            else {
                return go;
            }
        });
    }

    async.applyEach = _applyEach(async.eachOf);
    async.applyEachSeries = _applyEach(async.eachOfSeries);


    async.forever = function (fn, callback) {
        var done = only_once(callback || noop);
        var task = ensureAsync(fn);
        function next(err) {
            if (err) {
                return done(err);
            }
            task(next);
        }
        next();
    };

    function ensureAsync(fn) {
        return _restParam(function (args) {
            var callback = args.pop();
            args.push(function () {
                var innerArgs = arguments;
                if (sync) {
                    async.setImmediate(function () {
                        callback.apply(null, innerArgs);
                    });
                } else {
                    callback.apply(null, innerArgs);
                }
            });
            var sync = true;
            fn.apply(this, args);
            sync = false;
        });
    }

    async.ensureAsync = ensureAsync;

    async.constant = _restParam(function(values) {
        var args = [null].concat(values);
        return function (callback) {
            return callback.apply(this, args);
        };
    });

    async.wrapSync =
    async.asyncify = function asyncify(func) {
        return _restParam(function (args) {
            var callback = args.pop();
            var result;
            try {
                result = func.apply(this, args);
            } catch (e) {
                return callback(e);
            }
            // if result is Promise object
            if (_isObject(result) && typeof result.then === "function") {
                result.then(function(value) {
                    callback(null, value);
                })["catch"](function(err) {
                    callback(err.message ? err : new Error(err));
                });
            } else {
                callback(null, result);
            }
        });
    };

    // Node.js
    if (typeof module === 'object' && module.exports) {
        module.exports = async;
    }
    // AMD / RequireJS
    else if (typeof define === 'function' && define.amd) {
        define([], function () {
            return async;
        });
    }
    // included directly via <script> tag
    else {
        root.async = async;
    }

}());

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"_process":32}],"buffer":[function(require,module,exports){
(function (global){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/* eslint-disable no-proto */

'use strict'

var base64 = require('base64-js')
var ieee754 = require('ieee754')
var isArray = require('isarray')

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Due to various browser bugs, sometimes the Object implementation will be used even
 * when the browser supports typed arrays.
 *
 * Note:
 *
 *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,
 *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *     incorrect length in some situations.

 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they
 * get the Object implementation, which is slower but behaves correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined
  ? global.TYPED_ARRAY_SUPPORT
  : typedArraySupport()

/*
 * Export kMaxLength after typed array support is determined.
 */
exports.kMaxLength = kMaxLength()

function typedArraySupport () {
  try {
    var arr = new Uint8Array(1)
    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}
    return arr.foo() === 42 && // typed array instances can be augmented
        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`
        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`
  } catch (e) {
    return false
  }
}

function kMaxLength () {
  return Buffer.TYPED_ARRAY_SUPPORT
    ? 0x7fffffff
    : 0x3fffffff
}

function createBuffer (that, length) {
  if (kMaxLength() < length) {
    throw new RangeError('Invalid typed array length')
  }
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = new Uint8Array(length)
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    if (that === null) {
      that = new Buffer(length)
    }
    that.length = length
  }

  return that
}

/**
 * The Buffer constructor returns instances of `Uint8Array` that have their
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it
 * returns a single octet.
 *
 * The `Uint8Array` prototype remains unmodified.
 */

function Buffer (arg, encodingOrOffset, length) {
  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {
    return new Buffer(arg, encodingOrOffset, length)
  }

  // Common case.
  if (typeof arg === 'number') {
    if (typeof encodingOrOffset === 'string') {
      throw new Error(
        'If encoding is specified then the first argument must be a string'
      )
    }
    return allocUnsafe(this, arg)
  }
  return from(this, arg, encodingOrOffset, length)
}

Buffer.poolSize = 8192 // not used by this implementation

// TODO: Legacy, not needed anymore. Remove in next major version.
Buffer._augment = function (arr) {
  arr.__proto__ = Buffer.prototype
  return arr
}

function from (that, value, encodingOrOffset, length) {
  if (typeof value === 'number') {
    throw new TypeError('"value" argument must not be a number')
  }

  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {
    return fromArrayBuffer(that, value, encodingOrOffset, length)
  }

  if (typeof value === 'string') {
    return fromString(that, value, encodingOrOffset)
  }

  return fromObject(that, value)
}

/**
 * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
 * if value is a number.
 * Buffer.from(str[, encoding])
 * Buffer.from(array)
 * Buffer.from(buffer)
 * Buffer.from(arrayBuffer[, byteOffset[, length]])
 **/
Buffer.from = function (value, encodingOrOffset, length) {
  return from(null, value, encodingOrOffset, length)
}

if (Buffer.TYPED_ARRAY_SUPPORT) {
  Buffer.prototype.__proto__ = Uint8Array.prototype
  Buffer.__proto__ = Uint8Array
  if (typeof Symbol !== 'undefined' && Symbol.species &&
      Buffer[Symbol.species] === Buffer) {
    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97
    Object.defineProperty(Buffer, Symbol.species, {
      value: null,
      configurable: true
    })
  }
}

function assertSize (size) {
  if (typeof size !== 'number') {
    throw new TypeError('"size" argument must be a number')
  } else if (size < 0) {
    throw new RangeError('"size" argument must not be negative')
  }
}

function alloc (that, size, fill, encoding) {
  assertSize(size)
  if (size <= 0) {
    return createBuffer(that, size)
  }
  if (fill !== undefined) {
    // Only pay attention to encoding if it's a string. This
    // prevents accidentally sending in a number that would
    // be interpretted as a start offset.
    return typeof encoding === 'string'
      ? createBuffer(that, size).fill(fill, encoding)
      : createBuffer(that, size).fill(fill)
  }
  return createBuffer(that, size)
}

/**
 * Creates a new filled Buffer instance.
 * alloc(size[, fill[, encoding]])
 **/
Buffer.alloc = function (size, fill, encoding) {
  return alloc(null, size, fill, encoding)
}

function allocUnsafe (that, size) {
  assertSize(size)
  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) {
    for (var i = 0; i < size; ++i) {
      that[i] = 0
    }
  }
  return that
}

/**
 * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.
 * */
Buffer.allocUnsafe = function (size) {
  return allocUnsafe(null, size)
}
/**
 * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.
 */
Buffer.allocUnsafeSlow = function (size) {
  return allocUnsafe(null, size)
}

function fromString (that, string, encoding) {
  if (typeof encoding !== 'string' || encoding === '') {
    encoding = 'utf8'
  }

  if (!Buffer.isEncoding(encoding)) {
    throw new TypeError('"encoding" must be a valid string encoding')
  }

  var length = byteLength(string, encoding) | 0
  that = createBuffer(that, length)

  var actual = that.write(string, encoding)

  if (actual !== length) {
    // Writing a hex string, for example, that contains invalid characters will
    // cause everything after the first invalid character to be ignored. (e.g.
    // 'abxxcd' will be treated as 'ab')
    that = that.slice(0, actual)
  }

  return that
}

function fromArrayLike (that, array) {
  var length = array.length < 0 ? 0 : checked(array.length) | 0
  that = createBuffer(that, length)
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

function fromArrayBuffer (that, array, byteOffset, length) {
  array.byteLength // this throws if `array` is not a valid ArrayBuffer

  if (byteOffset < 0 || array.byteLength < byteOffset) {
    throw new RangeError('\'offset\' is out of bounds')
  }

  if (array.byteLength < byteOffset + (length || 0)) {
    throw new RangeError('\'length\' is out of bounds')
  }

  if (byteOffset === undefined && length === undefined) {
    array = new Uint8Array(array)
  } else if (length === undefined) {
    array = new Uint8Array(array, byteOffset)
  } else {
    array = new Uint8Array(array, byteOffset, length)
  }

  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = array
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    that = fromArrayLike(that, array)
  }
  return that
}

function fromObject (that, obj) {
  if (Buffer.isBuffer(obj)) {
    var len = checked(obj.length) | 0
    that = createBuffer(that, len)

    if (that.length === 0) {
      return that
    }

    obj.copy(that, 0, 0, len)
    return that
  }

  if (obj) {
    if ((typeof ArrayBuffer !== 'undefined' &&
        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {
      if (typeof obj.length !== 'number' || isnan(obj.length)) {
        return createBuffer(that, 0)
      }
      return fromArrayLike(that, obj)
    }

    if (obj.type === 'Buffer' && isArray(obj.data)) {
      return fromArrayLike(that, obj.data)
    }
  }

  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')
}

function checked (length) {
  // Note: cannot use `length < kMaxLength()` here because that fails when
  // length is NaN (which is otherwise coerced to zero.)
  if (length >= kMaxLength()) {
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
                         'size: 0x' + kMaxLength().toString(16) + ' bytes')
  }
  return length | 0
}

function SlowBuffer (length) {
  if (+length != length) { // eslint-disable-line eqeqeq
    length = 0
  }
  return Buffer.alloc(+length)
}

Buffer.isBuffer = function isBuffer (b) {
  return !!(b != null && b._isBuffer)
}

Buffer.compare = function compare (a, b) {
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {
    throw new TypeError('Arguments must be Buffers')
  }

  if (a === b) return 0

  var x = a.length
  var y = b.length

  for (var i = 0, len = Math.min(x, y); i < len; ++i) {
    if (a[i] !== b[i]) {
      x = a[i]
      y = b[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

Buffer.isEncoding = function isEncoding (encoding) {
  switch (String(encoding).toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'latin1':
    case 'binary':
    case 'base64':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      return true
    default:
      return false
  }
}

Buffer.concat = function concat (list, length) {
  if (!isArray(list)) {
    throw new TypeError('"list" argument must be an Array of Buffers')
  }

  if (list.length === 0) {
    return Buffer.alloc(0)
  }

  var i
  if (length === undefined) {
    length = 0
    for (i = 0; i < list.length; ++i) {
      length += list[i].length
    }
  }

  var buffer = Buffer.allocUnsafe(length)
  var pos = 0
  for (i = 0; i < list.length; ++i) {
    var buf = list[i]
    if (!Buffer.isBuffer(buf)) {
      throw new TypeError('"list" argument must be an Array of Buffers')
    }
    buf.copy(buffer, pos)
    pos += buf.length
  }
  return buffer
}

function byteLength (string, encoding) {
  if (Buffer.isBuffer(string)) {
    return string.length
  }
  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&
      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {
    return string.byteLength
  }
  if (typeof string !== 'string') {
    string = '' + string
  }

  var len = string.length
  if (len === 0) return 0

  // Use a for loop to avoid recursion
  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'ascii':
      case 'latin1':
      case 'binary':
        return len
      case 'utf8':
      case 'utf-8':
      case undefined:
        return utf8ToBytes(string).length
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return len * 2
      case 'hex':
        return len >>> 1
      case 'base64':
        return base64ToBytes(string).length
      default:
        if (loweredCase) return utf8ToBytes(string).length // assume utf8
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}
Buffer.byteLength = byteLength

function slowToString (encoding, start, end) {
  var loweredCase = false

  // No need to verify that "this.length <= MAX_UINT32" since it's a read-only
  // property of a typed array.

  // This behaves neither like String nor Uint8Array in that we set start/end
  // to their upper/lower bounds if the value passed is out of range.
  // undefined is handled specially as per ECMA-262 6th Edition,
  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.
  if (start === undefined || start < 0) {
    start = 0
  }
  // Return early if start > this.length. Done here to prevent potential uint32
  // coercion fail below.
  if (start > this.length) {
    return ''
  }

  if (end === undefined || end > this.length) {
    end = this.length
  }

  if (end <= 0) {
    return ''
  }

  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.
  end >>>= 0
  start >>>= 0

  if (end <= start) {
    return ''
  }

  if (!encoding) encoding = 'utf8'

  while (true) {
    switch (encoding) {
      case 'hex':
        return hexSlice(this, start, end)

      case 'utf8':
      case 'utf-8':
        return utf8Slice(this, start, end)

      case 'ascii':
        return asciiSlice(this, start, end)

      case 'latin1':
      case 'binary':
        return latin1Slice(this, start, end)

      case 'base64':
        return base64Slice(this, start, end)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return utf16leSlice(this, start, end)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = (encoding + '').toLowerCase()
        loweredCase = true
    }
  }
}

// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect
// Buffer instances.
Buffer.prototype._isBuffer = true

function swap (b, n, m) {
  var i = b[n]
  b[n] = b[m]
  b[m] = i
}

Buffer.prototype.swap16 = function swap16 () {
  var len = this.length
  if (len % 2 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 16-bits')
  }
  for (var i = 0; i < len; i += 2) {
    swap(this, i, i + 1)
  }
  return this
}

Buffer.prototype.swap32 = function swap32 () {
  var len = this.length
  if (len % 4 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 32-bits')
  }
  for (var i = 0; i < len; i += 4) {
    swap(this, i, i + 3)
    swap(this, i + 1, i + 2)
  }
  return this
}

Buffer.prototype.swap64 = function swap64 () {
  var len = this.length
  if (len % 8 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 64-bits')
  }
  for (var i = 0; i < len; i += 8) {
    swap(this, i, i + 7)
    swap(this, i + 1, i + 6)
    swap(this, i + 2, i + 5)
    swap(this, i + 3, i + 4)
  }
  return this
}

Buffer.prototype.toString = function toString () {
  var length = this.length | 0
  if (length === 0) return ''
  if (arguments.length === 0) return utf8Slice(this, 0, length)
  return slowToString.apply(this, arguments)
}

Buffer.prototype.equals = function equals (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  if (this === b) return true
  return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function inspect () {
  var str = ''
  var max = exports.INSPECT_MAX_BYTES
  if (this.length > 0) {
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
    if (this.length > max) str += ' ... '
  }
  return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {
  if (!Buffer.isBuffer(target)) {
    throw new TypeError('Argument must be a Buffer')
  }

  if (start === undefined) {
    start = 0
  }
  if (end === undefined) {
    end = target ? target.length : 0
  }
  if (thisStart === undefined) {
    thisStart = 0
  }
  if (thisEnd === undefined) {
    thisEnd = this.length
  }

  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
    throw new RangeError('out of range index')
  }

  if (thisStart >= thisEnd && start >= end) {
    return 0
  }
  if (thisStart >= thisEnd) {
    return -1
  }
  if (start >= end) {
    return 1
  }

  start >>>= 0
  end >>>= 0
  thisStart >>>= 0
  thisEnd >>>= 0

  if (this === target) return 0

  var x = thisEnd - thisStart
  var y = end - start
  var len = Math.min(x, y)

  var thisCopy = this.slice(thisStart, thisEnd)
  var targetCopy = target.slice(start, end)

  for (var i = 0; i < len; ++i) {
    if (thisCopy[i] !== targetCopy[i]) {
      x = thisCopy[i]
      y = targetCopy[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,
// OR the last index of `val` in `buffer` at offset <= `byteOffset`.
//
// Arguments:
// - buffer - a Buffer to search
// - val - a string, Buffer, or number
// - byteOffset - an index into `buffer`; will be clamped to an int32
// - encoding - an optional encoding, relevant is val is a string
// - dir - true for indexOf, false for lastIndexOf
function bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {
  // Empty buffer means no match
  if (buffer.length === 0) return -1

  // Normalize byteOffset
  if (typeof byteOffset === 'string') {
    encoding = byteOffset
    byteOffset = 0
  } else if (byteOffset > 0x7fffffff) {
    byteOffset = 0x7fffffff
  } else if (byteOffset < -0x80000000) {
    byteOffset = -0x80000000
  }
  byteOffset = +byteOffset  // Coerce to Number.
  if (isNaN(byteOffset)) {
    // byteOffset: it it's undefined, null, NaN, "foo", etc, search whole buffer
    byteOffset = dir ? 0 : (buffer.length - 1)
  }

  // Normalize byteOffset: negative offsets start from the end of the buffer
  if (byteOffset < 0) byteOffset = buffer.length + byteOffset
  if (byteOffset >= buffer.length) {
    if (dir) return -1
    else byteOffset = buffer.length - 1
  } else if (byteOffset < 0) {
    if (dir) byteOffset = 0
    else return -1
  }

  // Normalize val
  if (typeof val === 'string') {
    val = Buffer.from(val, encoding)
  }

  // Finally, search either indexOf (if dir is true) or lastIndexOf
  if (Buffer.isBuffer(val)) {
    // Special case: looking for empty string/buffer always fails
    if (val.length === 0) {
      return -1
    }
    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)
  } else if (typeof val === 'number') {
    val = val & 0xFF // Search for a byte value [0-255]
    if (Buffer.TYPED_ARRAY_SUPPORT &&
        typeof Uint8Array.prototype.indexOf === 'function') {
      if (dir) {
        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)
      } else {
        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)
      }
    }
    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)
  }

  throw new TypeError('val must be string, number or Buffer')
}

function arrayIndexOf (arr, val, byteOffset, encoding, dir) {
  var indexSize = 1
  var arrLength = arr.length
  var valLength = val.length

  if (encoding !== undefined) {
    encoding = String(encoding).toLowerCase()
    if (encoding === 'ucs2' || encoding === 'ucs-2' ||
        encoding === 'utf16le' || encoding === 'utf-16le') {
      if (arr.length < 2 || val.length < 2) {
        return -1
      }
      indexSize = 2
      arrLength /= 2
      valLength /= 2
      byteOffset /= 2
    }
  }

  function read (buf, i) {
    if (indexSize === 1) {
      return buf[i]
    } else {
      return buf.readUInt16BE(i * indexSize)
    }
  }

  var i
  if (dir) {
    var foundIndex = -1
    for (i = byteOffset; i < arrLength; i++) {
      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {
        if (foundIndex === -1) foundIndex = i
        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize
      } else {
        if (foundIndex !== -1) i -= i - foundIndex
        foundIndex = -1
      }
    }
  } else {
    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength
    for (i = byteOffset; i >= 0; i--) {
      var found = true
      for (var j = 0; j < valLength; j++) {
        if (read(arr, i + j) !== read(val, j)) {
          found = false
          break
        }
      }
      if (found) return i
    }
  }

  return -1
}

Buffer.prototype.includes = function includes (val, byteOffset, encoding) {
  return this.indexOf(val, byteOffset, encoding) !== -1
}

Buffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)
}

Buffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)
}

function hexWrite (buf, string, offset, length) {
  offset = Number(offset) || 0
  var remaining = buf.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }

  // must be an even number of digits
  var strLen = string.length
  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')

  if (length > strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i < length; ++i) {
    var parsed = parseInt(string.substr(i * 2, 2), 16)
    if (isNaN(parsed)) return i
    buf[offset + i] = parsed
  }
  return i
}

function utf8Write (buf, string, offset, length) {
  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
}

function asciiWrite (buf, string, offset, length) {
  return blitBuffer(asciiToBytes(string), buf, offset, length)
}

function latin1Write (buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
  return blitBuffer(base64ToBytes(string), buf, offset, length)
}

function ucs2Write (buf, string, offset, length) {
  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)
}

Buffer.prototype.write = function write (string, offset, length, encoding) {
  // Buffer#write(string)
  if (offset === undefined) {
    encoding = 'utf8'
    length = this.length
    offset = 0
  // Buffer#write(string, encoding)
  } else if (length === undefined && typeof offset === 'string') {
    encoding = offset
    length = this.length
    offset = 0
  // Buffer#write(string, offset[, length][, encoding])
  } else if (isFinite(offset)) {
    offset = offset | 0
    if (isFinite(length)) {
      length = length | 0
      if (encoding === undefined) encoding = 'utf8'
    } else {
      encoding = length
      length = undefined
    }
  // legacy write(string, encoding, offset, length) - remove in v0.13
  } else {
    throw new Error(
      'Buffer.write(string, encoding, offset[, length]) is no longer supported'
    )
  }

  var remaining = this.length - offset
  if (length === undefined || length > remaining) length = remaining

  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {
    throw new RangeError('Attempt to write outside buffer bounds')
  }

  if (!encoding) encoding = 'utf8'

  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'hex':
        return hexWrite(this, string, offset, length)

      case 'utf8':
      case 'utf-8':
        return utf8Write(this, string, offset, length)

      case 'ascii':
        return asciiWrite(this, string, offset, length)

      case 'latin1':
      case 'binary':
        return latin1Write(this, string, offset, length)

      case 'base64':
        // Warning: maxLength not taken into account in base64Write
        return base64Write(this, string, offset, length)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return ucs2Write(this, string, offset, length)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.toJSON = function toJSON () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 && end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  end = Math.min(buf.length, end)
  var res = []

  var i = start
  while (i < end) {
    var firstByte = buf[i]
    var codePoint = null
    var bytesPerSequence = (firstByte > 0xEF) ? 4
      : (firstByte > 0xDF) ? 3
      : (firstByte > 0xBF) ? 2
      : 1

    if (i + bytesPerSequence <= end) {
      var secondByte, thirdByte, fourthByte, tempCodePoint

      switch (bytesPerSequence) {
        case 1:
          if (firstByte < 0x80) {
            codePoint = firstByte
          }
          break
        case 2:
          secondByte = buf[i + 1]
          if ((secondByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)
            if (tempCodePoint > 0x7F) {
              codePoint = tempCodePoint
            }
          }
          break
        case 3:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)
            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {
              codePoint = tempCodePoint
            }
          }
          break
        case 4:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          fourthByte = buf[i + 3]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)
            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {
              codePoint = tempCodePoint
            }
          }
      }
    }

    if (codePoint === null) {
      // we did not generate a valid codePoint so insert a
      // replacement char (U+FFFD) and advance only 1 byte
      codePoint = 0xFFFD
      bytesPerSequence = 1
    } else if (codePoint > 0xFFFF) {
      // encode to utf16 (surrogate pair dance)
      codePoint -= 0x10000
      res.push(codePoint >>> 10 & 0x3FF | 0xD800)
      codePoint = 0xDC00 | codePoint & 0x3FF
    }

    res.push(codePoint)
    i += bytesPerSequence
  }

  return decodeCodePointsArray(res)
}

// Based on http://stackoverflow.com/a/22747272/680742, the browser with
// the lowest limit is Chrome, with 0x10000 args.
// We go 1 magnitude less, for safety
var MAX_ARGUMENTS_LENGTH = 0x1000

function decodeCodePointsArray (codePoints) {
  var len = codePoints.length
  if (len <= MAX_ARGUMENTS_LENGTH) {
    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()
  }

  // Decode in chunks to avoid "call stack size exceeded".
  var res = ''
  var i = 0
  while (i < len) {
    res += String.fromCharCode.apply(
      String,
      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
    )
  }
  return res
}

function asciiSlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i] & 0x7F)
  }
  return ret
}

function latin1Slice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i])
  }
  return ret
}

function hexSlice (buf, start, end) {
  var len = buf.length

  if (!start || start < 0) start = 0
  if (!end || end < 0 || end > len) end = len

  var out = ''
  for (var i = start; i < end; ++i) {
    out += toHex(buf[i])
  }
  return out
}

function utf16leSlice (buf, start, end) {
  var bytes = buf.slice(start, end)
  var res = ''
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)
  }
  return res
}

Buffer.prototype.slice = function slice (start, end) {
  var len = this.length
  start = ~~start
  end = end === undefined ? len : ~~end

  if (start < 0) {
    start += len
    if (start < 0) start = 0
  } else if (start > len) {
    start = len
  }

  if (end < 0) {
    end += len
    if (end < 0) end = 0
  } else if (end > len) {
    end = len
  }

  if (end < start) end = start

  var newBuf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    newBuf = this.subarray(start, end)
    newBuf.__proto__ = Buffer.prototype
  } else {
    var sliceLen = end - start
    newBuf = new Buffer(sliceLen, undefined)
    for (var i = 0; i < sliceLen; ++i) {
      newBuf[i] = this[i + start]
    }
  }

  return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')
  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }

  return val
}

Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    checkOffset(offset, byteLength, this.length)
  }

  var val = this[offset + --byteLength]
  var mul = 1
  while (byteLength > 0 && (mul *= 0x100)) {
    val += this[offset + --byteLength] * mul
  }

  return val
}

Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return ((this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16)) +
      (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] * 0x1000000) +
    ((this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    this[offset + 3])
}

Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i > 0 && (mul *= 0x100)) {
    val += this[offset + --i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  if (!(this[offset] & 0x80)) return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset + 1] | (this[offset] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset]) |
    (this[offset + 1] << 8) |
    (this[offset + 2] << 16) |
    (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] << 24) |
    (this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    (this[offset + 3])
}

Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
  if (!Buffer.isBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance')
  if (value > max || value < min) throw new RangeError('"value" argument is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
}

Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var mul = 1
  var i = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var i = byteLength - 1
  var mul = 1
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  this[offset] = (value & 0xff)
  return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {
    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>
      (littleEndian ? i : 1 - i) * 8
  }
}

Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffffffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {
    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff
  }
}

Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = (value >>> 24)
    this[offset + 2] = (value >>> 16)
    this[offset + 1] = (value >>> 8)
    this[offset] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = 0
  var mul = 1
  var sub = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = byteLength - 1
  var mul = 1
  var sub = 0
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  if (value < 0) value = 0xff + value + 1
  this[offset] = (value & 0xff)
  return offset + 1
}

Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
    this[offset + 2] = (value >>> 16)
    this[offset + 3] = (value >>> 24)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value < 0) value = 0xffffffff + value + 1
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
  if (offset < 0) throw new RangeError('Index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
  }
  ieee754.write(buf, value, offset, littleEndian, 23, 4)
  return offset + 4
}

Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
  }
  ieee754.write(buf, value, offset, littleEndian, 52, 8)
  return offset + 8
}

Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function copy (target, targetStart, start, end) {
  if (!start) start = 0
  if (!end && end !== 0) end = this.length
  if (targetStart >= target.length) targetStart = target.length
  if (!targetStart) targetStart = 0
  if (end > 0 && end < start) end = start

  // Copy 0 bytes; we're done
  if (end === start) return 0
  if (target.length === 0 || this.length === 0) return 0

  // Fatal error conditions
  if (targetStart < 0) {
    throw new RangeError('targetStart out of bounds')
  }
  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')
  if (end < 0) throw new RangeError('sourceEnd out of bounds')

  // Are we oob?
  if (end > this.length) end = this.length
  if (target.length - targetStart < end - start) {
    end = target.length - targetStart + start
  }

  var len = end - start
  var i

  if (this === target && start < targetStart && targetStart < end) {
    // descending copy from end
    for (i = len - 1; i >= 0; --i) {
      target[i + targetStart] = this[i + start]
    }
  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
    // ascending copy from start
    for (i = 0; i < len; ++i) {
      target[i + targetStart] = this[i + start]
    }
  } else {
    Uint8Array.prototype.set.call(
      target,
      this.subarray(start, start + len),
      targetStart
    )
  }

  return len
}

// Usage:
//    buffer.fill(number[, offset[, end]])
//    buffer.fill(buffer[, offset[, end]])
//    buffer.fill(string[, offset[, end]][, encoding])
Buffer.prototype.fill = function fill (val, start, end, encoding) {
  // Handle string cases:
  if (typeof val === 'string') {
    if (typeof start === 'string') {
      encoding = start
      start = 0
      end = this.length
    } else if (typeof end === 'string') {
      encoding = end
      end = this.length
    }
    if (val.length === 1) {
      var code = val.charCodeAt(0)
      if (code < 256) {
        val = code
      }
    }
    if (encoding !== undefined && typeof encoding !== 'string') {
      throw new TypeError('encoding must be a string')
    }
    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {
      throw new TypeError('Unknown encoding: ' + encoding)
    }
  } else if (typeof val === 'number') {
    val = val & 255
  }

  // Invalid ranges are not set to a default, so can range check early.
  if (start < 0 || this.length < start || this.length < end) {
    throw new RangeError('Out of range index')
  }

  if (end <= start) {
    return this
  }

  start = start >>> 0
  end = end === undefined ? this.length : end >>> 0

  if (!val) val = 0

  var i
  if (typeof val === 'number') {
    for (i = start; i < end; ++i) {
      this[i] = val
    }
  } else {
    var bytes = Buffer.isBuffer(val)
      ? val
      : utf8ToBytes(new Buffer(val, encoding).toString())
    var len = bytes.length
    for (i = 0; i < end - start; ++i) {
      this[i + start] = bytes[i % len]
    }
  }

  return this
}

// HELPER FUNCTIONS
// ================

var INVALID_BASE64_RE = /[^+\/0-9A-Za-z-_]/g

function base64clean (str) {
  // Node strips out invalid characters like \n and \t from the string, base64-js does not
  str = stringtrim(str).replace(INVALID_BASE64_RE, '')
  // Node converts strings with length < 2 to ''
  if (str.length < 2) return ''
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
  while (str.length % 4 !== 0) {
    str = str + '='
  }
  return str
}

function stringtrim (str) {
  if (str.trim) return str.trim()
  return str.replace(/^\s+|\s+$/g, '')
}

function toHex (n) {
  if (n < 16) return '0' + n.toString(16)
  return n.toString(16)
}

function utf8ToBytes (string, units) {
  units = units || Infinity
  var codePoint
  var length = string.length
  var leadSurrogate = null
  var bytes = []

  for (var i = 0; i < length; ++i) {
    codePoint = string.charCodeAt(i)

    // is surrogate component
    if (codePoint > 0xD7FF && codePoint < 0xE000) {
      // last char was a lead
      if (!leadSurrogate) {
        // no lead yet
        if (codePoint > 0xDBFF) {
          // unexpected trail
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        } else if (i + 1 === length) {
          // unpaired lead
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        leadSurrogate = codePoint

        continue
      }

      // 2 leads in a row
      if (codePoint < 0xDC00) {
        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
        leadSurrogate = codePoint
        continue
      }

      // valid surrogate pair
      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000
    } else if (leadSurrogate) {
      // valid bmp char, but last char was a lead
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
    }

    leadSurrogate = null

    // encode utf8
    if (codePoint < 0x80) {
      if ((units -= 1) < 0) break
      bytes.push(codePoint)
    } else if (codePoint < 0x800) {
      if ((units -= 2) < 0) break
      bytes.push(
        codePoint >> 0x6 | 0xC0,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x10000) {
      if ((units -= 3) < 0) break
      bytes.push(
        codePoint >> 0xC | 0xE0,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x110000) {
      if ((units -= 4) < 0) break
      bytes.push(
        codePoint >> 0x12 | 0xF0,
        codePoint >> 0xC & 0x3F | 0x80,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    // Node's code seems to be doing this and not & 0x7F..
    byteArray.push(str.charCodeAt(i) & 0xFF)
  }
  return byteArray
}

function utf16leToBytes (str, units) {
  var c, hi, lo
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    if ((units -= 2) < 0) break

    c = str.charCodeAt(i)
    hi = c >> 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length) {
  for (var i = 0; i < length; ++i) {
    if ((i + offset >= dst.length) || (i >= src.length)) break
    dst[i + offset] = src[i]
  }
  return i
}

function isnan (val) {
  return val !== val // eslint-disable-line no-self-compare
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"base64-js":25,"ieee754":26,"isarray":27}],1:[function(require,module,exports){

},{}],2:[function(require,module,exports){
arguments[4][1][0].apply(exports,arguments)
},{"dup":1}],3:[function(require,module,exports){
if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    var TempCtor = function () {}
    TempCtor.prototype = superCtor.prototype
    ctor.prototype = new TempCtor()
    ctor.prototype.constructor = ctor
  }
}

},{}],4:[function(require,module,exports){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */

// The _isBuffer check is for Safari 5-7 support, because it's missing
// Object.prototype.constructor. Remove this eventually
module.exports = function (obj) {
  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)
}

function isBuffer (obj) {
  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)
}

// For Node v0.10 support. Remove this eventually.
function isSlowBuffer (obj) {
  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))
}

},{}],5:[function(require,module,exports){
(function (process){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// resolves . and .. elements in a path array with directory names there
// must be no slashes, empty elements, or device names (c:\) in the array
// (so also no leading and trailing slashes - it does not distinguish
// relative and absolute paths)
function normalizeArray(parts, allowAboveRoot) {
  // if the path tries to go above the root, `up` ends up > 0
  var up = 0;
  for (var i = parts.length - 1; i >= 0; i--) {
    var last = parts[i];
    if (last === '.') {
      parts.splice(i, 1);
    } else if (last === '..') {
      parts.splice(i, 1);
      up++;
    } else if (up) {
      parts.splice(i, 1);
      up--;
    }
  }

  // if the path is allowed to go above the root, restore leading ..s
  if (allowAboveRoot) {
    for (; up--; up) {
      parts.unshift('..');
    }
  }

  return parts;
}

// Split a filename into [root, dir, basename, ext], unix version
// 'root' is just a slash, or nothing.
var splitPathRe =
    /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;
var splitPath = function(filename) {
  return splitPathRe.exec(filename).slice(1);
};

// path.resolve([from ...], to)
// posix version
exports.resolve = function() {
  var resolvedPath = '',
      resolvedAbsolute = false;

  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {
    var path = (i >= 0) ? arguments[i] : process.cwd();

    // Skip empty and invalid entries
    if (typeof path !== 'string') {
      throw new TypeError('Arguments to path.resolve must be strings');
    } else if (!path) {
      continue;
    }

    resolvedPath = path + '/' + resolvedPath;
    resolvedAbsolute = path.charAt(0) === '/';
  }

  // At this point the path should be resolved to a full absolute path, but
  // handle relative paths to be safe (might happen when process.cwd() fails)

  // Normalize the path
  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {
    return !!p;
  }), !resolvedAbsolute).join('/');

  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';
};

// path.normalize(path)
// posix version
exports.normalize = function(path) {
  var isAbsolute = exports.isAbsolute(path),
      trailingSlash = substr(path, -1) === '/';

  // Normalize the path
  path = normalizeArray(filter(path.split('/'), function(p) {
    return !!p;
  }), !isAbsolute).join('/');

  if (!path && !isAbsolute) {
    path = '.';
  }
  if (path && trailingSlash) {
    path += '/';
  }

  return (isAbsolute ? '/' : '') + path;
};

// posix version
exports.isAbsolute = function(path) {
  return path.charAt(0) === '/';
};

// posix version
exports.join = function() {
  var paths = Array.prototype.slice.call(arguments, 0);
  return exports.normalize(filter(paths, function(p, index) {
    if (typeof p !== 'string') {
      throw new TypeError('Arguments to path.join must be strings');
    }
    return p;
  }).join('/'));
};


// path.relative(from, to)
// posix version
exports.relative = function(from, to) {
  from = exports.resolve(from).substr(1);
  to = exports.resolve(to).substr(1);

  function trim(arr) {
    var start = 0;
    for (; start < arr.length; start++) {
      if (arr[start] !== '') break;
    }

    var end = arr.length - 1;
    for (; end >= 0; end--) {
      if (arr[end] !== '') break;
    }

    if (start > end) return [];
    return arr.slice(start, end - start + 1);
  }

  var fromParts = trim(from.split('/'));
  var toParts = trim(to.split('/'));

  var length = Math.min(fromParts.length, toParts.length);
  var samePartsLength = length;
  for (var i = 0; i < length; i++) {
    if (fromParts[i] !== toParts[i]) {
      samePartsLength = i;
      break;
    }
  }

  var outputParts = [];
  for (var i = samePartsLength; i < fromParts.length; i++) {
    outputParts.push('..');
  }

  outputParts = outputParts.concat(toParts.slice(samePartsLength));

  return outputParts.join('/');
};

exports.sep = '/';
exports.delimiter = ':';

exports.dirname = function(path) {
  var result = splitPath(path),
      root = result[0],
      dir = result[1];

  if (!root && !dir) {
    // No dirname whatsoever
    return '.';
  }

  if (dir) {
    // It has a dirname, strip trailing slash
    dir = dir.substr(0, dir.length - 1);
  }

  return root + dir;
};


exports.basename = function(path, ext) {
  var f = splitPath(path)[2];
  // TODO: make this comparison case-insensitive on windows?
  if (ext && f.substr(-1 * ext.length) === ext) {
    f = f.substr(0, f.length - ext.length);
  }
  return f;
};


exports.extname = function(path) {
  return splitPath(path)[3];
};

function filter (xs, f) {
    if (xs.filter) return xs.filter(f);
    var res = [];
    for (var i = 0; i < xs.length; i++) {
        if (f(xs[i], i, xs)) res.push(xs[i]);
    }
    return res;
}

// String.prototype.substr - negative index don't work in IE8
var substr = 'ab'.substr(-1) === 'b'
    ? function (str, start, len) { return str.substr(start, len) }
    : function (str, start, len) {
        if (start < 0) start = str.length + start;
        return str.substr(start, len);
    }
;

}).call(this,require('_process'))
},{"_process":32}],6:[function(require,module,exports){
module.exports = require('./lib/_stream_duplex.js');

},{"./lib/_stream_duplex.js":7}],7:[function(require,module,exports){
// a duplex stream is just a stream that is both readable and writable.
// Since JS doesn't have multiple prototypal inheritance, this class
// prototypally inherits from Readable, and then parasitically from
// Writable.

'use strict';

/*<replacement>*/

var objectKeys = Object.keys || function (obj) {
  var keys = [];
  for (var key in obj) {
    keys.push(key);
  }return keys;
};
/*</replacement>*/

module.exports = Duplex;

/*<replacement>*/
var processNextTick = require('process-nextick-args');
/*</replacement>*/

/*<replacement>*/
var util = require('core-util-is');
util.inherits = require('inherits');
/*</replacement>*/

var Readable = require('./_stream_readable');
var Writable = require('./_stream_writable');

util.inherits(Duplex, Readable);

var keys = objectKeys(Writable.prototype);
for (var v = 0; v < keys.length; v++) {
  var method = keys[v];
  if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];
}

function Duplex(options) {
  if (!(this instanceof Duplex)) return new Duplex(options);

  Readable.call(this, options);
  Writable.call(this, options);

  if (options && options.readable === false) this.readable = false;

  if (options && options.writable === false) this.writable = false;

  this.allowHalfOpen = true;
  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;

  this.once('end', onend);
}

// the no-half-open enforcer
function onend() {
  // if we allow half-open state, or if the writable side ended,
  // then we're ok.
  if (this.allowHalfOpen || this._writableState.ended) return;

  // no more data can be written.
  // But allow more writes to happen in this tick.
  processNextTick(onEndNT, this);
}

function onEndNT(self) {
  self.end();
}

function forEach(xs, f) {
  for (var i = 0, l = xs.length; i < l; i++) {
    f(xs[i], i);
  }
}
},{"./_stream_readable":9,"./_stream_writable":11,"core-util-is":15,"inherits":3,"process-nextick-args":17}],8:[function(require,module,exports){
// a passthrough stream.
// basically just the most minimal sort of Transform stream.
// Every written chunk gets output as-is.

'use strict';

module.exports = PassThrough;

var Transform = require('./_stream_transform');

/*<replacement>*/
var util = require('core-util-is');
util.inherits = require('inherits');
/*</replacement>*/

util.inherits(PassThrough, Transform);

function PassThrough(options) {
  if (!(this instanceof PassThrough)) return new PassThrough(options);

  Transform.call(this, options);
}

PassThrough.prototype._transform = function (chunk, encoding, cb) {
  cb(null, chunk);
};
},{"./_stream_transform":10,"core-util-is":15,"inherits":3}],9:[function(require,module,exports){
(function (process){
'use strict';

module.exports = Readable;

/*<replacement>*/
var processNextTick = require('process-nextick-args');
/*</replacement>*/

/*<replacement>*/
var isArray = require('isarray');
/*</replacement>*/

/*<replacement>*/
var Duplex;
/*</replacement>*/

Readable.ReadableState = ReadableState;

/*<replacement>*/
var EE = require('events').EventEmitter;

var EElistenerCount = function (emitter, type) {
  return emitter.listeners(type).length;
};
/*</replacement>*/

/*<replacement>*/
var Stream = require('./internal/streams/stream');
/*</replacement>*/

var Buffer = require('buffer').Buffer;
/*<replacement>*/
var bufferShim = require('buffer-shims');
/*</replacement>*/

/*<replacement>*/
var util = require('core-util-is');
util.inherits = require('inherits');
/*</replacement>*/

/*<replacement>*/
var debugUtil = require('util');
var debug = void 0;
if (debugUtil && debugUtil.debuglog) {
  debug = debugUtil.debuglog('stream');
} else {
  debug = function () {};
}
/*</replacement>*/

var BufferList = require('./internal/streams/BufferList');
var StringDecoder;

util.inherits(Readable, Stream);

var kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];

function prependListener(emitter, event, fn) {
  // Sadly this is not cacheable as some libraries bundle their own
  // event emitter implementation with them.
  if (typeof emitter.prependListener === 'function') {
    return emitter.prependListener(event, fn);
  } else {
    // This is a hack to make sure that our error handler is attached before any
    // userland ones.  NEVER DO THIS. This is here only because this code needs
    // to continue to work with older versions of Node.js that do not include
    // the prependListener() method. The goal is to eventually remove this hack.
    if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];
  }
}

function ReadableState(options, stream) {
  Duplex = Duplex || require('./_stream_duplex');

  options = options || {};

  // object stream flag. Used to make read(n) ignore n and to
  // make all the buffer merging and length checks go away
  this.objectMode = !!options.objectMode;

  if (stream instanceof Duplex) this.objectMode = this.objectMode || !!options.readableObjectMode;

  // the point at which it stops calling _read() to fill the buffer
  // Note: 0 is a valid value, means "don't call _read preemptively ever"
  var hwm = options.highWaterMark;
  var defaultHwm = this.objectMode ? 16 : 16 * 1024;
  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;

  // cast to ints.
  this.highWaterMark = ~~this.highWaterMark;

  // A linked list is used to store data chunks instead of an array because the
  // linked list can remove elements from the beginning faster than
  // array.shift()
  this.buffer = new BufferList();
  this.length = 0;
  this.pipes = null;
  this.pipesCount = 0;
  this.flowing = null;
  this.ended = false;
  this.endEmitted = false;
  this.reading = false;

  // a flag to be able to tell if the onwrite cb is called immediately,
  // or on a later tick.  We set this to true at first, because any
  // actions that shouldn't happen until "later" should generally also
  // not happen before the first write call.
  this.sync = true;

  // whenever we return null, then we set a flag to say
  // that we're awaiting a 'readable' event emission.
  this.needReadable = false;
  this.emittedReadable = false;
  this.readableListening = false;
  this.resumeScheduled = false;

  // Crypto is kind of old and crusty.  Historically, its default string
  // encoding is 'binary' so we have to make this configurable.
  // Everything else in the universe uses 'utf8', though.
  this.defaultEncoding = options.defaultEncoding || 'utf8';

  // when piping, we only care about 'readable' events that happen
  // after read()ing all the bytes and not getting any pushback.
  this.ranOut = false;

  // the number of writers that are awaiting a drain event in .pipe()s
  this.awaitDrain = 0;

  // if true, a maybeReadMore has been scheduled
  this.readingMore = false;

  this.decoder = null;
  this.encoding = null;
  if (options.encoding) {
    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;
    this.decoder = new StringDecoder(options.encoding);
    this.encoding = options.encoding;
  }
}

function Readable(options) {
  Duplex = Duplex || require('./_stream_duplex');

  if (!(this instanceof Readable)) return new Readable(options);

  this._readableState = new ReadableState(options, this);

  // legacy
  this.readable = true;

  if (options && typeof options.read === 'function') this._read = options.read;

  Stream.call(this);
}

// Manually shove something into the read() buffer.
// This returns true if the highWaterMark has not been hit yet,
// similar to how Writable.write() returns true if you should
// write() some more.
Readable.prototype.push = function (chunk, encoding) {
  var state = this._readableState;

  if (!state.objectMode && typeof chunk === 'string') {
    encoding = encoding || state.defaultEncoding;
    if (encoding !== state.encoding) {
      chunk = bufferShim.from(chunk, encoding);
      encoding = '';
    }
  }

  return readableAddChunk(this, state, chunk, encoding, false);
};

// Unshift should *always* be something directly out of read()
Readable.prototype.unshift = function (chunk) {
  var state = this._readableState;
  return readableAddChunk(this, state, chunk, '', true);
};

Readable.prototype.isPaused = function () {
  return this._readableState.flowing === false;
};

function readableAddChunk(stream, state, chunk, encoding, addToFront) {
  var er = chunkInvalid(state, chunk);
  if (er) {
    stream.emit('error', er);
  } else if (chunk === null) {
    state.reading = false;
    onEofChunk(stream, state);
  } else if (state.objectMode || chunk && chunk.length > 0) {
    if (state.ended && !addToFront) {
      var e = new Error('stream.push() after EOF');
      stream.emit('error', e);
    } else if (state.endEmitted && addToFront) {
      var _e = new Error('stream.unshift() after end event');
      stream.emit('error', _e);
    } else {
      var skipAdd;
      if (state.decoder && !addToFront && !encoding) {
        chunk = state.decoder.write(chunk);
        skipAdd = !state.objectMode && chunk.length === 0;
      }

      if (!addToFront) state.reading = false;

      // Don't add to the buffer if we've decoded to an empty string chunk and
      // we're not in object mode
      if (!skipAdd) {
        // if we want the data now, just emit it.
        if (state.flowing && state.length === 0 && !state.sync) {
          stream.emit('data', chunk);
          stream.read(0);
        } else {
          // update the buffer info.
          state.length += state.objectMode ? 1 : chunk.length;
          if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);

          if (state.needReadable) emitReadable(stream);
        }
      }

      maybeReadMore(stream, state);
    }
  } else if (!addToFront) {
    state.reading = false;
  }

  return needMoreData(state);
}

// if it's past the high water mark, we can push in some more.
// Also, if we have no data yet, we can stand some
// more bytes.  This is to work around cases where hwm=0,
// such as the repl.  Also, if the push() triggered a
// readable event, and the user called read(largeNumber) such that
// needReadable was set, then we ought to push more, so that another
// 'readable' event will be triggered.
function needMoreData(state) {
  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);
}

// backwards compatibility.
Readable.prototype.setEncoding = function (enc) {
  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;
  this._readableState.decoder = new StringDecoder(enc);
  this._readableState.encoding = enc;
  return this;
};

// Don't raise the hwm > 8MB
var MAX_HWM = 0x800000;
function computeNewHighWaterMark(n) {
  if (n >= MAX_HWM) {
    n = MAX_HWM;
  } else {
    // Get the next highest power of 2 to prevent increasing hwm excessively in
    // tiny amounts
    n--;
    n |= n >>> 1;
    n |= n >>> 2;
    n |= n >>> 4;
    n |= n >>> 8;
    n |= n >>> 16;
    n++;
  }
  return n;
}

// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function howMuchToRead(n, state) {
  if (n <= 0 || state.length === 0 && state.ended) return 0;
  if (state.objectMode) return 1;
  if (n !== n) {
    // Only flow one buffer at a time
    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;
  }
  // If we're asking for more than the current hwm, then raise the hwm.
  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);
  if (n <= state.length) return n;
  // Don't have enough
  if (!state.ended) {
    state.needReadable = true;
    return 0;
  }
  return state.length;
}

// you can override either this method, or the async _read(n) below.
Readable.prototype.read = function (n) {
  debug('read', n);
  n = parseInt(n, 10);
  var state = this._readableState;
  var nOrig = n;

  if (n !== 0) state.emittedReadable = false;

  // if we're doing read(0) to trigger a readable event, but we
  // already have a bunch of data in the buffer, then just trigger
  // the 'readable' event and move on.
  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {
    debug('read: emitReadable', state.length, state.ended);
    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);
    return null;
  }

  n = howMuchToRead(n, state);

  // if we've ended, and we're now clear, then finish it up.
  if (n === 0 && state.ended) {
    if (state.length === 0) endReadable(this);
    return null;
  }

  // All the actual chunk generation logic needs to be
  // *below* the call to _read.  The reason is that in certain
  // synthetic stream cases, such as passthrough streams, _read
  // may be a completely synchronous operation which may change
  // the state of the read buffer, providing enough data when
  // before there was *not* enough.
  //
  // So, the steps are:
  // 1. Figure out what the state of things will be after we do
  // a read from the buffer.
  //
  // 2. If that resulting state will trigger a _read, then call _read.
  // Note that this may be asynchronous, or synchronous.  Yes, it is
  // deeply ugly to write APIs this way, but that still doesn't mean
  // that the Readable class should behave improperly, as streams are
  // designed to be sync/async agnostic.
  // Take note if the _read call is sync or async (ie, if the read call
  // has returned yet), so that we know whether or not it's safe to emit
  // 'readable' etc.
  //
  // 3. Actually pull the requested chunks out of the buffer and return.

  // if we need a readable event, then we need to do some reading.
  var doRead = state.needReadable;
  debug('need readable', doRead);

  // if we currently have less than the highWaterMark, then also read some
  if (state.length === 0 || state.length - n < state.highWaterMark) {
    doRead = true;
    debug('length less than watermark', doRead);
  }

  // however, if we've ended, then there's no point, and if we're already
  // reading, then it's unnecessary.
  if (state.ended || state.reading) {
    doRead = false;
    debug('reading or ended', doRead);
  } else if (doRead) {
    debug('do read');
    state.reading = true;
    state.sync = true;
    // if the length is currently zero, then we *need* a readable event.
    if (state.length === 0) state.needReadable = true;
    // call internal read method
    this._read(state.highWaterMark);
    state.sync = false;
    // If _read pushed data synchronously, then `reading` will be false,
    // and we need to re-evaluate how much data we can return to the user.
    if (!state.reading) n = howMuchToRead(nOrig, state);
  }

  var ret;
  if (n > 0) ret = fromList(n, state);else ret = null;

  if (ret === null) {
    state.needReadable = true;
    n = 0;
  } else {
    state.length -= n;
  }

  if (state.length === 0) {
    // If we have nothing in the buffer, then we want to know
    // as soon as we *do* get something into the buffer.
    if (!state.ended) state.needReadable = true;

    // If we tried to read() past the EOF, then emit end on the next tick.
    if (nOrig !== n && state.ended) endReadable(this);
  }

  if (ret !== null) this.emit('data', ret);

  return ret;
};

function chunkInvalid(state, chunk) {
  var er = null;
  if (!Buffer.isBuffer(chunk) && typeof chunk !== 'string' && chunk !== null && chunk !== undefined && !state.objectMode) {
    er = new TypeError('Invalid non-string/buffer chunk');
  }
  return er;
}

function onEofChunk(stream, state) {
  if (state.ended) return;
  if (state.decoder) {
    var chunk = state.decoder.end();
    if (chunk && chunk.length) {
      state.buffer.push(chunk);
      state.length += state.objectMode ? 1 : chunk.length;
    }
  }
  state.ended = true;

  // emit 'readable' now to make sure it gets picked up.
  emitReadable(stream);
}

// Don't emit readable right away in sync mode, because this can trigger
// another read() call => stack overflow.  This way, it might trigger
// a nextTick recursion warning, but that's not so bad.
function emitReadable(stream) {
  var state = stream._readableState;
  state.needReadable = false;
  if (!state.emittedReadable) {
    debug('emitReadable', state.flowing);
    state.emittedReadable = true;
    if (state.sync) processNextTick(emitReadable_, stream);else emitReadable_(stream);
  }
}

function emitReadable_(stream) {
  debug('emit readable');
  stream.emit('readable');
  flow(stream);
}

// at this point, the user has presumably seen the 'readable' event,
// and called read() to consume some data.  that may have triggered
// in turn another _read(n) call, in which case reading = true if
// it's in progress.
// However, if we're not ended, or reading, and the length < hwm,
// then go ahead and try to read some more preemptively.
function maybeReadMore(stream, state) {
  if (!state.readingMore) {
    state.readingMore = true;
    processNextTick(maybeReadMore_, stream, state);
  }
}

function maybeReadMore_(stream, state) {
  var len = state.length;
  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {
    debug('maybeReadMore read 0');
    stream.read(0);
    if (len === state.length)
      // didn't get any data, stop spinning.
      break;else len = state.length;
  }
  state.readingMore = false;
}

// abstract method.  to be overridden in specific implementation classes.
// call cb(er, data) where data is <= n in length.
// for virtual (non-string, non-buffer) streams, "length" is somewhat
// arbitrary, and perhaps not very meaningful.
Readable.prototype._read = function (n) {
  this.emit('error', new Error('_read() is not implemented'));
};

Readable.prototype.pipe = function (dest, pipeOpts) {
  var src = this;
  var state = this._readableState;

  switch (state.pipesCount) {
    case 0:
      state.pipes = dest;
      break;
    case 1:
      state.pipes = [state.pipes, dest];
      break;
    default:
      state.pipes.push(dest);
      break;
  }
  state.pipesCount += 1;
  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);

  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;

  var endFn = doEnd ? onend : cleanup;
  if (state.endEmitted) processNextTick(endFn);else src.once('end', endFn);

  dest.on('unpipe', onunpipe);
  function onunpipe(readable) {
    debug('onunpipe');
    if (readable === src) {
      cleanup();
    }
  }

  function onend() {
    debug('onend');
    dest.end();
  }

  // when the dest drains, it reduces the awaitDrain counter
  // on the source.  This would be more elegant with a .once()
  // handler in flow(), but adding and removing repeatedly is
  // too slow.
  var ondrain = pipeOnDrain(src);
  dest.on('drain', ondrain);

  var cleanedUp = false;
  function cleanup() {
    debug('cleanup');
    // cleanup event handlers once the pipe is broken
    dest.removeListener('close', onclose);
    dest.removeListener('finish', onfinish);
    dest.removeListener('drain', ondrain);
    dest.removeListener('error', onerror);
    dest.removeListener('unpipe', onunpipe);
    src.removeListener('end', onend);
    src.removeListener('end', cleanup);
    src.removeListener('data', ondata);

    cleanedUp = true;

    // if the reader is waiting for a drain event from this
    // specific writer, then it would cause it to never start
    // flowing again.
    // So, if this is awaiting a drain, then we just call it now.
    // If we don't know, then assume that we are waiting for one.
    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();
  }

  // If the user pushes more data while we're writing to dest then we'll end up
  // in ondata again. However, we only want to increase awaitDrain once because
  // dest will only emit one 'drain' event for the multiple writes.
  // => Introduce a guard on increasing awaitDrain.
  var increasedAwaitDrain = false;
  src.on('data', ondata);
  function ondata(chunk) {
    debug('ondata');
    increasedAwaitDrain = false;
    var ret = dest.write(chunk);
    if (false === ret && !increasedAwaitDrain) {
      // If the user unpiped during `dest.write()`, it is possible
      // to get stuck in a permanently paused state if that write
      // also returned false.
      // => Check whether `dest` is still a piping destination.
      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {
        debug('false write response, pause', src._readableState.awaitDrain);
        src._readableState.awaitDrain++;
        increasedAwaitDrain = true;
      }
      src.pause();
    }
  }

  // if the dest has an error, then stop piping into it.
  // however, don't suppress the throwing behavior for this.
  function onerror(er) {
    debug('onerror', er);
    unpipe();
    dest.removeListener('error', onerror);
    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);
  }

  // Make sure our error handler is attached before userland ones.
  prependListener(dest, 'error', onerror);

  // Both close and finish should trigger unpipe, but only once.
  function onclose() {
    dest.removeListener('finish', onfinish);
    unpipe();
  }
  dest.once('close', onclose);
  function onfinish() {
    debug('onfinish');
    dest.removeListener('close', onclose);
    unpipe();
  }
  dest.once('finish', onfinish);

  function unpipe() {
    debug('unpipe');
    src.unpipe(dest);
  }

  // tell the dest that it's being piped to
  dest.emit('pipe', src);

  // start the flow if it hasn't been started already.
  if (!state.flowing) {
    debug('pipe resume');
    src.resume();
  }

  return dest;
};

function pipeOnDrain(src) {
  return function () {
    var state = src._readableState;
    debug('pipeOnDrain', state.awaitDrain);
    if (state.awaitDrain) state.awaitDrain--;
    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {
      state.flowing = true;
      flow(src);
    }
  };
}

Readable.prototype.unpipe = function (dest) {
  var state = this._readableState;

  // if we're not piping anywhere, then do nothing.
  if (state.pipesCount === 0) return this;

  // just one destination.  most common case.
  if (state.pipesCount === 1) {
    // passed in one, but it's not the right one.
    if (dest && dest !== state.pipes) return this;

    if (!dest) dest = state.pipes;

    // got a match.
    state.pipes = null;
    state.pipesCount = 0;
    state.flowing = false;
    if (dest) dest.emit('unpipe', this);
    return this;
  }

  // slow case. multiple pipe destinations.

  if (!dest) {
    // remove all.
    var dests = state.pipes;
    var len = state.pipesCount;
    state.pipes = null;
    state.pipesCount = 0;
    state.flowing = false;

    for (var i = 0; i < len; i++) {
      dests[i].emit('unpipe', this);
    }return this;
  }

  // try to find the right one.
  var index = indexOf(state.pipes, dest);
  if (index === -1) return this;

  state.pipes.splice(index, 1);
  state.pipesCount -= 1;
  if (state.pipesCount === 1) state.pipes = state.pipes[0];

  dest.emit('unpipe', this);

  return this;
};

// set up data events if they are asked for
// Ensure readable listeners eventually get something
Readable.prototype.on = function (ev, fn) {
  var res = Stream.prototype.on.call(this, ev, fn);

  if (ev === 'data') {
    // Start flowing on next tick if stream isn't explicitly paused
    if (this._readableState.flowing !== false) this.resume();
  } else if (ev === 'readable') {
    var state = this._readableState;
    if (!state.endEmitted && !state.readableListening) {
      state.readableListening = state.needReadable = true;
      state.emittedReadable = false;
      if (!state.reading) {
        processNextTick(nReadingNextTick, this);
      } else if (state.length) {
        emitReadable(this, state);
      }
    }
  }

  return res;
};
Readable.prototype.addListener = Readable.prototype.on;

function nReadingNextTick(self) {
  debug('readable nexttick read 0');
  self.read(0);
}

// pause() and resume() are remnants of the legacy readable stream API
// If the user uses them, then switch into old mode.
Readable.prototype.resume = function () {
  var state = this._readableState;
  if (!state.flowing) {
    debug('resume');
    state.flowing = true;
    resume(this, state);
  }
  return this;
};

function resume(stream, state) {
  if (!state.resumeScheduled) {
    state.resumeScheduled = true;
    processNextTick(resume_, stream, state);
  }
}

function resume_(stream, state) {
  if (!state.reading) {
    debug('resume read 0');
    stream.read(0);
  }

  state.resumeScheduled = false;
  state.awaitDrain = 0;
  stream.emit('resume');
  flow(stream);
  if (state.flowing && !state.reading) stream.read(0);
}

Readable.prototype.pause = function () {
  debug('call pause flowing=%j', this._readableState.flowing);
  if (false !== this._readableState.flowing) {
    debug('pause');
    this._readableState.flowing = false;
    this.emit('pause');
  }
  return this;
};

function flow(stream) {
  var state = stream._readableState;
  debug('flow', state.flowing);
  while (state.flowing && stream.read() !== null) {}
}

// wrap an old-style stream as the async data source.
// This is *not* part of the readable stream interface.
// It is an ugly unfortunate mess of history.
Readable.prototype.wrap = function (stream) {
  var state = this._readableState;
  var paused = false;

  var self = this;
  stream.on('end', function () {
    debug('wrapped end');
    if (state.decoder && !state.ended) {
      var chunk = state.decoder.end();
      if (chunk && chunk.length) self.push(chunk);
    }

    self.push(null);
  });

  stream.on('data', function (chunk) {
    debug('wrapped data');
    if (state.decoder) chunk = state.decoder.write(chunk);

    // don't skip over falsy values in objectMode
    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;

    var ret = self.push(chunk);
    if (!ret) {
      paused = true;
      stream.pause();
    }
  });

  // proxy all the other methods.
  // important when wrapping filters and duplexes.
  for (var i in stream) {
    if (this[i] === undefined && typeof stream[i] === 'function') {
      this[i] = function (method) {
        return function () {
          return stream[method].apply(stream, arguments);
        };
      }(i);
    }
  }

  // proxy certain important events.
  for (var n = 0; n < kProxyEvents.length; n++) {
    stream.on(kProxyEvents[n], self.emit.bind(self, kProxyEvents[n]));
  }

  // when we try to consume some more bytes, simply unpause the
  // underlying stream.
  self._read = function (n) {
    debug('wrapped _read', n);
    if (paused) {
      paused = false;
      stream.resume();
    }
  };

  return self;
};

// exposed for testing purposes only.
Readable._fromList = fromList;

// Pluck off n bytes from an array of buffers.
// Length is the combined lengths of all the buffers in the list.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function fromList(n, state) {
  // nothing buffered
  if (state.length === 0) return null;

  var ret;
  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {
    // read it all, truncate the list
    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);
    state.buffer.clear();
  } else {
    // read part of list
    ret = fromListPartial(n, state.buffer, state.decoder);
  }

  return ret;
}

// Extracts only enough buffered data to satisfy the amount requested.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function fromListPartial(n, list, hasStrings) {
  var ret;
  if (n < list.head.data.length) {
    // slice is the same for buffers and strings
    ret = list.head.data.slice(0, n);
    list.head.data = list.head.data.slice(n);
  } else if (n === list.head.data.length) {
    // first chunk is a perfect match
    ret = list.shift();
  } else {
    // result spans more than one buffer
    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);
  }
  return ret;
}

// Copies a specified amount of characters from the list of buffered data
// chunks.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function copyFromBufferString(n, list) {
  var p = list.head;
  var c = 1;
  var ret = p.data;
  n -= ret.length;
  while (p = p.next) {
    var str = p.data;
    var nb = n > str.length ? str.length : n;
    if (nb === str.length) ret += str;else ret += str.slice(0, n);
    n -= nb;
    if (n === 0) {
      if (nb === str.length) {
        ++c;
        if (p.next) list.head = p.next;else list.head = list.tail = null;
      } else {
        list.head = p;
        p.data = str.slice(nb);
      }
      break;
    }
    ++c;
  }
  list.length -= c;
  return ret;
}

// Copies a specified amount of bytes from the list of buffered data chunks.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function copyFromBuffer(n, list) {
  var ret = bufferShim.allocUnsafe(n);
  var p = list.head;
  var c = 1;
  p.data.copy(ret);
  n -= p.data.length;
  while (p = p.next) {
    var buf = p.data;
    var nb = n > buf.length ? buf.length : n;
    buf.copy(ret, ret.length - n, 0, nb);
    n -= nb;
    if (n === 0) {
      if (nb === buf.length) {
        ++c;
        if (p.next) list.head = p.next;else list.head = list.tail = null;
      } else {
        list.head = p;
        p.data = buf.slice(nb);
      }
      break;
    }
    ++c;
  }
  list.length -= c;
  return ret;
}

function endReadable(stream) {
  var state = stream._readableState;

  // If we get here before consuming all the bytes, then that is a
  // bug in node.  Should never happen.
  if (state.length > 0) throw new Error('"endReadable()" called on non-empty stream');

  if (!state.endEmitted) {
    state.ended = true;
    processNextTick(endReadableNT, state, stream);
  }
}

function endReadableNT(state, stream) {
  // Check that we didn't get one last unshift.
  if (!state.endEmitted && state.length === 0) {
    state.endEmitted = true;
    stream.readable = false;
    stream.emit('end');
  }
}

function forEach(xs, f) {
  for (var i = 0, l = xs.length; i < l; i++) {
    f(xs[i], i);
  }
}

function indexOf(xs, x) {
  for (var i = 0, l = xs.length; i < l; i++) {
    if (xs[i] === x) return i;
  }
  return -1;
}
}).call(this,require('_process'))
},{"./_stream_duplex":7,"./internal/streams/BufferList":12,"./internal/streams/stream":13,"_process":32,"buffer":"buffer","buffer-shims":14,"core-util-is":15,"events":28,"inherits":3,"isarray":16,"process-nextick-args":17,"string_decoder/":18,"util":"util"}],10:[function(require,module,exports){
// a transform stream is a readable/writable stream where you do
// something with the data.  Sometimes it's called a "filter",
// but that's not a great name for it, since that implies a thing where
// some bits pass through, and others are simply ignored.  (That would
// be a valid example of a transform, of course.)
//
// While the output is causally related to the input, it's not a
// necessarily symmetric or synchronous transformation.  For example,
// a zlib stream might take multiple plain-text writes(), and then
// emit a single compressed chunk some time in the future.
//
// Here's how this works:
//
// The Transform stream has all the aspects of the readable and writable
// stream classes.  When you write(chunk), that calls _write(chunk,cb)
// internally, and returns false if there's a lot of pending writes
// buffered up.  When you call read(), that calls _read(n) until
// there's enough pending readable data buffered up.
//
// In a transform stream, the written data is placed in a buffer.  When
// _read(n) is called, it transforms the queued up data, calling the
// buffered _write cb's as it consumes chunks.  If consuming a single
// written chunk would result in multiple output chunks, then the first
// outputted bit calls the readcb, and subsequent chunks just go into
// the read buffer, and will cause it to emit 'readable' if necessary.
//
// This way, back-pressure is actually determined by the reading side,
// since _read has to be called to start processing a new chunk.  However,
// a pathological inflate type of transform can cause excessive buffering
// here.  For example, imagine a stream where every byte of input is
// interpreted as an integer from 0-255, and then results in that many
// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in
// 1kb of data being output.  In this case, you could write a very small
// amount of input, and end up with a very large amount of output.  In
// such a pathological inflating mechanism, there'd be no way to tell
// the system to stop doing the transform.  A single 4MB write could
// cause the system to run out of memory.
//
// However, even in such a pathological case, only a single written chunk
// would be consumed, and then the rest would wait (un-transformed) until
// the results of the previous transformed chunk were consumed.

'use strict';

module.exports = Transform;

var Duplex = require('./_stream_duplex');

/*<replacement>*/
var util = require('core-util-is');
util.inherits = require('inherits');
/*</replacement>*/

util.inherits(Transform, Duplex);

function TransformState(stream) {
  this.afterTransform = function (er, data) {
    return afterTransform(stream, er, data);
  };

  this.needTransform = false;
  this.transforming = false;
  this.writecb = null;
  this.writechunk = null;
  this.writeencoding = null;
}

function afterTransform(stream, er, data) {
  var ts = stream._transformState;
  ts.transforming = false;

  var cb = ts.writecb;

  if (!cb) return stream.emit('error', new Error('no writecb in Transform class'));

  ts.writechunk = null;
  ts.writecb = null;

  if (data !== null && data !== undefined) stream.push(data);

  cb(er);

  var rs = stream._readableState;
  rs.reading = false;
  if (rs.needReadable || rs.length < rs.highWaterMark) {
    stream._read(rs.highWaterMark);
  }
}

function Transform(options) {
  if (!(this instanceof Transform)) return new Transform(options);

  Duplex.call(this, options);

  this._transformState = new TransformState(this);

  var stream = this;

  // start out asking for a readable event once data is transformed.
  this._readableState.needReadable = true;

  // we have implemented the _read method, and done the other things
  // that Readable wants before the first _read call, so unset the
  // sync guard flag.
  this._readableState.sync = false;

  if (options) {
    if (typeof options.transform === 'function') this._transform = options.transform;

    if (typeof options.flush === 'function') this._flush = options.flush;
  }

  // When the writable side finishes, then flush out anything remaining.
  this.once('prefinish', function () {
    if (typeof this._flush === 'function') this._flush(function (er, data) {
      done(stream, er, data);
    });else done(stream);
  });
}

Transform.prototype.push = function (chunk, encoding) {
  this._transformState.needTransform = false;
  return Duplex.prototype.push.call(this, chunk, encoding);
};

// This is the part where you do stuff!
// override this function in implementation classes.
// 'chunk' is an input chunk.
//
// Call `push(newChunk)` to pass along transformed output
// to the readable side.  You may call 'push' zero or more times.
//
// Call `cb(err)` when you are done with this chunk.  If you pass
// an error, then that'll put the hurt on the whole operation.  If you
// never call cb(), then you'll never get another chunk.
Transform.prototype._transform = function (chunk, encoding, cb) {
  throw new Error('_transform() is not implemented');
};

Transform.prototype._write = function (chunk, encoding, cb) {
  var ts = this._transformState;
  ts.writecb = cb;
  ts.writechunk = chunk;
  ts.writeencoding = encoding;
  if (!ts.transforming) {
    var rs = this._readableState;
    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);
  }
};

// Doesn't matter what the args are here.
// _transform does all the work.
// That we got here means that the readable side wants more data.
Transform.prototype._read = function (n) {
  var ts = this._transformState;

  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {
    ts.transforming = true;
    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);
  } else {
    // mark that we need a transform, so that any data that comes in
    // will get processed, now that we've asked for it.
    ts.needTransform = true;
  }
};

function done(stream, er, data) {
  if (er) return stream.emit('error', er);

  if (data !== null && data !== undefined) stream.push(data);

  // if there's nothing in the write buffer, then that means
  // that nothing more will ever be provided
  var ws = stream._writableState;
  var ts = stream._transformState;

  if (ws.length) throw new Error('Calling transform done when ws.length != 0');

  if (ts.transforming) throw new Error('Calling transform done when still transforming');

  return stream.push(null);
}
},{"./_stream_duplex":7,"core-util-is":15,"inherits":3}],11:[function(require,module,exports){
(function (process){
// A bit simpler than readable streams.
// Implement an async ._write(chunk, encoding, cb), and it'll handle all
// the drain event emission and buffering.

'use strict';

module.exports = Writable;

/*<replacement>*/
var processNextTick = require('process-nextick-args');
/*</replacement>*/

/*<replacement>*/
var asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : processNextTick;
/*</replacement>*/

/*<replacement>*/
var Duplex;
/*</replacement>*/

Writable.WritableState = WritableState;

/*<replacement>*/
var util = require('core-util-is');
util.inherits = require('inherits');
/*</replacement>*/

/*<replacement>*/
var internalUtil = {
  deprecate: require('util-deprecate')
};
/*</replacement>*/

/*<replacement>*/
var Stream = require('./internal/streams/stream');
/*</replacement>*/

var Buffer = require('buffer').Buffer;
/*<replacement>*/
var bufferShim = require('buffer-shims');
/*</replacement>*/

util.inherits(Writable, Stream);

function nop() {}

function WriteReq(chunk, encoding, cb) {
  this.chunk = chunk;
  this.encoding = encoding;
  this.callback = cb;
  this.next = null;
}

function WritableState(options, stream) {
  Duplex = Duplex || require('./_stream_duplex');

  options = options || {};

  // object stream flag to indicate whether or not this stream
  // contains buffers or objects.
  this.objectMode = !!options.objectMode;

  if (stream instanceof Duplex) this.objectMode = this.objectMode || !!options.writableObjectMode;

  // the point at which write() starts returning false
  // Note: 0 is a valid value, means that we always return false if
  // the entire buffer is not flushed immediately on write()
  var hwm = options.highWaterMark;
  var defaultHwm = this.objectMode ? 16 : 16 * 1024;
  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;

  // cast to ints.
  this.highWaterMark = ~~this.highWaterMark;

  // drain event flag.
  this.needDrain = false;
  // at the start of calling end()
  this.ending = false;
  // when end() has been called, and returned
  this.ended = false;
  // when 'finish' is emitted
  this.finished = false;

  // should we decode strings into buffers before passing to _write?
  // this is here so that some node-core streams can optimize string
  // handling at a lower level.
  var noDecode = options.decodeStrings === false;
  this.decodeStrings = !noDecode;

  // Crypto is kind of old and crusty.  Historically, its default string
  // encoding is 'binary' so we have to make this configurable.
  // Everything else in the universe uses 'utf8', though.
  this.defaultEncoding = options.defaultEncoding || 'utf8';

  // not an actual buffer we keep track of, but a measurement
  // of how much we're waiting to get pushed to some underlying
  // socket or file.
  this.length = 0;

  // a flag to see when we're in the middle of a write.
  this.writing = false;

  // when true all writes will be buffered until .uncork() call
  this.corked = 0;

  // a flag to be able to tell if the onwrite cb is called immediately,
  // or on a later tick.  We set this to true at first, because any
  // actions that shouldn't happen until "later" should generally also
  // not happen before the first write call.
  this.sync = true;

  // a flag to know if we're processing previously buffered items, which
  // may call the _write() callback in the same tick, so that we don't
  // end up in an overlapped onwrite situation.
  this.bufferProcessing = false;

  // the callback that's passed to _write(chunk,cb)
  this.onwrite = function (er) {
    onwrite(stream, er);
  };

  // the callback that the user supplies to write(chunk,encoding,cb)
  this.writecb = null;

  // the amount that is being written when _write is called.
  this.writelen = 0;

  this.bufferedRequest = null;
  this.lastBufferedRequest = null;

  // number of pending user-supplied write callbacks
  // this must be 0 before 'finish' can be emitted
  this.pendingcb = 0;

  // emit prefinish if the only thing we're waiting for is _write cbs
  // This is relevant for synchronous Transform streams
  this.prefinished = false;

  // True if the error was already emitted and should not be thrown again
  this.errorEmitted = false;

  // count buffered requests
  this.bufferedRequestCount = 0;

  // allocate the first CorkedRequest, there is always
  // one allocated and free to use, and we maintain at most two
  this.corkedRequestsFree = new CorkedRequest(this);
}

WritableState.prototype.getBuffer = function getBuffer() {
  var current = this.bufferedRequest;
  var out = [];
  while (current) {
    out.push(current);
    current = current.next;
  }
  return out;
};

(function () {
  try {
    Object.defineProperty(WritableState.prototype, 'buffer', {
      get: internalUtil.deprecate(function () {
        return this.getBuffer();
      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.')
    });
  } catch (_) {}
})();

// Test _writableState for inheritance to account for Duplex streams,
// whose prototype chain only points to Readable.
var realHasInstance;
if (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {
  realHasInstance = Function.prototype[Symbol.hasInstance];
  Object.defineProperty(Writable, Symbol.hasInstance, {
    value: function (object) {
      if (realHasInstance.call(this, object)) return true;

      return object && object._writableState instanceof WritableState;
    }
  });
} else {
  realHasInstance = function (object) {
    return object instanceof this;
  };
}

function Writable(options) {
  Duplex = Duplex || require('./_stream_duplex');

  // Writable ctor is applied to Duplexes, too.
  // `realHasInstance` is necessary because using plain `instanceof`
  // would return false, as no `_writableState` property is attached.

  // Trying to use the custom `instanceof` for Writable here will also break the
  // Node.js LazyTransform implementation, which has a non-trivial getter for
  // `_writableState` that would lead to infinite recursion.
  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {
    return new Writable(options);
  }

  this._writableState = new WritableState(options, this);

  // legacy.
  this.writable = true;

  if (options) {
    if (typeof options.write === 'function') this._write = options.write;

    if (typeof options.writev === 'function') this._writev = options.writev;
  }

  Stream.call(this);
}

// Otherwise people can pipe Writable streams, which is just wrong.
Writable.prototype.pipe = function () {
  this.emit('error', new Error('Cannot pipe, not readable'));
};

function writeAfterEnd(stream, cb) {
  var er = new Error('write after end');
  // TODO: defer error events consistently everywhere, not just the cb
  stream.emit('error', er);
  processNextTick(cb, er);
}

// Checks that a user-supplied chunk is valid, especially for the particular
// mode the stream is in. Currently this means that `null` is never accepted
// and undefined/non-string values are only allowed in object mode.
function validChunk(stream, state, chunk, cb) {
  var valid = true;
  var er = false;

  if (chunk === null) {
    er = new TypeError('May not write null values to stream');
  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {
    er = new TypeError('Invalid non-string/buffer chunk');
  }
  if (er) {
    stream.emit('error', er);
    processNextTick(cb, er);
    valid = false;
  }
  return valid;
}

Writable.prototype.write = function (chunk, encoding, cb) {
  var state = this._writableState;
  var ret = false;
  var isBuf = Buffer.isBuffer(chunk);

  if (typeof encoding === 'function') {
    cb = encoding;
    encoding = null;
  }

  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;

  if (typeof cb !== 'function') cb = nop;

  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {
    state.pendingcb++;
    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);
  }

  return ret;
};

Writable.prototype.cork = function () {
  var state = this._writableState;

  state.corked++;
};

Writable.prototype.uncork = function () {
  var state = this._writableState;

  if (state.corked) {
    state.corked--;

    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);
  }
};

Writable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {
  // node::ParseEncoding() requires lower case.
  if (typeof encoding === 'string') encoding = encoding.toLowerCase();
  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);
  this._writableState.defaultEncoding = encoding;
  return this;
};

function decodeChunk(state, chunk, encoding) {
  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {
    chunk = bufferShim.from(chunk, encoding);
  }
  return chunk;
}

// if we're already writing something, then just put this
// in the queue, and wait our turn.  Otherwise, call _write
// If we return false, then we need a drain event, so set that flag.
function writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {
  if (!isBuf) {
    chunk = decodeChunk(state, chunk, encoding);
    if (Buffer.isBuffer(chunk)) encoding = 'buffer';
  }
  var len = state.objectMode ? 1 : chunk.length;

  state.length += len;

  var ret = state.length < state.highWaterMark;
  // we must ensure that previous needDrain will not be reset to false.
  if (!ret) state.needDrain = true;

  if (state.writing || state.corked) {
    var last = state.lastBufferedRequest;
    state.lastBufferedRequest = new WriteReq(chunk, encoding, cb);
    if (last) {
      last.next = state.lastBufferedRequest;
    } else {
      state.bufferedRequest = state.lastBufferedRequest;
    }
    state.bufferedRequestCount += 1;
  } else {
    doWrite(stream, state, false, len, chunk, encoding, cb);
  }

  return ret;
}

function doWrite(stream, state, writev, len, chunk, encoding, cb) {
  state.writelen = len;
  state.writecb = cb;
  state.writing = true;
  state.sync = true;
  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);
  state.sync = false;
}

function onwriteError(stream, state, sync, er, cb) {
  --state.pendingcb;
  if (sync) processNextTick(cb, er);else cb(er);

  stream._writableState.errorEmitted = true;
  stream.emit('error', er);
}

function onwriteStateUpdate(state) {
  state.writing = false;
  state.writecb = null;
  state.length -= state.writelen;
  state.writelen = 0;
}

function onwrite(stream, er) {
  var state = stream._writableState;
  var sync = state.sync;
  var cb = state.writecb;

  onwriteStateUpdate(state);

  if (er) onwriteError(stream, state, sync, er, cb);else {
    // Check if we're actually ready to finish, but don't emit yet
    var finished = needFinish(state);

    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {
      clearBuffer(stream, state);
    }

    if (sync) {
      /*<replacement>*/
      asyncWrite(afterWrite, stream, state, finished, cb);
      /*</replacement>*/
    } else {
      afterWrite(stream, state, finished, cb);
    }
  }
}

function afterWrite(stream, state, finished, cb) {
  if (!finished) onwriteDrain(stream, state);
  state.pendingcb--;
  cb();
  finishMaybe(stream, state);
}

// Must force callback to be called on nextTick, so that we don't
// emit 'drain' before the write() consumer gets the 'false' return
// value, and has a chance to attach a 'drain' listener.
function onwriteDrain(stream, state) {
  if (state.length === 0 && state.needDrain) {
    state.needDrain = false;
    stream.emit('drain');
  }
}

// if there's something in the buffer waiting, then process it
function clearBuffer(stream, state) {
  state.bufferProcessing = true;
  var entry = state.bufferedRequest;

  if (stream._writev && entry && entry.next) {
    // Fast case, write everything using _writev()
    var l = state.bufferedRequestCount;
    var buffer = new Array(l);
    var holder = state.corkedRequestsFree;
    holder.entry = entry;

    var count = 0;
    while (entry) {
      buffer[count] = entry;
      entry = entry.next;
      count += 1;
    }

    doWrite(stream, state, true, state.length, buffer, '', holder.finish);

    // doWrite is almost always async, defer these to save a bit of time
    // as the hot path ends with doWrite
    state.pendingcb++;
    state.lastBufferedRequest = null;
    if (holder.next) {
      state.corkedRequestsFree = holder.next;
      holder.next = null;
    } else {
      state.corkedRequestsFree = new CorkedRequest(state);
    }
  } else {
    // Slow case, write chunks one-by-one
    while (entry) {
      var chunk = entry.chunk;
      var encoding = entry.encoding;
      var cb = entry.callback;
      var len = state.objectMode ? 1 : chunk.length;

      doWrite(stream, state, false, len, chunk, encoding, cb);
      entry = entry.next;
      // if we didn't call the onwrite immediately, then
      // it means that we need to wait until it does.
      // also, that means that the chunk and cb are currently
      // being processed, so move the buffer counter past them.
      if (state.writing) {
        break;
      }
    }

    if (entry === null) state.lastBufferedRequest = null;
  }

  state.bufferedRequestCount = 0;
  state.bufferedRequest = entry;
  state.bufferProcessing = false;
}

Writable.prototype._write = function (chunk, encoding, cb) {
  cb(new Error('_write() is not implemented'));
};

Writable.prototype._writev = null;

Writable.prototype.end = function (chunk, encoding, cb) {
  var state = this._writableState;

  if (typeof chunk === 'function') {
    cb = chunk;
    chunk = null;
    encoding = null;
  } else if (typeof encoding === 'function') {
    cb = encoding;
    encoding = null;
  }

  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);

  // .end() fully uncorks
  if (state.corked) {
    state.corked = 1;
    this.uncork();
  }

  // ignore unnecessary end() calls.
  if (!state.ending && !state.finished) endWritable(this, state, cb);
};

function needFinish(state) {
  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;
}

function prefinish(stream, state) {
  if (!state.prefinished) {
    state.prefinished = true;
    stream.emit('prefinish');
  }
}

function finishMaybe(stream, state) {
  var need = needFinish(state);
  if (need) {
    if (state.pendingcb === 0) {
      prefinish(stream, state);
      state.finished = true;
      stream.emit('finish');
    } else {
      prefinish(stream, state);
    }
  }
  return need;
}

function endWritable(stream, state, cb) {
  state.ending = true;
  finishMaybe(stream, state);
  if (cb) {
    if (state.finished) processNextTick(cb);else stream.once('finish', cb);
  }
  state.ended = true;
  stream.writable = false;
}

// It seems a linked list but it is not
// there will be only 2 of these for each stream
function CorkedRequest(state) {
  var _this = this;

  this.next = null;
  this.entry = null;
  this.finish = function (err) {
    var entry = _this.entry;
    _this.entry = null;
    while (entry) {
      var cb = entry.callback;
      state.pendingcb--;
      cb(err);
      entry = entry.next;
    }
    if (state.corkedRequestsFree) {
      state.corkedRequestsFree.next = _this;
    } else {
      state.corkedRequestsFree = _this;
    }
  };
}
}).call(this,require('_process'))
},{"./_stream_duplex":7,"./internal/streams/stream":13,"_process":32,"buffer":"buffer","buffer-shims":14,"core-util-is":15,"inherits":3,"process-nextick-args":17,"util-deprecate":19}],12:[function(require,module,exports){
'use strict';

var Buffer = require('buffer').Buffer;
/*<replacement>*/
var bufferShim = require('buffer-shims');
/*</replacement>*/

module.exports = BufferList;

function BufferList() {
  this.head = null;
  this.tail = null;
  this.length = 0;
}

BufferList.prototype.push = function (v) {
  var entry = { data: v, next: null };
  if (this.length > 0) this.tail.next = entry;else this.head = entry;
  this.tail = entry;
  ++this.length;
};

BufferList.prototype.unshift = function (v) {
  var entry = { data: v, next: this.head };
  if (this.length === 0) this.tail = entry;
  this.head = entry;
  ++this.length;
};

BufferList.prototype.shift = function () {
  if (this.length === 0) return;
  var ret = this.head.data;
  if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;
  --this.length;
  return ret;
};

BufferList.prototype.clear = function () {
  this.head = this.tail = null;
  this.length = 0;
};

BufferList.prototype.join = function (s) {
  if (this.length === 0) return '';
  var p = this.head;
  var ret = '' + p.data;
  while (p = p.next) {
    ret += s + p.data;
  }return ret;
};

BufferList.prototype.concat = function (n) {
  if (this.length === 0) return bufferShim.alloc(0);
  if (this.length === 1) return this.head.data;
  var ret = bufferShim.allocUnsafe(n >>> 0);
  var p = this.head;
  var i = 0;
  while (p) {
    p.data.copy(ret, i);
    i += p.data.length;
    p = p.next;
  }
  return ret;
};
},{"buffer":"buffer","buffer-shims":14}],13:[function(require,module,exports){
module.exports = require('events').EventEmitter;

},{"events":28}],14:[function(require,module,exports){
(function (global){
'use strict';

var buffer = require('buffer');
var Buffer = buffer.Buffer;
var SlowBuffer = buffer.SlowBuffer;
var MAX_LEN = buffer.kMaxLength || 2147483647;
exports.alloc = function alloc(size, fill, encoding) {
  if (typeof Buffer.alloc === 'function') {
    return Buffer.alloc(size, fill, encoding);
  }
  if (typeof encoding === 'number') {
    throw new TypeError('encoding must not be number');
  }
  if (typeof size !== 'number') {
    throw new TypeError('size must be a number');
  }
  if (size > MAX_LEN) {
    throw new RangeError('size is too large');
  }
  var enc = encoding;
  var _fill = fill;
  if (_fill === undefined) {
    enc = undefined;
    _fill = 0;
  }
  var buf = new Buffer(size);
  if (typeof _fill === 'string') {
    var fillBuf = new Buffer(_fill, enc);
    var flen = fillBuf.length;
    var i = -1;
    while (++i < size) {
      buf[i] = fillBuf[i % flen];
    }
  } else {
    buf.fill(_fill);
  }
  return buf;
}
exports.allocUnsafe = function allocUnsafe(size) {
  if (typeof Buffer.allocUnsafe === 'function') {
    return Buffer.allocUnsafe(size);
  }
  if (typeof size !== 'number') {
    throw new TypeError('size must be a number');
  }
  if (size > MAX_LEN) {
    throw new RangeError('size is too large');
  }
  return new Buffer(size);
}
exports.from = function from(value, encodingOrOffset, length) {
  if (typeof Buffer.from === 'function' && (!global.Uint8Array || Uint8Array.from !== Buffer.from)) {
    return Buffer.from(value, encodingOrOffset, length);
  }
  if (typeof value === 'number') {
    throw new TypeError('"value" argument must not be a number');
  }
  if (typeof value === 'string') {
    return new Buffer(value, encodingOrOffset);
  }
  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {
    var offset = encodingOrOffset;
    if (arguments.length === 1) {
      return new Buffer(value);
    }
    if (typeof offset === 'undefined') {
      offset = 0;
    }
    var len = length;
    if (typeof len === 'undefined') {
      len = value.byteLength - offset;
    }
    if (offset >= value.byteLength) {
      throw new RangeError('\'offset\' is out of bounds');
    }
    if (len > value.byteLength - offset) {
      throw new RangeError('\'length\' is out of bounds');
    }
    return new Buffer(value.slice(offset, offset + len));
  }
  if (Buffer.isBuffer(value)) {
    var out = new Buffer(value.length);
    value.copy(out, 0, 0, value.length);
    return out;
  }
  if (value) {
    if (Array.isArray(value) || (typeof ArrayBuffer !== 'undefined' && value.buffer instanceof ArrayBuffer) || 'length' in value) {
      return new Buffer(value);
    }
    if (value.type === 'Buffer' && Array.isArray(value.data)) {
      return new Buffer(value.data);
    }
  }

  throw new TypeError('First argument must be a string, Buffer, ' + 'ArrayBuffer, Array, or array-like object.');
}
exports.allocUnsafeSlow = function allocUnsafeSlow(size) {
  if (typeof Buffer.allocUnsafeSlow === 'function') {
    return Buffer.allocUnsafeSlow(size);
  }
  if (typeof size !== 'number') {
    throw new TypeError('size must be a number');
  }
  if (size >= MAX_LEN) {
    throw new RangeError('size is too large');
  }
  return new SlowBuffer(size);
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"buffer":"buffer"}],15:[function(require,module,exports){
(function (Buffer){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// NOTE: These type checking functions intentionally don't use `instanceof`
// because it is fragile and can be easily faked with `Object.create()`.

function isArray(arg) {
  if (Array.isArray) {
    return Array.isArray(arg);
  }
  return objectToString(arg) === '[object Array]';
}
exports.isArray = isArray;

function isBoolean(arg) {
  return typeof arg === 'boolean';
}
exports.isBoolean = isBoolean;

function isNull(arg) {
  return arg === null;
}
exports.isNull = isNull;

function isNullOrUndefined(arg) {
  return arg == null;
}
exports.isNullOrUndefined = isNullOrUndefined;

function isNumber(arg) {
  return typeof arg === 'number';
}
exports.isNumber = isNumber;

function isString(arg) {
  return typeof arg === 'string';
}
exports.isString = isString;

function isSymbol(arg) {
  return typeof arg === 'symbol';
}
exports.isSymbol = isSymbol;

function isUndefined(arg) {
  return arg === void 0;
}
exports.isUndefined = isUndefined;

function isRegExp(re) {
  return objectToString(re) === '[object RegExp]';
}
exports.isRegExp = isRegExp;

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}
exports.isObject = isObject;

function isDate(d) {
  return objectToString(d) === '[object Date]';
}
exports.isDate = isDate;

function isError(e) {
  return (objectToString(e) === '[object Error]' || e instanceof Error);
}
exports.isError = isError;

function isFunction(arg) {
  return typeof arg === 'function';
}
exports.isFunction = isFunction;

function isPrimitive(arg) {
  return arg === null ||
         typeof arg === 'boolean' ||
         typeof arg === 'number' ||
         typeof arg === 'string' ||
         typeof arg === 'symbol' ||  // ES6 symbol
         typeof arg === 'undefined';
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = Buffer.isBuffer;

function objectToString(o) {
  return Object.prototype.toString.call(o);
}

}).call(this,{"isBuffer":require("../../../../insert-module-globals/node_modules/is-buffer/index.js")})
},{"../../../../insert-module-globals/node_modules/is-buffer/index.js":4}],16:[function(require,module,exports){
var toString = {}.toString;

module.exports = Array.isArray || function (arr) {
  return toString.call(arr) == '[object Array]';
};

},{}],17:[function(require,module,exports){
(function (process){
'use strict';

if (!process.version ||
    process.version.indexOf('v0.') === 0 ||
    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {
  module.exports = nextTick;
} else {
  module.exports = process.nextTick;
}

function nextTick(fn, arg1, arg2, arg3) {
  if (typeof fn !== 'function') {
    throw new TypeError('"callback" argument must be a function');
  }
  var len = arguments.length;
  var args, i;
  switch (len) {
  case 0:
  case 1:
    return process.nextTick(fn);
  case 2:
    return process.nextTick(function afterTickOne() {
      fn.call(null, arg1);
    });
  case 3:
    return process.nextTick(function afterTickTwo() {
      fn.call(null, arg1, arg2);
    });
  case 4:
    return process.nextTick(function afterTickThree() {
      fn.call(null, arg1, arg2, arg3);
    });
  default:
    args = new Array(len - 1);
    i = 0;
    while (i < args.length) {
      args[i++] = arguments[i];
    }
    return process.nextTick(function afterTick() {
      fn.apply(null, args);
    });
  }
}

}).call(this,require('_process'))
},{"_process":32}],18:[function(require,module,exports){
'use strict';

var Buffer = require('buffer').Buffer;
var bufferShim = require('buffer-shims');

var isEncoding = Buffer.isEncoding || function (encoding) {
  encoding = '' + encoding;
  switch (encoding && encoding.toLowerCase()) {
    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':
      return true;
    default:
      return false;
  }
};

function _normalizeEncoding(enc) {
  if (!enc) return 'utf8';
  var retried;
  while (true) {
    switch (enc) {
      case 'utf8':
      case 'utf-8':
        return 'utf8';
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return 'utf16le';
      case 'latin1':
      case 'binary':
        return 'latin1';
      case 'base64':
      case 'ascii':
      case 'hex':
        return enc;
      default:
        if (retried) return; // undefined
        enc = ('' + enc).toLowerCase();
        retried = true;
    }
  }
};

// Do not cache `Buffer.isEncoding` when checking encoding names as some
// modules monkey-patch it to support additional encodings
function normalizeEncoding(enc) {
  var nenc = _normalizeEncoding(enc);
  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);
  return nenc || enc;
}

// StringDecoder provides an interface for efficiently splitting a series of
// buffers into a series of JS strings without breaking apart multi-byte
// characters.
exports.StringDecoder = StringDecoder;
function StringDecoder(encoding) {
  this.encoding = normalizeEncoding(encoding);
  var nb;
  switch (this.encoding) {
    case 'utf16le':
      this.text = utf16Text;
      this.end = utf16End;
      nb = 4;
      break;
    case 'utf8':
      this.fillLast = utf8FillLast;
      nb = 4;
      break;
    case 'base64':
      this.text = base64Text;
      this.end = base64End;
      nb = 3;
      break;
    default:
      this.write = simpleWrite;
      this.end = simpleEnd;
      return;
  }
  this.lastNeed = 0;
  this.lastTotal = 0;
  this.lastChar = bufferShim.allocUnsafe(nb);
}

StringDecoder.prototype.write = function (buf) {
  if (buf.length === 0) return '';
  var r;
  var i;
  if (this.lastNeed) {
    r = this.fillLast(buf);
    if (r === undefined) return '';
    i = this.lastNeed;
    this.lastNeed = 0;
  } else {
    i = 0;
  }
  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);
  return r || '';
};

StringDecoder.prototype.end = utf8End;

// Returns only complete characters in a Buffer
StringDecoder.prototype.text = utf8Text;

// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer
StringDecoder.prototype.fillLast = function (buf) {
  if (this.lastNeed <= buf.length) {
    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);
    return this.lastChar.toString(this.encoding, 0, this.lastTotal);
  }
  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);
  this.lastNeed -= buf.length;
};

// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a
// continuation byte.
function utf8CheckByte(byte) {
  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;
  return -1;
}

// Checks at most 3 bytes at the end of a Buffer in order to detect an
// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)
// needed to complete the UTF-8 character (if applicable) are returned.
function utf8CheckIncomplete(self, buf, i) {
  var j = buf.length - 1;
  if (j < i) return 0;
  var nb = utf8CheckByte(buf[j]);
  if (nb >= 0) {
    if (nb > 0) self.lastNeed = nb - 1;
    return nb;
  }
  if (--j < i) return 0;
  nb = utf8CheckByte(buf[j]);
  if (nb >= 0) {
    if (nb > 0) self.lastNeed = nb - 2;
    return nb;
  }
  if (--j < i) return 0;
  nb = utf8CheckByte(buf[j]);
  if (nb >= 0) {
    if (nb > 0) {
      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;
    }
    return nb;
  }
  return 0;
}

// Validates as many continuation bytes for a multi-byte UTF-8 character as
// needed or are available. If we see a non-continuation byte where we expect
// one, we "replace" the validated continuation bytes we've seen so far with
// UTF-8 replacement characters ('\ufffd'), to match v8's UTF-8 decoding
// behavior. The continuation byte check is included three times in the case
// where all of the continuation bytes for a character exist in the same buffer.
// It is also done this way as a slight performance increase instead of using a
// loop.
function utf8CheckExtraBytes(self, buf, p) {
  if ((buf[0] & 0xC0) !== 0x80) {
    self.lastNeed = 0;
    return '\ufffd'.repeat(p);
  }
  if (self.lastNeed > 1 && buf.length > 1) {
    if ((buf[1] & 0xC0) !== 0x80) {
      self.lastNeed = 1;
      return '\ufffd'.repeat(p + 1);
    }
    if (self.lastNeed > 2 && buf.length > 2) {
      if ((buf[2] & 0xC0) !== 0x80) {
        self.lastNeed = 2;
        return '\ufffd'.repeat(p + 2);
      }
    }
  }
}

// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.
function utf8FillLast(buf) {
  var p = this.lastTotal - this.lastNeed;
  var r = utf8CheckExtraBytes(this, buf, p);
  if (r !== undefined) return r;
  if (this.lastNeed <= buf.length) {
    buf.copy(this.lastChar, p, 0, this.lastNeed);
    return this.lastChar.toString(this.encoding, 0, this.lastTotal);
  }
  buf.copy(this.lastChar, p, 0, buf.length);
  this.lastNeed -= buf.length;
}

// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a
// partial character, the character's bytes are buffered until the required
// number of bytes are available.
function utf8Text(buf, i) {
  var total = utf8CheckIncomplete(this, buf, i);
  if (!this.lastNeed) return buf.toString('utf8', i);
  this.lastTotal = total;
  var end = buf.length - (total - this.lastNeed);
  buf.copy(this.lastChar, 0, end);
  return buf.toString('utf8', i, end);
}

// For UTF-8, a replacement character for each buffered byte of a (partial)
// character needs to be added to the output.
function utf8End(buf) {
  var r = buf && buf.length ? this.write(buf) : '';
  if (this.lastNeed) return r + '\ufffd'.repeat(this.lastTotal - this.lastNeed);
  return r;
}

// UTF-16LE typically needs two bytes per character, but even if we have an even
// number of bytes available, we need to check if we end on a leading/high
// surrogate. In that case, we need to wait for the next two bytes in order to
// decode the last character properly.
function utf16Text(buf, i) {
  if ((buf.length - i) % 2 === 0) {
    var r = buf.toString('utf16le', i);
    if (r) {
      var c = r.charCodeAt(r.length - 1);
      if (c >= 0xD800 && c <= 0xDBFF) {
        this.lastNeed = 2;
        this.lastTotal = 4;
        this.lastChar[0] = buf[buf.length - 2];
        this.lastChar[1] = buf[buf.length - 1];
        return r.slice(0, -1);
      }
    }
    return r;
  }
  this.lastNeed = 1;
  this.lastTotal = 2;
  this.lastChar[0] = buf[buf.length - 1];
  return buf.toString('utf16le', i, buf.length - 1);
}

// For UTF-16LE we do not explicitly append special replacement characters if we
// end on a partial character, we simply let v8 handle that.
function utf16End(buf) {
  var r = buf && buf.length ? this.write(buf) : '';
  if (this.lastNeed) {
    var end = this.lastTotal - this.lastNeed;
    return r + this.lastChar.toString('utf16le', 0, end);
  }
  return r;
}

function base64Text(buf, i) {
  var n = (buf.length - i) % 3;
  if (n === 0) return buf.toString('base64', i);
  this.lastNeed = 3 - n;
  this.lastTotal = 3;
  if (n === 1) {
    this.lastChar[0] = buf[buf.length - 1];
  } else {
    this.lastChar[0] = buf[buf.length - 2];
    this.lastChar[1] = buf[buf.length - 1];
  }
  return buf.toString('base64', i, buf.length - n);
}

function base64End(buf) {
  var r = buf && buf.length ? this.write(buf) : '';
  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);
  return r;
}

// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)
function simpleWrite(buf) {
  return buf.toString(this.encoding);
}

function simpleEnd(buf) {
  return buf && buf.length ? this.write(buf) : '';
}
},{"buffer":"buffer","buffer-shims":14}],19:[function(require,module,exports){
(function (global){

/**
 * Module exports.
 */

module.exports = deprecate;

/**
 * Mark that a method should not be used.
 * Returns a modified function which warns once by default.
 *
 * If `localStorage.noDeprecation = true` is set, then it is a no-op.
 *
 * If `localStorage.throwDeprecation = true` is set, then deprecated functions
 * will throw an Error when invoked.
 *
 * If `localStorage.traceDeprecation = true` is set, then deprecated functions
 * will invoke `console.trace()` instead of `console.error()`.
 *
 * @param {Function} fn - the function to deprecate
 * @param {String} msg - the string to print to the console when `fn` is invoked
 * @returns {Function} a new "deprecated" version of `fn`
 * @api public
 */

function deprecate (fn, msg) {
  if (config('noDeprecation')) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (config('throwDeprecation')) {
        throw new Error(msg);
      } else if (config('traceDeprecation')) {
        console.trace(msg);
      } else {
        console.warn(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
}

/**
 * Checks `localStorage` for boolean values for the given `name`.
 *
 * @param {String} name
 * @returns {Boolean}
 * @api private
 */

function config (name) {
  // accessing global.localStorage can trigger a DOMException in sandboxed iframes
  try {
    if (!global.localStorage) return false;
  } catch (_) {
    return false;
  }
  var val = global.localStorage[name];
  if (null == val) return false;
  return String(val).toLowerCase() === 'true';
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],20:[function(require,module,exports){
module.exports = require('./readable').PassThrough

},{"./readable":21}],21:[function(require,module,exports){
exports = module.exports = require('./lib/_stream_readable.js');
exports.Stream = exports;
exports.Readable = exports;
exports.Writable = require('./lib/_stream_writable.js');
exports.Duplex = require('./lib/_stream_duplex.js');
exports.Transform = require('./lib/_stream_transform.js');
exports.PassThrough = require('./lib/_stream_passthrough.js');

},{"./lib/_stream_duplex.js":7,"./lib/_stream_passthrough.js":8,"./lib/_stream_readable.js":9,"./lib/_stream_transform.js":10,"./lib/_stream_writable.js":11}],22:[function(require,module,exports){
module.exports = require('./readable').Transform

},{"./readable":21}],23:[function(require,module,exports){
module.exports = require('./lib/_stream_writable.js');

},{"./lib/_stream_writable.js":11}],24:[function(require,module,exports){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

module.exports = Stream;

var EE = require('events').EventEmitter;
var inherits = require('inherits');

inherits(Stream, EE);
Stream.Readable = require('readable-stream/readable.js');
Stream.Writable = require('readable-stream/writable.js');
Stream.Duplex = require('readable-stream/duplex.js');
Stream.Transform = require('readable-stream/transform.js');
Stream.PassThrough = require('readable-stream/passthrough.js');

// Backwards-compat with node 0.4.x
Stream.Stream = Stream;



// old-style streams.  Note that the pipe method (the only relevant
// part of this class) is overridden in the Readable class.

function Stream() {
  EE.call(this);
}

Stream.prototype.pipe = function(dest, options) {
  var source = this;

  function ondata(chunk) {
    if (dest.writable) {
      if (false === dest.write(chunk) && source.pause) {
        source.pause();
      }
    }
  }

  source.on('data', ondata);

  function ondrain() {
    if (source.readable && source.resume) {
      source.resume();
    }
  }

  dest.on('drain', ondrain);

  // If the 'end' option is not supplied, dest.end() will be called when
  // source gets the 'end' or 'close' events.  Only dest.end() once.
  if (!dest._isStdio && (!options || options.end !== false)) {
    source.on('end', onend);
    source.on('close', onclose);
  }

  var didOnEnd = false;
  function onend() {
    if (didOnEnd) return;
    didOnEnd = true;

    dest.end();
  }


  function onclose() {
    if (didOnEnd) return;
    didOnEnd = true;

    if (typeof dest.destroy === 'function') dest.destroy();
  }

  // don't leave dangling pipes when there are errors.
  function onerror(er) {
    cleanup();
    if (EE.listenerCount(this, 'error') === 0) {
      throw er; // Unhandled stream error in pipe.
    }
  }

  source.on('error', onerror);
  dest.on('error', onerror);

  // remove all the event listeners that were added.
  function cleanup() {
    source.removeListener('data', ondata);
    dest.removeListener('drain', ondrain);

    source.removeListener('end', onend);
    source.removeListener('close', onclose);

    source.removeListener('error', onerror);
    dest.removeListener('error', onerror);

    source.removeListener('end', cleanup);
    source.removeListener('close', cleanup);

    dest.removeListener('close', cleanup);
  }

  source.on('end', cleanup);
  source.on('close', cleanup);

  dest.on('close', cleanup);

  dest.emit('pipe', source);

  // Allow for unix-like usage: A.pipe(B).pipe(C)
  return dest;
};

},{"events":28,"inherits":3,"readable-stream/duplex.js":6,"readable-stream/passthrough.js":20,"readable-stream/readable.js":21,"readable-stream/transform.js":22,"readable-stream/writable.js":23}],25:[function(require,module,exports){
'use strict'

exports.byteLength = byteLength
exports.toByteArray = toByteArray
exports.fromByteArray = fromByteArray

var lookup = []
var revLookup = []
var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array

var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
for (var i = 0, len = code.length; i < len; ++i) {
  lookup[i] = code[i]
  revLookup[code.charCodeAt(i)] = i
}

revLookup['-'.charCodeAt(0)] = 62
revLookup['_'.charCodeAt(0)] = 63

function placeHoldersCount (b64) {
  var len = b64.length
  if (len % 4 > 0) {
    throw new Error('Invalid string. Length must be a multiple of 4')
  }

  // the number of equal signs (place holders)
  // if there are two placeholders, than the two characters before it
  // represent one byte
  // if there is only one, then the three characters before it represent 2 bytes
  // this is just a cheap hack to not do indexOf twice
  return b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0
}

function byteLength (b64) {
  // base64 is 4/3 + up to two characters of the original data
  return b64.length * 3 / 4 - placeHoldersCount(b64)
}

function toByteArray (b64) {
  var i, j, l, tmp, placeHolders, arr
  var len = b64.length
  placeHolders = placeHoldersCount(b64)

  arr = new Arr(len * 3 / 4 - placeHolders)

  // if there are placeholders, only get up to the last complete 4 chars
  l = placeHolders > 0 ? len - 4 : len

  var L = 0

  for (i = 0, j = 0; i < l; i += 4, j += 3) {
    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]
    arr[L++] = (tmp >> 16) & 0xFF
    arr[L++] = (tmp >> 8) & 0xFF
    arr[L++] = tmp & 0xFF
  }

  if (placeHolders === 2) {
    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)
    arr[L++] = tmp & 0xFF
  } else if (placeHolders === 1) {
    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)
    arr[L++] = (tmp >> 8) & 0xFF
    arr[L++] = tmp & 0xFF
  }

  return arr
}

function tripletToBase64 (num) {
  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]
}

function encodeChunk (uint8, start, end) {
  var tmp
  var output = []
  for (var i = start; i < end; i += 3) {
    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])
    output.push(tripletToBase64(tmp))
  }
  return output.join('')
}

function fromByteArray (uint8) {
  var tmp
  var len = uint8.length
  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes
  var output = ''
  var parts = []
  var maxChunkLength = 16383 // must be multiple of 3

  // go through the array every three bytes, we'll deal with trailing stuff later
  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {
    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))
  }

  // pad the end with zeros, but make sure to not forget the extra bytes
  if (extraBytes === 1) {
    tmp = uint8[len - 1]
    output += lookup[tmp >> 2]
    output += lookup[(tmp << 4) & 0x3F]
    output += '=='
  } else if (extraBytes === 2) {
    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])
    output += lookup[tmp >> 10]
    output += lookup[(tmp >> 4) & 0x3F]
    output += lookup[(tmp << 2) & 0x3F]
    output += '='
  }

  parts.push(output)

  return parts.join('')
}

},{}],26:[function(require,module,exports){
exports.read = function (buffer, offset, isLE, mLen, nBytes) {
  var e, m
  var eLen = nBytes * 8 - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var nBits = -7
  var i = isLE ? (nBytes - 1) : 0
  var d = isLE ? -1 : 1
  var s = buffer[offset + i]

  i += d

  e = s & ((1 << (-nBits)) - 1)
  s >>= (-nBits)
  nBits += eLen
  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}

  m = e & ((1 << (-nBits)) - 1)
  e >>= (-nBits)
  nBits += mLen
  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}

  if (e === 0) {
    e = 1 - eBias
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity)
  } else {
    m = m + Math.pow(2, mLen)
    e = e - eBias
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)
}

exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c
  var eLen = nBytes * 8 - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)
  var i = isLE ? 0 : (nBytes - 1)
  var d = isLE ? 1 : -1
  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0

  value = Math.abs(value)

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0
    e = eMax
  } else {
    e = Math.floor(Math.log(value) / Math.LN2)
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--
      c *= 2
    }
    if (e + eBias >= 1) {
      value += rt / c
    } else {
      value += rt * Math.pow(2, 1 - eBias)
    }
    if (value * c >= 2) {
      e++
      c /= 2
    }

    if (e + eBias >= eMax) {
      m = 0
      e = eMax
    } else if (e + eBias >= 1) {
      m = (value * c - 1) * Math.pow(2, mLen)
      e = e + eBias
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)
      e = 0
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}

  e = (e << mLen) | m
  eLen += mLen
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}

  buffer[offset + i - d] |= s * 128
}

},{}],27:[function(require,module,exports){
arguments[4][16][0].apply(exports,arguments)
},{"dup":16}],28:[function(require,module,exports){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

function EventEmitter() {
  this._events = this._events || {};
  this._maxListeners = this._maxListeners || undefined;
}
module.exports = EventEmitter;

// Backwards-compat with node 0.10.x
EventEmitter.EventEmitter = EventEmitter;

EventEmitter.prototype._events = undefined;
EventEmitter.prototype._maxListeners = undefined;

// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
EventEmitter.defaultMaxListeners = 10;

// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
EventEmitter.prototype.setMaxListeners = function(n) {
  if (!isNumber(n) || n < 0 || isNaN(n))
    throw TypeError('n must be a positive number');
  this._maxListeners = n;
  return this;
};

EventEmitter.prototype.emit = function(type) {
  var er, handler, len, args, i, listeners;

  if (!this._events)
    this._events = {};

  // If there is no 'error' event listener then throw.
  if (type === 'error') {
    if (!this._events.error ||
        (isObject(this._events.error) && !this._events.error.length)) {
      er = arguments[1];
      if (er instanceof Error) {
        throw er; // Unhandled 'error' event
      } else {
        // At least give some kind of context to the user
        var err = new Error('Uncaught, unspecified "error" event. (' + er + ')');
        err.context = er;
        throw err;
      }
    }
  }

  handler = this._events[type];

  if (isUndefined(handler))
    return false;

  if (isFunction(handler)) {
    switch (arguments.length) {
      // fast cases
      case 1:
        handler.call(this);
        break;
      case 2:
        handler.call(this, arguments[1]);
        break;
      case 3:
        handler.call(this, arguments[1], arguments[2]);
        break;
      // slower
      default:
        args = Array.prototype.slice.call(arguments, 1);
        handler.apply(this, args);
    }
  } else if (isObject(handler)) {
    args = Array.prototype.slice.call(arguments, 1);
    listeners = handler.slice();
    len = listeners.length;
    for (i = 0; i < len; i++)
      listeners[i].apply(this, args);
  }

  return true;
};

EventEmitter.prototype.addListener = function(type, listener) {
  var m;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events)
    this._events = {};

  // To avoid recursion in the case that type === "newListener"! Before
  // adding it to the listeners, first emit "newListener".
  if (this._events.newListener)
    this.emit('newListener', type,
              isFunction(listener.listener) ?
              listener.listener : listener);

  if (!this._events[type])
    // Optimize the case of one listener. Don't need the extra array object.
    this._events[type] = listener;
  else if (isObject(this._events[type]))
    // If we've already got an array, just append.
    this._events[type].push(listener);
  else
    // Adding the second element, need to change to array.
    this._events[type] = [this._events[type], listener];

  // Check for listener leak
  if (isObject(this._events[type]) && !this._events[type].warned) {
    if (!isUndefined(this._maxListeners)) {
      m = this._maxListeners;
    } else {
      m = EventEmitter.defaultMaxListeners;
    }

    if (m && m > 0 && this._events[type].length > m) {
      this._events[type].warned = true;
      console.error('(node) warning: possible EventEmitter memory ' +
                    'leak detected. %d listeners added. ' +
                    'Use emitter.setMaxListeners() to increase limit.',
                    this._events[type].length);
      if (typeof console.trace === 'function') {
        // not supported in IE 10
        console.trace();
      }
    }
  }

  return this;
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.once = function(type, listener) {
  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  var fired = false;

  function g() {
    this.removeListener(type, g);

    if (!fired) {
      fired = true;
      listener.apply(this, arguments);
    }
  }

  g.listener = listener;
  this.on(type, g);

  return this;
};

// emits a 'removeListener' event iff the listener was removed
EventEmitter.prototype.removeListener = function(type, listener) {
  var list, position, length, i;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events || !this._events[type])
    return this;

  list = this._events[type];
  length = list.length;
  position = -1;

  if (list === listener ||
      (isFunction(list.listener) && list.listener === listener)) {
    delete this._events[type];
    if (this._events.removeListener)
      this.emit('removeListener', type, listener);

  } else if (isObject(list)) {
    for (i = length; i-- > 0;) {
      if (list[i] === listener ||
          (list[i].listener && list[i].listener === listener)) {
        position = i;
        break;
      }
    }

    if (position < 0)
      return this;

    if (list.length === 1) {
      list.length = 0;
      delete this._events[type];
    } else {
      list.splice(position, 1);
    }

    if (this._events.removeListener)
      this.emit('removeListener', type, listener);
  }

  return this;
};

EventEmitter.prototype.removeAllListeners = function(type) {
  var key, listeners;

  if (!this._events)
    return this;

  // not listening for removeListener, no need to emit
  if (!this._events.removeListener) {
    if (arguments.length === 0)
      this._events = {};
    else if (this._events[type])
      delete this._events[type];
    return this;
  }

  // emit removeListener for all listeners on all events
  if (arguments.length === 0) {
    for (key in this._events) {
      if (key === 'removeListener') continue;
      this.removeAllListeners(key);
    }
    this.removeAllListeners('removeListener');
    this._events = {};
    return this;
  }

  listeners = this._events[type];

  if (isFunction(listeners)) {
    this.removeListener(type, listeners);
  } else if (listeners) {
    // LIFO order
    while (listeners.length)
      this.removeListener(type, listeners[listeners.length - 1]);
  }
  delete this._events[type];

  return this;
};

EventEmitter.prototype.listeners = function(type) {
  var ret;
  if (!this._events || !this._events[type])
    ret = [];
  else if (isFunction(this._events[type]))
    ret = [this._events[type]];
  else
    ret = this._events[type].slice();
  return ret;
};

EventEmitter.prototype.listenerCount = function(type) {
  if (this._events) {
    var evlistener = this._events[type];

    if (isFunction(evlistener))
      return 1;
    else if (evlistener)
      return evlistener.length;
  }
  return 0;
};

EventEmitter.listenerCount = function(emitter, type) {
  return emitter.listenerCount(type);
};

function isFunction(arg) {
  return typeof arg === 'function';
}

function isNumber(arg) {
  return typeof arg === 'number';
}

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}

function isUndefined(arg) {
  return arg === void 0;
}

},{}],29:[function(require,module,exports){
module.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomsvc+xml":["atomsvc"],"application/ccxml+xml":["ccxml"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mdp"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/font-tdpfr":["pfr"],"application/font-woff":["woff"],"application/font-woff2":["woff2"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/java-archive":["jar"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/prs.cww":["cww"],"application/pskc+xml":["pskcxml"],"application/rdf+xml":["rdf"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/voicexml+xml":["vxml"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["dmg"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-otf":["otf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-ttf":["ttf","ttc"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["iso"],"application/x-java-jnlp-file":["jnlp"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdownload":["exe","dll","com","bat","msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["wmf","wmz","emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-nzb":["nzb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["rar"],"application/x-research-info-systems":["ris"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["obj"],"application/x-ustar":["ustar"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt"],"application/x-xfig":["fig"],"application/x-xliff+xml":["xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"application/xaml+xml":["xaml"],"application/xcap-diff+xml":["xdf"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xml":["xml","xsl","xsd"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mp4":["mp4a","m4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/webm":["weba"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-wav":["wav"],"audio/xm":["xm"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"font/opentype":["otf"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/g3fax":["g3"],"image/gif":["gif"],"image/ief":["ief"],"image/jpeg":["jpeg","jpg","jpe"],"image/ktx":["ktx"],"image/png":["png"],"image/prs.btif":["btif"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/tiff":["tiff","tif"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/webp":["webp"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["ico"],"image/x-mrsid-image":["sid"],"image/x-pcx":["pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/rfc822":["eml","mime"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.vtu":["vtu"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["x3db","x3dbz"],"model/x3d+vrml":["x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee"],"text/css":["css"],"text/csv":["csv"],"text/hjson":["hjson"],"text/html":["html","htm"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/prs.lines.tag":["dsc"],"text/richtext":["rtx"],"text/sgml":["sgml","sgm"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/vtt":["vtt"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["markdown","md","mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-pascal":["p","pas"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/webm":["webm"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}

},{}],30:[function(require,module,exports){
/* eslint quote-props: 0 */

'use strict';

const path = require('path');

const defaultMimeType = 'application/octet-stream';
const defaultExtension = 'bin';

const mimeTypes = new Map([
    ['application/acad', 'dwg'],
    ['application/applixware', 'aw'],
    ['application/arj', 'arj'],
    ['application/atom+xml', 'xml'],
    ['application/atomcat+xml', 'atomcat'],
    ['application/atomsvc+xml', 'atomsvc'],
    ['application/base64', ['mm', 'mme']],
    ['application/binhex', 'hqx'],
    ['application/binhex4', 'hqx'],
    ['application/book', ['book', 'boo']],
    ['application/ccxml+xml,', 'ccxml'],
    ['application/cdf', 'cdf'],
    ['application/cdmi-capability', 'cdmia'],
    ['application/cdmi-container', 'cdmic'],
    ['application/cdmi-domain', 'cdmid'],
    ['application/cdmi-object', 'cdmio'],
    ['application/cdmi-queue', 'cdmiq'],
    ['application/clariscad', 'ccad'],
    ['application/commonground', 'dp'],
    ['application/cu-seeme', 'cu'],
    ['application/davmount+xml', 'davmount'],
    ['application/drafting', 'drw'],
    ['application/dsptype', 'tsp'],
    ['application/dssc+der', 'dssc'],
    ['application/dssc+xml', 'xdssc'],
    ['application/dxf', 'dxf'],
    ['application/ecmascript', ['js', 'es']],
    ['application/emma+xml', 'emma'],
    ['application/envoy', 'evy'],
    ['application/epub+zip', 'epub'],
    ['application/excel', ['xls',
        'xl',
        'xla',
        'xlb',
        'xlc',
        'xld',
        'xlk',
        'xll',
        'xlm',
        'xlt',
        'xlv',
        'xlw'
    ]],
    ['application/exi', 'exi'],
    ['application/font-tdpfr', 'pfr'],
    ['application/fractals', 'fif'],
    ['application/freeloader', 'frl'],
    ['application/futuresplash', 'spl'],
    ['application/gnutar', 'tgz'],
    ['application/groupwise', 'vew'],
    ['application/hlp', 'hlp'],
    ['application/hta', 'hta'],
    ['application/hyperstudio', 'stk'],
    ['application/i-deas', 'unv'],
    ['application/iges', ['iges', 'igs']],
    ['application/inf', 'inf'],
    ['application/internet-property-stream', 'acx'],
    ['application/ipfix', 'ipfix'],
    ['application/java', 'class'],
    ['application/java-archive', 'jar'],
    ['application/java-byte-code', 'class'],
    ['application/java-serialized-object', 'ser'],
    ['application/java-vm', 'class'],
    ['application/javascript', 'js'],
    ['application/json', 'json'],
    ['application/lha', 'lha'],
    ['application/lzx', 'lzx'],
    ['application/mac-binary', 'bin'],
    ['application/mac-binhex', 'hqx'],
    ['application/mac-binhex40', 'hqx'],
    ['application/mac-compactpro', 'cpt'],
    ['application/macbinary', 'bin'],
    ['application/mads+xml', 'mads'],
    ['application/marc', 'mrc'],
    ['application/marcxml+xml', 'mrcx'],
    ['application/mathematica', 'ma'],
    ['application/mathml+xml', 'mathml'],
    ['application/mbedlet', 'mbd'],
    ['application/mbox', 'mbox'],
    ['application/mcad', 'mcd'],
    ['application/mediaservercontrol+xml', 'mscml'],
    ['application/metalink4+xml', 'meta4'],
    ['application/mets+xml', 'mets'],
    ['application/mime', 'aps'],
    ['application/mods+xml', 'mods'],
    ['application/mp21', 'm21'],
    ['application/mp4', 'mp4'],
    ['application/mspowerpoint', ['ppt', 'pot', 'pps', 'ppz']],
    ['application/msword', ['doc', 'dot', 'w6w', 'wiz', 'word']],
    ['application/mswrite', 'wri'],
    ['application/mxf', 'mxf'],
    ['application/netmc', 'mcp'],
    ['application/octet-stream', ['*']],
    ['application/oda', 'oda'],
    ['application/oebps-package+xml', 'opf'],
    ['application/ogg', 'ogx'],
    ['application/olescript', 'axs'],
    ['application/onenote', 'onetoc'],
    ['application/patch-ops-error+xml', 'xer'],
    ['application/pdf', 'pdf'],
    ['application/pgp-encrypted', 'asc'],
    ['application/pgp-signature', 'pgp'],
    ['application/pics-rules', 'prf'],
    ['application/pkcs-12', 'p12'],
    ['application/pkcs-crl', 'crl'],
    ['application/pkcs10', 'p10'],
    ['application/pkcs7-mime', ['p7c', 'p7m']],
    ['application/pkcs7-signature', 'p7s'],
    ['application/pkcs8', 'p8'],
    ['application/pkix-attr-cert', 'ac'],
    ['application/pkix-cert', ['cer', 'crt']],
    ['application/pkix-crl', 'crl'],
    ['application/pkix-pkipath', 'pkipath'],
    ['application/pkixcmp', 'pki'],
    ['application/plain', 'text'],
    ['application/pls+xml', 'pls'],
    ['application/postscript', ['ps', 'ai', 'eps']],
    ['application/powerpoint', 'ppt'],
    ['application/pro_eng', ['part', 'prt']],
    ['application/prs.cww', 'cww'],
    ['application/pskc+xml', 'pskcxml'],
    ['application/rdf+xml', 'rdf'],
    ['application/reginfo+xml', 'rif'],
    ['application/relax-ng-compact-syntax', 'rnc'],
    ['application/resource-lists+xml', 'rl'],
    ['application/resource-lists-diff+xml', 'rld'],
    ['application/ringing-tones', 'rng'],
    ['application/rls-services+xml', 'rs'],
    ['application/rsd+xml', 'rsd'],
    ['application/rss+xml', 'xml'],
    ['application/rtf', ['rtf', 'rtx']],
    ['application/sbml+xml', 'sbml'],
    ['application/scvp-cv-request', 'scq'],
    ['application/scvp-cv-response', 'scs'],
    ['application/scvp-vp-request', 'spq'],
    ['application/scvp-vp-response', 'spp'],
    ['application/sdp', 'sdp'],
    ['application/sea', 'sea'],
    ['application/set', 'set'],
    ['application/set-payment-initiation', 'setpay'],
    ['application/set-registration-initiation', 'setreg'],
    ['application/shf+xml', 'shf'],
    ['application/sla', 'stl'],
    ['application/smil', ['smi', 'smil']],
    ['application/smil+xml', 'smi'],
    ['application/solids', 'sol'],
    ['application/sounder', 'sdr'],
    ['application/sparql-query', 'rq'],
    ['application/sparql-results+xml', 'srx'],
    ['application/srgs', 'gram'],
    ['application/srgs+xml', 'grxml'],
    ['application/sru+xml', 'sru'],
    ['application/ssml+xml', 'ssml'],
    ['application/step', ['step', 'stp']],
    ['application/streamingmedia', 'ssm'],
    ['application/tei+xml', 'tei'],
    ['application/thraud+xml', 'tfi'],
    ['application/timestamped-data', 'tsd'],
    ['application/toolbook', 'tbk'],
    ['application/vda', 'vda'],
    ['application/vnd.3gpp.pic-bw-large', 'plb'],
    ['application/vnd.3gpp.pic-bw-small', 'psb'],
    ['application/vnd.3gpp.pic-bw-var', 'pvb'],
    ['application/vnd.3gpp2.tcap', 'tcap'],
    ['application/vnd.3m.post-it-notes', 'pwn'],
    ['application/vnd.accpac.simply.aso', 'aso'],
    ['application/vnd.accpac.simply.imp', 'imp'],
    ['application/vnd.acucobol', 'acu'],
    ['application/vnd.acucorp', 'atc'],
    ['application/vnd.adobe.air-application-installer-package+zip',
        'air'
    ],
    ['application/vnd.adobe.fxp', 'fxp'],
    ['application/vnd.adobe.xdp+xml', 'xdp'],
    ['application/vnd.adobe.xfdf', 'xfdf'],
    ['application/vnd.ahead.space', 'ahead'],
    ['application/vnd.airzip.filesecure.azf', 'azf'],
    ['application/vnd.airzip.filesecure.azs', 'azs'],
    ['application/vnd.amazon.ebook', 'azw'],
    ['application/vnd.americandynamics.acc', 'acc'],
    ['application/vnd.amiga.ami', 'ami'],
    ['application/vnd.android.package-archive', 'apk'],
    ['application/vnd.anser-web-certificate-issue-initiation',
        'cii'
    ],
    ['application/vnd.anser-web-funds-transfer-initiation', 'fti'],
    ['application/vnd.antix.game-component', 'atx'],
    ['application/vnd.apple.installer+xml', 'mpkg'],
    ['application/vnd.apple.mpegurl', 'm3u8'],
    ['application/vnd.aristanetworks.swi', 'swi'],
    ['application/vnd.audiograph', 'aep'],
    ['application/vnd.blueice.multipass', 'mpm'],
    ['application/vnd.bmi', 'bmi'],
    ['application/vnd.businessobjects', 'rep'],
    ['application/vnd.chemdraw+xml', 'cdxml'],
    ['application/vnd.chipnuts.karaoke-mmd', 'mmd'],
    ['application/vnd.cinderella', 'cdy'],
    ['application/vnd.claymore', 'cla'],
    ['application/vnd.cloanto.rp9', 'rp9'],
    ['application/vnd.clonk.c4group', 'c4g'],
    ['application/vnd.cluetrust.cartomobile-config', 'c11amc'],
    ['application/vnd.cluetrust.cartomobile-config-pkg', 'c11amz'],
    ['application/vnd.commonspace', 'csp'],
    ['application/vnd.contact.cmsg', 'cdbcmsg'],
    ['application/vnd.cosmocaller', 'cmc'],
    ['application/vnd.crick.clicker', 'clkx'],
    ['application/vnd.crick.clicker.keyboard', 'clkk'],
    ['application/vnd.crick.clicker.palette', 'clkp'],
    ['application/vnd.crick.clicker.template', 'clkt'],
    ['application/vnd.crick.clicker.wordbank', 'clkw'],
    ['application/vnd.criticaltools.wbs+xml', 'wbs'],
    ['application/vnd.ctc-posml', 'pml'],
    ['application/vnd.cups-ppd', 'ppd'],
    ['application/vnd.curl.car', 'car'],
    ['application/vnd.curl.pcurl', 'pcurl'],
    ['application/vnd.data-vision.rdz', 'rdz'],
    ['application/vnd.denovo.fcselayout-link', 'fe_launch'],
    ['application/vnd.dna', 'dna'],
    ['application/vnd.dolby.mlp', 'mlp'],
    ['application/vnd.dpgraph', 'dpg'],
    ['application/vnd.dreamfactory', 'dfac'],
    ['application/vnd.dvb.ait', 'ait'],
    ['application/vnd.dvb.service', 'svc'],
    ['application/vnd.dynageo', 'geo'],
    ['application/vnd.ecowin.chart', 'mag'],
    ['application/vnd.enliven', 'nml'],
    ['application/vnd.epson.esf', 'esf'],
    ['application/vnd.epson.msf', 'msf'],
    ['application/vnd.epson.quickanime', 'qam'],
    ['application/vnd.epson.salt', 'slt'],
    ['application/vnd.epson.ssf', 'ssf'],
    ['application/vnd.eszigno3+xml', 'es3'],
    ['application/vnd.ezpix-album', 'ez2'],
    ['application/vnd.ezpix-package', 'ez3'],
    ['application/vnd.fdf', 'fdf'],
    ['application/vnd.fdsn.seed', 'seed'],
    ['application/vnd.flographit', 'gph'],
    ['application/vnd.fluxtime.clip', 'ftc'],
    ['application/vnd.framemaker', 'fm'],
    ['application/vnd.frogans.fnc', 'fnc'],
    ['application/vnd.frogans.ltf', 'ltf'],
    ['application/vnd.fsc.weblaunch', 'fsc'],
    ['application/vnd.fujitsu.oasys', 'oas'],
    ['application/vnd.fujitsu.oasys2', 'oa2'],
    ['application/vnd.fujitsu.oasys3', 'oa3'],
    ['application/vnd.fujitsu.oasysgp', 'fg5'],
    ['application/vnd.fujitsu.oasysprs', 'bh2'],
    ['application/vnd.fujixerox.ddd', 'ddd'],
    ['application/vnd.fujixerox.docuworks', 'xdw'],
    ['application/vnd.fujixerox.docuworks.binder', 'xbd'],
    ['application/vnd.fuzzysheet', 'fzs'],
    ['application/vnd.genomatix.tuxedo', 'txd'],
    ['application/vnd.geogebra.file', 'ggb'],
    ['application/vnd.geogebra.tool', 'ggt'],
    ['application/vnd.geometry-explorer', 'gex'],
    ['application/vnd.geonext', 'gxt'],
    ['application/vnd.geoplan', 'g2w'],
    ['application/vnd.geospace', 'g3w'],
    ['application/vnd.gmx', 'gmx'],
    ['application/vnd.google-earth.kml+xml', 'kml'],
    ['application/vnd.google-earth.kmz', 'kmz'],
    ['application/vnd.grafeq', 'gqf'],
    ['application/vnd.groove-account', 'gac'],
    ['application/vnd.groove-help', 'ghf'],
    ['application/vnd.groove-identity-message', 'gim'],
    ['application/vnd.groove-injector', 'grv'],
    ['application/vnd.groove-tool-message', 'gtm'],
    ['application/vnd.groove-tool-template', 'tpl'],
    ['application/vnd.groove-vcard', 'vcg'],
    ['application/vnd.hal+xml', 'hal'],
    ['application/vnd.handheld-entertainment+xml', 'zmm'],
    ['application/vnd.hbci', 'hbci'],
    ['application/vnd.hhe.lesson-player', 'les'],
    ['application/vnd.hp-hpgl', ['hgl', 'hpg', 'hpgl']],
    ['application/vnd.hp-hpid', 'hpid'],
    ['application/vnd.hp-hps', 'hps'],
    ['application/vnd.hp-jlyt', 'jlt'],
    ['application/vnd.hp-pcl', 'pcl'],
    ['application/vnd.hp-pclxl', 'pclxl'],
    ['application/vnd.hydrostatix.sof-data', 'sfd-hdstx'],
    ['application/vnd.hzn-3d-crossword', 'x3d'],
    ['application/vnd.ibm.minipay', 'mpy'],
    ['application/vnd.ibm.modcap', 'afp'],
    ['application/vnd.ibm.rights-management', 'irm'],
    ['application/vnd.ibm.secure-container', 'sc'],
    ['application/vnd.iccprofile', 'icc'],
    ['application/vnd.igloader', 'igl'],
    ['application/vnd.immervision-ivp', 'ivp'],
    ['application/vnd.immervision-ivu', 'ivu'],
    ['application/vnd.insors.igm', 'igm'],
    ['application/vnd.intercon.formnet', 'xpw'],
    ['application/vnd.intergeo', 'i2g'],
    ['application/vnd.intu.qbo', 'qbo'],
    ['application/vnd.intu.qfx', 'qfx'],
    ['application/vnd.ipunplugged.rcprofile', 'rcprofile'],
    ['application/vnd.irepository.package+xml', 'irp'],
    ['application/vnd.is-xpr', 'xpr'],
    ['application/vnd.isac.fcs', 'fcs'],
    ['application/vnd.jam', 'jam'],
    ['application/vnd.jcp.javame.midlet-rms', 'rms'],
    ['application/vnd.jisp', 'jisp'],
    ['application/vnd.joost.joda-archive', 'joda'],
    ['application/vnd.kahootz', 'ktz'],
    ['application/vnd.kde.karbon', 'karbon'],
    ['application/vnd.kde.kchart', 'chrt'],
    ['application/vnd.kde.kformula', 'kfo'],
    ['application/vnd.kde.kivio', 'flw'],
    ['application/vnd.kde.kontour', 'kon'],
    ['application/vnd.kde.kpresenter', 'kpr'],
    ['application/vnd.kde.kspread', 'ksp'],
    ['application/vnd.kde.kword', 'kwd'],
    ['application/vnd.kenameaapp', 'htke'],
    ['application/vnd.kidspiration', 'kia'],
    ['application/vnd.kinar', 'kne'],
    ['application/vnd.koan', 'skp'],
    ['application/vnd.kodak-descriptor', 'sse'],
    ['application/vnd.las.las+xml', 'lasxml'],
    ['application/vnd.llamagraphics.life-balance.desktop', 'lbd'],
    ['application/vnd.llamagraphics.life-balance.exchange+xml',
        'lbe'
    ],
    ['application/vnd.lotus-1-2-3', '123'],
    ['application/vnd.lotus-approach', 'apr'],
    ['application/vnd.lotus-freelance', 'pre'],
    ['application/vnd.lotus-notes', 'nsf'],
    ['application/vnd.lotus-organizer', 'org'],
    ['application/vnd.lotus-screencam', 'scm'],
    ['application/vnd.lotus-wordpro', 'lwp'],
    ['application/vnd.macports.portpkg', 'portpkg'],
    ['application/vnd.mcd', 'mcd'],
    ['application/vnd.medcalcdata', 'mc1'],
    ['application/vnd.mediastation.cdkey', 'cdkey'],
    ['application/vnd.mfer', 'mwf'],
    ['application/vnd.mfmp', 'mfm'],
    ['application/vnd.micrografx.flo', 'flo'],
    ['application/vnd.micrografx.igx', 'igx'],
    ['application/vnd.mif', 'mif'],
    ['application/vnd.mobius.daf', 'daf'],
    ['application/vnd.mobius.dis', 'dis'],
    ['application/vnd.mobius.mbk', 'mbk'],
    ['application/vnd.mobius.mqy', 'mqy'],
    ['application/vnd.mobius.msl', 'msl'],
    ['application/vnd.mobius.plc', 'plc'],
    ['application/vnd.mobius.txf', 'txf'],
    ['application/vnd.mophun.application', 'mpn'],
    ['application/vnd.mophun.certificate', 'mpc'],
    ['application/vnd.mozilla.xul+xml', 'xul'],
    ['application/vnd.ms-artgalry', 'cil'],
    ['application/vnd.ms-cab-compressed', 'cab'],
    ['application/vnd.ms-excel', ['xls', 'xla', 'xlc', 'xlm', 'xlt', 'xlw', 'xlb', 'xll']],
    ['application/vnd.ms-excel.addin.macroenabled.12', 'xlam'],
    ['application/vnd.ms-excel.sheet.binary.macroenabled.12',
        'xlsb'
    ],
    ['application/vnd.ms-excel.sheet.macroenabled.12', 'xlsm'],
    ['application/vnd.ms-excel.template.macroenabled.12', 'xltm'],
    ['application/vnd.ms-fontobject', 'eot'],
    ['application/vnd.ms-htmlhelp', 'chm'],
    ['application/vnd.ms-ims', 'ims'],
    ['application/vnd.ms-lrm', 'lrm'],
    ['application/vnd.ms-officetheme', 'thmx'],
    ['application/vnd.ms-outlook', 'msg'],
    ['application/vnd.ms-pki.certstore', 'sst'],
    ['application/vnd.ms-pki.pko', 'pko'],
    ['application/vnd.ms-pki.seccat', 'cat'],
    ['application/vnd.ms-pki.stl', 'stl'],
    ['application/vnd.ms-pkicertstore', 'sst'],
    ['application/vnd.ms-pkiseccat', 'cat'],
    ['application/vnd.ms-pkistl', 'stl'],
    ['application/vnd.ms-powerpoint', ['ppt', 'pot', 'pps', 'ppa', 'pwz']],
    ['application/vnd.ms-powerpoint.addin.macroenabled.12',
        'ppam'
    ],
    ['application/vnd.ms-powerpoint.presentation.macroenabled.12',
        'pptm'
    ],
    ['application/vnd.ms-powerpoint.slide.macroenabled.12',
        'sldm'
    ],
    ['application/vnd.ms-powerpoint.slideshow.macroenabled.12',
        'ppsm'
    ],
    ['application/vnd.ms-powerpoint.template.macroenabled.12',
        'potm'
    ],
    ['application/vnd.ms-project', 'mpp'],
    ['application/vnd.ms-word.document.macroenabled.12', 'docm'],
    ['application/vnd.ms-word.template.macroenabled.12', 'dotm'],
    ['application/vnd.ms-works', ['wks', 'wcm', 'wdb', 'wps']],
    ['application/vnd.ms-wpl', 'wpl'],
    ['application/vnd.ms-xpsdocument', 'xps'],
    ['application/vnd.mseq', 'mseq'],
    ['application/vnd.musician', 'mus'],
    ['application/vnd.muvee.style', 'msty'],
    ['application/vnd.neurolanguage.nlu', 'nlu'],
    ['application/vnd.noblenet-directory', 'nnd'],
    ['application/vnd.noblenet-sealer', 'nns'],
    ['application/vnd.noblenet-web', 'nnw'],
    ['application/vnd.nokia.configuration-message', 'ncm'],
    ['application/vnd.nokia.n-gage.data', 'ngdat'],
    ['application/vnd.nokia.n-gage.symbian.install', 'n-gage'],
    ['application/vnd.nokia.radio-preset', 'rpst'],
    ['application/vnd.nokia.radio-presets', 'rpss'],
    ['application/vnd.nokia.ringing-tone', 'rng'],
    ['application/vnd.novadigm.edm', 'edm'],
    ['application/vnd.novadigm.edx', 'edx'],
    ['application/vnd.novadigm.ext', 'ext'],
    ['application/vnd.oasis.opendocument.chart', 'odc'],
    ['application/vnd.oasis.opendocument.chart-template', 'otc'],
    ['application/vnd.oasis.opendocument.database', 'odb'],
    ['application/vnd.oasis.opendocument.formula', 'odf'],
    ['application/vnd.oasis.opendocument.formula-template',
        'odft'
    ],
    ['application/vnd.oasis.opendocument.graphics', 'odg'],
    ['application/vnd.oasis.opendocument.graphics-template',
        'otg'
    ],
    ['application/vnd.oasis.opendocument.image', 'odi'],
    ['application/vnd.oasis.opendocument.image-template', 'oti'],
    ['application/vnd.oasis.opendocument.presentation', 'odp'],
    ['application/vnd.oasis.opendocument.presentation-template',
        'otp'
    ],
    ['application/vnd.oasis.opendocument.spreadsheet', 'ods'],
    ['application/vnd.oasis.opendocument.spreadsheet-template',
        'ots'
    ],
    ['application/vnd.oasis.opendocument.text', 'odt'],
    ['application/vnd.oasis.opendocument.text-master', 'odm'],
    ['application/vnd.oasis.opendocument.text-template', 'ott'],
    ['application/vnd.oasis.opendocument.text-web', 'oth'],
    ['application/vnd.olpc-sugar', 'xo'],
    ['application/vnd.oma.dd2+xml', 'dd2'],
    ['application/vnd.openofficeorg.extension', 'oxt'],
    ['application/vnd.openxmlformats-officedocument.presentationml.presentation',
        'pptx'
    ],
    ['application/vnd.openxmlformats-officedocument.presentationml.slide',
        'sldx'
    ],
    ['application/vnd.openxmlformats-officedocument.presentationml.slideshow',
        'ppsx'
    ],
    ['application/vnd.openxmlformats-officedocument.presentationml.template',
        'potx'
    ],
    ['application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
        'xlsx'
    ],
    ['application/vnd.openxmlformats-officedocument.spreadsheetml.template',
        'xltx'
    ],
    ['application/vnd.openxmlformats-officedocument.wordprocessingml.document',
        'docx'
    ],
    ['application/vnd.openxmlformats-officedocument.wordprocessingml.template',
        'dotx'
    ],
    ['application/vnd.osgeo.mapguide.package', 'mgp'],
    ['application/vnd.osgi.dp', 'dp'],
    ['application/vnd.palm', 'pdb'],
    ['application/vnd.pawaafile', 'paw'],
    ['application/vnd.pg.format', 'str'],
    ['application/vnd.pg.osasli', 'ei6'],
    ['application/vnd.picsel', 'efif'],
    ['application/vnd.pmi.widget', 'wg'],
    ['application/vnd.pocketlearn', 'plf'],
    ['application/vnd.powerbuilder6', 'pbd'],
    ['application/vnd.previewsystems.box', 'box'],
    ['application/vnd.proteus.magazine', 'mgz'],
    ['application/vnd.publishare-delta-tree', 'qps'],
    ['application/vnd.pvi.ptid1', 'ptid'],
    ['application/vnd.quark.quarkxpress', 'qxd'],
    ['application/vnd.realvnc.bed', 'bed'],
    ['application/vnd.recordare.musicxml', 'mxl'],
    ['application/vnd.recordare.musicxml+xml', 'musicxml'],
    ['application/vnd.rig.cryptonote', 'cryptonote'],
    ['application/vnd.rim.cod', 'cod'],
    ['application/vnd.rn-realmedia', 'rm'],
    ['application/vnd.rn-realplayer', 'rnx'],
    ['application/vnd.route66.link66+xml', 'link66'],
    ['application/vnd.sailingtracker.track', 'st'],
    ['application/vnd.seemail', 'see'],
    ['application/vnd.sema', 'sema'],
    ['application/vnd.semd', 'semd'],
    ['application/vnd.semf', 'semf'],
    ['application/vnd.shana.informed.formdata', 'ifm'],
    ['application/vnd.shana.informed.formtemplate', 'itp'],
    ['application/vnd.shana.informed.interchange', 'iif'],
    ['application/vnd.shana.informed.package', 'ipk'],
    ['application/vnd.simtech-mindmapper', 'twd'],
    ['application/vnd.smaf', 'mmf'],
    ['application/vnd.smart.teacher', 'teacher'],
    ['application/vnd.solent.sdkm+xml', 'sdkm'],
    ['application/vnd.spotfire.dxp', 'dxp'],
    ['application/vnd.spotfire.sfs', 'sfs'],
    ['application/vnd.stardivision.calc', 'sdc'],
    ['application/vnd.stardivision.draw', 'sda'],
    ['application/vnd.stardivision.impress', 'sdd'],
    ['application/vnd.stardivision.math', 'smf'],
    ['application/vnd.stardivision.writer', 'sdw'],
    ['application/vnd.stardivision.writer-global', 'sgl'],
    ['application/vnd.stepmania.stepchart', 'sm'],
    ['application/vnd.sun.xml.calc', 'sxc'],
    ['application/vnd.sun.xml.calc.template', 'stc'],
    ['application/vnd.sun.xml.draw', 'sxd'],
    ['application/vnd.sun.xml.draw.template', 'std'],
    ['application/vnd.sun.xml.impress', 'sxi'],
    ['application/vnd.sun.xml.impress.template', 'sti'],
    ['application/vnd.sun.xml.math', 'sxm'],
    ['application/vnd.sun.xml.writer', 'sxw'],
    ['application/vnd.sun.xml.writer.global', 'sxg'],
    ['application/vnd.sun.xml.writer.template', 'stw'],
    ['application/vnd.sus-calendar', 'sus'],
    ['application/vnd.svd', 'svd'],
    ['application/vnd.symbian.install', 'sis'],
    ['application/vnd.syncml+xml', 'xsm'],
    ['application/vnd.syncml.dm+wbxml', 'bdm'],
    ['application/vnd.syncml.dm+xml', 'xdm'],
    ['application/vnd.tao.intent-module-archive', 'tao'],
    ['application/vnd.tmobile-livetv', 'tmo'],
    ['application/vnd.trid.tpt', 'tpt'],
    ['application/vnd.triscape.mxs', 'mxs'],
    ['application/vnd.trueapp', 'tra'],
    ['application/vnd.ufdl', 'ufd'],
    ['application/vnd.uiq.theme', 'utz'],
    ['application/vnd.umajin', 'umj'],
    ['application/vnd.unity', 'unityweb'],
    ['application/vnd.uoml+xml', 'uoml'],
    ['application/vnd.vcx', 'vcx'],
    ['application/vnd.visio', 'vsd'],
    ['application/vnd.visionary', 'vis'],
    ['application/vnd.vsf', 'vsf'],
    ['application/vnd.wap.wbxml', 'wbxml'],
    ['application/vnd.wap.wmlc', 'wmlc'],
    ['application/vnd.wap.wmlscriptc', 'wmlsc'],
    ['application/vnd.webturbo', 'wtb'],
    ['application/vnd.wolfram.player', 'nbp'],
    ['application/vnd.wordperfect', 'wpd'],
    ['application/vnd.wqd', 'wqd'],
    ['application/vnd.wt.stf', 'stf'],
    ['application/vnd.xara', ['web', 'xar']],
    ['application/vnd.xfdl', 'xfdl'],
    ['application/vnd.yamaha.hv-dic', 'hvd'],
    ['application/vnd.yamaha.hv-script', 'hvs'],
    ['application/vnd.yamaha.hv-voice', 'hvp'],
    ['application/vnd.yamaha.openscoreformat', 'osf'],
    ['application/vnd.yamaha.openscoreformat.osfpvg+xml',
        'osfpvg'
    ],
    ['application/vnd.yamaha.smaf-audio', 'saf'],
    ['application/vnd.yamaha.smaf-phrase', 'spf'],
    ['application/vnd.yellowriver-custom-menu', 'cmp'],
    ['application/vnd.zul', 'zir'],
    ['application/vnd.zzazz.deck+xml', 'zaz'],
    ['application/vocaltec-media-desc', 'vmd'],
    ['application/vocaltec-media-file', 'vmf'],
    ['application/voicexml+xml', 'vxml'],
    ['application/widget', 'wgt'],
    ['application/winhlp', 'hlp'],
    ['application/wordperfect', ['wp', 'wp5', 'wp6', 'wpd']],
    ['application/wordperfect6.0', ['w60', 'wp5']],
    ['application/wordperfect6.1', 'w61'],
    ['application/wsdl+xml', 'wsdl'],
    ['application/wspolicy+xml', 'wspolicy'],
    ['application/x-123', 'wk1'],
    ['application/x-7z-compressed', '7z'],
    ['application/x-abiword', 'abw'],
    ['application/x-ace-compressed', 'ace'],
    ['application/x-aim', 'aim'],
    ['application/x-authorware-bin', 'aab'],
    ['application/x-authorware-map', 'aam'],
    ['application/x-authorware-seg', 'aas'],
    ['application/x-bcpio', 'bcpio'],
    ['application/x-binary', 'bin'],
    ['application/x-binhex40', 'hqx'],
    ['application/x-bittorrent', 'torrent'],
    ['application/x-bsh', ['bsh', 'sh', 'shar']],
    ['application/x-bytecode.elisp', 'elc'],
    ['applicaiton/x-bytecode.python', 'pyc'],
    ['application/x-bzip', 'bz'],
    ['application/x-bzip2', ['boz', 'bz2']],
    ['application/x-cdf', 'cdf'],
    ['application/x-cdlink', 'vcd'],
    ['application/x-chat', ['cha', 'chat']],
    ['application/x-chess-pgn', 'pgn'],
    ['application/x-cmu-raster', 'ras'],
    ['application/x-cocoa', 'cco'],
    ['application/x-compactpro', 'cpt'],
    ['application/x-compress', 'z'],
    ['application/x-compressed', ['tgz', 'gz', 'z', 'zip']],
    ['application/x-conference', 'nsc'],
    ['application/x-cpio', 'cpio'],
    ['application/x-cpt', 'cpt'],
    ['application/x-csh', 'csh'],
    ['application/x-debian-package', 'deb'],
    ['application/x-deepv', 'deepv'],
    ['application/x-director', ['dir', 'dcr', 'dxr']],
    ['application/x-doom', 'wad'],
    ['application/x-dtbncx+xml', 'ncx'],
    ['application/x-dtbook+xml', 'dtb'],
    ['application/x-dtbresource+xml', 'res'],
    ['application/x-dvi', 'dvi'],
    ['application/x-elc', 'elc'],
    ['application/x-envoy', ['env', 'evy']],
    ['application/x-esrehber', 'es'],
    ['application/x-excel', ['xls',
        'xla',
        'xlb',
        'xlc',
        'xld',
        'xlk',
        'xll',
        'xlm',
        'xlt',
        'xlv',
        'xlw'
    ]],
    ['application/x-font-bdf', 'bdf'],
    ['application/x-font-ghostscript', 'gsf'],
    ['application/x-font-linux-psf', 'psf'],
    ['application/x-font-otf', 'otf'],
    ['application/x-font-pcf', 'pcf'],
    ['application/x-font-snf', 'snf'],
    ['application/x-font-ttf', 'ttf'],
    ['application/x-font-type1', 'pfa'],
    ['application/x-font-woff', 'woff'],
    ['application/x-frame', 'mif'],
    ['application/x-freelance', 'pre'],
    ['application/x-futuresplash', 'spl'],
    ['application/x-gnumeric', 'gnumeric'],
    ['application/x-gsp', 'gsp'],
    ['application/x-gss', 'gss'],
    ['application/x-gtar', 'gtar'],
    ['application/x-gzip', ['gz', 'gzip']],
    ['application/x-hdf', 'hdf'],
    ['application/x-helpfile', ['help', 'hlp']],
    ['application/x-httpd-imap', 'imap'],
    ['application/x-ima', 'ima'],
    ['application/x-internet-signup', ['ins', 'isp']],
    ['application/x-internett-signup', 'ins'],
    ['application/x-inventor', 'iv'],
    ['application/x-ip2', 'ip'],
    ['application/x-iphone', 'iii'],
    ['application/x-java-class', 'class'],
    ['application/x-java-commerce', 'jcm'],
    ['application/x-java-jnlp-file', 'jnlp'],
    ['application/x-javascript', 'js'],
    ['application/x-koan', ['skd', 'skm', 'skp', 'skt']],
    ['application/x-ksh', 'ksh'],
    ['application/x-latex', ['latex', 'ltx']],
    ['application/x-lha', 'lha'],
    ['application/x-lisp', 'lsp'],
    ['application/x-livescreen', 'ivy'],
    ['application/x-lotus', 'wq1'],
    ['application/x-lotusscreencam', 'scm'],
    ['application/x-lzh', 'lzh'],
    ['application/x-lzx', 'lzx'],
    ['application/x-mac-binhex40', 'hqx'],
    ['application/x-macbinary', 'bin'],
    ['application/x-magic-cap-package-1.0', 'mc$'],
    ['application/x-mathcad', 'mcd'],
    ['application/x-meme', 'mm'],
    ['application/x-midi', ['mid', 'midi']],
    ['application/x-mif', 'mif'],
    ['application/x-mix-transfer', 'nix'],
    ['application/x-mobipocket-ebook', 'prc'],
    ['application/x-mplayer2', 'asx'],
    ['application/x-ms-application', 'application'],
    ['application/x-ms-wmd', 'wmd'],
    ['application/x-ms-wmz', 'wmz'],
    ['application/x-ms-xbap', 'xbap'],
    ['application/x-msaccess', 'mdb'],
    ['application/x-msbinder', 'obd'],
    ['application/x-mscardfile', 'crd'],
    ['application/x-msclip', 'clp'],
    ['application/x-msdownload', ['exe', 'dll']],
    ['application/x-msexcel', ['xls', 'xla', 'xlw']],
    ['application/x-msmediaview', ['mvb', 'm13', 'm14']],
    ['application/x-msmetafile', 'wmf'],
    ['application/x-msmoney', 'mny'],
    ['application/x-mspowerpoint', 'ppt'],
    ['application/x-mspublisher', 'pub'],
    ['application/x-msschedule', 'scd'],
    ['application/x-msterminal', 'trm'],
    ['application/x-mswrite', 'wri'],
    ['application/x-navi-animation', 'ani'],
    ['application/x-navidoc', 'nvd'],
    ['application/x-navimap', 'map'],
    ['application/x-navistyle', 'stl'],
    ['application/x-netcdf', ['cdf', 'nc']],
    ['application/x-newton-compatible-pkg', 'pkg'],
    ['application/x-nokia-9000-communicator-add-on-software',
        'aos'
    ],
    ['application/x-omc', 'omc'],
    ['application/x-omcdatamaker', 'omcd'],
    ['application/x-omcregerator', 'omcr'],
    ['application/x-pagemaker', ['pm4', 'pm5']],
    ['application/x-pcl', 'pcl'],
    ['application/x-perfmon', ['pma', 'pmc', 'pml', 'pmr', 'pmw']],
    ['application/x-pixclscript', 'plx'],
    ['application/x-pkcs10', 'p10'],
    ['application/x-pkcs12', ['p12', 'pfx']],
    ['application/x-pkcs7-certificates', ['p7b', 'spc']],
    ['application/x-pkcs7-certreqresp', 'p7r'],
    ['application/x-pkcs7-mime', ['p7m', 'p7c']],
    ['application/x-pkcs7-signature', ['p7s', 'p7a']],
    ['application/x-pointplus', 'css'],
    ['application/x-portable-anymap', 'pnm'],
    ['application/x-project', ['mpc', 'mpt', 'mpv', 'mpx']],
    ['application/x-qpro', 'wb1'],
    ['application/x-rar-compressed', 'rar'],
    ['application/x-rtf', 'rtf'],
    ['application/x-sdp', 'sdp'],
    ['application/x-sea', 'sea'],
    ['application/x-seelogo', 'sl'],
    ['application/x-sh', 'sh'],
    ['application/x-shar', ['shar', 'sh']],
    ['application/x-shockwave-flash', 'swf'],
    ['application/x-silverlight-app', 'xap'],
    ['application/x-sit', 'sit'],
    ['application/x-sprite', ['spr', 'sprite']],
    ['application/x-stuffit', 'sit'],
    ['application/x-stuffitx', 'sitx'],
    ['application/x-sv4cpio', 'sv4cpio'],
    ['application/x-sv4crc', 'sv4crc'],
    ['application/x-tar', 'tar'],
    ['application/x-tbook', ['sbk', 'tbk']],
    ['application/x-tcl', 'tcl'],
    ['application/x-tex', 'tex'],
    ['application/x-tex-tfm', 'tfm'],
    ['application/x-texinfo', ['texi', 'texinfo']],
    ['application/x-troff', ['roff', 't', 'tr']],
    ['application/x-troff-man', 'man'],
    ['application/x-troff-me', 'me'],
    ['application/x-troff-ms', 'ms'],
    ['application/x-troff-msvideo', 'avi'],
    ['application/x-ustar', 'ustar'],
    ['application/x-visio', ['vsd', 'vst', 'vsw']],
    ['application/x-vnd.audioexplosion.mzz', 'mzz'],
    ['application/x-vnd.ls-xpix', 'xpix'],
    ['application/x-vrml', 'vrml'],
    ['application/x-wais-source', ['src', 'wsrc']],
    ['application/x-winhelp', 'hlp'],
    ['application/x-wintalk', 'wtk'],
    ['application/x-world', ['wrl', 'svr']],
    ['application/x-wpwin', 'wpd'],
    ['application/x-wri', 'wri'],
    ['application/x-x509-ca-cert', ['cer', 'crt', 'der']],
    ['application/x-x509-user-cert', 'crt'],
    ['application/x-xfig', 'fig'],
    ['application/x-xpinstall', 'xpi'],
    ['application/x-zip-compressed', 'zip'],
    ['application/xcap-diff+xml', 'xdf'],
    ['application/xenc+xml', 'xenc'],
    ['application/xhtml+xml', 'xhtml'],
    ['application/xml', 'xml'],
    ['application/xml-dtd', 'dtd'],
    ['application/xop+xml', 'xop'],
    ['application/xslt+xml', 'xslt'],
    ['application/xspf+xml', 'xspf'],
    ['application/xv+xml', 'mxml'],
    ['application/yang', 'yang'],
    ['application/yin+xml', 'yin'],
    ['application/ynd.ms-pkipko', 'pko'],
    ['application/zip', 'zip'],
    ['audio/adpcm', 'adp'],
    ['audio/aiff', ['aiff', 'aif', 'aifc']],
    ['audio/basic', ['snd', 'au']],
    ['audio/it', 'it'],
    ['audio/make', ['funk', 'my', 'pfunk']],
    ['audio/make.my.funk', 'pfunk'],
    ['audio/mid', ['mid', 'rmi']],
    ['audio/midi', ['midi', 'kar', 'mid']],
    ['audio/mod', 'mod'],
    ['audio/mp4', 'mp4a'],
    ['audio/mpeg', ['mpga', 'mp3', 'm2a', 'mp2', 'mpa', 'mpg']],
    ['audio/mpeg3', 'mp3'],
    ['audio/nspaudio', ['la', 'lma']],
    ['audio/ogg', 'oga'],
    ['audio/s3m', 's3m'],
    ['audio/tsp-audio', 'tsi'],
    ['audio/tsplayer', 'tsp'],
    ['audio/vnd.dece.audio', 'uva'],
    ['audio/vnd.digital-winds', 'eol'],
    ['audio/vnd.dra', 'dra'],
    ['audio/vnd.dts', 'dts'],
    ['audio/vnd.dts.hd', 'dtshd'],
    ['audio/vnd.lucent.voice', 'lvp'],
    ['audio/vnd.ms-playready.media.pya', 'pya'],
    ['audio/vnd.nuera.ecelp4800', 'ecelp4800'],
    ['audio/vnd.nuera.ecelp7470', 'ecelp7470'],
    ['audio/vnd.nuera.ecelp9600', 'ecelp9600'],
    ['audio/vnd.qcelp', 'qcp'],
    ['audio/vnd.rip', 'rip'],
    ['audio/voc', 'voc'],
    ['audio/voxware', 'vox'],
    ['audio/wav', 'wav'],
    ['audio/webm', 'weba'],
    ['audio/x-aac', 'aac'],
    ['audio/x-adpcm', 'snd'],
    ['audio/x-aiff', ['aiff', 'aif', 'aifc']],
    ['audio/x-au', 'au'],
    ['audio/x-gsm', ['gsd', 'gsm']],
    ['audio/x-jam', 'jam'],
    ['audio/x-liveaudio', 'lam'],
    ['audio/x-mid', ['mid', 'midi']],
    ['audio/x-midi', ['midi', 'mid']],
    ['audio/x-mod', 'mod'],
    ['audio/x-mpeg', 'mp2'],
    ['audio/x-mpeg-3', 'mp3'],
    ['audio/x-mpegurl', 'm3u'],
    ['audio/x-mpequrl', 'm3u'],
    ['audio/x-ms-wax', 'wax'],
    ['audio/x-ms-wma', 'wma'],
    ['audio/x-nspaudio', ['la', 'lma']],
    ['audio/x-pn-realaudio', ['ra', 'ram', 'rm', 'rmm', 'rmp']],
    ['audio/x-pn-realaudio-plugin', ['ra', 'rmp', 'rpm']],
    ['audio/x-psid', 'sid'],
    ['audio/x-realaudio', 'ra'],
    ['audio/x-twinvq', 'vqf'],
    ['audio/x-twinvq-plugin', ['vqe', 'vql']],
    ['audio/x-vnd.audioexplosion.mjuicemediafile', 'mjf'],
    ['audio/x-voc', 'voc'],
    ['audio/x-wav', 'wav'],
    ['audio/xm', 'xm'],
    ['chemical/x-cdx', 'cdx'],
    ['chemical/x-cif', 'cif'],
    ['chemical/x-cmdf', 'cmdf'],
    ['chemical/x-cml', 'cml'],
    ['chemical/x-csml', 'csml'],
    ['chemical/x-pdb', ['pdb', 'xyz']],
    ['chemical/x-xyz', 'xyz'],
    ['drawing/x-dwf', 'dwf'],
    ['i-world/i-vrml', 'ivr'],
    ['image/bmp', ['bmp', 'bm']],
    ['image/cgm', 'cgm'],
    ['image/cis-cod', 'cod'],
    ['image/cmu-raster', ['ras', 'rast']],
    ['image/fif', 'fif'],
    ['image/florian', ['flo', 'turbot']],
    ['image/g3fax', 'g3'],
    ['image/gif', 'gif'],
    ['image/ief', ['ief', 'iefs']],
    ['image/jpeg', ['jpeg', 'jpe', 'jpg', 'jfif', 'jfif-tbnl']],
    ['image/jutvision', 'jut'],
    ['image/ktx', 'ktx'],
    ['image/naplps', ['nap', 'naplps']],
    ['image/pict', ['pic', 'pict']],
    ['image/pipeg', 'jfif'],
    ['image/pjpeg', ['jfif', 'jpe', 'jpeg', 'jpg']],
    ['image/png', ['png', 'x-png']],
    ['image/prs.btif', 'btif'],
    ['image/svg+xml', 'svg'],
    ['image/tiff', ['tif', 'tiff']],
    ['image/vasa', 'mcf'],
    ['image/vnd.adobe.photoshop', 'psd'],
    ['image/vnd.dece.graphic', 'uvi'],
    ['image/vnd.djvu', 'djvu'],
    ['image/vnd.dvb.subtitle', 'sub'],
    ['image/vnd.dwg', ['dwg', 'dxf', 'svf']],
    ['image/vnd.dxf', 'dxf'],
    ['image/vnd.fastbidsheet', 'fbs'],
    ['image/vnd.fpx', 'fpx'],
    ['image/vnd.fst', 'fst'],
    ['image/vnd.fujixerox.edmics-mmr', 'mmr'],
    ['image/vnd.fujixerox.edmics-rlc', 'rlc'],
    ['image/vnd.ms-modi', 'mdi'],
    ['image/vnd.net-fpx', ['fpx', 'npx']],
    ['image/vnd.rn-realflash', 'rf'],
    ['image/vnd.rn-realpix', 'rp'],
    ['image/vnd.wap.wbmp', 'wbmp'],
    ['image/vnd.xiff', 'xif'],
    ['image/webp', 'webp'],
    ['image/x-cmu-raster', 'ras'],
    ['image/x-cmx', 'cmx'],
    ['image/x-dwg', ['dwg', 'dxf', 'svf']],
    ['image/x-freehand', 'fh'],
    ['image/x-icon', 'ico'],
    ['image/x-jg', 'art'],
    ['image/x-jps', 'jps'],
    ['image/x-niff', ['niff', 'nif']],
    ['image/x-pcx', 'pcx'],
    ['image/x-pict', ['pct', 'pic']],
    ['image/x-portable-anymap', 'pnm'],
    ['image/x-portable-bitmap', 'pbm'],
    ['image/x-portable-graymap', 'pgm'],
    ['image/x-portable-greymap', 'pgm'],
    ['image/x-portable-pixmap', 'ppm'],
    ['image/x-quicktime', ['qif', 'qti', 'qtif']],
    ['image/x-rgb', 'rgb'],
    ['image/x-tiff', ['tif', 'tiff']],
    ['image/x-windows-bmp', 'bmp'],
    ['image/x-xbitmap', 'xbm'],
    ['image/x-xbm', 'xbm'],
    ['image/x-xpixmap', ['xpm', 'pm']],
    ['image/x-xwd', 'xwd'],
    ['image/x-xwindowdump', 'xwd'],
    ['image/xbm', 'xbm'],
    ['image/xpm', 'xpm'],
    ['message/rfc822', ['eml', 'mht', 'mhtml', 'nws', 'mime']],
    ['model/iges', ['iges', 'igs']],
    ['model/mesh', 'msh'],
    ['model/vnd.collada+xml', 'dae'],
    ['model/vnd.dwf', 'dwf'],
    ['model/vnd.gdl', 'gdl'],
    ['model/vnd.gtw', 'gtw'],
    ['model/vnd.mts', 'mts'],
    ['model/vnd.vtu', 'vtu'],
    ['model/vrml', ['vrml', 'wrl', 'wrz']],
    ['model/x-pov', 'pov'],
    ['multipart/x-gzip', 'gzip'],
    ['multipart/x-ustar', 'ustar'],
    ['multipart/x-zip', 'zip'],
    ['music/crescendo', ['mid', 'midi']],
    ['music/x-karaoke', 'kar'],
    ['paleovu/x-pv', 'pvu'],
    ['text/asp', 'asp'],
    ['text/calendar', 'ics'],
    ['text/css', 'css'],
    ['text/csv', 'csv'],
    ['text/ecmascript', 'js'],
    ['text/h323', '323'],
    ['text/html', ['html', 'htm', 'stm', 'acgi', 'htmls', 'htx', 'shtml']],
    ['text/iuls', 'uls'],
    ['text/javascript', 'js'],
    ['text/mcf', 'mcf'],
    ['text/n3', 'n3'],
    ['text/pascal', 'pas'],
    ['text/plain', ['txt',
        'bas',
        'c',
        'h',
        'c++',
        'cc',
        'com',
        'conf',
        'cxx',
        'def',
        'f',
        'f90',
        'for',
        'g',
        'hh',
        'idc',
        'jav',
        'java',
        'list',
        'log',
        'lst',
        'm',
        'mar',
        'pl',
        'sdml',
        'text'
    ]],
    ['text/plain-bas', 'par'],
    ['text/prs.lines.tag', 'dsc'],
    ['text/richtext', ['rtx', 'rt', 'rtf']],
    ['text/scriplet', 'wsc'],
    ['text/scriptlet', 'sct'],
    ['text/sgml', ['sgm', 'sgml']],
    ['text/tab-separated-values', 'tsv'],
    ['text/troff', 't'],
    ['text/turtle', 'ttl'],
    ['text/uri-list', ['uni', 'unis', 'uri', 'uris']],
    ['text/vnd.abc', 'abc'],
    ['text/vnd.curl', 'curl'],
    ['text/vnd.curl.dcurl', 'dcurl'],
    ['text/vnd.curl.mcurl', 'mcurl'],
    ['text/vnd.curl.scurl', 'scurl'],
    ['text/vnd.fly', 'fly'],
    ['text/vnd.fmi.flexstor', 'flx'],
    ['text/vnd.graphviz', 'gv'],
    ['text/vnd.in3d.3dml', '3dml'],
    ['text/vnd.in3d.spot', 'spot'],
    ['text/vnd.rn-realtext', 'rt'],
    ['text/vnd.sun.j2me.app-descriptor', 'jad'],
    ['text/vnd.wap.wml', 'wml'],
    ['text/vnd.wap.wmlscript', 'wmls'],
    ['text/webviewhtml', 'htt'],
    ['text/x-asm', ['asm', 's']],
    ['text/x-audiosoft-intra', 'aip'],
    ['text/x-c', ['c', 'cc', 'cpp']],
    ['text/x-component', 'htc'],
    ['text/x-fortran', ['for', 'f', 'f77', 'f90']],
    ['text/x-h', ['h', 'hh']],
    ['text/x-java-source', ['java', 'jav']],
    ['text/x-java-source,java', 'java'],
    ['text/x-la-asf', 'lsx'],
    ['text/x-m', 'm'],
    ['text/x-pascal', 'p'],
    ['text/x-script', 'hlb'],
    ['text/x-script.csh', 'csh'],
    ['text/x-script.elisp', 'el'],
    ['text/x-script.guile', 'scm'],
    ['text/x-script.ksh', 'ksh'],
    ['text/x-script.lisp', 'lsp'],
    ['text/x-script.perl', 'pl'],
    ['text/x-script.perl-module', 'pm'],
    ['text/x-script.phyton', 'py'],
    ['text/x-script.rexx', 'rexx'],
    ['text/x-script.scheme', 'scm'],
    ['text/x-script.sh', 'sh'],
    ['text/x-script.tcl', 'tcl'],
    ['text/x-script.tcsh', 'tcsh'],
    ['text/x-script.zsh', 'zsh'],
    ['text/x-server-parsed-html', ['shtml', 'ssi']],
    ['text/x-setext', 'etx'],
    ['text/x-sgml', ['sgm', 'sgml']],
    ['text/x-speech', ['spc', 'talk']],
    ['text/x-uil', 'uil'],
    ['text/x-uuencode', ['uu', 'uue']],
    ['text/x-vcalendar', 'vcs'],
    ['text/x-vcard', 'vcf'],
    ['text/xml', 'xml'],
    ['video/3gpp', '3gp'],
    ['video/3gpp2', '3g2'],
    ['video/animaflex', 'afl'],
    ['video/avi', 'avi'],
    ['video/avs-video', 'avs'],
    ['video/dl', 'dl'],
    ['video/fli', 'fli'],
    ['video/gl', 'gl'],
    ['video/h261', 'h261'],
    ['video/h263', 'h263'],
    ['video/h264', 'h264'],
    ['video/jpeg', 'jpgv'],
    ['video/jpm', 'jpm'],
    ['video/mj2', 'mj2'],
    ['video/mp4', 'mp4'],
    ['video/mpeg', ['mpeg', 'mp2', 'mpa', 'mpe', 'mpg', 'mpv2', 'm1v', 'm2v', 'mp3']],
    ['video/msvideo', 'avi'],
    ['video/ogg', 'ogv'],
    ['video/quicktime', ['mov', 'qt', 'moov']],
    ['video/vdo', 'vdo'],
    ['video/vivo', ['viv', 'vivo']],
    ['video/vnd.dece.hd', 'uvh'],
    ['video/vnd.dece.mobile', 'uvm'],
    ['video/vnd.dece.pd', 'uvp'],
    ['video/vnd.dece.sd', 'uvs'],
    ['video/vnd.dece.video', 'uvv'],
    ['video/vnd.fvt', 'fvt'],
    ['video/vnd.mpegurl', 'mxu'],
    ['video/vnd.ms-playready.media.pyv', 'pyv'],
    ['video/vnd.rn-realvideo', 'rv'],
    ['video/vnd.uvvu.mp4', 'uvu'],
    ['video/vnd.vivo', ['viv', 'vivo']],
    ['video/vosaic', 'vos'],
    ['video/webm', 'webm'],
    ['video/x-amt-demorun', 'xdr'],
    ['video/x-amt-showrun', 'xsr'],
    ['video/x-atomic3d-feature', 'fmf'],
    ['video/x-dl', 'dl'],
    ['video/x-dv', ['dif', 'dv']],
    ['video/x-f4v', 'f4v'],
    ['video/x-fli', 'fli'],
    ['video/x-flv', 'flv'],
    ['video/x-gl', 'gl'],
    ['video/x-isvideo', 'isu'],
    ['video/x-la-asf', ['lsf', 'lsx']],
    ['video/x-m4v', 'm4v'],
    ['video/x-motion-jpeg', 'mjpg'],
    ['video/x-mpeg', ['mp3', 'mp2']],
    ['video/x-mpeq2a', 'mp2'],
    ['video/x-ms-asf', ['asf', 'asr', 'asx']],
    ['video/x-ms-asf-plugin', 'asx'],
    ['video/x-ms-wm', 'wm'],
    ['video/x-ms-wmv', 'wmv'],
    ['video/x-ms-wmx', 'wmx'],
    ['video/x-ms-wvx', 'wvx'],
    ['video/x-msvideo', 'avi'],
    ['video/x-qtc', 'qtc'],
    ['video/x-scm', 'scm'],
    ['video/x-sgi-movie', ['movie', 'mv']],
    ['windows/metafile', 'wmf'],
    ['www/mime', 'mime'],
    ['x-conference/x-cooltalk', 'ice'],
    ['x-music/x-midi', ['mid', 'midi']],
    ['x-world/x-3dmf', ['3dm', '3dmf', 'qd3', 'qd3d']],
    ['x-world/x-svr', 'svr'],
    ['x-world/x-vrml', ['flr', 'vrml', 'wrl', 'wrz', 'xaf', 'xof']],
    ['x-world/x-vrt', 'vrt'],
    ['xgl/drawing', 'xgz'],
    ['xgl/movie', 'xmz']
]);
const extensions = new Map([
    ['123', 'application/vnd.lotus-1-2-3'],
    ['323', 'text/h323'],
    ['*', 'application/octet-stream'],
    ['3dm', 'x-world/x-3dmf'],
    ['3dmf', 'x-world/x-3dmf'],
    ['3dml', 'text/vnd.in3d.3dml'],
    ['3g2', 'video/3gpp2'],
    ['3gp', 'video/3gpp'],
    ['7z', 'application/x-7z-compressed'],
    ['a', 'application/octet-stream'],
    ['aab', 'application/x-authorware-bin'],
    ['aac', 'audio/x-aac'],
    ['aam', 'application/x-authorware-map'],
    ['aas', 'application/x-authorware-seg'],
    ['abc', 'text/vnd.abc'],
    ['abw', 'application/x-abiword'],
    ['ac', 'application/pkix-attr-cert'],
    ['acc', 'application/vnd.americandynamics.acc'],
    ['ace', 'application/x-ace-compressed'],
    ['acgi', 'text/html'],
    ['acu', 'application/vnd.acucobol'],
    ['acx', 'application/internet-property-stream'],
    ['adp', 'audio/adpcm'],
    ['aep', 'application/vnd.audiograph'],
    ['afl', 'video/animaflex'],
    ['afp', 'application/vnd.ibm.modcap'],
    ['ahead', 'application/vnd.ahead.space'],
    ['ai', 'application/postscript'],
    ['aif', ['audio/aiff', 'audio/x-aiff']],
    ['aifc', ['audio/aiff', 'audio/x-aiff']],
    ['aiff', ['audio/aiff', 'audio/x-aiff']],
    ['aim', 'application/x-aim'],
    ['aip', 'text/x-audiosoft-intra'],
    ['air',
        'application/vnd.adobe.air-application-installer-package+zip'
    ],
    ['ait', 'application/vnd.dvb.ait'],
    ['ami', 'application/vnd.amiga.ami'],
    ['ani', 'application/x-navi-animation'],
    ['aos',
        'application/x-nokia-9000-communicator-add-on-software'
    ],
    ['apk', 'application/vnd.android.package-archive'],
    ['application', 'application/x-ms-application'],
    ['apr', 'application/vnd.lotus-approach'],
    ['aps', 'application/mime'],
    ['arc', 'application/octet-stream'],
    ['arj', ['application/arj', 'application/octet-stream']],
    ['art', 'image/x-jg'],
    ['asf', 'video/x-ms-asf'],
    ['asm', 'text/x-asm'],
    ['aso', 'application/vnd.accpac.simply.aso'],
    ['asp', 'text/asp'],
    ['asr', 'video/x-ms-asf'],
    ['asx', ['video/x-ms-asf',
        'application/x-mplayer2',
        'video/x-ms-asf-plugin'
    ]],
    ['atc', 'application/vnd.acucorp'],
    ['atomcat', 'application/atomcat+xml'],
    ['atomsvc', 'application/atomsvc+xml'],
    ['atx', 'application/vnd.antix.game-component'],
    ['au', ['audio/basic', 'audio/x-au']],
    ['avi', ['video/avi',
        'video/msvideo',
        'application/x-troff-msvideo',
        'video/x-msvideo'
    ]],
    ['avs', 'video/avs-video'],
    ['aw', 'application/applixware'],
    ['axs', 'application/olescript'],
    ['azf', 'application/vnd.airzip.filesecure.azf'],
    ['azs', 'application/vnd.airzip.filesecure.azs'],
    ['azw', 'application/vnd.amazon.ebook'],
    ['bas', 'text/plain'],
    ['bcpio', 'application/x-bcpio'],
    ['bdf', 'application/x-font-bdf'],
    ['bdm', 'application/vnd.syncml.dm+wbxml'],
    ['bed', 'application/vnd.realvnc.bed'],
    ['bh2', 'application/vnd.fujitsu.oasysprs'],
    ['bin', ['application/octet-stream',
        'application/mac-binary',
        'application/macbinary',
        'application/x-macbinary',
        'application/x-binary'
    ]],
    ['bm', 'image/bmp'],
    ['bmi', 'application/vnd.bmi'],
    ['bmp', ['image/bmp', 'image/x-windows-bmp']],
    ['boo', 'application/book'],
    ['book', 'application/book'],
    ['box', 'application/vnd.previewsystems.box'],
    ['boz', 'application/x-bzip2'],
    ['bsh', 'application/x-bsh'],
    ['btif', 'image/prs.btif'],
    ['bz', 'application/x-bzip'],
    ['bz2', 'application/x-bzip2'],
    ['c', ['text/plain', 'text/x-c']],
    ['c++', 'text/plain'],
    ['c11amc', 'application/vnd.cluetrust.cartomobile-config'],
    ['c11amz', 'application/vnd.cluetrust.cartomobile-config-pkg'],
    ['c4g', 'application/vnd.clonk.c4group'],
    ['cab', 'application/vnd.ms-cab-compressed'],
    ['car', 'application/vnd.curl.car'],
    ['cat', ['application/vnd.ms-pkiseccat',
        'application/vnd.ms-pki.seccat'
    ]],
    ['cc', ['text/plain', 'text/x-c']],
    ['ccad', 'application/clariscad'],
    ['cco', 'application/x-cocoa'],
    ['ccxml', 'application/ccxml+xml,'],
    ['cdbcmsg', 'application/vnd.contact.cmsg'],
    ['cdf', ['application/cdf',
        'application/x-cdf',
        'application/x-netcdf'
    ]],
    ['cdkey', 'application/vnd.mediastation.cdkey'],
    ['cdmia', 'application/cdmi-capability'],
    ['cdmic', 'application/cdmi-container'],
    ['cdmid', 'application/cdmi-domain'],
    ['cdmio', 'application/cdmi-object'],
    ['cdmiq', 'application/cdmi-queue'],
    ['cdx', 'chemical/x-cdx'],
    ['cdxml', 'application/vnd.chemdraw+xml'],
    ['cdy', 'application/vnd.cinderella'],
    ['cer', ['application/pkix-cert', 'application/x-x509-ca-cert']],
    ['cgm', 'image/cgm'],
    ['cha', 'application/x-chat'],
    ['chat', 'application/x-chat'],
    ['chm', 'application/vnd.ms-htmlhelp'],
    ['chrt', 'application/vnd.kde.kchart'],
    ['cif', 'chemical/x-cif'],
    ['cii',
        'application/vnd.anser-web-certificate-issue-initiation'
    ],
    ['cil', 'application/vnd.ms-artgalry'],
    ['cla', 'application/vnd.claymore'],
    ['class', ['application/octet-stream',
        'application/java',
        'application/java-byte-code',
        'application/java-vm',
        'application/x-java-class'
    ]],
    ['clkk', 'application/vnd.crick.clicker.keyboard'],
    ['clkp', 'application/vnd.crick.clicker.palette'],
    ['clkt', 'application/vnd.crick.clicker.template'],
    ['clkw', 'application/vnd.crick.clicker.wordbank'],
    ['clkx', 'application/vnd.crick.clicker'],
    ['clp', 'application/x-msclip'],
    ['cmc', 'application/vnd.cosmocaller'],
    ['cmdf', 'chemical/x-cmdf'],
    ['cml', 'chemical/x-cml'],
    ['cmp', 'application/vnd.yellowriver-custom-menu'],
    ['cmx', 'image/x-cmx'],
    ['cod', ['image/cis-cod', 'application/vnd.rim.cod']],
    ['com', ['application/octet-stream', 'text/plain']],
    ['conf', 'text/plain'],
    ['cpio', 'application/x-cpio'],
    ['cpp', 'text/x-c'],
    ['cpt', ['application/mac-compactpro',
        'application/x-compactpro',
        'application/x-cpt'
    ]],
    ['crd', 'application/x-mscardfile'],
    ['crl', ['application/pkix-crl', 'application/pkcs-crl']],
    ['crt', ['application/pkix-cert',
        'application/x-x509-user-cert',
        'application/x-x509-ca-cert'
    ]],
    ['cryptonote', 'application/vnd.rig.cryptonote'],
    ['csh', ['text/x-script.csh', 'application/x-csh']],
    ['csml', 'chemical/x-csml'],
    ['csp', 'application/vnd.commonspace'],
    ['css', ['text/css', 'application/x-pointplus']],
    ['csv', 'text/csv'],
    ['cu', 'application/cu-seeme'],
    ['curl', 'text/vnd.curl'],
    ['cww', 'application/prs.cww'],
    ['cxx', 'text/plain'],
    ['dae', 'model/vnd.collada+xml'],
    ['daf', 'application/vnd.mobius.daf'],
    ['davmount', 'application/davmount+xml'],
    ['dcr', 'application/x-director'],
    ['dcurl', 'text/vnd.curl.dcurl'],
    ['dd2', 'application/vnd.oma.dd2+xml'],
    ['ddd', 'application/vnd.fujixerox.ddd'],
    ['deb', 'application/x-debian-package'],
    ['deepv', 'application/x-deepv'],
    ['def', 'text/plain'],
    ['der', 'application/x-x509-ca-cert'],
    ['dfac', 'application/vnd.dreamfactory'],
    ['dif', 'video/x-dv'],
    ['dir', 'application/x-director'],
    ['dis', 'application/vnd.mobius.dis'],
    ['djvu', 'image/vnd.djvu'],
    ['dl', ['video/dl', 'video/x-dl']],
    ['dll', 'application/x-msdownload'],
    ['dms', 'application/octet-stream'],
    ['dna', 'application/vnd.dna'],
    ['doc', 'application/msword'],
    ['docm', 'application/vnd.ms-word.document.macroenabled.12'],
    ['docx',
        'application/vnd.openxmlformats-officedocument.wordprocessingml.document'
    ],
    ['dot', 'application/msword'],
    ['dotm', 'application/vnd.ms-word.template.macroenabled.12'],
    ['dotx',
        'application/vnd.openxmlformats-officedocument.wordprocessingml.template'
    ],
    ['dp', ['application/commonground', 'application/vnd.osgi.dp']],
    ['dpg', 'application/vnd.dpgraph'],
    ['dra', 'audio/vnd.dra'],
    ['drw', 'application/drafting'],
    ['dsc', 'text/prs.lines.tag'],
    ['dssc', 'application/dssc+der'],
    ['dtb', 'application/x-dtbook+xml'],
    ['dtd', 'application/xml-dtd'],
    ['dts', 'audio/vnd.dts'],
    ['dtshd', 'audio/vnd.dts.hd'],
    ['dump', 'application/octet-stream'],
    ['dv', 'video/x-dv'],
    ['dvi', 'application/x-dvi'],
    ['dwf', ['model/vnd.dwf', 'drawing/x-dwf']],
    ['dwg', ['application/acad', 'image/vnd.dwg', 'image/x-dwg']],
    ['dxf', ['application/dxf',
        'image/vnd.dwg',
        'image/vnd.dxf',
        'image/x-dwg'
    ]],
    ['dxp', 'application/vnd.spotfire.dxp'],
    ['dxr', 'application/x-director'],
    ['ecelp4800', 'audio/vnd.nuera.ecelp4800'],
    ['ecelp7470', 'audio/vnd.nuera.ecelp7470'],
    ['ecelp9600', 'audio/vnd.nuera.ecelp9600'],
    ['edm', 'application/vnd.novadigm.edm'],
    ['edx', 'application/vnd.novadigm.edx'],
    ['efif', 'application/vnd.picsel'],
    ['ei6', 'application/vnd.pg.osasli'],
    ['el', 'text/x-script.elisp'],
    ['elc', ['application/x-elc', 'application/x-bytecode.elisp']],
    ['eml', 'message/rfc822'],
    ['emma', 'application/emma+xml'],
    ['env', 'application/x-envoy'],
    ['eol', 'audio/vnd.digital-winds'],
    ['eot', 'application/vnd.ms-fontobject'],
    ['eps', 'application/postscript'],
    ['epub', 'application/epub+zip'],
    ['es', ['application/ecmascript', 'application/x-esrehber']],
    ['es3', 'application/vnd.eszigno3+xml'],
    ['esf', 'application/vnd.epson.esf'],
    ['etx', 'text/x-setext'],
    ['evy', ['application/envoy', 'application/x-envoy']],
    ['exe', ['application/octet-stream', 'application/x-msdownload']],
    ['exi', 'application/exi'],
    ['ext', 'application/vnd.novadigm.ext'],
    ['ez2', 'application/vnd.ezpix-album'],
    ['ez3', 'application/vnd.ezpix-package'],
    ['f', ['text/plain', 'text/x-fortran']],
    ['f4v', 'video/x-f4v'],
    ['f77', 'text/x-fortran'],
    ['f90', ['text/plain', 'text/x-fortran']],
    ['fbs', 'image/vnd.fastbidsheet'],
    ['fcs', 'application/vnd.isac.fcs'],
    ['fdf', 'application/vnd.fdf'],
    ['fe_launch', 'application/vnd.denovo.fcselayout-link'],
    ['fg5', 'application/vnd.fujitsu.oasysgp'],
    ['fh', 'image/x-freehand'],
    ['fif', ['application/fractals', 'image/fif']],
    ['fig', 'application/x-xfig'],
    ['fli', ['video/fli', 'video/x-fli']],
    ['flo', ['image/florian', 'application/vnd.micrografx.flo']],
    ['flr', 'x-world/x-vrml'],
    ['flv', 'video/x-flv'],
    ['flw', 'application/vnd.kde.kivio'],
    ['flx', 'text/vnd.fmi.flexstor'],
    ['fly', 'text/vnd.fly'],
    ['fm', 'application/vnd.framemaker'],
    ['fmf', 'video/x-atomic3d-feature'],
    ['fnc', 'application/vnd.frogans.fnc'],
    ['for', ['text/plain', 'text/x-fortran']],
    ['fpx', ['image/vnd.fpx', 'image/vnd.net-fpx']],
    ['frl', 'application/freeloader'],
    ['fsc', 'application/vnd.fsc.weblaunch'],
    ['fst', 'image/vnd.fst'],
    ['ftc', 'application/vnd.fluxtime.clip'],
    ['fti', 'application/vnd.anser-web-funds-transfer-initiation'],
    ['funk', 'audio/make'],
    ['fvt', 'video/vnd.fvt'],
    ['fxp', 'application/vnd.adobe.fxp'],
    ['fzs', 'application/vnd.fuzzysheet'],
    ['g', 'text/plain'],
    ['g2w', 'application/vnd.geoplan'],
    ['g3', 'image/g3fax'],
    ['g3w', 'application/vnd.geospace'],
    ['gac', 'application/vnd.groove-account'],
    ['gdl', 'model/vnd.gdl'],
    ['geo', 'application/vnd.dynageo'],
    ['gex', 'application/vnd.geometry-explorer'],
    ['ggb', 'application/vnd.geogebra.file'],
    ['ggt', 'application/vnd.geogebra.tool'],
    ['ghf', 'application/vnd.groove-help'],
    ['gif', 'image/gif'],
    ['gim', 'application/vnd.groove-identity-message'],
    ['gl', ['video/gl', 'video/x-gl']],
    ['gmx', 'application/vnd.gmx'],
    ['gnumeric', 'application/x-gnumeric'],
    ['gph', 'application/vnd.flographit'],
    ['gqf', 'application/vnd.grafeq'],
    ['gram', 'application/srgs'],
    ['grv', 'application/vnd.groove-injector'],
    ['grxml', 'application/srgs+xml'],
    ['gsd', 'audio/x-gsm'],
    ['gsf', 'application/x-font-ghostscript'],
    ['gsm', 'audio/x-gsm'],
    ['gsp', 'application/x-gsp'],
    ['gss', 'application/x-gss'],
    ['gtar', 'application/x-gtar'],
    ['gtm', 'application/vnd.groove-tool-message'],
    ['gtw', 'model/vnd.gtw'],
    ['gv', 'text/vnd.graphviz'],
    ['gxt', 'application/vnd.geonext'],
    ['gz', ['application/x-gzip', 'application/x-compressed']],
    ['gzip', ['multipart/x-gzip', 'application/x-gzip']],
    ['h', ['text/plain', 'text/x-h']],
    ['h261', 'video/h261'],
    ['h263', 'video/h263'],
    ['h264', 'video/h264'],
    ['hal', 'application/vnd.hal+xml'],
    ['hbci', 'application/vnd.hbci'],
    ['hdf', 'application/x-hdf'],
    ['help', 'application/x-helpfile'],
    ['hgl', 'application/vnd.hp-hpgl'],
    ['hh', ['text/plain', 'text/x-h']],
    ['hlb', 'text/x-script'],
    ['hlp', ['application/winhlp',
        'application/hlp',
        'application/x-helpfile',
        'application/x-winhelp'
    ]],
    ['hpg', 'application/vnd.hp-hpgl'],
    ['hpgl', 'application/vnd.hp-hpgl'],
    ['hpid', 'application/vnd.hp-hpid'],
    ['hps', 'application/vnd.hp-hps'],
    ['hqx', ['application/mac-binhex40',
        'application/binhex',
        'application/binhex4',
        'application/mac-binhex',
        'application/x-binhex40',
        'application/x-mac-binhex40'
    ]],
    ['hta', 'application/hta'],
    ['htc', 'text/x-component'],
    ['htke', 'application/vnd.kenameaapp'],
    ['htm', 'text/html'],
    ['html', 'text/html'],
    ['htmls', 'text/html'],
    ['htt', 'text/webviewhtml'],
    ['htx', 'text/html'],
    ['hvd', 'application/vnd.yamaha.hv-dic'],
    ['hvp', 'application/vnd.yamaha.hv-voice'],
    ['hvs', 'application/vnd.yamaha.hv-script'],
    ['i2g', 'application/vnd.intergeo'],
    ['icc', 'application/vnd.iccprofile'],
    ['ice', 'x-conference/x-cooltalk'],
    ['ico', 'image/x-icon'],
    ['ics', 'text/calendar'],
    ['idc', 'text/plain'],
    ['ief', 'image/ief'],
    ['iefs', 'image/ief'],
    ['ifm', 'application/vnd.shana.informed.formdata'],
    ['iges', ['application/iges', 'model/iges']],
    ['igl', 'application/vnd.igloader'],
    ['igm', 'application/vnd.insors.igm'],
    ['igs', ['application/iges', 'model/iges']],
    ['igx', 'application/vnd.micrografx.igx'],
    ['iif', 'application/vnd.shana.informed.interchange'],
    ['iii', 'application/x-iphone'],
    ['ima', 'application/x-ima'],
    ['imap', 'application/x-httpd-imap'],
    ['imp', 'application/vnd.accpac.simply.imp'],
    ['ims', 'application/vnd.ms-ims'],
    ['inf', 'application/inf'],
    ['ins', ['application/x-internet-signup',
        'application/x-internett-signup'
    ]],
    ['ip', 'application/x-ip2'],
    ['ipfix', 'application/ipfix'],
    ['ipk', 'application/vnd.shana.informed.package'],
    ['irm', 'application/vnd.ibm.rights-management'],
    ['irp', 'application/vnd.irepository.package+xml'],
    ['isp', 'application/x-internet-signup'],
    ['isu', 'video/x-isvideo'],
    ['it', 'audio/it'],
    ['itp', 'application/vnd.shana.informed.formtemplate'],
    ['iv', 'application/x-inventor'],
    ['ivp', 'application/vnd.immervision-ivp'],
    ['ivr', 'i-world/i-vrml'],
    ['ivu', 'application/vnd.immervision-ivu'],
    ['ivy', 'application/x-livescreen'],
    ['jad', 'text/vnd.sun.j2me.app-descriptor'],
    ['jam', ['application/vnd.jam', 'audio/x-jam']],
    ['jar', 'application/java-archive'],
    ['jav', ['text/plain', 'text/x-java-source']],
    ['java', ['text/plain', 'text/x-java-source,java', 'text/x-java-source']],
    ['jcm', 'application/x-java-commerce'],
    ['jfif', ['image/pipeg', 'image/jpeg', 'image/pjpeg']],
    ['jfif-tbnl', 'image/jpeg'],
    ['jisp', 'application/vnd.jisp'],
    ['jlt', 'application/vnd.hp-jlyt'],
    ['jnlp', 'application/x-java-jnlp-file'],
    ['joda', 'application/vnd.joost.joda-archive'],
    ['jpe', ['image/jpeg', 'image/pjpeg']],
    ['jpeg', ['image/jpeg', 'image/pjpeg']],
    ['jpg', ['image/jpeg', 'image/pjpeg']],
    ['jpgv', 'video/jpeg'],
    ['jpm', 'video/jpm'],
    ['jps', 'image/x-jps'],
    ['js', ['application/javascript',
        'application/ecmascript',
        'text/javascript',
        'text/ecmascript',
        'application/x-javascript'
    ]],
    ['json', 'application/json'],
    ['jut', 'image/jutvision'],
    ['kar', ['audio/midi', 'music/x-karaoke']],
    ['karbon', 'application/vnd.kde.karbon'],
    ['kfo', 'application/vnd.kde.kformula'],
    ['kia', 'application/vnd.kidspiration'],
    ['kml', 'application/vnd.google-earth.kml+xml'],
    ['kmz', 'application/vnd.google-earth.kmz'],
    ['kne', 'application/vnd.kinar'],
    ['kon', 'application/vnd.kde.kontour'],
    ['kpr', 'application/vnd.kde.kpresenter'],
    ['ksh', ['application/x-ksh', 'text/x-script.ksh']],
    ['ksp', 'application/vnd.kde.kspread'],
    ['ktx', 'image/ktx'],
    ['ktz', 'application/vnd.kahootz'],
    ['kwd', 'application/vnd.kde.kword'],
    ['la', ['audio/nspaudio', 'audio/x-nspaudio']],
    ['lam', 'audio/x-liveaudio'],
    ['lasxml', 'application/vnd.las.las+xml'],
    ['latex', 'application/x-latex'],
    ['lbd', 'application/vnd.llamagraphics.life-balance.desktop'],
    ['lbe',
        'application/vnd.llamagraphics.life-balance.exchange+xml'
    ],
    ['les', 'application/vnd.hhe.lesson-player'],
    ['lha', ['application/octet-stream',
        'application/lha',
        'application/x-lha'
    ]],
    ['lhx', 'application/octet-stream'],
    ['link66', 'application/vnd.route66.link66+xml'],
    ['list', 'text/plain'],
    ['lma', ['audio/nspaudio', 'audio/x-nspaudio']],
    ['log', 'text/plain'],
    ['lrm', 'application/vnd.ms-lrm'],
    ['lsf', 'video/x-la-asf'],
    ['lsp', ['application/x-lisp', 'text/x-script.lisp']],
    ['lst', 'text/plain'],
    ['lsx', ['video/x-la-asf', 'text/x-la-asf']],
    ['ltf', 'application/vnd.frogans.ltf'],
    ['ltx', 'application/x-latex'],
    ['lvp', 'audio/vnd.lucent.voice'],
    ['lwp', 'application/vnd.lotus-wordpro'],
    ['lzh', ['application/octet-stream', 'application/x-lzh']],
    ['lzx', ['application/lzx',
        'application/octet-stream',
        'application/x-lzx'
    ]],
    ['m', ['text/plain', 'text/x-m']],
    ['m13', 'application/x-msmediaview'],
    ['m14', 'application/x-msmediaview'],
    ['m1v', 'video/mpeg'],
    ['m21', 'application/mp21'],
    ['m2a', 'audio/mpeg'],
    ['m2v', 'video/mpeg'],
    ['m3u', ['audio/x-mpegurl', 'audio/x-mpequrl']],
    ['m3u8', 'application/vnd.apple.mpegurl'],
    ['m4v', 'video/x-m4v'],
    ['ma', 'application/mathematica'],
    ['mads', 'application/mads+xml'],
    ['mag', 'application/vnd.ecowin.chart'],
    ['man', 'application/x-troff-man'],
    ['map', 'application/x-navimap'],
    ['mar', 'text/plain'],
    ['mathml', 'application/mathml+xml'],
    ['mbd', 'application/mbedlet'],
    ['mbk', 'application/vnd.mobius.mbk'],
    ['mbox', 'application/mbox'],
    ['mc$', 'application/x-magic-cap-package-1.0'],
    ['mc1', 'application/vnd.medcalcdata'],
    ['mcd', ['application/mcad',
        'application/vnd.mcd',
        'application/x-mathcad'
    ]],
    ['mcf', ['image/vasa', 'text/mcf']],
    ['mcp', 'application/netmc'],
    ['mcurl', 'text/vnd.curl.mcurl'],
    ['mdb', 'application/x-msaccess'],
    ['mdi', 'image/vnd.ms-modi'],
    ['me', 'application/x-troff-me'],
    ['meta4', 'application/metalink4+xml'],
    ['mets', 'application/mets+xml'],
    ['mfm', 'application/vnd.mfmp'],
    ['mgp', 'application/vnd.osgeo.mapguide.package'],
    ['mgz', 'application/vnd.proteus.magazine'],
    ['mht', 'message/rfc822'],
    ['mhtml', 'message/rfc822'],
    ['mid', ['audio/mid',
        'audio/midi',
        'music/crescendo',
        'x-music/x-midi',
        'audio/x-midi',
        'application/x-midi',
        'audio/x-mid'
    ]],
    ['midi', ['audio/midi',
        'music/crescendo',
        'x-music/x-midi',
        'audio/x-midi',
        'application/x-midi',
        'audio/x-mid'
    ]],
    ['mif', ['application/vnd.mif',
        'application/x-mif',
        'application/x-frame'
    ]],
    ['mime', ['message/rfc822', 'www/mime']],
    ['mj2', 'video/mj2'],
    ['mjf', 'audio/x-vnd.audioexplosion.mjuicemediafile'],
    ['mjpg', 'video/x-motion-jpeg'],
    ['mlp', 'application/vnd.dolby.mlp'],
    ['mm', ['application/base64', 'application/x-meme']],
    ['mmd', 'application/vnd.chipnuts.karaoke-mmd'],
    ['mme', 'application/base64'],
    ['mmf', 'application/vnd.smaf'],
    ['mmr', 'image/vnd.fujixerox.edmics-mmr'],
    ['mny', 'application/x-msmoney'],
    ['mod', ['audio/mod', 'audio/x-mod']],
    ['mods', 'application/mods+xml'],
    ['moov', 'video/quicktime'],
    ['mov', 'video/quicktime'],
    ['movie', 'video/x-sgi-movie'],
    ['mp2', ['video/mpeg',
        'audio/mpeg',
        'video/x-mpeg',
        'audio/x-mpeg',
        'video/x-mpeq2a'
    ]],
    ['mp3', ['audio/mpeg',
        'audio/mpeg3',
        'video/mpeg',
        'audio/x-mpeg-3',
        'video/x-mpeg'
    ]],
    ['mp4', ['video/mp4', 'application/mp4']],
    ['mp4a', 'audio/mp4'],
    ['mpa', ['video/mpeg', 'audio/mpeg']],
    ['mpc', ['application/vnd.mophun.certificate',
        'application/x-project'
    ]],
    ['mpe', 'video/mpeg'],
    ['mpeg', 'video/mpeg'],
    ['mpg', ['video/mpeg', 'audio/mpeg']],
    ['mpga', 'audio/mpeg'],
    ['mpkg', 'application/vnd.apple.installer+xml'],
    ['mpm', 'application/vnd.blueice.multipass'],
    ['mpn', 'application/vnd.mophun.application'],
    ['mpp', 'application/vnd.ms-project'],
    ['mpt', 'application/x-project'],
    ['mpv', 'application/x-project'],
    ['mpv2', 'video/mpeg'],
    ['mpx', 'application/x-project'],
    ['mpy', 'application/vnd.ibm.minipay'],
    ['mqy', 'application/vnd.mobius.mqy'],
    ['mrc', 'application/marc'],
    ['mrcx', 'application/marcxml+xml'],
    ['ms', 'application/x-troff-ms'],
    ['mscml', 'application/mediaservercontrol+xml'],
    ['mseq', 'application/vnd.mseq'],
    ['msf', 'application/vnd.epson.msf'],
    ['msg', 'application/vnd.ms-outlook'],
    ['msh', 'model/mesh'],
    ['msl', 'application/vnd.mobius.msl'],
    ['msty', 'application/vnd.muvee.style'],
    ['mts', 'model/vnd.mts'],
    ['mus', 'application/vnd.musician'],
    ['musicxml', 'application/vnd.recordare.musicxml+xml'],
    ['mv', 'video/x-sgi-movie'],
    ['mvb', 'application/x-msmediaview'],
    ['mwf', 'application/vnd.mfer'],
    ['mxf', 'application/mxf'],
    ['mxl', 'application/vnd.recordare.musicxml'],
    ['mxml', 'application/xv+xml'],
    ['mxs', 'application/vnd.triscape.mxs'],
    ['mxu', 'video/vnd.mpegurl'],
    ['my', 'audio/make'],
    ['mzz', 'application/x-vnd.audioexplosion.mzz'],
    ['n-gage', 'application/vnd.nokia.n-gage.symbian.install'],
    ['n3', 'text/n3'],
    ['nap', 'image/naplps'],
    ['naplps', 'image/naplps'],
    ['nbp', 'application/vnd.wolfram.player'],
    ['nc', 'application/x-netcdf'],
    ['ncm', 'application/vnd.nokia.configuration-message'],
    ['ncx', 'application/x-dtbncx+xml'],
    ['ngdat', 'application/vnd.nokia.n-gage.data'],
    ['nif', 'image/x-niff'],
    ['niff', 'image/x-niff'],
    ['nix', 'application/x-mix-transfer'],
    ['nlu', 'application/vnd.neurolanguage.nlu'],
    ['nml', 'application/vnd.enliven'],
    ['nnd', 'application/vnd.noblenet-directory'],
    ['nns', 'application/vnd.noblenet-sealer'],
    ['nnw', 'application/vnd.noblenet-web'],
    ['npx', 'image/vnd.net-fpx'],
    ['nsc', 'application/x-conference'],
    ['nsf', 'application/vnd.lotus-notes'],
    ['nvd', 'application/x-navidoc'],
    ['nws', 'message/rfc822'],
    ['o', 'application/octet-stream'],
    ['oa2', 'application/vnd.fujitsu.oasys2'],
    ['oa3', 'application/vnd.fujitsu.oasys3'],
    ['oas', 'application/vnd.fujitsu.oasys'],
    ['obd', 'application/x-msbinder'],
    ['oda', 'application/oda'],
    ['odb', 'application/vnd.oasis.opendocument.database'],
    ['odc', 'application/vnd.oasis.opendocument.chart'],
    ['odf', 'application/vnd.oasis.opendocument.formula'],
    ['odft',
        'application/vnd.oasis.opendocument.formula-template'
    ],
    ['odg', 'application/vnd.oasis.opendocument.graphics'],
    ['odi', 'application/vnd.oasis.opendocument.image'],
    ['odm', 'application/vnd.oasis.opendocument.text-master'],
    ['odp', 'application/vnd.oasis.opendocument.presentation'],
    ['ods', 'application/vnd.oasis.opendocument.spreadsheet'],
    ['odt', 'application/vnd.oasis.opendocument.text'],
    ['oga', 'audio/ogg'],
    ['ogv', 'video/ogg'],
    ['ogx', 'application/ogg'],
    ['omc', 'application/x-omc'],
    ['omcd', 'application/x-omcdatamaker'],
    ['omcr', 'application/x-omcregerator'],
    ['onetoc', 'application/onenote'],
    ['opf', 'application/oebps-package+xml'],
    ['org', 'application/vnd.lotus-organizer'],
    ['osf', 'application/vnd.yamaha.openscoreformat'],
    ['osfpvg',
        'application/vnd.yamaha.openscoreformat.osfpvg+xml'
    ],
    ['otc', 'application/vnd.oasis.opendocument.chart-template'],
    ['otf', 'application/x-font-otf'],
    ['otg',
        'application/vnd.oasis.opendocument.graphics-template'
    ],
    ['oth', 'application/vnd.oasis.opendocument.text-web'],
    ['oti', 'application/vnd.oasis.opendocument.image-template'],
    ['otp',
        'application/vnd.oasis.opendocument.presentation-template'
    ],
    ['ots',
        'application/vnd.oasis.opendocument.spreadsheet-template'
    ],
    ['ott', 'application/vnd.oasis.opendocument.text-template'],
    ['oxt', 'application/vnd.openofficeorg.extension'],
    ['p', 'text/x-pascal'],
    ['p10', ['application/pkcs10', 'application/x-pkcs10']],
    ['p12', ['application/pkcs-12', 'application/x-pkcs12']],
    ['p7a', 'application/x-pkcs7-signature'],
    ['p7b', 'application/x-pkcs7-certificates'],
    ['p7c', ['application/pkcs7-mime', 'application/x-pkcs7-mime']],
    ['p7m', ['application/pkcs7-mime', 'application/x-pkcs7-mime']],
    ['p7r', 'application/x-pkcs7-certreqresp'],
    ['p7s', ['application/pkcs7-signature',
        'application/x-pkcs7-signature'
    ]],
    ['p8', 'application/pkcs8'],
    ['par', 'text/plain-bas'],
    ['part', 'application/pro_eng'],
    ['pas', 'text/pascal'],
    ['paw', 'application/vnd.pawaafile'],
    ['pbd', 'application/vnd.powerbuilder6'],
    ['pbm', 'image/x-portable-bitmap'],
    ['pcf', 'application/x-font-pcf'],
    ['pcl', ['application/vnd.hp-pcl', 'application/x-pcl']],
    ['pclxl', 'application/vnd.hp-pclxl'],
    ['pct', 'image/x-pict'],
    ['pcurl', 'application/vnd.curl.pcurl'],
    ['pcx', 'image/x-pcx'],
    ['pdb', ['application/vnd.palm', 'chemical/x-pdb']],
    ['pdf', 'application/pdf'],
    ['pfa', 'application/x-font-type1'],
    ['pfr', 'application/font-tdpfr'],
    ['pfunk', ['audio/make', 'audio/make.my.funk']],
    ['pfx', 'application/x-pkcs12'],
    ['pgm', ['image/x-portable-graymap', 'image/x-portable-greymap']],
    ['pgn', 'application/x-chess-pgn'],
    ['pgp', 'application/pgp-signature'],
    ['pic', ['image/pict', 'image/x-pict']],
    ['pict', 'image/pict'],
    ['pkg', 'application/x-newton-compatible-pkg'],
    ['pki', 'application/pkixcmp'],
    ['pkipath', 'application/pkix-pkipath'],
    ['pko', ['application/ynd.ms-pkipko', 'application/vnd.ms-pki.pko']],
    ['pl', ['text/plain', 'text/x-script.perl']],
    ['plb', 'application/vnd.3gpp.pic-bw-large'],
    ['plc', 'application/vnd.mobius.plc'],
    ['plf', 'application/vnd.pocketlearn'],
    ['pls', 'application/pls+xml'],
    ['plx', 'application/x-pixclscript'],
    ['pm', ['text/x-script.perl-module', 'image/x-xpixmap']],
    ['pm4', 'application/x-pagemaker'],
    ['pm5', 'application/x-pagemaker'],
    ['pma', 'application/x-perfmon'],
    ['pmc', 'application/x-perfmon'],
    ['pml', ['application/vnd.ctc-posml', 'application/x-perfmon']],
    ['pmr', 'application/x-perfmon'],
    ['pmw', 'application/x-perfmon'],
    ['png', 'image/png'],
    ['pnm', ['application/x-portable-anymap', 'image/x-portable-anymap']],
    ['portpkg', 'application/vnd.macports.portpkg'],
    ['pot', ['application/vnd.ms-powerpoint', 'application/mspowerpoint']],
    ['potm',
        'application/vnd.ms-powerpoint.template.macroenabled.12'
    ],
    ['potx',
        'application/vnd.openxmlformats-officedocument.presentationml.template'
    ],
    ['pov', 'model/x-pov'],
    ['ppa', 'application/vnd.ms-powerpoint'],
    ['ppam',
        'application/vnd.ms-powerpoint.addin.macroenabled.12'
    ],
    ['ppd', 'application/vnd.cups-ppd'],
    ['ppm', 'image/x-portable-pixmap'],
    ['pps', ['application/vnd.ms-powerpoint', 'application/mspowerpoint']],
    ['ppsm',
        'application/vnd.ms-powerpoint.slideshow.macroenabled.12'
    ],
    ['ppsx',
        'application/vnd.openxmlformats-officedocument.presentationml.slideshow'
    ],
    ['ppt', ['application/vnd.ms-powerpoint',
        'application/mspowerpoint',
        'application/powerpoint',
        'application/x-mspowerpoint'
    ]],
    ['pptm',
        'application/vnd.ms-powerpoint.presentation.macroenabled.12'
    ],
    ['pptx',
        'application/vnd.openxmlformats-officedocument.presentationml.presentation'
    ],
    ['ppz', 'application/mspowerpoint'],
    ['prc', 'application/x-mobipocket-ebook'],
    ['pre', ['application/vnd.lotus-freelance', 'application/x-freelance']],
    ['prf', 'application/pics-rules'],
    ['prt', 'application/pro_eng'],
    ['ps', 'application/postscript'],
    ['psb', 'application/vnd.3gpp.pic-bw-small'],
    ['psd', ['application/octet-stream', 'image/vnd.adobe.photoshop']],
    ['psf', 'application/x-font-linux-psf'],
    ['pskcxml', 'application/pskc+xml'],
    ['ptid', 'application/vnd.pvi.ptid1'],
    ['pub', 'application/x-mspublisher'],
    ['pvb', 'application/vnd.3gpp.pic-bw-var'],
    ['pvu', 'paleovu/x-pv'],
    ['pwn', 'application/vnd.3m.post-it-notes'],
    ['pwz', 'application/vnd.ms-powerpoint'],
    ['py', 'text/x-script.phyton'],
    ['pya', 'audio/vnd.ms-playready.media.pya'],
    ['pyc', 'applicaiton/x-bytecode.python'],
    ['pyv', 'video/vnd.ms-playready.media.pyv'],
    ['qam', 'application/vnd.epson.quickanime'],
    ['qbo', 'application/vnd.intu.qbo'],
    ['qcp', 'audio/vnd.qcelp'],
    ['qd3', 'x-world/x-3dmf'],
    ['qd3d', 'x-world/x-3dmf'],
    ['qfx', 'application/vnd.intu.qfx'],
    ['qif', 'image/x-quicktime'],
    ['qps', 'application/vnd.publishare-delta-tree'],
    ['qt', 'video/quicktime'],
    ['qtc', 'video/x-qtc'],
    ['qti', 'image/x-quicktime'],
    ['qtif', 'image/x-quicktime'],
    ['qxd', 'application/vnd.quark.quarkxpress'],
    ['ra', ['audio/x-realaudio',
        'audio/x-pn-realaudio',
        'audio/x-pn-realaudio-plugin'
    ]],
    ['ram', 'audio/x-pn-realaudio'],
    ['rar', 'application/x-rar-compressed'],
    ['ras', ['image/cmu-raster',
        'application/x-cmu-raster',
        'image/x-cmu-raster'
    ]],
    ['rast', 'image/cmu-raster'],
    ['rcprofile', 'application/vnd.ipunplugged.rcprofile'],
    ['rdf', 'application/rdf+xml'],
    ['rdz', 'application/vnd.data-vision.rdz'],
    ['rep', 'application/vnd.businessobjects'],
    ['res', 'application/x-dtbresource+xml'],
    ['rexx', 'text/x-script.rexx'],
    ['rf', 'image/vnd.rn-realflash'],
    ['rgb', 'image/x-rgb'],
    ['rif', 'application/reginfo+xml'],
    ['rip', 'audio/vnd.rip'],
    ['rl', 'application/resource-lists+xml'],
    ['rlc', 'image/vnd.fujixerox.edmics-rlc'],
    ['rld', 'application/resource-lists-diff+xml'],
    ['rm', ['application/vnd.rn-realmedia', 'audio/x-pn-realaudio']],
    ['rmi', 'audio/mid'],
    ['rmm', 'audio/x-pn-realaudio'],
    ['rmp', ['audio/x-pn-realaudio-plugin', 'audio/x-pn-realaudio']],
    ['rms', 'application/vnd.jcp.javame.midlet-rms'],
    ['rnc', 'application/relax-ng-compact-syntax'],
    ['rng', ['application/ringing-tones',
        'application/vnd.nokia.ringing-tone'
    ]],
    ['rnx', 'application/vnd.rn-realplayer'],
    ['roff', 'application/x-troff'],
    ['rp', 'image/vnd.rn-realpix'],
    ['rp9', 'application/vnd.cloanto.rp9'],
    ['rpm', 'audio/x-pn-realaudio-plugin'],
    ['rpss', 'application/vnd.nokia.radio-presets'],
    ['rpst', 'application/vnd.nokia.radio-preset'],
    ['rq', 'application/sparql-query'],
    ['rs', 'application/rls-services+xml'],
    ['rsd', 'application/rsd+xml'],
    ['rt', ['text/richtext', 'text/vnd.rn-realtext']],
    ['rtf', ['application/rtf', 'text/richtext', 'application/x-rtf']],
    ['rtx', ['text/richtext', 'application/rtf']],
    ['rv', 'video/vnd.rn-realvideo'],
    ['s', 'text/x-asm'],
    ['s3m', 'audio/s3m'],
    ['saf', 'application/vnd.yamaha.smaf-audio'],
    ['saveme', 'application/octet-stream'],
    ['sbk', 'application/x-tbook'],
    ['sbml', 'application/sbml+xml'],
    ['sc', 'application/vnd.ibm.secure-container'],
    ['scd', 'application/x-msschedule'],
    ['scm', ['application/vnd.lotus-screencam',
        'video/x-scm',
        'text/x-script.guile',
        'application/x-lotusscreencam',
        'text/x-script.scheme'
    ]],
    ['scq', 'application/scvp-cv-request'],
    ['scs', 'application/scvp-cv-response'],
    ['sct', 'text/scriptlet'],
    ['scurl', 'text/vnd.curl.scurl'],
    ['sda', 'application/vnd.stardivision.draw'],
    ['sdc', 'application/vnd.stardivision.calc'],
    ['sdd', 'application/vnd.stardivision.impress'],
    ['sdkm', 'application/vnd.solent.sdkm+xml'],
    ['sdml', 'text/plain'],
    ['sdp', ['application/sdp', 'application/x-sdp']],
    ['sdr', 'application/sounder'],
    ['sdw', 'application/vnd.stardivision.writer'],
    ['sea', ['application/sea', 'application/x-sea']],
    ['see', 'application/vnd.seemail'],
    ['seed', 'application/vnd.fdsn.seed'],
    ['sema', 'application/vnd.sema'],
    ['semd', 'application/vnd.semd'],
    ['semf', 'application/vnd.semf'],
    ['ser', 'application/java-serialized-object'],
    ['set', 'application/set'],
    ['setpay', 'application/set-payment-initiation'],
    ['setreg', 'application/set-registration-initiation'],
    ['sfd-hdstx', 'application/vnd.hydrostatix.sof-data'],
    ['sfs', 'application/vnd.spotfire.sfs'],
    ['sgl', 'application/vnd.stardivision.writer-global'],
    ['sgm', ['text/sgml', 'text/x-sgml']],
    ['sgml', ['text/sgml', 'text/x-sgml']],
    ['sh', ['application/x-shar',
        'application/x-bsh',
        'application/x-sh',
        'text/x-script.sh'
    ]],
    ['shar', ['application/x-bsh', 'application/x-shar']],
    ['shf', 'application/shf+xml'],
    ['shtml', ['text/html', 'text/x-server-parsed-html']],
    ['sid', 'audio/x-psid'],
    ['sis', 'application/vnd.symbian.install'],
    ['sit', ['application/x-stuffit', 'application/x-sit']],
    ['sitx', 'application/x-stuffitx'],
    ['skd', 'application/x-koan'],
    ['skm', 'application/x-koan'],
    ['skp', ['application/vnd.koan', 'application/x-koan']],
    ['skt', 'application/x-koan'],
    ['sl', 'application/x-seelogo'],
    ['sldm',
        'application/vnd.ms-powerpoint.slide.macroenabled.12'
    ],
    ['sldx',
        'application/vnd.openxmlformats-officedocument.presentationml.slide'
    ],
    ['slt', 'application/vnd.epson.salt'],
    ['sm', 'application/vnd.stepmania.stepchart'],
    ['smf', 'application/vnd.stardivision.math'],
    ['smi', ['application/smil', 'application/smil+xml']],
    ['smil', 'application/smil'],
    ['snd', ['audio/basic', 'audio/x-adpcm']],
    ['snf', 'application/x-font-snf'],
    ['sol', 'application/solids'],
    ['spc', ['text/x-speech', 'application/x-pkcs7-certificates']],
    ['spf', 'application/vnd.yamaha.smaf-phrase'],
    ['spl', ['application/futuresplash', 'application/x-futuresplash']],
    ['spot', 'text/vnd.in3d.spot'],
    ['spp', 'application/scvp-vp-response'],
    ['spq', 'application/scvp-vp-request'],
    ['spr', 'application/x-sprite'],
    ['sprite', 'application/x-sprite'],
    ['src', 'application/x-wais-source'],
    ['sru', 'application/sru+xml'],
    ['srx', 'application/sparql-results+xml'],
    ['sse', 'application/vnd.kodak-descriptor'],
    ['ssf', 'application/vnd.epson.ssf'],
    ['ssi', 'text/x-server-parsed-html'],
    ['ssm', 'application/streamingmedia'],
    ['ssml', 'application/ssml+xml'],
    ['sst', ['application/vnd.ms-pkicertstore',
        'application/vnd.ms-pki.certstore'
    ]],
    ['st', 'application/vnd.sailingtracker.track'],
    ['stc', 'application/vnd.sun.xml.calc.template'],
    ['std', 'application/vnd.sun.xml.draw.template'],
    ['step', 'application/step'],
    ['stf', 'application/vnd.wt.stf'],
    ['sti', 'application/vnd.sun.xml.impress.template'],
    ['stk', 'application/hyperstudio'],
    ['stl', ['application/vnd.ms-pkistl',
        'application/sla',
        'application/vnd.ms-pki.stl',
        'application/x-navistyle'
    ]],
    ['stm', 'text/html'],
    ['stp', 'application/step'],
    ['str', 'application/vnd.pg.format'],
    ['stw', 'application/vnd.sun.xml.writer.template'],
    ['sub', 'image/vnd.dvb.subtitle'],
    ['sus', 'application/vnd.sus-calendar'],
    ['sv4cpio', 'application/x-sv4cpio'],
    ['sv4crc', 'application/x-sv4crc'],
    ['svc', 'application/vnd.dvb.service'],
    ['svd', 'application/vnd.svd'],
    ['svf', ['image/vnd.dwg', 'image/x-dwg']],
    ['svg', 'image/svg+xml'],
    ['svr', ['x-world/x-svr', 'application/x-world']],
    ['swf', 'application/x-shockwave-flash'],
    ['swi', 'application/vnd.aristanetworks.swi'],
    ['sxc', 'application/vnd.sun.xml.calc'],
    ['sxd', 'application/vnd.sun.xml.draw'],
    ['sxg', 'application/vnd.sun.xml.writer.global'],
    ['sxi', 'application/vnd.sun.xml.impress'],
    ['sxm', 'application/vnd.sun.xml.math'],
    ['sxw', 'application/vnd.sun.xml.writer'],
    ['t', ['text/troff', 'application/x-troff']],
    ['talk', 'text/x-speech'],
    ['tao', 'application/vnd.tao.intent-module-archive'],
    ['tar', 'application/x-tar'],
    ['tbk', ['application/toolbook', 'application/x-tbook']],
    ['tcap', 'application/vnd.3gpp2.tcap'],
    ['tcl', ['text/x-script.tcl', 'application/x-tcl']],
    ['tcsh', 'text/x-script.tcsh'],
    ['teacher', 'application/vnd.smart.teacher'],
    ['tei', 'application/tei+xml'],
    ['tex', 'application/x-tex'],
    ['texi', 'application/x-texinfo'],
    ['texinfo', 'application/x-texinfo'],
    ['text', ['application/plain', 'text/plain']],
    ['tfi', 'application/thraud+xml'],
    ['tfm', 'application/x-tex-tfm'],
    ['tgz', ['application/gnutar', 'application/x-compressed']],
    ['thmx', 'application/vnd.ms-officetheme'],
    ['tif', ['image/tiff', 'image/x-tiff']],
    ['tiff', ['image/tiff', 'image/x-tiff']],
    ['tmo', 'application/vnd.tmobile-livetv'],
    ['torrent', 'application/x-bittorrent'],
    ['tpl', 'application/vnd.groove-tool-template'],
    ['tpt', 'application/vnd.trid.tpt'],
    ['tr', 'application/x-troff'],
    ['tra', 'application/vnd.trueapp'],
    ['trm', 'application/x-msterminal'],
    ['tsd', 'application/timestamped-data'],
    ['tsi', 'audio/tsp-audio'],
    ['tsp', ['application/dsptype', 'audio/tsplayer']],
    ['tsv', 'text/tab-separated-values'],
    ['ttf', 'application/x-font-ttf'],
    ['ttl', 'text/turtle'],
    ['turbot', 'image/florian'],
    ['twd', 'application/vnd.simtech-mindmapper'],
    ['txd', 'application/vnd.genomatix.tuxedo'],
    ['txf', 'application/vnd.mobius.txf'],
    ['txt', 'text/plain'],
    ['ufd', 'application/vnd.ufdl'],
    ['uil', 'text/x-uil'],
    ['uls', 'text/iuls'],
    ['umj', 'application/vnd.umajin'],
    ['uni', 'text/uri-list'],
    ['unis', 'text/uri-list'],
    ['unityweb', 'application/vnd.unity'],
    ['unv', 'application/i-deas'],
    ['uoml', 'application/vnd.uoml+xml'],
    ['uri', 'text/uri-list'],
    ['uris', 'text/uri-list'],
    ['ustar', ['application/x-ustar', 'multipart/x-ustar']],
    ['utz', 'application/vnd.uiq.theme'],
    ['uu', ['application/octet-stream', 'text/x-uuencode']],
    ['uue', 'text/x-uuencode'],
    ['uva', 'audio/vnd.dece.audio'],
    ['uvh', 'video/vnd.dece.hd'],
    ['uvi', 'image/vnd.dece.graphic'],
    ['uvm', 'video/vnd.dece.mobile'],
    ['uvp', 'video/vnd.dece.pd'],
    ['uvs', 'video/vnd.dece.sd'],
    ['uvu', 'video/vnd.uvvu.mp4'],
    ['uvv', 'video/vnd.dece.video'],
    ['vcd', 'application/x-cdlink'],
    ['vcf', 'text/x-vcard'],
    ['vcg', 'application/vnd.groove-vcard'],
    ['vcs', 'text/x-vcalendar'],
    ['vcx', 'application/vnd.vcx'],
    ['vda', 'application/vda'],
    ['vdo', 'video/vdo'],
    ['vew', 'application/groupwise'],
    ['vis', 'application/vnd.visionary'],
    ['viv', ['video/vivo', 'video/vnd.vivo']],
    ['vivo', ['video/vivo', 'video/vnd.vivo']],
    ['vmd', 'application/vocaltec-media-desc'],
    ['vmf', 'application/vocaltec-media-file'],
    ['voc', ['audio/voc', 'audio/x-voc']],
    ['vos', 'video/vosaic'],
    ['vox', 'audio/voxware'],
    ['vqe', 'audio/x-twinvq-plugin'],
    ['vqf', 'audio/x-twinvq'],
    ['vql', 'audio/x-twinvq-plugin'],
    ['vrml', ['model/vrml', 'x-world/x-vrml', 'application/x-vrml']],
    ['vrt', 'x-world/x-vrt'],
    ['vsd', ['application/vnd.visio', 'application/x-visio']],
    ['vsf', 'application/vnd.vsf'],
    ['vst', 'application/x-visio'],
    ['vsw', 'application/x-visio'],
    ['vtu', 'model/vnd.vtu'],
    ['vxml', 'application/voicexml+xml'],
    ['w60', 'application/wordperfect6.0'],
    ['w61', 'application/wordperfect6.1'],
    ['w6w', 'application/msword'],
    ['wad', 'application/x-doom'],
    ['wav', ['audio/wav', 'audio/x-wav']],
    ['wax', 'audio/x-ms-wax'],
    ['wb1', 'application/x-qpro'],
    ['wbmp', 'image/vnd.wap.wbmp'],
    ['wbs', 'application/vnd.criticaltools.wbs+xml'],
    ['wbxml', 'application/vnd.wap.wbxml'],
    ['wcm', 'application/vnd.ms-works'],
    ['wdb', 'application/vnd.ms-works'],
    ['web', 'application/vnd.xara'],
    ['weba', 'audio/webm'],
    ['webm', 'video/webm'],
    ['webp', 'image/webp'],
    ['wg', 'application/vnd.pmi.widget'],
    ['wgt', 'application/widget'],
    ['wiz', 'application/msword'],
    ['wk1', 'application/x-123'],
    ['wks', 'application/vnd.ms-works'],
    ['wm', 'video/x-ms-wm'],
    ['wma', 'audio/x-ms-wma'],
    ['wmd', 'application/x-ms-wmd'],
    ['wmf', ['windows/metafile', 'application/x-msmetafile']],
    ['wml', 'text/vnd.wap.wml'],
    ['wmlc', 'application/vnd.wap.wmlc'],
    ['wmls', 'text/vnd.wap.wmlscript'],
    ['wmlsc', 'application/vnd.wap.wmlscriptc'],
    ['wmv', 'video/x-ms-wmv'],
    ['wmx', 'video/x-ms-wmx'],
    ['wmz', 'application/x-ms-wmz'],
    ['woff', 'application/x-font-woff'],
    ['word', 'application/msword'],
    ['wp', 'application/wordperfect'],
    ['wp5', ['application/wordperfect', 'application/wordperfect6.0']],
    ['wp6', 'application/wordperfect'],
    ['wpd', ['application/wordperfect',
        'application/vnd.wordperfect',
        'application/x-wpwin'
    ]],
    ['wpl', 'application/vnd.ms-wpl'],
    ['wps', 'application/vnd.ms-works'],
    ['wq1', 'application/x-lotus'],
    ['wqd', 'application/vnd.wqd'],
    ['wri', ['application/mswrite',
        'application/x-wri',
        'application/x-mswrite'
    ]],
    ['wrl', ['model/vrml', 'x-world/x-vrml', 'application/x-world']],
    ['wrz', ['model/vrml', 'x-world/x-vrml']],
    ['wsc', 'text/scriplet'],
    ['wsdl', 'application/wsdl+xml'],
    ['wspolicy', 'application/wspolicy+xml'],
    ['wsrc', 'application/x-wais-source'],
    ['wtb', 'application/vnd.webturbo'],
    ['wtk', 'application/x-wintalk'],
    ['wvx', 'video/x-ms-wvx'],
    ['x-png', 'image/png'],
    ['x3d', 'application/vnd.hzn-3d-crossword'],
    ['xaf', 'x-world/x-vrml'],
    ['xap', 'application/x-silverlight-app'],
    ['xar', 'application/vnd.xara'],
    ['xbap', 'application/x-ms-xbap'],
    ['xbd', 'application/vnd.fujixerox.docuworks.binder'],
    ['xbm', ['image/xbm', 'image/x-xbm', 'image/x-xbitmap']],
    ['xdf', 'application/xcap-diff+xml'],
    ['xdm', 'application/vnd.syncml.dm+xml'],
    ['xdp', 'application/vnd.adobe.xdp+xml'],
    ['xdr', 'video/x-amt-demorun'],
    ['xdssc', 'application/dssc+xml'],
    ['xdw', 'application/vnd.fujixerox.docuworks'],
    ['xenc', 'application/xenc+xml'],
    ['xer', 'application/patch-ops-error+xml'],
    ['xfdf', 'application/vnd.adobe.xfdf'],
    ['xfdl', 'application/vnd.xfdl'],
    ['xgz', 'xgl/drawing'],
    ['xhtml', 'application/xhtml+xml'],
    ['xif', 'image/vnd.xiff'],
    ['xl', 'application/excel'],
    ['xla', ['application/vnd.ms-excel',
        'application/excel',
        'application/x-msexcel',
        'application/x-excel'
    ]],
    ['xlam', 'application/vnd.ms-excel.addin.macroenabled.12'],
    ['xlb', ['application/excel',
        'application/vnd.ms-excel',
        'application/x-excel'
    ]],
    ['xlc', ['application/vnd.ms-excel',
        'application/excel',
        'application/x-excel'
    ]],
    ['xld', ['application/excel', 'application/x-excel']],
    ['xlk', ['application/excel', 'application/x-excel']],
    ['xll', ['application/excel',
        'application/vnd.ms-excel',
        'application/x-excel'
    ]],
    ['xlm', ['application/vnd.ms-excel',
        'application/excel',
        'application/x-excel'
    ]],
    ['xls', ['application/vnd.ms-excel',
        'application/excel',
        'application/x-msexcel',
        'application/x-excel'
    ]],
    ['xlsb',
        'application/vnd.ms-excel.sheet.binary.macroenabled.12'
    ],
    ['xlsm', 'application/vnd.ms-excel.sheet.macroenabled.12'],
    ['xlsx',
        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'
    ],
    ['xlt', ['application/vnd.ms-excel',
        'application/excel',
        'application/x-excel'
    ]],
    ['xltm', 'application/vnd.ms-excel.template.macroenabled.12'],
    ['xltx',
        'application/vnd.openxmlformats-officedocument.spreadsheetml.template'
    ],
    ['xlv', ['application/excel', 'application/x-excel']],
    ['xlw', ['application/vnd.ms-excel',
        'application/excel',
        'application/x-msexcel',
        'application/x-excel'
    ]],
    ['xm', 'audio/xm'],
    ['xml', ['application/xml',
        'text/xml',
        'application/atom+xml',
        'application/rss+xml'
    ]],
    ['xmz', 'xgl/movie'],
    ['xo', 'application/vnd.olpc-sugar'],
    ['xof', 'x-world/x-vrml'],
    ['xop', 'application/xop+xml'],
    ['xpi', 'application/x-xpinstall'],
    ['xpix', 'application/x-vnd.ls-xpix'],
    ['xpm', ['image/xpm', 'image/x-xpixmap']],
    ['xpr', 'application/vnd.is-xpr'],
    ['xps', 'application/vnd.ms-xpsdocument'],
    ['xpw', 'application/vnd.intercon.formnet'],
    ['xslt', 'application/xslt+xml'],
    ['xsm', 'application/vnd.syncml+xml'],
    ['xspf', 'application/xspf+xml'],
    ['xsr', 'video/x-amt-showrun'],
    ['xul', 'application/vnd.mozilla.xul+xml'],
    ['xwd', ['image/x-xwd', 'image/x-xwindowdump']],
    ['xyz', ['chemical/x-xyz', 'chemical/x-pdb']],
    ['yang', 'application/yang'],
    ['yin', 'application/yin+xml'],
    ['z', ['application/x-compressed', 'application/x-compress']],
    ['zaz', 'application/vnd.zzazz.deck+xml'],
    ['zip', ['application/zip',
        'multipart/x-zip',
        'application/x-zip-compressed',
        'application/x-compressed'
    ]],
    ['zir', 'application/vnd.zul'],
    ['zmm', 'application/vnd.handheld-entertainment+xml'],
    ['zoo', 'application/octet-stream'],
    ['zsh', 'text/x-script.zsh']
]);

module.exports = {
    detectMimeType(filename) {
        if (!filename) {
            return defaultMimeType;
        }

        let parsed = path.parse(filename);
        let extension = (parsed.ext.substr(1) || parsed.name || '').split('?').shift().trim().toLowerCase();
        let value = defaultMimeType;

        if (extensions.has(extension)) {
            value = extensions.get(extension);
        }

        if (Array.isArray(value)) {
            return value[0];
        }
        return value;
    },

    detectExtension(mimeType) {
        if (!mimeType) {
            return defaultExtension;
        }
        let parts = (mimeType || '').toLowerCase().trim().split('/');
        let rootType = parts.shift().trim();
        let subType = parts.join('/').trim();

        if (mimeTypes.has(rootType + '/' + subType)) {
            let value = mimeTypes.get(rootType + '/' + subType);
            if (Array.isArray(value)) {
                return value[0];
            }
            return value;
        }

        switch (rootType) {
            case 'text':
                return 'txt';
            default:
                return 'bin';
        }
    }
};

},{"path":5}],31:[function(require,module,exports){
(function (Buffer){
'use strict';

const Transform = require('stream').Transform;

/**
 * Encodes a Buffer into a Quoted-Printable encoded string
 *
 * @param {Buffer} buffer Buffer to convert
 * @returns {String} Quoted-Printable encoded string
 */
function encode(buffer) {
    if (typeof buffer === 'string') {
        buffer = new Buffer(buffer, 'utf-8');
    }

    // usable characters that do not need encoding
    let ranges = [
        // https://tools.ietf.org/html/rfc2045#section-6.7
        [0x09], // <TAB>
        [0x0A], // <LF>
        [0x0D], // <CR>
        [0x20, 0x3C], // <SP>!"#$%&'()*+,-./0123456789:;
        [0x3E, 0x7E] // >?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}
    ];
    let result = '';
    let ord;

    for (let i = 0, len = buffer.length; i < len; i++) {
        ord = buffer[i];
        // if the char is in allowed range, then keep as is, unless it is a WS in the end of a line
        if (checkRanges(ord, ranges) && !((ord === 0x20 || ord === 0x09) && (i === len - 1 || buffer[i + 1] === 0x0a || buffer[i + 1] === 0x0d))) {
            result += String.fromCharCode(ord);
            continue;
        }
        result += '=' + (ord < 0x10 ? '0' : '') + ord.toString(16).toUpperCase();
    }

    return result;
}

/**
 * Adds soft line breaks to a Quoted-Printable string
 *
 * @param {String} str Quoted-Printable encoded string that might need line wrapping
 * @param {Number} [lineLength=76] Maximum allowed length for a line
 * @returns {String} Soft-wrapped Quoted-Printable encoded string
 */
function wrap(str, lineLength) {
    str = (str || '').toString();
    lineLength = lineLength || 76;

    if (str.length <= lineLength) {
        return str;
    }

    let pos = 0;
    let len = str.length;
    let match, code, line;
    let lineMargin = Math.floor(lineLength / 3);
    let result = '';

    // insert soft linebreaks where needed
    while (pos < len) {
        line = str.substr(pos, lineLength);
        if ((match = line.match(/\r\n/))) {
            line = line.substr(0, match.index + match[0].length);
            result += line;
            pos += line.length;
            continue;
        }

        if (line.substr(-1) === '\n') {
            // nothing to change here
            result += line;
            pos += line.length;
            continue;
        } else if ((match = line.substr(-lineMargin).match(/\n.*?$/))) {
            // truncate to nearest line break
            line = line.substr(0, line.length - (match[0].length - 1));
            result += line;
            pos += line.length;
            continue;
        } else if (line.length > lineLength - lineMargin && (match = line.substr(-lineMargin).match(/[ \t\.,!\?][^ \t\.,!\?]*$/))) {
            // truncate to nearest space
            line = line.substr(0, line.length - (match[0].length - 1));
        } else if (line.match(/\=[\da-f]{0,2}$/i)) {

            // push incomplete encoding sequences to the next line
            if ((match = line.match(/\=[\da-f]{0,1}$/i))) {
                line = line.substr(0, line.length - match[0].length);
            }

            // ensure that utf-8 sequences are not split
            while (line.length > 3 && line.length < len - pos && !line.match(/^(?:=[\da-f]{2}){1,4}$/i) && (match = line.match(/\=[\da-f]{2}$/ig))) {
                code = parseInt(match[0].substr(1, 2), 16);
                if (code < 128) {
                    break;
                }

                line = line.substr(0, line.length - 3);

                if (code >= 0xC0) {
                    break;
                }
            }
        }

        if (pos + line.length < len && line.substr(-1) !== '\n') {
            if (line.length === lineLength && line.match(/\=[\da-f]{2}$/i)) {
                line = line.substr(0, line.length - 3);
            } else if (line.length === lineLength) {
                line = line.substr(0, line.length - 1);
            }
            pos += line.length;
            line += '=\r\n';
        } else {
            pos += line.length;
        }

        result += line;
    }

    return result;
}

/**
 * Helper function to check if a number is inside provided ranges
 *
 * @param {Number} nr Number to check for
 * @param {Array} ranges An Array of allowed values
 * @returns {Boolean} True if the value was found inside allowed ranges, false otherwise
 */
function checkRanges(nr, ranges) {
    for (let i = ranges.length - 1; i >= 0; i--) {
        if (!ranges[i].length) {
            continue;
        }
        if (ranges[i].length === 1 && nr === ranges[i][0]) {
            return true;
        }
        if (ranges[i].length === 2 && nr >= ranges[i][0] && nr <= ranges[i][1]) {
            return true;
        }
    }
    return false;
}

/**
 * Creates a transform stream for encoding data to Quoted-Printable encoding
 *
 * @constructor
 * @param {Object} options Stream options
 * @param {Number} [options.lineLength=76] Maximum lenght for lines, set to false to disable wrapping
 */
class Encoder extends Transform {
    constructor(options) {
        super();

        // init Transform
        this.options = options || {};

        if (this.options.lineLength !== false) {
            this.options.lineLength = this.options.lineLength || 76;
        }

        this._curLine = '';

        this.inputBytes = 0;
        this.outputBytes = 0;
    }

    _transform(chunk, encoding, done) {
        let qp;

        if (encoding !== 'buffer') {
            chunk = new Buffer(chunk, encoding);
        }

        if (!chunk || !chunk.length) {
            return done();
        }

        this.inputBytes += chunk.length;

        if (this.options.lineLength) {
            qp = this._curLine + encode(chunk);
            qp = wrap(qp, this.options.lineLength);
            qp = qp.replace(/(^|\n)([^\n]*)$/, (match, lineBreak, lastLine) => {
                this._curLine = lastLine;
                return lineBreak;
            });

            if (qp) {
                this.outputBytes += qp.length;
                this.push(qp);
            }

        } else {
            qp = encode(chunk);
            this.outputBytes += qp.length;
            this.push(qp, 'ascii');
        }

        done();
    }

    _flush(done) {
        if (this._curLine) {
            this.outputBytes += this._curLine.length;
            this.push(this._curLine, 'ascii');
        }
        done();
    }
}

// expose to the world
module.exports = {
    encode,
    wrap,
    Encoder
};

}).call(this,require("buffer").Buffer)
},{"buffer":"buffer","stream":24}],32:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],33:[function(require,module,exports){
arguments[4][3][0].apply(exports,arguments)
},{"dup":3}],34:[function(require,module,exports){
module.exports = function isBuffer(arg) {
  return arg && typeof arg === 'object'
    && typeof arg.copy === 'function'
    && typeof arg.fill === 'function'
    && typeof arg.readUInt8 === 'function';
}
},{}],"email-addresses":[function(require,module,exports){

// email-addresses.js - RFC 5322 email address parser
// v 3.0.1
//
// http://tools.ietf.org/html/rfc5322
//
// This library does not validate email addresses.
// emailAddresses attempts to parse addresses using the (fairly liberal)
// grammar specified in RFC 5322.
//
// email-addresses returns {
//     ast: <an abstract syntax tree based on rfc5322>,
//     addresses: [{
//            node: <node in ast for this address>,
//            name: <display-name>,
//            address: <addr-spec>,
//            local: <local-part>,
//            domain: <domain>
//         }, ...]
// }
//
// emailAddresses.parseOneAddress and emailAddresses.parseAddressList
// work as you might expect. Try it out.
//
// Many thanks to Dominic Sayers and his documentation on the is_email function,
// http://code.google.com/p/isemail/ , which helped greatly in writing this parser.

(function (global) {
"use strict";

function parse5322(opts) {

    // tokenizing functions

    function inStr() { return pos < len; }
    function curTok() { return parseString[pos]; }
    function getPos() { return pos; }
    function setPos(i) { pos = i; }
    function nextTok() { pos += 1; }
    function initialize() {
        pos = 0;
        len = parseString.length;
    }

    // parser helper functions

    function o(name, value) {
        return {
            name: name,
            tokens: value || "",
            semantic: value || "",
            children: []
        };
    }

    function wrap(name, ast) {
        var n;
        if (ast === null) { return null; }
        n = o(name);
        n.tokens = ast.tokens;
        n.semantic = ast.semantic;
        n.children.push(ast);
        return n;
    }

    function add(parent, child) {
        if (child !== null) {
            parent.tokens += child.tokens;
            parent.semantic += child.semantic;
        }
        parent.children.push(child);
        return parent;
    }

    function compareToken(fxnCompare) {
        var tok;
        if (!inStr()) { return null; }
        tok = curTok();
        if (fxnCompare(tok)) {
            nextTok();
            return o('token', tok);
        }
        return null;
    }

    function literal(lit) {
        return function literalFunc() {
            return wrap('literal', compareToken(function (tok) {
                return tok === lit;
            }));
        };
    }

    function and() {
        var args = arguments;
        return function andFunc() {
            var i, s, result, start;
            start = getPos();
            s = o('and');
            for (i = 0; i < args.length; i += 1) {
                result = args[i]();
                if (result === null) {
                    setPos(start);
                    return null;
                }
                add(s, result);
            }
            return s;
        };
    }

    function or() {
        var args = arguments;
        return function orFunc() {
            var i, result, start;
            start = getPos();
            for (i = 0; i < args.length; i += 1) {
                result = args[i]();
                if (result !== null) {
                    return result;
                }
                setPos(start);
            }
            return null;
        };
    }

    function opt(prod) {
        return function optFunc() {
            var result, start;
            start = getPos();
            result = prod();
            if (result !== null) {
                return result;
            }
            else {
                setPos(start);
                return o('opt');
            }
        };
    }

    function invis(prod) {
        return function invisFunc() {
            var result = prod();
            if (result !== null) {
                result.semantic = "";
            }
            return result;
        };
    }

    function colwsp(prod) {
        return function collapseSemanticWhitespace() {
            var result = prod();
            if (result !== null && result.semantic.length > 0) {
                result.semantic = " ";
            }
            return result;
        };
    }

    function star(prod, minimum) {
        return function starFunc() {
            var s, result, count, start, min;
            start = getPos();
            s = o('star');
            count = 0;
            min = minimum === undefined ? 0 : minimum;
            while ((result = prod()) !== null) {
                count = count + 1;
                add(s, result);
            }
            if (count >= min) {
                return s;
            }
            else {
                setPos(start);
                return null;
            }
        };
    }

    // One expects names to get normalized like this:
    // "  First  Last " -> "First Last"
    // "First Last" -> "First Last"
    // "First   Last" -> "First Last"
    function collapseWhitespace(s) {
        return s.replace(/([ \t]|\r\n)+/g, ' ').replace(/^\s*/, '').replace(/\s*$/, '');
    }

    // UTF-8 pseudo-production (RFC 6532)
    // RFC 6532 extends RFC 5322 productions to include UTF-8
    // using the following productions:
    // UTF8-non-ascii  =   UTF8-2 / UTF8-3 / UTF8-4
    // UTF8-2          =   <Defined in Section 4 of RFC3629>
    // UTF8-3          =   <Defined in Section 4 of RFC3629>
    // UTF8-4          =   <Defined in Section 4 of RFC3629>
    //
    // For reference, the extended RFC 5322 productions are:
    // VCHAR   =/  UTF8-non-ascii
    // ctext   =/  UTF8-non-ascii
    // atext   =/  UTF8-non-ascii
    // qtext   =/  UTF8-non-ascii
    // dtext   =/  UTF8-non-ascii
    function isUTF8NonAscii(tok) {
        // In JavaScript, we just deal directly with Unicode code points,
        // so we aren't checking individual bytes for UTF-8 encoding.
        // Just check that the character is non-ascii.
        return tok.charCodeAt(0) >= 128;
    }


    // common productions (RFC 5234)
    // http://tools.ietf.org/html/rfc5234
    // B.1. Core Rules

    // CR             =  %x0D
    //                         ; carriage return
    function cr() { return wrap('cr', literal('\r')()); }

    // CRLF           =  CR LF
    //                         ; Internet standard newline
    function crlf() { return wrap('crlf', and(cr, lf)()); }

    // DQUOTE         =  %x22
    //                         ; " (Double Quote)
    function dquote() { return wrap('dquote', literal('"')()); }

    // HTAB           =  %x09
    //                         ; horizontal tab
    function htab() { return wrap('htab', literal('\t')()); }

    // LF             =  %x0A
    //                         ; linefeed
    function lf() { return wrap('lf', literal('\n')()); }

    // SP             =  %x20
    function sp() { return wrap('sp', literal(' ')()); }

    // VCHAR          =  %x21-7E
    //                         ; visible (printing) characters
    function vchar() {
        return wrap('vchar', compareToken(function vcharFunc(tok) {
            var code = tok.charCodeAt(0);
            var accept = (0x21 <= code && code <= 0x7E);
            if (opts.rfc6532) {
                accept = accept || isUTF8NonAscii(tok);
            }
            return accept;
        }));
    }

    // WSP            =  SP / HTAB
    //                         ; white space
    function wsp() { return wrap('wsp', or(sp, htab)()); }


    // email productions (RFC 5322)
    // http://tools.ietf.org/html/rfc5322
    // 3.2.1. Quoted characters

    // quoted-pair     =   ("\" (VCHAR / WSP)) / obs-qp
    function quotedPair() {
        var qp = wrap('quoted-pair',
        or(
            and(literal('\\'), or(vchar, wsp)),
            obsQP
        )());
        if (qp === null) { return null; }
        // a quoted pair will be two characters, and the "\" character
        // should be semantically "invisible" (RFC 5322 3.2.1)
        qp.semantic = qp.semantic[1];
        return qp;
    }

    // 3.2.2. Folding White Space and Comments

    // FWS             =   ([*WSP CRLF] 1*WSP) /  obs-FWS
    function fws() {
        return wrap('fws', or(
            obsFws,
            and(
                opt(and(
                    star(wsp),
                    invis(crlf)
                   )),
                star(wsp, 1)
            )
        )());
    }

    // ctext           =   %d33-39 /          ; Printable US-ASCII
    //                     %d42-91 /          ;  characters not including
    //                     %d93-126 /         ;  "(", ")", or "\"
    //                     obs-ctext
    function ctext() {
        return wrap('ctext', or(
            function ctextFunc1() {
                return compareToken(function ctextFunc2(tok) {
                    var code = tok.charCodeAt(0);
                    var accept =
                        (33 <= code && code <= 39) ||
                        (42 <= code && code <= 91) ||
                        (93 <= code && code <= 126);
                    if (opts.rfc6532) {
                        accept = accept || isUTF8NonAscii(tok);
                    }
                    return accept;
                });
            },
            obsCtext
        )());
    }

    // ccontent        =   ctext / quoted-pair / comment
    function ccontent() {
        return wrap('ccontent', or(ctext, quotedPair, comment)());
    }

    // comment         =   "(" *([FWS] ccontent) [FWS] ")"
    function comment() {
        return wrap('comment', and(
            literal('('),
            star(and(opt(fws), ccontent)),
            opt(fws),
            literal(')')
        )());
    }

    // CFWS            =   (1*([FWS] comment) [FWS]) / FWS
    function cfws() {
        return wrap('cfws', or(
            and(
                star(
                    and(opt(fws), comment),
                    1
                ),
                opt(fws)
            ),
            fws
        )());
    }

    // 3.2.3. Atom

    //atext           =   ALPHA / DIGIT /    ; Printable US-ASCII
    //                       "!" / "#" /        ;  characters not including
    //                       "$" / "%" /        ;  specials.  Used for atoms.
    //                       "&" / "'" /
    //                       "*" / "+" /
    //                       "-" / "/" /
    //                       "=" / "?" /
    //                       "^" / "_" /
    //                       "`" / "{" /
    //                       "|" / "}" /
    //                       "~"
    function atext() {
        return wrap('atext', compareToken(function atextFunc(tok) {
            var accept =
                ('a' <= tok && tok <= 'z') ||
                ('A' <= tok && tok <= 'Z') ||
                ('0' <= tok && tok <= '9') ||
                (['!', '#', '$', '%', '&', '\'', '*', '+', '-', '/',
                  '=', '?', '^', '_', '`', '{', '|', '}', '~'].indexOf(tok) >= 0);
            if (opts.rfc6532) {
                accept = accept || isUTF8NonAscii(tok);
            }
            return accept;
        }));
    }

    // atom            =   [CFWS] 1*atext [CFWS]
    function atom() {
        return wrap('atom', and(colwsp(opt(cfws)), star(atext, 1), colwsp(opt(cfws)))());
    }

    // dot-atom-text   =   1*atext *("." 1*atext)
    function dotAtomText() {
        var s, maybeText;
        s = wrap('dot-atom-text', star(atext, 1)());
        if (s === null) { return s; }
        maybeText = star(and(literal('.'), star(atext, 1)))();
        if (maybeText !== null) {
            add(s, maybeText);
        }
        return s;
    }

    // dot-atom        =   [CFWS] dot-atom-text [CFWS]
    function dotAtom() {
        return wrap('dot-atom', and(invis(opt(cfws)), dotAtomText, invis(opt(cfws)))());
    }

    // 3.2.4. Quoted Strings

    //  qtext           =   %d33 /             ; Printable US-ASCII
    //                      %d35-91 /          ;  characters not including
    //                      %d93-126 /         ;  "\" or the quote character
    //                      obs-qtext
    function qtext() {
        return wrap('qtext', or(
            function qtextFunc1() {
                return compareToken(function qtextFunc2(tok) {
                    var code = tok.charCodeAt(0);
                    var accept =
                        (33 === code) ||
                        (35 <= code && code <= 91) ||
                        (93 <= code && code <= 126);
                    if (opts.rfc6532) {
                        accept = accept || isUTF8NonAscii(tok);
                    }
                    return accept;
                });
            },
            obsQtext
        )());
    }

    // qcontent        =   qtext / quoted-pair
    function qcontent() {
        return wrap('qcontent', or(qtext, quotedPair)());
    }

    //  quoted-string   =   [CFWS]
    //                      DQUOTE *([FWS] qcontent) [FWS] DQUOTE
    //                      [CFWS]
    function quotedString() {
        return wrap('quoted-string', and(
            invis(opt(cfws)),
            invis(dquote), star(and(opt(colwsp(fws)), qcontent)), opt(invis(fws)), invis(dquote),
            invis(opt(cfws))
        )());
    }

    // 3.2.5 Miscellaneous Tokens

    // word            =   atom / quoted-string
    function word() {
        return wrap('word', or(atom, quotedString)());
    }

    // phrase          =   1*word / obs-phrase
    function phrase() {
        return wrap('phrase', or(obsPhrase, star(word, 1))());
    }

    // 3.4. Address Specification
    //   address         =   mailbox / group
    function address() {
        return wrap('address', or(mailbox, group)());
    }

    //   mailbox         =   name-addr / addr-spec
    function mailbox() {
        return wrap('mailbox', or(nameAddr, addrSpec)());
    }

    //   name-addr       =   [display-name] angle-addr
    function nameAddr() {
        return wrap('name-addr', and(opt(displayName), angleAddr)());
    }

    //   angle-addr      =   [CFWS] "<" addr-spec ">" [CFWS] /
    //                       obs-angle-addr
    function angleAddr() {
        return wrap('angle-addr', or(
            and(
                invis(opt(cfws)),
                literal('<'),
                addrSpec,
                literal('>'),
                invis(opt(cfws))
            ),
            obsAngleAddr
        )());
    }

    //   group           =   display-name ":" [group-list] ";" [CFWS]
    function group() {
        return wrap('group', and(
            displayName,
            literal(':'),
            opt(groupList),
            literal(';'),
            invis(opt(cfws))
        )());
    }

    //   display-name    =   phrase
    function displayName() {
        return wrap('display-name', function phraseFixedSemantic() {
            var result = phrase();
            if (result !== null) {
                result.semantic = collapseWhitespace(result.semantic);
            }
            return result;
        }());
    }

    //   mailbox-list    =   (mailbox *("," mailbox)) / obs-mbox-list
    function mailboxList() {
        return wrap('mailbox-list', or(
            and(
                mailbox,
                star(and(literal(','), mailbox))
            ),
            obsMboxList
        )());
    }

    //   address-list    =   (address *("," address)) / obs-addr-list
    function addressList() {
        return wrap('address-list', or(
            and(
                address,
                star(and(literal(','), address))
            ),
            obsAddrList
        )());
    }

    //   group-list      =   mailbox-list / CFWS / obs-group-list
    function groupList() {
        return wrap('group-list', or(
            mailboxList,
            invis(cfws),
            obsGroupList
        )());
    }

    // 3.4.1 Addr-Spec Specification

    // local-part      =   dot-atom / quoted-string / obs-local-part
    function localPart() {
        // note: quoted-string, dotAtom are proper subsets of obs-local-part
        // so we really just have to look for obsLocalPart, if we don't care about the exact parse tree
        return wrap('local-part', or(obsLocalPart, dotAtom, quotedString)());
    }

    //  dtext           =   %d33-90 /          ; Printable US-ASCII
    //                      %d94-126 /         ;  characters not including
    //                      obs-dtext          ;  "[", "]", or "\"
    function dtext() {
        return wrap('dtext', or(
            function dtextFunc1() {
                return compareToken(function dtextFunc2(tok) {
                    var code = tok.charCodeAt(0);
                    var accept =
                        (33 <= code && code <= 90) ||
                        (94 <= code && code <= 126);
                    if (opts.rfc6532) {
                        accept = accept || isUTF8NonAscii(tok);
                    }
                    return accept;
                });
            },
            obsDtext
            )()
        );
    }

    // domain-literal  =   [CFWS] "[" *([FWS] dtext) [FWS] "]" [CFWS]
    function domainLiteral() {
        return wrap('domain-literal', and(
            invis(opt(cfws)),
            literal('['),
            star(and(opt(fws), dtext)),
            opt(fws),
            literal(']'),
            invis(opt(cfws))
        )());
    }

    // domain          =   dot-atom / domain-literal / obs-domain
    function domain() {
        return wrap('domain', function domainCheckTLD() {
            var result = or(obsDomain, dotAtom, domainLiteral)();
            if (opts.rejectTLD) {
                if (result.semantic.indexOf('.') < 0) {
                    return null;
                }
            }
            // strip all whitespace from domains
            if (result) {
                result.semantic = result.semantic.replace(/\s+/g, '');
            }
            return result;
        }());
    }

    // addr-spec       =   local-part "@" domain
    function addrSpec() {
        return wrap('addr-spec', and(
            localPart, literal('@'), domain
        )());
    }

    // 3.6.2 Originator Fields
    // Below we only parse the field body, not the name of the field
    // like "From:", "Sender:", or "Reply-To:". Other libraries that
    // parse email headers can parse those and defer to these productions
    // for the "RFC 5322" part.

    // RFC 6854 2.1. Replacement of RFC 5322, Section 3.6.2. Originator Fields
    // from = "From:" (mailbox-list / address-list) CRLF
    function fromSpec() {
        return wrap('from', or(
            mailboxList,
            addressList
        )());
    }

    // RFC 6854 2.1. Replacement of RFC 5322, Section 3.6.2. Originator Fields
    // sender = "Sender:" (mailbox / address) CRLF
    function senderSpec() {
        return wrap('sender', or(
            mailbox,
            address
        )());
    }

    // RFC 6854 2.1. Replacement of RFC 5322, Section 3.6.2. Originator Fields
    // reply-to = "Reply-To:" address-list CRLF
    function replyToSpec() {
        return wrap('reply-to', addressList());
    }

    // 4.1. Miscellaneous Obsolete Tokens

    //  obs-NO-WS-CTL   =   %d1-8 /            ; US-ASCII control
    //                      %d11 /             ;  characters that do not
    //                      %d12 /             ;  include the carriage
    //                      %d14-31 /          ;  return, line feed, and
    //                      %d127              ;  white space characters
    function obsNoWsCtl() {
        return opts.strict ? null : wrap('obs-NO-WS-CTL', compareToken(function (tok) {
            var code = tok.charCodeAt(0);
            return ((1 <= code && code <= 8) ||
                    (11 === code || 12 === code) ||
                    (14 <= code && code <= 31) ||
                    (127 === code));
        }));
    }

    // obs-ctext       =   obs-NO-WS-CTL
    function obsCtext() { return opts.strict ? null : wrap('obs-ctext', obsNoWsCtl()); }

    // obs-qtext       =   obs-NO-WS-CTL
    function obsQtext() { return opts.strict ? null : wrap('obs-qtext', obsNoWsCtl()); }

    // obs-qp          =   "\" (%d0 / obs-NO-WS-CTL / LF / CR)
    function obsQP() {
        return opts.strict ? null : wrap('obs-qp', and(
            literal('\\'),
            or(literal('\0'), obsNoWsCtl, lf, cr)
        )());
    }

    // obs-phrase      =   word *(word / "." / CFWS)
    function obsPhrase() {
        return opts.strict ? null : wrap('obs-phrase', and(
            word,
            star(or(word, literal('.'), colwsp(cfws)))
        )());
    }

    // 4.2. Obsolete Folding White Space

    // NOTE: read the errata http://www.rfc-editor.org/errata_search.php?rfc=5322&eid=1908
    // obs-FWS         =   1*([CRLF] WSP)
    function obsFws() {
        return opts.strict ? null : wrap('obs-FWS', star(
            and(invis(opt(crlf)), wsp),
            1
        )());
    }

    // 4.4. Obsolete Addressing

    // obs-angle-addr  =   [CFWS] "<" obs-route addr-spec ">" [CFWS]
    function obsAngleAddr() {
        return opts.strict ? null : wrap('obs-angle-addr', and(
            invis(opt(cfws)),
            literal('<'),
            obsRoute,
            addrSpec,
            literal('>'),
            invis(opt(cfws))
        )());
    }

    // obs-route       =   obs-domain-list ":"
    function obsRoute() {
        return opts.strict ? null : wrap('obs-route', and(
            obsDomainList,
            literal(':')
        )());
    }

    //   obs-domain-list =   *(CFWS / ",") "@" domain
    //                       *("," [CFWS] ["@" domain])
    function obsDomainList() {
        return opts.strict ? null : wrap('obs-domain-list', and(
            star(or(invis(cfws), literal(','))),
            literal('@'),
            domain,
            star(and(
                literal(','),
                invis(opt(cfws)),
                opt(and(literal('@'), domain))
            ))
        )());
    }

    // obs-mbox-list   =   *([CFWS] ",") mailbox *("," [mailbox / CFWS])
    function obsMboxList() {
        return opts.strict ? null : wrap('obs-mbox-list', and(
            star(and(
                invis(opt(cfws)),
                literal(',')
            )),
            mailbox,
            star(and(
                literal(','),
                opt(and(
                    mailbox,
                    invis(cfws)
                ))
            ))
        )());
    }

    // obs-addr-list   =   *([CFWS] ",") address *("," [address / CFWS])
    function obsAddrList() {
        return opts.strict ? null : wrap('obs-addr-list', and(
            star(and(
                invis(opt(cfws)),
                literal(',')
            )),
            address,
            star(and(
                literal(','),
                opt(and(
                    address,
                    invis(cfws)
                ))
            ))
        )());
    }

    // obs-group-list  =   1*([CFWS] ",") [CFWS]
    function obsGroupList() {
        return opts.strict ? null : wrap('obs-group-list', and(
            star(and(
                invis(opt(cfws)),
                literal(',')
            ), 1),
            invis(opt(cfws))
        )());
    }

    // obs-local-part = word *("." word)
    function obsLocalPart() {
        return opts.strict ? null : wrap('obs-local-part', and(word, star(and(literal('.'), word)))());
    }

    // obs-domain       = atom *("." atom)
    function obsDomain() {
        return opts.strict ? null : wrap('obs-domain', and(atom, star(and(literal('.'), atom)))());
    }

    // obs-dtext       =   obs-NO-WS-CTL / quoted-pair
    function obsDtext() {
        return opts.strict ? null : wrap('obs-dtext', or(obsNoWsCtl, quotedPair)());
    }

    /////////////////////////////////////////////////////

    // ast analysis

    function findNode(name, root) {
        var i, stack, node;
        if (root === null || root === undefined) { return null; }
        stack = [root];
        while (stack.length > 0) {
            node = stack.pop();
            if (node.name === name) {
                return node;
            }
            for (i = node.children.length - 1; i >= 0; i -= 1) {
                stack.push(node.children[i]);
            }
        }
        return null;
    }

    function findAllNodes(name, root) {
        var i, stack, node, result;
        if (root === null || root === undefined) { return null; }
        stack = [root];
        result = [];
        while (stack.length > 0) {
            node = stack.pop();
            if (node.name === name) {
                result.push(node);
            }
            for (i = node.children.length - 1; i >= 0; i -= 1) {
                stack.push(node.children[i]);
            }
        }
        return result;
    }

    function findAllNodesNoChildren(names, root) {
        var i, stack, node, result, namesLookup;
        if (root === null || root === undefined) { return null; }
        stack = [root];
        result = [];
        namesLookup = {};
        for (i = 0; i < names.length; i += 1) {
            namesLookup[names[i]] = true;
        }

        while (stack.length > 0) {
            node = stack.pop();
            if (node.name in namesLookup) {
                result.push(node);
                // don't look at children (hence findAllNodesNoChildren)
            } else {
                for (i = node.children.length - 1; i >= 0; i -= 1) {
                    stack.push(node.children[i]);
                }
            }
        }
        return result;
    }

    function giveResult(ast) {
        var addresses, groupsAndMailboxes, i, groupOrMailbox, result;
        if (ast === null) {
            return null;
        }
        addresses = [];

        // An address is a 'group' (i.e. a list of mailboxes) or a 'mailbox'.
        groupsAndMailboxes = findAllNodesNoChildren(['group', 'mailbox'], ast);
        for (i = 0; i <  groupsAndMailboxes.length; i += 1) {
            groupOrMailbox = groupsAndMailboxes[i];
            if (groupOrMailbox.name === 'group') {
                addresses.push(giveResultGroup(groupOrMailbox));
            } else if (groupOrMailbox.name === 'mailbox') {
                addresses.push(giveResultMailbox(groupOrMailbox));
            }
        }

        result = {
            ast: ast,
            addresses: addresses,
        };
        if (opts.simple) {
            result = simplifyResult(result);
        }
        if (opts.oneResult) {
            return oneResult(result);
        }
        if (opts.simple) {
            return result && result.addresses;
        } else {
            return result;
        }
    }

    function giveResultGroup(group) {
        var i;
        var groupName = findNode('display-name', group);
        var groupResultMailboxes = [];
        var mailboxes = findAllNodesNoChildren(['mailbox'], group);
        for (i = 0; i < mailboxes.length; i += 1) {
            groupResultMailboxes.push(giveResultMailbox(mailboxes[i]));
        }
        return {
            node: group,
            parts: {
                name: groupName,
            },
            type: group.name, // 'group'
            name: grabSemantic(groupName),
            addresses: groupResultMailboxes,
        };
    }

    function giveResultMailbox(mailbox) {
        var name = findNode('display-name', mailbox);
        var aspec = findNode('addr-spec', mailbox);
        var comments = findAllNodes('cfws', mailbox);

        var local = findNode('local-part', aspec);
        var domain = findNode('domain', aspec);
        return {
            node: mailbox,
            parts: {
                name: name,
                address: aspec,
                local: local,
                domain: domain,
                comments: comments
            },
            type: mailbox.name, // 'mailbox'
            name: grabSemantic(name),
            address: grabSemantic(aspec),
            local: grabSemantic(local),
            domain: grabSemantic(domain),
            groupName: grabSemantic(mailbox.groupName),
        };
    }

    function grabSemantic(n) {
        return n !== null && n !== undefined ? n.semantic : null;
    }

    function simplifyResult(result) {
        var i;
        if (result && result.addresses) {
            for (i = 0; i < result.addresses.length; i += 1) {
                delete result.addresses[i].node;
            }
        }
        return result;
    }

    function oneResult(result) {
        if (!result) { return null; }
        if (!opts.partial && result.addresses.length > 1) { return null; }
        return result.addresses && result.addresses[0];
    }

    /////////////////////////////////////////////////////

    var parseString, pos, len, parsed, startProduction;

    opts = handleOpts(opts, {});
    if (opts === null) { return null; }

    parseString = opts.input;

    startProduction = {
        'address': address,
        'address-list': addressList,
        'angle-addr': angleAddr,
        'from': fromSpec,
        'group': group,
        'mailbox': mailbox,
        'mailbox-list': mailboxList,
        'reply-to': replyToSpec,
        'sender': senderSpec,
    }[opts.startAt] || addressList;

    if (!opts.strict) {
        initialize();
        opts.strict = true;
        parsed = startProduction(parseString);
        if (opts.partial || !inStr()) {
            return giveResult(parsed);
        }
        opts.strict = false;
    }

    initialize();
    parsed = startProduction(parseString);
    if (!opts.partial && inStr()) { return null; }
    return giveResult(parsed);
}

function parseOneAddressSimple(opts) {
    return parse5322(handleOpts(opts, {
        oneResult: true,
        rfc6532: true,
        simple: true,
        startAt: 'address-list',
    }));
}

function parseAddressListSimple(opts) {
    return parse5322(handleOpts(opts, {
        rfc6532: true,
        simple: true,
        startAt: 'address-list',
    }));
}

function parseFromSimple(opts) {
    return parse5322(handleOpts(opts, {
        rfc6532: true,
        simple: true,
        startAt: 'from',
    }));
}

function parseSenderSimple(opts) {
    return parse5322(handleOpts(opts, {
        oneResult: true,
        rfc6532: true,
        simple: true,
        startAt: 'sender',
    }));
}

function parseReplyToSimple(opts) {
    return parse5322(handleOpts(opts, {
        rfc6532: true,
        simple: true,
        startAt: 'reply-to',
    }));
}

function handleOpts(opts, defs) {
    function isString(str) {
        return Object.prototype.toString.call(str) === '[object String]';
    }

    function isObject(o) {
        return o === Object(o);
    }

    function isNullUndef(o) {
        return o === null || o === undefined;
    }

    var defaults, o;

    if (isString(opts)) {
        opts = { input: opts };
    } else if (!isObject(opts)) {
        return null;
    }

    if (!isString(opts.input)) { return null; }
    if (!defs) { return null; }

    defaults = {
        oneResult: false,
        partial: false,
        rejectTLD: false,
        rfc6532: false,
        simple: false,
        startAt: 'address-list',
        strict: false,
    };

    for (o in defaults) {
        if (isNullUndef(opts[o])) {
            opts[o] = !isNullUndef(defs[o]) ? defs[o] : defaults[o];
        }
    }
    return opts;
}

parse5322.parseOneAddress = parseOneAddressSimple;
parse5322.parseAddressList = parseAddressListSimple;
parse5322.parseFrom = parseFromSimple;
parse5322.parseSender = parseSenderSimple;
parse5322.parseReplyTo = parseReplyToSimple;

if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {
    module.exports = parse5322;
} else {
    global.emailAddresses = parse5322;
}

}(this));

},{}],"mime":[function(require,module,exports){
(function (process){
var path = require('path');
var fs = require('fs');

function Mime() {
  // Map of extension -> mime type
  this.types = Object.create(null);

  // Map of mime type -> extension
  this.extensions = Object.create(null);
}

/**
 * Define mimetype -> extension mappings.  Each key is a mime-type that maps
 * to an array of extensions associated with the type.  The first extension is
 * used as the default extension for the type.
 *
 * e.g. mime.define({'audio/ogg', ['oga', 'ogg', 'spx']});
 *
 * @param map (Object) type definitions
 */
Mime.prototype.define = function (map) {
  for (var type in map) {
    var exts = map[type];
    for (var i = 0; i < exts.length; i++) {
      if (process.env.DEBUG_MIME && this.types[exts]) {
        console.warn(this._loading.replace(/.*\//, ''), 'changes "' + exts[i] + '" extension type from ' +
          this.types[exts] + ' to ' + type);
      }

      this.types[exts[i]] = type;
    }

    // Default extension is the first one we encounter
    if (!this.extensions[type]) {
      this.extensions[type] = exts[0];
    }
  }
};

/**
 * Load an Apache2-style ".types" file
 *
 * This may be called multiple times (it's expected).  Where files declare
 * overlapping types/extensions, the last file wins.
 *
 * @param file (String) path of file to load.
 */
Mime.prototype.load = function(file) {
  this._loading = file;
  // Read file and split into lines
  var map = {},
      content = fs.readFileSync(file, 'ascii'),
      lines = content.split(/[\r\n]+/);

  lines.forEach(function(line) {
    // Clean up whitespace/comments, and split into fields
    var fields = line.replace(/\s*#.*|^\s*|\s*$/g, '').split(/\s+/);
    map[fields.shift()] = fields;
  });

  this.define(map);

  this._loading = null;
};

/**
 * Lookup a mime type based on extension
 */
Mime.prototype.lookup = function(path, fallback) {
  var ext = path.replace(/.*[\.\/\\]/, '').toLowerCase();

  return this.types[ext] || fallback || this.default_type;
};

/**
 * Return file extension associated with a mime type
 */
Mime.prototype.extension = function(mimeType) {
  var type = mimeType.match(/^\s*([^;\s]*)(?:;|\s|$)/)[1].toLowerCase();
  return this.extensions[type];
};

// Default instance
var mime = new Mime();

// Define built-in types
mime.define(require('./types.json'));

// Default type
mime.default_type = mime.lookup('bin');

//
// Additional API specific to the default instance
//

mime.Mime = Mime;

/**
 * Lookup a charset based on mime type.
 */
mime.charsets = {
  lookup: function(mimeType, fallback) {
    // Assume text types are utf8
    return (/^text\//).test(mimeType) ? 'UTF-8' : fallback;
  }
};

module.exports = mime;

}).call(this,require('_process'))
},{"./types.json":29,"_process":32,"fs":1,"path":5}],"nodemailer/lib/base64":[function(require,module,exports){
(function (Buffer){
'use strict';

const Transform = require('stream').Transform;

/**
 * Encodes a Buffer into a base64 encoded string
 *
 * @param {Buffer} buffer Buffer to convert
 * @returns {String} base64 encoded string
 */
function encode(buffer) {
    if (typeof buffer === 'string') {
        buffer = new Buffer(buffer, 'utf-8');
    }

    return buffer.toString('base64');
}

/**
 * Adds soft line breaks to a base64 string
 *
 * @param {String} str base64 encoded string that might need line wrapping
 * @param {Number} [lineLength=76] Maximum allowed length for a line
 * @returns {String} Soft-wrapped base64 encoded string
 */
function wrap(str, lineLength) {
    str = (str || '').toString();
    lineLength = lineLength || 76;

    if (str.length <= lineLength) {
        return str;
    }

    let result = [];
    let pos = 0;
    let chunkLength = lineLength * 1024;
    while (pos < str.length) {
        let wrappedLines = str.substr(pos, chunkLength).replace(new RegExp('.{' + lineLength + '}', 'g'), '$&\r\n').trim();
        result.push(wrappedLines);
        pos += chunkLength;
    }

    return result.join('\r\n').trim();
}

/**
 * Creates a transform stream for encoding data to base64 encoding
 *
 * @constructor
 * @param {Object} options Stream options
 * @param {Number} [options.lineLength=76] Maximum lenght for lines, set to false to disable wrapping
 */
class Encoder extends Transform {
    constructor(options) {
        super();
        // init Transform
        this.options = options || {};

        if (this.options.lineLength !== false) {
            this.options.lineLength = this.options.lineLength || 76;
        }

        this._curLine = '';
        this._remainingBytes = false;

        this.inputBytes = 0;
        this.outputBytes = 0;
    }

    _transform(chunk, encoding, done) {
        let b64;

        if (encoding !== 'buffer') {
            chunk = new Buffer(chunk, encoding);
        }

        if (!chunk || !chunk.length) {
            return done();
        }

        this.inputBytes += chunk.length;

        if (this._remainingBytes && this._remainingBytes.length) {
            chunk = Buffer.concat([this._remainingBytes, chunk]);
            this._remainingBytes = false;
        }

        if (chunk.length % 3) {
            this._remainingBytes = chunk.slice(chunk.length - chunk.length % 3);
            chunk = chunk.slice(0, chunk.length - chunk.length % 3);
        } else {
            this._remainingBytes = false;
        }

        b64 = this._curLine + encode(chunk);

        if (this.options.lineLength) {
            b64 = wrap(b64, this.options.lineLength);
            b64 = b64.replace(/(^|\n)([^\n]*)$/, (match, lineBreak, lastLine) => {
                this._curLine = lastLine;
                return lineBreak;
            });
        }

        if (b64) {
            this.outputBytes += b64.length;
            this.push(b64);
        }

        done();
    }

    _flush(done) {
        if (this._remainingBytes && this._remainingBytes.length) {
            this._curLine += encode(this._remainingBytes);
        }

        if (this._curLine) {
            this._curLine = wrap(this._curLine, this.options.lineLength);
            this.outputBytes += this._curLine.length;
            this.push(this._curLine, 'ascii');
            this._curLine = '';
        }
        done();
    }
}

// expose to the world
module.exports = {
    encode,
    wrap,
    Encoder
};

}).call(this,require("buffer").Buffer)
},{"buffer":"buffer","stream":24}],"nodemailer/lib/mime-funcs":[function(require,module,exports){
(function (Buffer){
/* eslint no-control-regex:0 */

'use strict';

const base64 = require('../base64');
const qp = require('../qp');
const mimeTypes = require('./mime-types');

module.exports = {

    /**
     * Checks if a value is plaintext string (uses only printable 7bit chars)
     *
     * @param {String} value String to be tested
     * @returns {Boolean} true if it is a plaintext string
     */
    isPlainText(value) {
        if (typeof value !== 'string' || /[\x00-\x08\x0b\x0c\x0e-\x1f\u0080-\uFFFF]/.test(value)) {
            return false;
        } else {
            return true;
        }
    },

    /**
     * Checks if a multi line string containes lines longer than the selected value.
     *
     * Useful when detecting if a mail message needs any processing at all 
     * if only plaintext characters are used and lines are short, then there is
     * no need to encode the values in any way. If the value is plaintext but has
     * longer lines then allowed, then use format=flowed
     *
     * @param {Number} lineLength Max line length to check for
     * @returns {Boolean} Returns true if there is at least one line longer than lineLength chars
     */
    hasLongerLines(str, lineLength) {
        if (str.length > 128 * 1024) {
            // do not test strings longer than 128kB
            return true;
        }
        return new RegExp('^.{' + (lineLength + 1) + ',}', 'm').test(str);
    },

    /**
     * Encodes a string or an Buffer to an UTF-8 MIME Word (rfc2047)
     *
     * @param {String|Buffer} data String to be encoded
     * @param {String} mimeWordEncoding='Q' Encoding for the mime word, either Q or B
     * @param {Number} [maxLength=0] If set, split mime words into several chunks if needed
     * @return {String} Single or several mime words joined together
     */
    encodeWord(data, mimeWordEncoding, maxLength) {
        mimeWordEncoding = (mimeWordEncoding || 'Q').toString().toUpperCase().trim().charAt(0);
        maxLength = maxLength || 0;

        let encodedStr;
        let toCharset = 'UTF-8';

        if (maxLength && maxLength > 7 + toCharset.length) {
            maxLength -= (7 + toCharset.length);
        }

        if (mimeWordEncoding === 'Q') {
            // https://tools.ietf.org/html/rfc2047#section-5 rule (3)
            encodedStr = qp.encode(data).replace(/[^a-z0-9!*+\-\/=]/ig, chr => {
                let ord = chr.charCodeAt(0).toString(16).toUpperCase();
                if (chr === ' ') {
                    return '_';
                } else {
                    return '=' + (ord.length === 1 ? '0' + ord : ord);
                }
            });
        } else if (mimeWordEncoding === 'B') {
            encodedStr = typeof data === 'string' ? data : base64.encode(data);
            maxLength = maxLength ? Math.max(3, (maxLength - maxLength % 4) / 4 * 3) : 0;
        }

        if (maxLength && (mimeWordEncoding !== 'B' ? encodedStr : base64.encode(data)).length > maxLength) {
            if (mimeWordEncoding === 'Q') {
                encodedStr = this.splitMimeEncodedString(encodedStr, maxLength).join('?= =?' + toCharset + '?' + mimeWordEncoding + '?');
            } else {
                // RFC2047 6.3 (2) states that encoded-word must include an integral number of characters, so no chopping unicode sequences
                let parts = [];
                let lpart = '';
                for (let i = 0, len = encodedStr.length; i < len; i++) {
                    let chr = encodedStr.charAt(i);
                    // check if we can add this character to the existing string
                    // without breaking byte length limit
                    if (Buffer.byteLength(lpart + chr) <= maxLength || i === 0) {
                        lpart += chr;
                    } else {
                        // we hit the length limit, so push the existing string and start over
                        parts.push(base64.encode(lpart));
                        lpart = chr;
                    }
                }
                if (lpart) {
                    parts.push(base64.encode(lpart));
                }

                if (parts.length > 1) {
                    encodedStr = parts.join('?= =?' + toCharset + '?' + mimeWordEncoding + '?');
                } else {
                    encodedStr = parts.join('');
                }
            }
        } else if (mimeWordEncoding === 'B') {
            encodedStr = base64.encode(data);
        }

        return '=?' + toCharset + '?' + mimeWordEncoding + '?' + encodedStr + (encodedStr.substr(-2) === '?=' ? '' : '?=');
    },

    /**
     * Finds word sequences with non ascii text and converts these to mime words
     *
     * @param {String} value String to be encoded
     * @param {String} mimeWordEncoding='Q' Encoding for the mime word, either Q or B
     * @param {Number} [maxLength=0] If set, split mime words into several chunks if needed
     * @return {String} String with possible mime words
     */
    encodeWords(value, mimeWordEncoding, maxLength) {
        maxLength = maxLength || 0;

        let encodedValue;

        // find first word with a non-printable ascii in it
        let firstMatch = value.match(/(?:^|\s)([^\s]*[\u0080-\uFFFF])/);
        if (!firstMatch) {
            return value;
        }

        // find the last word with a non-printable ascii in it
        let lastMatch = value.match(/([\u0080-\uFFFF][^\s]*)[^\u0080-\uFFFF]*$/);
        if (!lastMatch) {
            // should not happen
            return value;
        }

        let startIndex = firstMatch.index + (firstMatch[0].match(/[^\s]/) || {
            index: 0
        }).index;
        let endIndex = lastMatch.index + (lastMatch[1] || '').length;

        encodedValue =
            (startIndex ? value.substr(0, startIndex) : '') + this.encodeWord(value.substring(startIndex, endIndex), mimeWordEncoding || 'Q', maxLength) +
            (endIndex < value.length ? value.substr(endIndex) : '');

        return encodedValue;
    },

    /**
     * Joins parsed header value together as 'value; param1=value1; param2=value2'
     * PS: We are following RFC 822 for the list of special characters that we need to keep in quotes.
     *      Refer: https://www.w3.org/Protocols/rfc1341/4_Content-Type.html
     * @param {Object} structured Parsed header value
     * @return {String} joined header value
     */
    buildHeaderValue(structured) {
        let paramsArray = [];

        Object.keys(structured.params || {}).forEach(param => {
            // filename might include unicode characters so it is a special case
            // other values probably do not
            let value = structured.params[param];
            if (!this.isPlainText(value) || value.length >= 75) {
                this.buildHeaderParam(param, value, 50).forEach(encodedParam => {
                    if (!/[\s"\\;:\/=\(\),<>@\[\]\?]|^[\-']|'$/.test(encodedParam.value) || encodedParam.key.substr(-1) === '*') {
                        paramsArray.push(encodedParam.key + '=' + encodedParam.value);
                    } else {
                        paramsArray.push(encodedParam.key + '=' + JSON.stringify(encodedParam.value));
                    }
                });
            } else if (/[\s'"\\;:\/=\(\),<>@\[\]\?]|^\-/.test(value)) {
                paramsArray.push(param + '=' + JSON.stringify(value));
            } else {
                paramsArray.push(param + '=' + value);
            }
        });

        return structured.value + (paramsArray.length ? '; ' + paramsArray.join('; ') : '');
    },

    /**
     * Encodes a string or an Buffer to an UTF-8 Parameter Value Continuation encoding (rfc2231)
     * Useful for splitting long parameter values.
     *
     * For example
     *      title="unicode string"
     * becomes
     *     title*0*=utf-8''unicode
     *     title*1*=%20string
     *
     * @param {String|Buffer} data String to be encoded
     * @param {Number} [maxLength=50] Max length for generated chunks
     * @param {String} [fromCharset='UTF-8'] Source sharacter set
     * @return {Array} A list of encoded keys and headers
     */
    buildHeaderParam(key, data, maxLength) {
        let list = [];
        let encodedStr = typeof data === 'string' ? data : (data || '').toString();
        let encodedStrArr;
        let chr, ord;
        let line;
        let startPos = 0;
        let i, len;

        maxLength = maxLength || 50;

        // process ascii only text
        if (this.isPlainText(data)) {

            // check if conversion is even needed
            if (encodedStr.length <= maxLength) {
                return [{
                    key,
                    value: encodedStr
                }];
            }

            encodedStr = encodedStr.replace(new RegExp('.{' + maxLength + '}', 'g'), str => {
                list.push({
                    line: str
                });
                return '';
            });

            if (encodedStr) {
                list.push({
                    line: encodedStr
                });
            }

        } else {

            if (/[\uD800-\uDBFF]/.test(encodedStr)) {
                // string containts surrogate pairs, so normalize it to an array of bytes
                encodedStrArr = [];
                for (i = 0, len = encodedStr.length; i < len; i++) {
                    chr = encodedStr.charAt(i);
                    ord = chr.charCodeAt(0);
                    if (ord >= 0xD800 && ord <= 0xDBFF && i < len - 1) {
                        chr += encodedStr.charAt(i + 1);
                        encodedStrArr.push(chr);
                        i++;
                    } else {
                        encodedStrArr.push(chr);
                    }
                }
                encodedStr = encodedStrArr;
            }

            // first line includes the charset and language info and needs to be encoded
            // even if it does not contain any unicode characters
            line = 'utf-8\'\'';
            let encoded = true;
            startPos = 0;

            // process text with unicode or special chars
            for (i = 0, len = encodedStr.length; i < len; i++) {

                chr = encodedStr[i];

                if (encoded) {
                    chr = this.safeEncodeURIComponent(chr);
                } else {
                    // try to urlencode current char
                    chr = chr === ' ' ? chr : this.safeEncodeURIComponent(chr);
                    // By default it is not required to encode a line, the need
                    // only appears when the string contains unicode or special chars
                    // in this case we start processing the line over and encode all chars
                    if (chr !== encodedStr[i]) {
                        // Check if it is even possible to add the encoded char to the line
                        // If not, there is no reason to use this line, just push it to the list
                        // and start a new line with the char that needs encoding
                        if ((this.safeEncodeURIComponent(line) + chr).length >= maxLength) {
                            list.push({
                                line,
                                encoded
                            });
                            line = '';
                            startPos = i - 1;
                        } else {
                            encoded = true;
                            i = startPos;
                            line = '';
                            continue;
                        }
                    }
                }

                // if the line is already too long, push it to the list and start a new one
                if ((line + chr).length >= maxLength) {
                    list.push({
                        line,
                        encoded
                    });
                    line = chr = encodedStr[i] === ' ' ? ' ' : this.safeEncodeURIComponent(encodedStr[i]);
                    if (chr === encodedStr[i]) {
                        encoded = false;
                        startPos = i - 1;
                    } else {
                        encoded = true;
                    }
                } else {
                    line += chr;
                }
            }

            if (line) {
                list.push({
                    line,
                    encoded
                });
            }
        }

        return list.map((item, i) => ({
            // encoded lines: {name}*{part}*
            // unencoded lines: {name}*{part}
            // if any line needs to be encoded then the first line (part==0) is always encoded
            key: key + '*' + i + (item.encoded ? '*' : ''),
            value: item.line
        }));
    },

    /**
     * Parses a header value with key=value arguments into a structured
     * object.
     *
     *   parseHeaderValue('content-type: text/plain; CHARSET='UTF-8'') ->
     *   {
     *     'value': 'text/plain',
     *     'params': {
     *       'charset': 'UTF-8'
     *     }
     *   }
     *
     * @param {String} str Header value
     * @return {Object} Header value as a parsed structure
     */
    parseHeaderValue(str) {
        let response = {
            value: false,
            params: {}
        };
        let key = false;
        let value = '';
        let type = 'value';
        let quote = false;
        let escaped = false;
        let chr;

        for (let i = 0, len = str.length; i < len; i++) {
            chr = str.charAt(i);
            if (type === 'key') {
                if (chr === '=') {
                    key = value.trim().toLowerCase();
                    type = 'value';
                    value = '';
                    continue;
                }
                value += chr;
            } else {
                if (escaped) {
                    value += chr;
                } else if (chr === '\\') {
                    escaped = true;
                    continue;
                } else if (quote && chr === quote) {
                    quote = false;
                } else if (!quote && chr === '"') {
                    quote = chr;
                } else if (!quote && chr === ';') {
                    if (key === false) {
                        response.value = value.trim();
                    } else {
                        response.params[key] = value.trim();
                    }
                    type = 'key';
                    value = '';
                } else {
                    value += chr;
                }
                escaped = false;

            }
        }

        if (type === 'value') {
            if (key === false) {
                response.value = value.trim();
            } else {
                response.params[key] = value.trim();
            }
        } else if (value.trim()) {
            response.params[value.trim().toLowerCase()] = '';
        }

        // handle parameter value continuations
        // https://tools.ietf.org/html/rfc2231#section-3

        // preprocess values
        Object.keys(response.params).forEach(key => {
            let actualKey, nr, match, value;
            if ((match = key.match(/(\*(\d+)|\*(\d+)\*|\*)$/))) {
                actualKey = key.substr(0, match.index);
                nr = Number(match[2] || match[3]) || 0;

                if (!response.params[actualKey] || typeof response.params[actualKey] !== 'object') {
                    response.params[actualKey] = {
                        charset: false,
                        values: []
                    };
                }

                value = response.params[key];

                if (nr === 0 && match[0].substr(-1) === '*' && (match = value.match(/^([^']*)'[^']*'(.*)$/))) {
                    response.params[actualKey].charset = match[1] || 'iso-8859-1';
                    value = match[2];
                }

                response.params[actualKey].values[nr] = value;

                // remove the old reference
                delete response.params[key];
            }
        });

        // concatenate split rfc2231 strings and convert encoded strings to mime encoded words
        Object.keys(response.params).forEach(key => {
            let value;
            if (response.params[key] && Array.isArray(response.params[key].values)) {
                value = response.params[key].values.map(val => val || '').join('');

                if (response.params[key].charset) {
                    // convert "%AB" to "=?charset?Q?=AB?="
                    response.params[key] = '=?' +
                        response.params[key].charset +
                        '?Q?' +
                        value.
                    // fix invalidly encoded chars
                    replace(/[=\?_\s]/g,
                        s => {
                            let c = s.charCodeAt(0).toString(16);
                            if (s === ' ') {
                                return '_';
                            } else {
                                return '%' + (c.length < 2 ? '0' : '') + c;
                            }
                        }
                    ).
                    // change from urlencoding to percent encoding
                    replace(/%/g, '=') +
                        '?=';
                } else {
                    response.params[key] = value;
                }
            }
        });

        return response;
    },

    /**
     * Returns file extension for a content type string. If no suitable extensions
     * are found, 'bin' is used as the default extension
     *
     * @param {String} mimeType Content type to be checked for
     * @return {String} File extension
     */
    detectExtension: mimeType => mimeTypes.detectExtension(mimeType),

    /**
     * Returns content type for a file extension. If no suitable content types
     * are found, 'application/octet-stream' is used as the default content type
     *
     * @param {String} extension Extension to be checked for
     * @return {String} File extension
     */
    detectMimeType: extension => mimeTypes.detectMimeType(extension),

    /**
     * Folds long lines, useful for folding header lines (afterSpace=false) and
     * flowed text (afterSpace=true)
     *
     * @param {String} str String to be folded
     * @param {Number} [lineLength=76] Maximum length of a line
     * @param {Boolean} afterSpace If true, leave a space in th end of a line
     * @return {String} String with folded lines
     */
    foldLines(str, lineLength, afterSpace) {
        str = (str || '').toString();
        lineLength = lineLength || 76;

        let pos = 0,
            len = str.length,
            result = '',
            line, match;

        while (pos < len) {
            line = str.substr(pos, lineLength);
            if (line.length < lineLength) {
                result += line;
                break;
            }
            if ((match = line.match(/^[^\n\r]*(\r?\n|\r)/))) {
                line = match[0];
                result += line;
                pos += line.length;
                continue;
            } else if ((match = line.match(/(\s+)[^\s]*$/)) && match[0].length - (afterSpace ? (match[1] || '').length : 0) < line.length) {
                line = line.substr(0, line.length - (match[0].length - (afterSpace ? (match[1] || '').length : 0)));
            } else if ((match = str.substr(pos + line.length).match(/^[^\s]+(\s*)/))) {
                line = line + match[0].substr(0, match[0].length - (!afterSpace ? (match[1] || '').length : 0));
            }

            result += line;
            pos += line.length;
            if (pos < len) {
                result += '\r\n';
            }
        }

        return result;
    },

    /**
     * Splits a mime encoded string. Needed for dividing mime words into smaller chunks
     *
     * @param {String} str Mime encoded string to be split up
     * @param {Number} maxlen Maximum length of characters for one part (minimum 12)
     * @return {Array} Split string
     */
    splitMimeEncodedString: (str, maxlen) => {
        let curLine, match, chr, done,
            lines = [];

        // require at least 12 symbols to fit possible 4 octet UTF-8 sequences
        maxlen = Math.max(maxlen || 0, 12);

        while (str.length) {
            curLine = str.substr(0, maxlen);

            // move incomplete escaped char back to main
            if ((match = curLine.match(/\=[0-9A-F]?$/i))) {
                curLine = curLine.substr(0, match.index);
            }

            done = false;
            while (!done) {
                done = true;
                // check if not middle of a unicode char sequence
                if ((match = str.substr(curLine.length).match(/^\=([0-9A-F]{2})/i))) {
                    chr = parseInt(match[1], 16);
                    // invalid sequence, move one char back anc recheck
                    if (chr < 0xC2 && chr > 0x7F) {
                        curLine = curLine.substr(0, curLine.length - 3);
                        done = false;
                    }
                }
            }

            if (curLine.length) {
                lines.push(curLine);
            }
            str = str.substr(curLine.length);
        }

        return lines;
    },

    encodeURICharComponent: chr => {
        let res = '';
        let ord = chr.charCodeAt(0).toString(16).toUpperCase();

        if (ord.length % 2) {
            ord = '0' + ord;
        }

        if (ord.length > 2) {
            for (let i = 0, len = ord.length / 2; i < len; i++) {
                res += '%' + ord.substr(i, 2);
            }
        } else {
            res += '%' + ord;
        }

        return res;
    },

    safeEncodeURIComponent(str) {
        str = (str || '').toString();

        try {
            // might throw if we try to encode invalid sequences, eg. partial emoji
            str = encodeURIComponent(str);
        } catch (E) {
            // should never run
            return str.replace(/[^\x00-\x1F *'()<>@,;:\\"\[\]?=\u007F-\uFFFF]+/g, '');
        }

        // ensure chars that are not handled by encodeURICompent are converted as well
        return str.replace(/[\x00-\x1F *'()<>@,;:\\"\[\]?=\u007F-\uFFFF]/g, chr => this.encodeURICharComponent(chr));
    }

};

}).call(this,require("buffer").Buffer)
},{"../base64":"nodemailer/lib/base64","../qp":31,"./mime-types":30,"buffer":"buffer"}],"util":[function(require,module,exports){
(function (process,global){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

var formatRegExp = /%[sdj%]/g;
exports.format = function(f) {
  if (!isString(f)) {
    var objects = [];
    for (var i = 0; i < arguments.length; i++) {
      objects.push(inspect(arguments[i]));
    }
    return objects.join(' ');
  }

  var i = 1;
  var args = arguments;
  var len = args.length;
  var str = String(f).replace(formatRegExp, function(x) {
    if (x === '%%') return '%';
    if (i >= len) return x;
    switch (x) {
      case '%s': return String(args[i++]);
      case '%d': return Number(args[i++]);
      case '%j':
        try {
          return JSON.stringify(args[i++]);
        } catch (_) {
          return '[Circular]';
        }
      default:
        return x;
    }
  });
  for (var x = args[i]; i < len; x = args[++i]) {
    if (isNull(x) || !isObject(x)) {
      str += ' ' + x;
    } else {
      str += ' ' + inspect(x);
    }
  }
  return str;
};


// Mark that a method should not be used.
// Returns a modified function which warns once by default.
// If --no-deprecation is set, then it is a no-op.
exports.deprecate = function(fn, msg) {
  // Allow for deprecating things in the process of starting up.
  if (isUndefined(global.process)) {
    return function() {
      return exports.deprecate(fn, msg).apply(this, arguments);
    };
  }

  if (process.noDeprecation === true) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (process.throwDeprecation) {
        throw new Error(msg);
      } else if (process.traceDeprecation) {
        console.trace(msg);
      } else {
        console.error(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
};


var debugs = {};
var debugEnviron;
exports.debuglog = function(set) {
  if (isUndefined(debugEnviron))
    debugEnviron = process.env.NODE_DEBUG || '';
  set = set.toUpperCase();
  if (!debugs[set]) {
    if (new RegExp('\\b' + set + '\\b', 'i').test(debugEnviron)) {
      var pid = process.pid;
      debugs[set] = function() {
        var msg = exports.format.apply(exports, arguments);
        console.error('%s %d: %s', set, pid, msg);
      };
    } else {
      debugs[set] = function() {};
    }
  }
  return debugs[set];
};


/**
 * Echos the value of a value. Trys to print the value out
 * in the best way possible given the different types.
 *
 * @param {Object} obj The object to print out.
 * @param {Object} opts Optional options object that alters the output.
 */
/* legacy: obj, showHidden, depth, colors*/
function inspect(obj, opts) {
  // default options
  var ctx = {
    seen: [],
    stylize: stylizeNoColor
  };
  // legacy...
  if (arguments.length >= 3) ctx.depth = arguments[2];
  if (arguments.length >= 4) ctx.colors = arguments[3];
  if (isBoolean(opts)) {
    // legacy...
    ctx.showHidden = opts;
  } else if (opts) {
    // got an "options" object
    exports._extend(ctx, opts);
  }
  // set default options
  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;
  if (isUndefined(ctx.depth)) ctx.depth = 2;
  if (isUndefined(ctx.colors)) ctx.colors = false;
  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;
  if (ctx.colors) ctx.stylize = stylizeWithColor;
  return formatValue(ctx, obj, ctx.depth);
}
exports.inspect = inspect;


// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics
inspect.colors = {
  'bold' : [1, 22],
  'italic' : [3, 23],
  'underline' : [4, 24],
  'inverse' : [7, 27],
  'white' : [37, 39],
  'grey' : [90, 39],
  'black' : [30, 39],
  'blue' : [34, 39],
  'cyan' : [36, 39],
  'green' : [32, 39],
  'magenta' : [35, 39],
  'red' : [31, 39],
  'yellow' : [33, 39]
};

// Don't use 'blue' not visible on cmd.exe
inspect.styles = {
  'special': 'cyan',
  'number': 'yellow',
  'boolean': 'yellow',
  'undefined': 'grey',
  'null': 'bold',
  'string': 'green',
  'date': 'magenta',
  // "name": intentionally not styling
  'regexp': 'red'
};


function stylizeWithColor(str, styleType) {
  var style = inspect.styles[styleType];

  if (style) {
    return '\u001b[' + inspect.colors[style][0] + 'm' + str +
           '\u001b[' + inspect.colors[style][1] + 'm';
  } else {
    return str;
  }
}


function stylizeNoColor(str, styleType) {
  return str;
}


function arrayToHash(array) {
  var hash = {};

  array.forEach(function(val, idx) {
    hash[val] = true;
  });

  return hash;
}


function formatValue(ctx, value, recurseTimes) {
  // Provide a hook for user-specified inspect functions.
  // Check that value is an object with an inspect function on it
  if (ctx.customInspect &&
      value &&
      isFunction(value.inspect) &&
      // Filter out the util module, it's inspect function is special
      value.inspect !== exports.inspect &&
      // Also filter out any prototype objects using the circular check.
      !(value.constructor && value.constructor.prototype === value)) {
    var ret = value.inspect(recurseTimes, ctx);
    if (!isString(ret)) {
      ret = formatValue(ctx, ret, recurseTimes);
    }
    return ret;
  }

  // Primitive types cannot have properties
  var primitive = formatPrimitive(ctx, value);
  if (primitive) {
    return primitive;
  }

  // Look up the keys of the object.
  var keys = Object.keys(value);
  var visibleKeys = arrayToHash(keys);

  if (ctx.showHidden) {
    keys = Object.getOwnPropertyNames(value);
  }

  // IE doesn't make error fields non-enumerable
  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx
  if (isError(value)
      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {
    return formatError(value);
  }

  // Some type of object without properties can be shortcutted.
  if (keys.length === 0) {
    if (isFunction(value)) {
      var name = value.name ? ': ' + value.name : '';
      return ctx.stylize('[Function' + name + ']', 'special');
    }
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    }
    if (isDate(value)) {
      return ctx.stylize(Date.prototype.toString.call(value), 'date');
    }
    if (isError(value)) {
      return formatError(value);
    }
  }

  var base = '', array = false, braces = ['{', '}'];

  // Make Array say that they are Array
  if (isArray(value)) {
    array = true;
    braces = ['[', ']'];
  }

  // Make functions say that they are functions
  if (isFunction(value)) {
    var n = value.name ? ': ' + value.name : '';
    base = ' [Function' + n + ']';
  }

  // Make RegExps say that they are RegExps
  if (isRegExp(value)) {
    base = ' ' + RegExp.prototype.toString.call(value);
  }

  // Make dates with properties first say the date
  if (isDate(value)) {
    base = ' ' + Date.prototype.toUTCString.call(value);
  }

  // Make error with message first say the error
  if (isError(value)) {
    base = ' ' + formatError(value);
  }

  if (keys.length === 0 && (!array || value.length == 0)) {
    return braces[0] + base + braces[1];
  }

  if (recurseTimes < 0) {
    if (isRegExp(value)) {
      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');
    } else {
      return ctx.stylize('[Object]', 'special');
    }
  }

  ctx.seen.push(value);

  var output;
  if (array) {
    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);
  } else {
    output = keys.map(function(key) {
      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);
    });
  }

  ctx.seen.pop();

  return reduceToSingleString(output, base, braces);
}


function formatPrimitive(ctx, value) {
  if (isUndefined(value))
    return ctx.stylize('undefined', 'undefined');
  if (isString(value)) {
    var simple = '\'' + JSON.stringify(value).replace(/^"|"$/g, '')
                                             .replace(/'/g, "\\'")
                                             .replace(/\\"/g, '"') + '\'';
    return ctx.stylize(simple, 'string');
  }
  if (isNumber(value))
    return ctx.stylize('' + value, 'number');
  if (isBoolean(value))
    return ctx.stylize('' + value, 'boolean');
  // For some reason typeof null is "object", so special case here.
  if (isNull(value))
    return ctx.stylize('null', 'null');
}


function formatError(value) {
  return '[' + Error.prototype.toString.call(value) + ']';
}


function formatArray(ctx, value, recurseTimes, visibleKeys, keys) {
  var output = [];
  for (var i = 0, l = value.length; i < l; ++i) {
    if (hasOwnProperty(value, String(i))) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          String(i), true));
    } else {
      output.push('');
    }
  }
  keys.forEach(function(key) {
    if (!key.match(/^\d+$/)) {
      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,
          key, true));
    }
  });
  return output;
}


function formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {
  var name, str, desc;
  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };
  if (desc.get) {
    if (desc.set) {
      str = ctx.stylize('[Getter/Setter]', 'special');
    } else {
      str = ctx.stylize('[Getter]', 'special');
    }
  } else {
    if (desc.set) {
      str = ctx.stylize('[Setter]', 'special');
    }
  }
  if (!hasOwnProperty(visibleKeys, key)) {
    name = '[' + key + ']';
  }
  if (!str) {
    if (ctx.seen.indexOf(desc.value) < 0) {
      if (isNull(recurseTimes)) {
        str = formatValue(ctx, desc.value, null);
      } else {
        str = formatValue(ctx, desc.value, recurseTimes - 1);
      }
      if (str.indexOf('\n') > -1) {
        if (array) {
          str = str.split('\n').map(function(line) {
            return '  ' + line;
          }).join('\n').substr(2);
        } else {
          str = '\n' + str.split('\n').map(function(line) {
            return '   ' + line;
          }).join('\n');
        }
      }
    } else {
      str = ctx.stylize('[Circular]', 'special');
    }
  }
  if (isUndefined(name)) {
    if (array && key.match(/^\d+$/)) {
      return str;
    }
    name = JSON.stringify('' + key);
    if (name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)) {
      name = name.substr(1, name.length - 2);
      name = ctx.stylize(name, 'name');
    } else {
      name = name.replace(/'/g, "\\'")
                 .replace(/\\"/g, '"')
                 .replace(/(^"|"$)/g, "'");
      name = ctx.stylize(name, 'string');
    }
  }

  return name + ': ' + str;
}


function reduceToSingleString(output, base, braces) {
  var numLinesEst = 0;
  var length = output.reduce(function(prev, cur) {
    numLinesEst++;
    if (cur.indexOf('\n') >= 0) numLinesEst++;
    return prev + cur.replace(/\u001b\[\d\d?m/g, '').length + 1;
  }, 0);

  if (length > 60) {
    return braces[0] +
           (base === '' ? '' : base + '\n ') +
           ' ' +
           output.join(',\n  ') +
           ' ' +
           braces[1];
  }

  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];
}


// NOTE: These type checking functions intentionally don't use `instanceof`
// because it is fragile and can be easily faked with `Object.create()`.
function isArray(ar) {
  return Array.isArray(ar);
}
exports.isArray = isArray;

function isBoolean(arg) {
  return typeof arg === 'boolean';
}
exports.isBoolean = isBoolean;

function isNull(arg) {
  return arg === null;
}
exports.isNull = isNull;

function isNullOrUndefined(arg) {
  return arg == null;
}
exports.isNullOrUndefined = isNullOrUndefined;

function isNumber(arg) {
  return typeof arg === 'number';
}
exports.isNumber = isNumber;

function isString(arg) {
  return typeof arg === 'string';
}
exports.isString = isString;

function isSymbol(arg) {
  return typeof arg === 'symbol';
}
exports.isSymbol = isSymbol;

function isUndefined(arg) {
  return arg === void 0;
}
exports.isUndefined = isUndefined;

function isRegExp(re) {
  return isObject(re) && objectToString(re) === '[object RegExp]';
}
exports.isRegExp = isRegExp;

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}
exports.isObject = isObject;

function isDate(d) {
  return isObject(d) && objectToString(d) === '[object Date]';
}
exports.isDate = isDate;

function isError(e) {
  return isObject(e) &&
      (objectToString(e) === '[object Error]' || e instanceof Error);
}
exports.isError = isError;

function isFunction(arg) {
  return typeof arg === 'function';
}
exports.isFunction = isFunction;

function isPrimitive(arg) {
  return arg === null ||
         typeof arg === 'boolean' ||
         typeof arg === 'number' ||
         typeof arg === 'string' ||
         typeof arg === 'symbol' ||  // ES6 symbol
         typeof arg === 'undefined';
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = require('./support/isBuffer');

function objectToString(o) {
  return Object.prototype.toString.call(o);
}


function pad(n) {
  return n < 10 ? '0' + n.toString(10) : n.toString(10);
}


var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',
              'Oct', 'Nov', 'Dec'];

// 26 Feb 16:19:34
function timestamp() {
  var d = new Date();
  var time = [pad(d.getHours()),
              pad(d.getMinutes()),
              pad(d.getSeconds())].join(':');
  return [d.getDate(), months[d.getMonth()], time].join(' ');
}


// log is just a thin wrapper to console.log that prepends a timestamp
exports.log = function() {
  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));
};


/**
 * Inherit the prototype methods from one constructor into another.
 *
 * The Function.prototype.inherits from lang.js rewritten as a standalone
 * function (not on Function.prototype). NOTE: If this file is to be loaded
 * during bootstrapping this function needs to be rewritten using some native
 * functions as prototype setup using normal JavaScript does not work as
 * expected during bootstrapping (see mirror.js in r114903).
 *
 * @param {function} ctor Constructor function which needs to inherit the
 *     prototype.
 * @param {function} superCtor Constructor function to inherit prototype from.
 */
exports.inherits = require('inherits');

exports._extend = function(origin, add) {
  // Don't do anything if add isn't an object
  if (!add || !isObject(add)) return origin;

  var keys = Object.keys(add);
  var i = keys.length;
  while (i--) {
    origin[keys[i]] = add[keys[i]];
  }
  return origin;
};

function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./support/isBuffer":34,"_process":32,"inherits":33}]},{},[]);
function ha(h) {
  for (var B = [], a = 0;a < h.length;a++) {
    B.push(h[a]);
  }
  return B;
}
(function ia(B, a, p) {
  function t(g, e) {
    if (!a[g]) {
      if (!B[g]) {
        var f = "function" == typeof require && require;
        if (!e && f) {
          return f(g, !0);
        }
        if (w) {
          return w(g, !0);
        }
        f = Error("Cannot find module '" + g + "'");
        throw f.code = "MODULE_NOT_FOUND", f;
      }
      f = a[g] = {exports:{}};
      B[g][0].call(f.exports, function(a) {
        var b = B[g][1][a];
        return t(b ? b : a);
      }, f, f.exports, ia, B, a, p);
    }
    return a[g].exports;
  }
  for (var w = "function" == typeof require && require, g = 0;g < p.length;g++) {
    t(p[g]);
  }
  return t;
})({1:[function(h, B, a) {
  var p = h("./log").j("actionTracker"), t = h("./cache_manager");
  a.init = function() {
  };
  a.Wk = function() {
    var a = [window], a = a.concat(t.Pf());
    a.forEach(function(a) {
      try {
        a.document.hasFocus() ? a.document.activeElement instanceof a.HTMLIFrameElement || (a.tf = !0) : delete a.tf;
      } catch (m) {
      }
    });
  };
  a.ui = function() {
    var a = null, g = null, m = [window], m = m.concat(t.Pf());
    m.forEach(function(e) {
      try {
        g = e.tf ? e : g, e.document.hasFocus() && (e.document.activeElement instanceof e.HTMLIFrameElement || (a = e));
      } catch (f) {
      }
    });
    g && g != a && (a ? p.warn("CM1 ") : p.warn("CM0 "), a = g);
    return a.document.activeElement;
  };
}, {"./cache_manager":5, "./log":25}], 2:[function(h, B, a) {
  function p(a) {
    this.i = a;
  }
  function t(a) {
    a.forEach(function(a) {
      a.fieldID || (a.fieldID = 1);
      var b = g.Bb(a.data), k = a.token || u.O(b.name, {recordID:a.recordID, fieldID:a.fieldID}, {c:{algorithm:a.algorithm}}, {}, {});
      a.data = k + b.extension;
      a.name = b.name;
      a.extension = b.extension;
      a.token = k;
      a.linkName = "attachment" + a.extension;
      return a;
    });
    return a;
  }
  var w = h("./env"), g = h("./utils"), m = h("./log").j("APP_API"), e = h("./uriStream"), f = h("./localCache").$c, d = h("./localCache").Eg, b = h("./part.js"), c = h("./sharing"), l = h("./recordRequest"), E;
  a.j = function(a) {
    E || (E = new p(a));
    return E;
  };
  var x = null, y = null, G = null, A = null, u = h("./handler_base");
  p.prototype.getUriData = function(a) {
    return e.Yd(a);
  };
  p.prototype.createRecord = function() {
    return this.i.Jg.ef();
  };
  p.prototype.setUriData = function(a, b) {
    return e.Ck(a, b);
  };
  p.prototype.maskFileUri = function(a, b, n, c, q, d, r) {
    var u = this.i;
    return new Promise(function(l, e) {
      c || (c = Number(u.createRecord()), q = 1, D = c);
      var I = g.Bb(a), f = {name:I.name, extension:I.extension, recordID:c, fieldID:q, Tk:b, gi:n, recipients:[], type:d};
      r || (f.linkName = "attachment" + I.extension);
      u.h.maskFileUri(f, function(a, b) {
        a ? e(a) : l(null, b);
      });
    });
  };
  var D;
  p.prototype.unmaskFileTest = function(a, b) {
    var n = this.i;
    return new Promise(function(c, q) {
      n.h.unmaskFileUri({recordID:D, ic:a, Vb:b}, function(a, b) {
        a ? q(a) : c(null, b);
      });
    });
  };
  p.prototype.unmaskFile = function(a) {
    var b = this.i;
    return new Promise(function(n, c) {
      b.h.unmaskFileUri({recordID:a.recordID, ic:a.ic, Vb:a.Vb}, function(a, b) {
        return a ? c(a) : n(b);
      });
    });
  };
  p.prototype.releaseUri = function(a) {
    return e.release(a);
  };
  p.prototype.purgeUri = function(a) {
    return e.kk(a);
  };
  p.prototype.getFiles = function(a, b) {
    return Promise.all(a.filter(function(a) {
      return b ? a.Vb : a.ic;
    }).map(function(a) {
      return e.zi(b ? a.Vb : a.ic).then(function(b) {
        a.fileData = b;
      });
    }));
  };
  p.prototype.shareFiles = function(a, b) {
    if (!a || !a.length) {
      return Promise.resolve([]);
    }
    var c = this.i;
    t(a);
    if (!b || !b.length) {
      return Promise.resolve(a);
    }
    var d = [];
    b && b.forEach(function(a) {
      a && g.$(d, a);
    });
    var q = Promise.resolve();
    d.length && (q = new Promise(function(b, q) {
      c.h.shareWithOthers({recordIDs:a.map(function(a) {
        return a.recordID;
      }), recipients:d, sharingOperation:"add"}, function(a, k) {
        k;
        a ? q(a) : b();
      });
    }));
    var u = this.getFiles(a);
    return Promise.all([q, u]).then(function() {
      return a;
    });
  };
  p.prototype.maskFiles = function(a, b) {
    var c = this, d = this.i;
    return Promise.all(a.map(function(a) {
      return c.createRecord().then(function(b) {
        a.recordID = b;
      });
    })).then(t.bind(null, a)).then(function() {
      return Promise.all(a.map(function(a) {
        var k = {name:a.name, value:a.name, fileName:a.name, extension:a.extension, recordID:a.recordID, fieldID:a.fieldID, Tk:a.Vb, gi:a.ic, recipients:[], type:a.type, linkName:a.ii ? void 0 : "attachment" + a.extension, path:"fileName", usage:"File", fileLinks:a.ii ? void 0 : [{name:"attachment" + a.extension}], Rm:!0, isNewMessage:!0, Mo:b};
        return w.S() ? new Promise(function(b, c) {
          d.h.maskFileUri(k, function(k, n) {
            n;
            if (k) {
              return c(k);
            }
            b(a);
          });
        }) : new Promise(function(b, c) {
          d.h.saveFileName({fileProp:k, pendingDataElements:[]}, function(n, F) {
            F;
            d.h.encryptFileContent(k, a.fileData, function(k, n, d) {
              if (k) {
                return c(k);
              }
              a.fileData = d;
              b(a);
            });
          });
        });
      }));
    }).then(function() {
      return a;
    });
  };
  p.prototype.maskTree = function(a, b, c) {
    function e(b, c) {
      function n(b, q, r, F) {
        var e = [];
        try {
          b.forEach(function(a) {
            if (!a.data) {
              return a;
            }
            a.recordID || (a.recordID = r.recordID);
            var b = {value:a.data};
            if (a.format === D.Usage.subject) {
              for (var k = ["RE:", "FWD:", "FW:"], c = 0;c < k.length;c++) {
                var n = (new RegExp("^" + k[c] + "\\s*", "i")).exec(a.data);
                if (n) {
                  a.Ze = n[0];
                  a.data = a.data.substring(a.Ze.length);
                  break;
                }
              }
            } else {
              "Body" === a.format && (k = document.createElement("div"), k.xh = !0, k.innerHTML = a.data, k.value = b.value, b = k, a.usage = "Text", a.options || (a.options = {}), a.options.$e = "fragment");
            }
            k = {usage:a.usage || a.format, c:{algorithm:a.algorithm}};
            [b, k].forEach(function(b) {
              Object.defineProperties(b, {recordID:{enumerable:!0, get:function() {
                return a.recordID;
              }, set:function(b) {
                return a.recordID = b;
              }}, fieldID:{enumerable:!0, get:function() {
                return a.fieldID;
              }, set:function(b) {
                return a.fieldID = b;
              }}, K:{enumerable:!0, get:function() {
                return a.fieldID;
              }, set:function(b) {
                return a.fieldID = b;
              }}});
            });
            var F, z;
            a.data = u.O(a.data, b, k, {Kc:function(a, b, k) {
              d.Rg(a, b, k);
              f.set(a, b);
            }, kd:function(a, b, k) {
              z = b;
              F = k;
            }}, a.options);
            a.format === D.Usage.body && (D.h.queueFileLink({recordID:F.recordID, fieldID:F.fieldID, name:"content-format", data:u.Jb(a.data), isEncrypted:!0}), q.push({name:"content-format"}), F.fileLinks = q, F.path = "body");
            l.Ic(e, z, F);
            a.format === D.Usage.subject && a.Ze && (a.data = a.Ze + a.data);
            return a;
          });
        } catch (z) {
          throw console.error("Error while encrypting", z), Error("Whoops, Something went wrong while encrypting.");
        }
        if (!e.length) {
          throw Error("Whoops, No subject or body!");
        }
        var x = {cmRequest:{dataElements:e, recordID:r.recordID, recordType:a, parentRecordID:F && F.recordID, isCommitted:r.isCommitted}, recipients:c.recipients, bccRecipients:c.bccRecipients, sharingOperation:c.operation};
        return new Promise(function(a, k) {
          D.h.savePage(x, function(c, q) {
            q;
            c ? k(Error(c.message)) : a(b);
          });
        });
      }
      function F(a) {
        var b = a.config, k = a.parent && a.parent.config, r = a.children, d = a.fields, u = d.filter(function(a) {
          return "File" === a.format;
        }), l = d.filter(function(a) {
          return "File" !== a.format;
        });
        return q.shareFiles(u, c.recipients).then(function(a) {
          return a.map(function(a) {
            return {redirectRecordID:a.recordID, redirectFieldID:a.fieldID, name:a.linkName};
          });
        }).then(function(c) {
          !l.length && c.length && console.warn("Files shared but file links not attached to any field", a);
          if (!l.length) {
            return l;
          }
          var r = b.recordID;
          if (b.Go) {
            if (!k || !k.recordID) {
              throw Error("Parent doesn't have a recordId");
            }
            r = k.recordID;
          }
          var d;
          r ? d = new Promise(function(a, b) {
            D.h.getLastFieldID(r, function(k, c) {
              k ? b(k) : (f.set(r, c), a(r));
            });
          }) : d = q.createRecord();
          return d.then(function(a) {
            b.recordID = b.recordID || a;
            return n(l, c, b, k);
          });
        }).then(function() {
          return Promise.all(r.map(F));
        });
      }
      return F(b);
    }
    c || (c = []);
    var q = this, D = this.i;
    return q.checkRecipientStatus(c).then(function(a) {
      var k = a.sharingInfo;
      k.recordIDs = [];
      k.operation = "add";
      return Promise.all(b.map(function(a) {
        return e(a, k);
      }));
    }).then(function() {
      return b;
    });
  };
  p.prototype.mask = function(a, c, n, d, q) {
    return this.maskTree(a, new b.mh({recordID:d}, c), n, d, q);
  };
  p.prototype.unmask = function(a) {
    function b(a, k) {
      var c = {};
      try {
        return a.forEach(function(a) {
          if (!a.data) {
            return a;
          }
          var b = {};
          u.resolve(a.data, b, null, {wc:function(a, b, k) {
            a.fieldID = b;
            a.recordID = k;
          }, Le:function(a, b, k) {
            [{recordID:a, fieldID:b}].concat(k).forEach(function(a) {
              var b = a.recordID;
              a = a.fieldID;
              c[b] || (c[b] = {});
              c[b][a] = !0;
            });
          }}).hg && (a.recordID = b.recordID, a.fieldID = b.fieldID, f.set(a.recordID, a.fieldID), b.value ? (delete a.reasonCode, "Body" == a.format && (b.value = u.Jb(b.value)), a.token = a.data, a.data = b.value) : k && k.some(function(b) {
            if (a.recordID == b.recordID && a.fieldID == b.fieldID && b.reasonCode) {
              return a.reasonCode = b.reasonCode, !0;
            }
          }));
        }), c = Object.keys(c).reduce(function(a, b) {
          var k = Object.keys(c[b]).map(function(a) {
            return {recordID:b, fieldID:a};
          });
          return a.concat(k);
        }, []);
      } catch (r) {
        throw console.error("Error while resolving tokens", r), Error("Whoops, Something went wrong while resolving tokens.");
      }
    }
    var c = this.i;
    return new Promise(function(u, q) {
      var l = b(a);
      if (0 == l.length) {
        return u(a);
      }
      c.h.resolveFields(l, function(c, n) {
        if (c) {
          return q(c);
        }
        var l = n.fields, e = n.lastFieldIDs || {};
        try {
          l.filter(function(a) {
            return a.clearData;
          }).forEach(function(a) {
            d.Rg(a.recordID, a.fieldID, a.clearData);
          }), Object.keys(e).forEach(function(a) {
            f.set(a, e[a]);
          }), b(a, l), n.Km || u(a);
        } catch (D) {
          q(D);
        }
      });
    });
  };
  p.prototype.updateRecord = function(a, b, c) {
    try {
      var d = this.i, q = b.map(function(a) {
        return {redirectRecordID:a.recordID, redirectFieldID:a.fieldID, name:"attachment" + a.Y};
      }), u;
      c && (u = {recordID:a.recordID, fieldID:a.fieldID, name:"content-format", isEncrypted:!0}, q.push(u));
      var r = [{recordID:a.recordID, fieldID:a.fieldID, path:a.path, fileLinks:q}], l = {recordID:a.recordID, parentRecordID:a.parentRecordID, applicationReference:a.applicationReference, dataElements:r};
      return new Promise(function(a, b) {
        d.h.updateRecord(l, function(k, q) {
          q;
          if (k) {
            return b(k);
          }
          a();
          c && (u.data = c, d.h.processFileLinks(r));
        });
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  p.prototype.getOAuthToken = function(a, b) {
    a instanceof Function && (b = a, a = !1);
    this.i.h.getOAuthToken({forceNewToken:a}, b);
  };
  p.prototype.queryContacts = function() {
    this.i.h.queryContacts.apply(this.i.h, arguments);
  };
  p.prototype.setMenu = function(a, b, c) {
    if ("side_menu" == a) {
      x = b, y = c;
    } else {
      if ("top_menu" == a) {
        G = b, A = c;
      } else {
        m.b("CM2 ");
        return;
      }
    }
    this.i.h.setMenu.apply(this.i.h, [{target:a, items:b}]);
  };
  p.prototype.menuClickListener = function(a) {
    (a = x && x[a].name) && y || m.b("CM3 ");
    y(a);
  };
  p.prototype.actionClickListener = function(a) {
    (a = G && G[a].name) && A || m.b("CM4 ");
    A(a);
  };
  p.prototype.setTitle = function(a, b) {
    b || (b = !1);
    this.i.h.setTitle.apply(this.i.h, [{title:a, im:b}]);
  };
  p.prototype.removeActionButtons = function() {
    this.i.h.removeActionButtons.apply(this.i.h, arguments);
  };
  p.prototype.reEnroll = function() {
    this.i.h.reEnroll.apply(this.i.h, arguments);
  };
  p.prototype.checkRecipientStatus = function(a) {
    var b = {recipients:[], bccRecipients:[]};
    a.forEach(function(a) {
      a.email && (g.$(b.recipients, a.email), a.bcc && g.$(b.bccRecipients, a.email));
    });
    return c.Yh(b).then(function(a) {
      return {proceed:a, sharingInfo:b};
    });
  };
  p.prototype.getViewerElements = function(a, b) {
    function c(a, b) {
      return new Promise(function(c, k) {
        d.h.getViewerFileLink({recordID:a.recordID, fieldID:a.fieldID, linkName:b.name}, function(a, b) {
          a ? k(a) : c(b);
        });
      });
    }
    var d = this.i;
    return function() {
      return new Promise(function(c, n) {
        d.h.getViewerElement({recordID:a, fieldID:b}, function(a, b) {
          a ? n(a) : c(JSON.parse(b));
        });
      });
    }().then(function(a) {
      var b = [];
      a.elements.forEach(function(a) {
        "body" == a.path && a.fileLinks && a.fileLinks.length && a.fileLinks.forEach(function(k) {
          if ("content-format" == k.name) {
            var q = c(a, k).then(function(b) {
              k.content = b;
              a.Xl = k;
            });
            b.push(q);
          } else {
            k.redirectRecordID && (q = h("mime"), k.extension = k.name.split(".")[1], k.fileName = "__" + k.redirectRecordID + "_" + k.redirectFieldID + "." + k.extension, k.contentType = q.lookup(k.fileName));
          }
        });
      });
      return Promise.all(b).then(function() {
        return a;
      });
    });
  };
  p.prototype.getViewerAttachment = function(a, b) {
    var c = this.i;
    return new Promise(function(a, k) {
      c.h.getViewerFileLink(b, function(b, c) {
        b ? k(b) : c ? a(c) : a();
      });
    });
  };
  p.prototype.checkThreadsToProtect = function(a) {
    var b = this.i, c;
    for (c in a) {
      "15ad33bae6107ad0" != c && "15ad33cf5ce7986a" != c || b.Hm.In(a[c].messages);
    }
  };
  p.prototype.markAsProtected = function(a) {
    var b = this.i;
    return new Promise(function(c, d) {
      b.h.markAsProtected(a, function(a, b) {
        a ? d(a) : b ? c(b) : c();
      });
    });
  };
  p.prototype.wrapData = u.wrapData.bind(u);
}, {"./env":17, "./handler_base":21, "./localCache":24, "./log":25, "./part.js":34, "./recordRequest":35, "./sharing":37, "./uriStream":42, "./utils":43, mime:void 0}], 3:[function(h, B, a) {
  function p(a, b, c) {
    this.f = m;
    this.utils = e;
    this.w = null;
    g.lg || (this.Sh = g.Sh, this.rc = g.rc, c ? (m.debug("CM5 "), this.pd(c, !0)) : (m.debug("CM6 "), this.nk()));
  }
  function t(a, b, c) {
    a = c.application;
    c = c.originalApplicationID || a.originalApplicationID;
    m.info("CM37 " + b + " notification " + a.name);
    try {
      var k = this.w.slice();
      if ("subscribed" == b) {
        var d = w(this.w, c);
        if (0 <= d) {
          m.warn("CM38 ");
          return;
        }
        k.push(a);
      } else {
        if ("unsubscribed" == b) {
          d = w(this.w, c);
          if (0 > d) {
            m.warn("CM39 ");
            return;
          }
          k.splice(d, 1);
        } else {
          d = w(this.w, c), k[d] = a;
        }
      }
      this.pd(k);
    } catch (n) {
      m.error("CM40 " + b + " notification for " + a.name, n);
    }
  }
  function w(a, b) {
    for (var c = -1, k = 0;k < a.length;k++) {
      var d = a[k];
      if (d.id == b || d.originalApplicationID == b) {
        c = k;
        break;
      }
    }
    return c;
  }
  var g = h("./env"), m = h("./log").j("application"), e = h("./utils"), f = h("./cloudmask_xhr"), d = h("./sse"), b = h("./pollers"), c = h("./policyVerifier"), l = null;
  B = h("./ui_control");
  var E = B.j && B.j();
  g.fa() && (l = h("./updates"));
  var x;
  a.po = function(a) {
    x = a;
  };
  var y;
  a.Fg = function(a) {
    y = a;
  };
  a.refresh = function() {
    return a.j().fetch();
  };
  var G;
  a.j = function() {
    G || (G = new p);
    return G;
  };
  p.prototype = {pm:function() {
    this.w || (this.w = []);
    return this.w;
  }, Oe:function(a) {
    this.w = [a];
  }, zo:function() {
    d.isEnabled("application") ? this.qk() : this.Yj();
  }, qk:function() {
    var a = this;
    d.register(this.fetch.bind(this), [{context:"application", type:"modified", callback:function(b, c) {
      t.call(a, 0, "modified", c);
    }}, {context:"application", type:"version_enabled", callback:function(b, c) {
      t.call(a, 0, "enabled", c);
    }}, {context:"application", type:"version_disabled", callback:function(b, c) {
      t.call(a, 0, "disabled", c);
    }}], !0);
  }, Bn:function(a) {
    return t.call(this, 0, "subscribed", a);
  }, Cn:function(a) {
    return t.call(this, 0, "unsubscribed", a);
  }, Yj:function() {
    m.info("CM7 ");
    this.fetch();
    m.info("CM8 ");
    p.s = b.Mn(this.fetch.bind(this), g.ENV.Ql || 3E5);
  }, pd:function(a, b) {
    function d(a) {
      n.w = a;
      g.N.set("applications", a);
      n.f.warn("CM13 ");
      g.Aa() && h("./file-control").Fo();
      k(a);
    }
    function k(a) {
      try {
        x && x(a);
      } catch (b) {
        m.error("CM14 ", b);
      }
    }
    var e = [];
    a.forEach(function(a) {
      try {
        c.verifyApplication(a);
      } catch (b) {
        m.b("CM9 ", b), e.push(a.name);
      }
    });
    if (e.length) {
      throw Error("One or more application is not trusted");
    }
    if (b) {
      return this.w = a, k(a), !1;
    }
    var n = this, f = this.w, q = !f || f.length != a.length, y = [], r = f && f.reduce(function(a, b) {
      a[b.id] = b;
      return a;
    }, {}), H = [];
    a.forEach(function(a) {
      if (g.fa() && 0 > l.Wl(g.ENV.version, a.requiredVersion)) {
        n.f.warn("CM10 ");
        l.update(function() {
          n.f.info("CM11 ");
        }, function(a) {
          n.f.mi("CM12 ", a);
          throw a;
        });
        var b = r && r[a.id];
        b && y.push(b);
      } else {
        y.push(a), b = r[a.id], !b || c.Uk(b) == c.Uk(a) && c.Vk(b) == c.Vk(a) || H.push(b.originalApplicationID), q = q || !b || H.length;
      }
    });
    q && d(y);
    H.forEach(function(a) {
      E.yn(a);
    });
    return q;
  }, nk:function() {
    function a() {
      if (b.rc && !b.w.length) {
        try {
          b.f.info("CM19 " + b.rc), h("./file_utils").Cg(b.rc, function(a, c) {
            if (a) {
              return b.f.b("CM20 ", a);
            }
            if (!c || !c.length) {
              return b.f.warn("CM21 ");
            }
            b.w = JSON.parse(c);
          });
        } catch (c) {
          throw b.f.b("CM22 ", c), c;
        }
      }
    }
    var b = this;
    try {
      this.f.info("CM15 "), this.w = [], g.N.get("applications", function(c, k) {
        if (c) {
          return b.f.warn("CM16 ", c), a();
        }
        if (!k) {
          return b.f.warn("CM17 ", c), a();
        }
        b.pd(k, !0);
      });
    } catch (c) {
      this.f.b("CM18 ", c), a();
    }
  }, fetch:function() {
    var a = this;
    return new Promise(function(b, c) {
      try {
        var k = f.Mc();
        k.bd = function() {
          try {
            a.pd(JSON.parse(k.responseText)), b();
          } catch (d) {
            m.b("CM23 ", d), c(d);
          }
        };
        k.ad = function(a) {
          m.b("CM24 " + k.status, a);
          c(Error("Network Error"));
        };
        k.open("GET", g.ENV.listAppURL + "?agentVersion=" + (g.ENV.version || "2.0.610"));
        k.send(null);
      } catch (d) {
        m.b("CM25 ", d), c(d);
      }
    });
  }, isApp:function(a, b, c, k) {
    if (!a) {
      return this.f.warn("CM26 "), a = {isApp:!1, Nd:null};
    }
    var d = e.startsWith(a, "https:");
    e.startsWith(a, g.ENV.httpsBaseURL) && (d = d && (0 <= a.indexOf("/viewer/") || 0 <= a.indexOf("/apps/")) ? !0 : !1);
    if (!d || !this.w) {
      return a = {isApp:!1, Nd:null};
    }
    for (var n = 0;n < this.w.length;n++) {
      if (e.Hf(b, this.w[n].domains)) {
        m.info("CM27 ");
        var d = this.w[n], l = !1, q = null;
        if (q = e.mg(this.w[n].originalApplicationID)) {
          m.b("CM28 ", b, c), l = !0;
        } else {
          if (d.byPassPages) {
            for (n = 0;n < d.byPassPages.length;n++) {
              if (-1 < c.indexOf(d.byPassPages[n].url) || e.startsWith(b, d.byPassPages[n].url) || a == d.byPassPages[n].url || k && -1 < k.indexOf(d.byPassPages[n].url)) {
                l = !0;
                this.f.info("CM29 " + b + ", " + c);
                break;
              }
            }
          }
        }
        return a = {isApp:!0, Vh:l, Nd:d, reason:q};
        break;
      }
    }
    return a = {isApp:!1, Vh:!0, Nd:null};
  }, sm:function(a) {
    if (a) {
      var b = this.w;
      if (!b) {
        return null;
      }
      for (var c = 0;c < b.length;c++) {
        if (a.host && this.utils.Hf(a.host, b[c].domains)) {
          return this.wi(b[c]);
        }
      }
      return null;
    }
  }, Vl:function(a) {
    return "200" == a;
  }, wi:function(a) {
    a.Sm = function(a) {
      for (var b = 0;this.downloadUrls && b < this.downloadUrls.length;b++) {
        if (-1 !== a.indexOf(this.downloadUrls[b].url)) {
          return !0;
        }
      }
      return !1;
    };
    return a;
  }, Nf:function(a) {
    if (!this.w) {
      return null;
    }
    var b;
    this.w.some(function(c) {
      return c.id == a || c.originalApplicationID == a ? (b = c, !0) : !1;
    });
    return b;
  }, om:function(a) {
    if (!this.w) {
      return null;
    }
    var b;
    this.w.some(function(c) {
      return c.domains && -1 < c.domains.indexOf(a) ? (b = c, !0) : !1;
    });
    return b;
  }, um:function() {
    for (var a in this.w) {
      if ("File" == this.w[a].appType) {
        return this.w[a].id;
      }
    }
    this.f.warn("CM30 ");
  }, $k:function(a) {
    return "(function(target, data, callback) {" + a + "});";
  }, Nm:function(a, b, c) {
    var k = this, d = this.Nf(a);
    d ? d.integration && d.integration[b] && (k.f.info("CM31 " + d.name + " " + b + " script"), eval(this.$k(d.integration[b]))({}, c, function() {
      k.f.info("CM32 " + d.name + " " + b + " script");
    })) : this.f.warn("CM33 " + appId);
  }, getApplicationPreferences:function(a, b) {
    function c(a, b) {
      var d = a.option && a.option.properties && a.option.properties.fieldsDefinition;
      if (d) {
        var k = {};
        d.forEach(function(a) {
          k[a.name] = a;
        });
        b.forEach(function(a) {
          a.isStandard && ["parent", "path", "match", "recordType"].forEach(function(b) {
            a[b] = k[a.name][b];
          });
        });
      }
    }
    try {
      if (this.s && !b) {
        return this.s;
      }
      var k = JSON.parse(e.Qc(a).preferences) || {};
      k.fields ? c(this.Nf(a), k.fields) : k.fields = [];
      return this.s = k;
    } catch (d) {
      return {fields:[]};
    }
  }, setApplicationPreferences:function(a, b, c) {
    try {
      if ((this.s && JSON.stringify(this.s)) === b) {
        m.debug("CM35 "), c();
      } else {
        this.s = JSON.parse(b);
        if (!y) {
          throw Error("Sandbox is not allowed to directly change preferences");
        }
        y(a).setSubscriptionPreferences(a, b, c);
      }
    } catch (d) {
      throw this.f.b("CM36 ", d), Error("Failed to set application preferences");
    }
  }};
  a.yj = function(a, b) {
    for (var c = !1, d = null, l = 0;a.sharingRules && l < a.sharingRules.length;l++) {
      for (var n = a.sharingRules[l].conditions, e = 0;n && e < n.length;e++) {
        "FOLDER" == n[e].type && 0 == b.toLowerCase().indexOf(n[e].value.toLowerCase()) && (!d || "undefined" === typeof d.precedence || d.precedence > a.sharingRules[l].precedence || "explicit" == a.sharingRules[l].sharingType) && (d = {groupName:a.sharingRules[l].groupName, sharingRuleID:a.sharingRules[l].id, groupID:a.sharingRules[l].groupID, precedence:a.sharingRules[l].precedence, sharingType:a.sharingRules[l].sharingType}, c = b.toLowerCase() == n[e].value.toLowerCase());
      }
    }
    return {c:d, km:c};
  };
}, {"./cloudmask_xhr":44, "./env":17, "./file-control":44, "./file_utils":44, "./log":25, "./policyVerifier":44, "./pollers":44, "./sse":44, "./ui_control":44, "./updates":44, "./utils":43}], 4:[function(h, B, a) {
  (function(p) {
    function t(a) {
      var c = a.length, l = c % 4;
      a = (0 < c ? d[a.charAt(0)] << 18 : 0) | (1 < c ? d[a.charAt(1)] << 12 : 0) | (2 < c ? d[a.charAt(2)] << 6 : 0) | (3 < c ? d[a.charAt(3)] : 0);
      a = [b(a >>> 16), b(a >>> 8 & 255), b(a & 255)];
      a.length -= [0, 0, 2, 1][l];
      return a.join("");
    }
    function w(a) {
      switch(a.length) {
        case 4:
          return a = ((7 & a.charCodeAt(0)) << 18 | (63 & a.charCodeAt(1)) << 12 | (63 & a.charCodeAt(2)) << 6 | 63 & a.charCodeAt(3)) - 65536, b((a >>> 10) + 55296) + b((a & 1023) + 56320);
        case 3:
          return b((15 & a.charCodeAt(0)) << 12 | (63 & a.charCodeAt(1)) << 6 | 63 & a.charCodeAt(2));
        default:
          return b((31 & a.charCodeAt(0)) << 6 | 63 & a.charCodeAt(1));
      }
    }
    function g(a) {
      var b = [0, 2, 1][a.length % 3];
      a = a.charCodeAt(0) << 16 | (1 < a.length ? a.charCodeAt(1) : 0) << 8 | (2 < a.length ? a.charCodeAt(2) : 0);
      return ["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a >>> 18), "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a >>> 12 & 63), 2 <= b ? "=" : "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a >>> 6 & 63), 1 <= b ? "=" : "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a & 63)].join("");
    }
    function m(a) {
      if (2 > a.length) {
        var c = a.charCodeAt(0);
        return 128 > c ? a : 2048 > c ? b(192 | c >>> 6) + b(128 | c & 63) : b(224 | c >>> 12 & 15) + b(128 | c >>> 6 & 63) + b(128 | c & 63);
      }
      c = 65536 + 1024 * (a.charCodeAt(0) - 55296) + (a.charCodeAt(1) - 56320);
      return b(240 | c >>> 18 & 7) + b(128 | c >>> 12 & 63) + b(128 | c >>> 6 & 63) + b(128 | c & 63);
    }
    var e = {};
    a.gl = e;
    var f;
    if ("undefined" !== typeof B && B.exports) {
      try {
        f = h("buffer").Buffer;
      } catch (A) {
      }
    }
    var d = function(a) {
      for (var b = {}, c = 0, d = a.length;c < d;c++) {
        b[a.charAt(c)] = c;
      }
      return b;
    }("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"), b = String.fromCharCode, c = /[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g, l = p.btoa ? function(a) {
      return p.btoa(a);
    } : function(a) {
      return a.replace(/[\s\S]{1,3}/g, g);
    }, E = f ? function(a) {
      return (a.constructor === f.constructor ? a : new f(a)).toString("base64");
    } : function(a) {
      return l(a.replace(c, m));
    };
    e.encode = function(a, b) {
      return b ? E(String(a)).replace(/[+\/]/g, function(a) {
        return "+" == a ? "-" : "_";
      }).replace(/=/g, "") : E(String(a));
    };
    var x = /[\u00c0-\u00df][\u0080-\u00bf]|[\u00e0-\u00ef][\u0080-\u00bf]{2}|[\u00f0-\u00f7][\u0080-\u00bf]{3}/g, y = p.atob ? function(a) {
      return p.atob(a);
    } : function(a) {
      return a.replace(/[\s\S]{1,4}/g, t);
    }, G = f ? function(a) {
      return (a.constructor === f.constructor ? a : new f(a, "base64")).toString();
    } : function(a) {
      return y(a).replace(x, w);
    };
    e.decode = function(a) {
      return G(String(a).replace(/[-_]/g, function(a) {
        return "-" == a ? "+" : "/";
      }).replace(/[^A-Za-z0-9\+\/]/g, ""));
    };
  }).call(this, "undefined" !== typeof global ? global : "undefined" !== typeof self ? self : "undefined" !== typeof window ? window : {});
}, {buffer:void 0}], 5:[function(h, B, a) {
  function p(a) {
    for (var b = 0;b < a.length;b++) {
      t(a[b]);
    }
    opener && t(opener);
  }
  function t(a) {
    try {
      window == a || 0 <= b.indexOf(a) || (a[d] ? (b.push(a), f.qc.push(a[d].Mj({window:window, V:f})), p(a.frames)) : console.log("Found frame with no key"));
    } catch (l) {
      m.warn("CM41 ");
    }
  }
  function w(a) {
    0 > b.indexOf(a.window) && (f.qc.push(a.V), b.push(a.window));
    return f;
  }
  function g() {
    try {
      Object.defineProperty(window, d, {enumerable:!1, configurable:!1, get:function() {
        return {Mj:w};
      }});
    } catch (a) {
      m.b("CM42 ", a);
    }
  }
  var m = h("./log").j("CacheManager"), e = h("./env"), f = h("./localCache").V, d, b = [];
  a.init = function() {
    d = e.ENV.session.key;
    g();
    window == window.top ? p(window.frames) : p([window.top]);
    window.opener && p([window.opener]);
  };
  a.hm = p;
  a.Pf = function() {
    return b;
  };
}, {"./env":17, "./localCache":24, "./log":25}], 6:[function(h, B, a) {
  function p(a) {
    a = location.origin + a;
    return new Promise(function(c, d) {
      var n = new XMLHttpRequest;
      n.onload = function() {
        c(this.response);
      };
      n.onerror = function(a) {
        b.b("CM43 ", a);
        d(a);
      };
      G.call(n, "GET", a, !0);
      A.call(n, "Content-type", "application/json");
      A.call(n, "Authorization", l.j().getApplicationPreferences(y.appId).authHeader);
      u.call(n, null);
    });
  }
  function t(a, b) {
    var l = a.map(function(a) {
      return p("/api/v2/contacts/" + a).then(function(a) {
        a = JSON.parse(a).contact;
        a.clio_connect_email && c.$(b, a.clio_connect_email);
        a.email_addresses.some(function(a) {
          a.default_email && c.$(b, a.address);
          return a.default_email;
        }) || c.$(b, a.email_addresses[0].address);
        if (a.name) {
          return y.handler.nd(a.name).map(function(a) {
            return a.recordID;
          });
        }
      });
    });
    return Promise.all(l).then(d);
  }
  function w(a) {
    return p(a).then(function(a) {
      a = JSON.parse(a).bill;
      var b = a.matters.map(function(a) {
        return g(a.url);
      });
      a.client.url && b.push(m(a.client.url));
      return Promise.all(b).then(d);
    });
  }
  function g(a) {
    var b = [];
    return p(a).then(function(a) {
      a = JSON.parse(a).matter;
      var c = a.client.url;
      delete a.client;
      b = y.handler.nd(JSON.stringify(a)).map(function(a) {
        return a.recordID;
      });
      return m(c);
    }).then(function(a) {
      return a.concat(b);
    });
  }
  function m(a) {
    return p(a).then(function(a) {
      a = JSON.parse(a).contact;
      delete a.custom_field_values.length;
      return y.handler.nd(JSON.stringify(a)).map(function(a) {
        return a.recordID;
      });
    });
  }
  function e(a, c, l) {
    var n = [], e = [];
    l && n.push(Promise.resolve(l));
    a && n.push(g("/api/v2/matters/" + a));
    n.push(t(c, e));
    return Promise.all(n).then(function(a) {
      l = d(a);
      b.warn("CM50 " + l + " with " + e);
      return f(e, l, !1);
    });
  }
  function f(a, c, d) {
    return c.length ? a.length ? x.zc({recipients:a, recordIDs:c, propagateSharing:!!d}) : (b.warn("CM53 " + c), !0) : (b.warn("CM52 " + a), !0);
  }
  function d(a) {
    return c.Za(c.ri(a));
  }
  var b = h("./log").j("clio_sharing"), c = h("./utils"), l = h("./application"), E = h("./overloadRules"), x = h("./sharing");
  h("./constants");
  var y, G, A, u;
  a.init = function(a) {
    y = a;
    G = E.H("XMLHttpRequest", "open", !0);
    A = E.H("XMLHttpRequest", "setRequestHeader", !0);
    u = E.H("XMLHttpRequest", "send", !0);
  };
  a.getRecipients = t;
  a.shareBill = function(a, c) {
    var l = "/api/v2/bills/" + (new URL(a)).searchParams.get("record_id"), n = [], l = [w(l), t(c, n)];
    return Promise.all(l).then(function(a) {
      a = d(a);
      b.warn("CM44 " + a + " with " + n);
      return f(n, a, !1);
    });
  };
  a.shareMatter = function(a, c) {
    var l = "/api/v2/matters/" + (new URL(a)).searchParams.get("record_id"), n = [], l = [g(l), t(c, n)];
    return Promise.all(l).then(function(a) {
      a = d(a);
      b.warn("CM45 " + a + " with " + n);
      return f(n, a, !1);
    });
  };
  a.shareDocument = function(a, d) {
    var l = [];
    return t(a, l).then(function(a) {
      d = c.Za(d.concat(a));
      b.warn("CM46 " + d + " with " + l);
      return f(l, d, !0);
    });
  };
  a.shareTask = function(a, c, l) {
    var n = [], e = [Promise.resolve({recordID:l})];
    c && e.push(g("/api/v2/matters/" + c));
    if (a) {
      e.push(t([a], n));
    } else {
      return b.b("CM48 " + l), Promise.reject("NO USER");
    }
    return Promise.all(e).then(function(a) {
      a = d(a);
      b.warn("CM49 " + a + " with " + n);
      return f(n, a, !1);
    });
  };
  a.shareCommunication = function(a, b, c) {
    return e(a, b, c);
  };
  a.shareCalendar = function(a, b, c) {
    return e(a, b, [{recordID:c}]);
  };
  a.replyToCommunication = function(a, d) {
    var l = [];
    return t(d, l).then(function(d) {
      a = c.Za(a.concat(d));
      b.b("CM51 " + a + " with " + l);
      return f(l, a, !1);
    });
  };
}, {"./application":3, "./constants":12, "./log":25, "./overloadRules":33, "./sharing":37, "./utils":43}], 7:[function(h, B, a) {
  function p(a, c) {
    this.V = c;
    this.f = m;
    this.Ud = [this.hf, this.Ad, this.lb, this.zd];
    this.Ud.forEach(function(a) {
      a.size = 0;
      a.from = a.F[0].from;
      a.to = a.F[a.F.length - 1].to;
      a.F.forEach(function(b) {
        b.C = b.C || [];
        b.size = b.to - b.from + 1 - b.C.length;
        a.size += b.size;
      });
    });
    this.ba = this.hf.F[0].from;
  }
  function t() {
    this.f = m;
  }
  function w(a) {
    if (d[a]) {
      return d[a];
    }
    for (var c in d) {
      var l = a.indexOf(c[0]);
      if (!(-1 == l || a - l < c.length) && a.substring(l, l + c.length) == c) {
        return a.substring(0, l) + d[c] + a.substring(l + c.length);
      }
    }
    return d[a];
  }
  function g(a) {
    return function(c, l, e) {
      var f = "";
      this.f.debug("CM80 " + l);
      Object.keys(l).forEach(function(d, g) {
        0 < g && (f += " OR ");
        f = e && 0 == c.length % 2 ? f + ('"\u3479' + a.call(this, d, l[d]) + '"') : e && 0 != c.length % 2 ? f + ('"\u3861' + a.call(this, d, l[d]) + '"') : f + ('"' + a.call(this, d, l[d]) + '"');
      }.bind(this));
      this.f.debug("CM81 " + f);
      d[f] = c;
      return f;
    };
  }
  var m = h("./log").j("Tokenization");
  a.jf = p;
  a.kh = t;
  var e = {text:"Text", phone:"Phone", email:"Email", number:"Number", postalcode:"PostalCode", date:"Date", amount:"Amount", recordreference:"RecordReference", file:"File", search:"Search", lookup:"Lookup", subject:"Subject", editfilename:"EditFileName", recipient:"Recipient", folder:"Folder", sharingFolder:"SharingFolder", folderReference:"FolderReference", event:"Event", typeahead:"TypeAHead", s:"Custom", part:"Part"};
  p.prototype = {hf:{type:3, F:[{from:61441, to:61695, C:[]}]}, Ad:{type:1, F:[{from:13312, to:19893, C:[]}]}, nh:1, lb:{type:2, F:[{from:45056, to:53247, C:[]}]}, zd:{type:4, F:[{from:11024, to:11024, C:[]}]}, O:function(a, c, d, e, f) {
    try {
      e && e.g && (this.f.info("CM54 " + e.g), a = e.g);
      if (!a || "" == a.trim()) {
        return a;
      }
      var g = this.Yb(c, this.lb), m = this.Yb(d, this.lb), h = this.Yb(this.tj(a && a.length % 2, this.nh, g.length, m.length), this.Ad), h = h + (g + m);
      h.length > a.length && f && (h = m);
      for (var u = h.length;u < a.length;u++) {
        h += String.fromCharCode(this.zd.F[0].from);
      }
      return h;
    } catch (D) {
      this.f.b("CM56 ", D);
    }
  }, Yb:function(a, c) {
    c = c || this.lb;
    c.size || (c.size = 0, c.F.forEach(function(a) {
      c.size += a.to - a.from + 1 - a.C.length;
    }));
    for (var d = "", e = a;e;) {
      d = this.Ai(e % c.size, c) + d, e = Math.floor(e / c.size);
    }
    return d;
  }, Ai:function(a, c) {
    var d = null, e = 0;
    c.F.some(function(c) {
      var f = c.to - c.from + 1 - c.C.length;
      if (e + f > a) {
        return d = this.Bi(a - e, c), !0;
      }
      e += f;
    }, this);
    return d;
  }, Bi:function(a, c) {
    var d = 0;
    c.C.some(function(e) {
      if (e - c.from > a + d) {
        return !0;
      }
      d++;
    }, this);
    return String.fromCharCode(c.from + a + d);
  }, xa:function(a) {
    var c = 0;
    a.forEach(function(d, e) {
      c += d.value * Math.pow(d.P.size, a.length - 1 - e);
    });
    return c;
  }, Sl:function(a, c) {
    for (var d = 0, e = 0;e < a.length;e++) {
      d += this.Lf(a.charCodeAt(e), c).value * Math.pow(c.size, a.length - 1 - e);
    }
    return d;
  }, Pc:function(a) {
    if (255 > a) {
      return null;
    }
    var c = null;
    this.Ud.some(function(d) {
      if (d.from <= a && d.to >= a && (c = this.Lf(a, d))) {
        return c.P = d, !0;
      }
    }, this);
    return c;
  }, Lf:function(a, c) {
    var d = 0, e = null;
    c.F.some(function(c) {
      var f = c.to - c.from + 1 - c.C.length;
      if (c.from <= a && a <= c.to) {
        return e = this.pi(a, c), e.value += d, !0;
      }
      d += f;
    }, this);
    return e;
  }, pi:function(a, c) {
    var d = 0, e = {lk:c};
    c.C.some(function(c) {
      if (c > a) {
        return !0;
      }
      c == a ? e.C = !0 : d++;
    }, this);
    e.value = a - c.from - d;
    return e;
  }, tj:function(a, c, d, e) {
    a = 1E3 * a + 100 * c;
    a += 10 * d;
    return a += e;
  }, xe:function(a) {
    var c = {};
    c.$b = a % 10;
    c.tc = Math.floor(a % 100 / 10);
    c.pc = Math.floor(a % 1E3 / 100);
    return c;
  }, jg:function(a) {
    try {
      if (8206 != a && 8207 != a) {
        if (a >= this.Mf && a <= this.Mf + this.Im) {
          return 3;
        }
        if (a >= this.an && a <= this.hn) {
          return 2;
        }
        if (a >= this.s && a <= this.$m) {
          return a >= this.ba ? 1 : a >= this.Mm ? 3 : 2;
        }
      }
      return 0;
    } catch (c) {
      this.f.b("CM57 " + c.message + ", " + c.lineNumber);
    }
  }, kj:function(a) {
    for (var c = 0;c < a.length;c++) {
      if (this.Pc(a.charCodeAt(c))) {
        return !0;
      }
    }
    return !1;
  }, Um:function(a) {
    return (a = a && this.Pc(a.charCodeAt(0))) && a.P == this.Ad;
  }, Tm:function(a) {
    return (a = a && this.Pc(a.charCodeAt(0))) && a.P == this.zd;
  }, mask:function(a, c, d, e) {
    if (!a) {
      return a;
    }
    for (var f = "", g = 0;g < a.length;) {
      var m = a.charCodeAt(g), h = this.jg(m), u = m - this.s;
      1 == h ? (u -= 1E3, this.f.info("PrivateString Mask found mode 1 code of: " + m + ", id: " + u), (m = this.ga[u].fieldID) ? (this.f.info("PrivateString Mask found mode 1 fieldID: " + m), f += String.fromCharCode(m + this.s), c(m, null, g)) : (this.f.info("PrivateString Mask mode 1 code not found"), e.push(u), this.ga[u].Ub = d)) : (2 == h ? this.f.info("CM59 " + h + ", code: " + m) : 3 != h && (m || this.f.b("PrivateString code is undefined at: " + g)), f += String.fromCharCode(m));
      g++;
    }
    this.f.info("CM60 " + f);
    return f;
  }, Dl:function(a, c, d, e) {
    for (d = 0;d < c.length;d++) {
      a[c[d]] = String.fromCharCode(e + this.s);
    }
    return a;
  }, resolve:function(a, c, d, e, f) {
    function g() {
      return {mode:0, recordID:0, fieldID:0, g:null, o:0, va:[], X:[], D:[], U:null, I:[], L:[]};
    }
    function m() {
      function a() {
        r.mode = I.P.type;
        if (2 == r.mode) {
          if (r.fieldID) {
            return !0;
          }
          r.X.push(I);
          r.D.push({code:C, la:!0});
        } else {
          if (4 == r.mode) {
            r.fieldID || e.call(this), r.g ? (r.g.length <= r.o && this.f.b("CM65 " + r.o), n += r.g.charAt(r.o)) : n += String.fromCharCode(C), r.o++;
          } else {
            return this.f.b("CM67 "), !0;
          }
        }
      }
      function b() {
        r.fieldID || e.call(this);
      }
      function d() {
        r.fieldID || e.call(this);
      }
      function e() {
        r.fieldID = this.xa(r.X);
        z = this.V.Oa(r.recordID, r.fieldID);
        r.g = z ? z.g : null;
        r.D.forEach(function(a) {
          n = r.g ? n + r.g.charAt(r.o) : n + String.fromCharCode(a.code);
          r.o++;
        });
        c(r);
      }
      var k = null;
      return 2 == I.P.type && (k = f()) ? (r = g(), r.recordID = k, q = !1, k = a.bind(this), k.kc = b.bind(this), k.lc = d.bind(this), k) : null;
    }
    function h() {
      var a = this.xe(this.xa([I]));
      (H = u.call(this, a)) ? (q = !0, p = !1, r = g.call(this), r.mode = I.P.type, r.U = a, r.D.push({code:C, la:!0}), r.I.push(K)) : this.f.warn("CM68 " + a.pc);
      return H;
    }
    function u(a) {
      if (!a) {
        return null;
      }
      if (1 != a.pc) {
        return this.f.b("CM69 "), null;
      }
      a = F.bind(this);
      a.kc = D.bind(this);
      a.lc = k.bind(this);
      return a;
    }
    function D() {
      r.D.length && (r.D.forEach(function(a) {
        n += String.fromCharCode(a.code);
      }), r.D = [], r.L.push({element:e, I:r.I}), r.I = []);
    }
    function k() {
      if (!r.recordID || !r.fieldID) {
        return r.D.push({code:C, la:!1}), !0;
      }
    }
    function F() {
      r.mode = I.P.type;
      if (2 == r.mode) {
        if (this.f.debug("CM70 " + C), q = !0, p = !1, r.va.length < r.U.tc ? (r.va.push(I), r.D.push({code:C, la:!0}), r.I.push(K), r.va.length == r.U.tc && (r.recordID = this.xa(r.va))) : r.X.length < r.U.$b && (r.X.push(I), r.D.push({code:C, la:!0}), r.I.push(K), r.X.length == r.U.$b && (r.fieldID = this.xa(r.X))), r.fieldID && r.recordID) {
          this.V && (z = this.V.Oa(r.recordID, r.fieldID), r.g = z ? z.g : null);
          if (r.D.length) {
            r.o = 0, r.L.forEach(function(a) {
              r.o += a.I.length;
            }), r.D.forEach(function(a) {
              a.la ? (n = r.g ? n + r.g.charAt(r.o) : n + String.fromCharCode(a.code), r.o++) : n += String.fromCharCode(a.code);
            }), r.D = [], r.I = [];
          } else {
            return !0;
          }
          c(r);
          q = !1;
          p = !0;
        }
      } else {
        4 == r.mode ? (p || (c(r), q = !1, p = !0), this.f.debug("CM71 " + C), r.g ? (r.g.length <= r.o && this.f.b("CM72 " + r.o), n += r.g.charAt(r.o)) : n += String.fromCharCode(C), r.o++) : this.f.warn("CM74 ");
      }
    }
    var n = "";
    if (!a) {
      return a;
    }
    try {
      var z, q = !1, p = !1, r = null, H = null;
      d ? (r = d, H = u.call(this, r.U), !r.g && r.fieldID && this.V && (z = this.V.Oa(r.recordID, r.fieldID), r.g = z ? z.g : null)) : r = g();
      for (var K = 0;K < a.length;K++) {
        var C = a.charCodeAt(K), I = this.Pc(C);
        if (!I || I.C) {
          H && H.lc && H.lc() || (n += String.fromCharCode(C));
        } else {
          if (3 == I.P.type) {
            H && H.lc && H.lc();
            var J = C - this.ba;
            this.ga[J] ? (n += String.fromCharCode(this.ga[J].value), this.ga[J].fieldID = this.Fi(el), this.f.info("CM62 " + C + ", ID: " + J + ", fid: " + this.ga[J].fieldID + ", el: " + el + ", value:" + this.ga[J].value), this.ga[J].Ub && this.ga[J].Ub(id)) : (this.f.info("CM61 " + J), n += String.fromCharCode(C));
          } else {
            1 == I.P.type ? (H && H.kc && H.kc.call(this), H = h.call(this)) : ((!H || H()) && (H = m.call(this)) && H(), H || (this.f.warn("CM63 "), n += String.fromCharCode(C)));
          }
        }
      }
      H && H.kc && H.kc();
      q && c(r);
    } catch (w) {
      this.f.b("CM64 ", w);
    }
    return n;
  }, Ke:function(a, c, d) {
    var e = 0;
    a.L.forEach(function(f) {
      var g = c(f.element), m = g;
      f.I.forEach(function(c) {
        m = m.substring(0, c) + a.g.charAt(e + c) + m.substring(c + 1);
      });
      e += f.I.length;
      m != g && d(f.element, m);
    });
    a.L = [];
  }, ga:{}, Al:function(a) {
    if (!a || 33 > a) {
      return a;
    }
    1E3 <= this.Ka && (this.Ka = 0);
    this.Ka++;
    var c = this.Ka;
    this.f.info("CM75 " + c);
    this.ga[c] = {value:a};
    return this.ba + c;
  }, Bl:function(a) {
    return a ? this.jg(a) ? this.ga[a - this.s].value : a : a;
  }, Cl:function(a) {
    this.ga[a] = null;
  }, Da:g(function(a, c) {
    return this.Yb(a, this.lb) + this.Yb(c, this.lb);
  }), El:w, jn:function(a) {
    return {mode:0, recordID:a.recordID || 0, fieldID:a.Uj || a.K || a.fieldID || 0, g:null, o:a.ni || 0, va:[], X:[], D:[], U:{pc:1}, I:[], L:[]};
  }};
  var f = /__(\d+)_(\d+)/;
  t.prototype = {O:function(a, c, d) {
    return this.Tb(null, c, d);
  }, resolve:function(a, c) {
    var d = f.exec(a);
    if (d) {
      return d = {recordID:d[1], fieldID:d[2]}, c(d), d;
    }
  }, mn:function(a, c, d, f, g) {
    try {
      if (null == d || "" == d) {
        this.f.info("maskField is skipping element with no value!");
      } else {
        if (f.usage == e.search) {
          return this.f.debug("The usage of the element in maskfield is search, and the clear value is " + d), d + this.Da(d);
        }
        f.usage == e.Ul && (f.vn = !0, f.xn = this.Tb(e.text, f.recordID, f.fieldID));
        if (f.usage == e.recordreference || f.usage == e.folderReference) {
          if (f.pk) {
            return this.f.info("CM77 " + f.path), f.pk;
          }
          this.f.warn("There is no reference token, is this a new element? " + f.path);
        } else {
          if (f.recordID != c && (f.fieldID = 0, f.recordID = c), a.push({path:f.path, value:d, usage:f.usage, folderParents:f.folderParents, recordID:f.recordID, previousFieldID:f.fieldID, fieldID:f.K, fileLinks:f.fileLinks}), g && g(), c) {
            return this.Tb(f.usage, f.recordID, f.K);
          }
        }
      }
    } catch (m) {
      this.f.b("CM79 " + m.message + ", " + m.lineNumber);
    }
  }, Tb:function(a, c, d) {
    switch(a) {
      case e.file:
      ;
      case e.text:
      ;
      case e.subject:
      ;
      case e.postalcode:
      ;
      case e.phone:
      ;
      case e.number:
      ;
      case e.editfilename:
      ;
      case e.folder:
      ;
      case e.sharingFolder:
        return "__" + c + "_" + d;
      case e.email:
        return "_" + c + "@" + d + ".com";
      case e.date:
        return c.substring(0, 2) + "/" + c.substring(2, 4) + "/" + c.substring(4, 5) + d;
      case e.amount:
        return c + "." + d;
      default:
        return "__" + c + "_" + d;
    }
  }, Da:g(function(a) {
    return a;
  }), wl:w};
  var d = {};
}, {"./log":25}], 8:[function(h, B, a) {
  a.parse = function(a) {
    function h(a) {
      a || (a = "");
      a = a.match(/^(?:([^:\/?\#]+):)?(?:\/\/([^\/?\#]*))?([^?\#]*)(?:\?([^\#]*))?(?:\#(.*))?/);
      this.scheme = a[1] || null;
      this.authority = a[2] || null;
      this.path = a[3] || null;
      this.query = a[4] || null;
      this.ab = a[5] || null;
    }
    h.prototype.toString = function() {
      var a = "";
      this.scheme && (a += this.scheme + ":");
      this.authority && (a += "//" + this.authority);
      this.path && (a += this.path);
      this.query && (a += "?" + this.query);
      this.ab && (a += "#" + this.ab);
      return a;
    };
    (function() {
      function a(m) {
        if (!m) {
          return "";
        }
        m = m.replace(/\/\.\//g, "/");
        for (m = m.replace(/\/\.$/, "/");m.match(g);) {
          m = m.replace(g, "/");
        }
        for (m = m.replace(/\/([^\/]*)\/\.\.$/, "/");m.match(/\/\.\.\//);) {
          m = m.replace(/\/\.\.\//, "/");
        }
        return m;
      }
      var g = /\/((?!\.\.\/)[^\/]*)\/\.\.\//;
      h.prototype.resolve = function(g) {
        var e = new h;
        if (this.scheme) {
          e.scheme = this.scheme, e.authority = this.authority, e.path = a(this.path), e.query = this.query;
        } else {
          if (this.authority) {
            e.authority = this.authority, e.path = a(this.path), e.query = this.query;
          } else {
            if (this.path) {
              if ("/" === this.path.charAt(0)) {
                e.path = a(this.path);
              } else {
                var f;
                f = this.path;
                var d = /^(.*)\//;
                f = g.authority && !g.path ? "/" + f : g.path.match(d)[0] + f;
                e.path = f;
                e.path = a(e.path);
              }
              e.query = this.query;
            } else {
              e.path = g.path, this.query ? e.query = this.query : e.query = g.query;
            }
            e.authority = g.authority;
          }
          e.scheme = g.scheme;
        }
        e.ab = this.ab;
        return e;
      };
    })();
    return new h(a);
  };
}, {}], 9:[function(h, B, a) {
  function p() {
    this.gd = [];
  }
  function t(a, g) {
    g && Object.keys(g).forEach(function(m) {
      a.addEventListener(m, g[m]);
    });
  }
  a.fh = p;
  p.prototype = Object.create(null);
  p.prototype.resume = function() {
    for (var a = this.gd.length;a--;) {
      var g = this.gd.shift();
      this.Id(g);
    }
  };
  p.prototype.Id = function(a) {
    if (this.db) {
      try {
        var g = a.transaction;
        g || (g = a.mode ? this.db.transaction(a.stores, a.mode) : this.db.transaction(a.stores));
      } catch (m) {
        if ("InvalidStateError" == m.name || !this.db) {
          console.debug("db is closed");
          this.gd.push(a);
          return;
        }
        throw m;
      }
      t(g, a.events);
      (a.operations || []).forEach(function(m) {
        var e = m.store || a.stores;
        e || 1 != g.objectStoreNames.length || (e = g.objectStoreNames[0]);
        var e = g.objectStore(e), f = m.index || a.index;
        f && (e = e.index(f));
        try {
          "put" !== m.operation || null !== m.arguments[0] && void 0 !== m.arguments[0] || (m.operation = "delete", m.arguments = [m.arguments[1]]);
          var d = e[m.operation].apply(e, m.arguments);
          t(d, m.events);
        } catch (b) {
          console.error(b), g.abort();
        }
      });
    } else {
      console.debug("no db yet"), this.gd.push(a);
    }
  };
}, {}], 10:[function(h, B, a) {
  function p(a) {
    return a;
  }
  function t(a, b, c, e, k) {
    v = c;
    q.ti = v;
    W = a;
    ea = k;
    this.Cf = [];
    this.af = this.Ba = !1;
    this.Mg = 0;
    this.ye = [];
    this.ah = Function.bind;
    this.J = new l.gh;
    a = x.concat(G, this.J.Wj());
    a = a.concat(O.Sf());
    this.noOverload || (a = a.concat(y));
    d.Rh(this, a);
    U = d.H("EventTarget", "addEventListener", !0);
    fa = d.H("HTMLAnchorElement", "click", !0);
    X = d.H("Element", "setAttribute", !0);
    ga = d.H("Node", "cloneNode", !0);
    aa = d.H("Node", "appendChild", !0);
    this.rj();
    postMessage({type:"init", operation:"ready", key:Y}, location.origin);
  }
  function w(a, b) {
    a.Nb = {style:{}};
    for (var c in b) {
      a.Nb.style[c] = a.style[c], a.style[c] = b[c];
    }
  }
  function g(a, b) {
    if (a.Nb) {
      b = b || [];
      "string" == typeof b && (b = [b]);
      for (var c in a.Nb.style) {
        b.includes(c) && (a.style[c] = a.Nb.style[c]);
      }
      delete a.Nb.style;
    }
  }
  function m(a, b, c) {
    c.forEach(function(c) {
      a.style[c] = getComputedStyle(b)[c];
    });
  }
  var e = h("./env"), f = h("./cloudmask_tokenization"), d = h("./overloadRules"), b = h("./reservation"), c = h("./sharing");
  B = h("./log");
  var l = h("./file_handler"), E = h("./elementPart"), x = h("./overloadMethods").Tj, y = h("./overloadMethods").wh, G = h("./overloadProperties").jk, A = h("./localCache").V, u = h("./cache_manager"), D = h("./localCache").$c, k = h("./localCache").Eg, F = h("./constants").Ga, n = h("./constants").mf, z = h("./utils"), q = B.j("CMDA"), N = h("./clio_sharing"), r = h("./gmail_sharing"), H = h("./gdrive_sharing"), K = h("./languageDictionary"), C = h("./elementNode"), I = h("./app_api"), J = h("./cmUri").parse,
  R = h("./recordRequest"), O = h("./elementEvent"), T = h("./constants").Dc, P = h("./elementRule"), V = h("./actionTracker");
  a.bh = t;
  var Y = "cmda-cm-3231232";
  window.NodeList && !NodeList.prototype.forEach && (NodeList.prototype.forEach = function(a, b) {
    b = b || window;
    for (var c = 0;c < this.length;c++) {
      a.call(b, this[c], c, this);
    }
  });
  var S = {some:Array.prototype.some, from:function() {
    return function(a) {
      var c = [];
      a = a.values();
      for (var b = a.next();!b.done;) {
        c.push(b.value), b = a.next();
      }
      return c;
    };
  }()};
  if ("undefined" === typeof L) {
    var L = {ELEMENT_NODE:1, ATTRIBUTE_NODE:2, TEXT_NODE:3}
  }
  var v, W, M, ba, ea, Z = new Set, U, fa, X, ga, aa;
  t.prototype = {Usage:F.Usage, Rule:F.Rule, init:function(a) {
    try {
      var d = this, da = "unknown", n = "unknown", r = e.ENV.session;
      this.l = a;
      u.init();
      this.h = M = h("./messageBrokerBase").Gj(e.ENV.httpsBaseURL, r, a);
      ba = M.tb();
      var l = h("./application").j();
      l.Oe(a);
      this.Nh = l;
      this.key = r.key;
      this.extensionID = r.extensionID;
      this.noOverload = r.noOverload;
      this.onReadyCallback = r.onReadyCallback;
      this.Ph(a);
      M.Re && M.Re(this);
      M.setApplication({application:a, verify:window.top == window});
      this.Jg = new b.qh(M, window);
      this.ib = new f.jf(M, A);
      this.mask = new f.kh(M);
      this.Zb = [];
      this.Cf = this.l.elementRules || [];
      this.ik();
      this.Gb = h("./sortHandler");
      C.init(this);
      this.handler = h("../components/handler_base");
      this.handler.init(this.l.Nc, this, C.Te, D.get.bind(D), k.get.bind(k), C.ub, C.Ji, C.Fk);
      c.init(this, this.l, M);
      E.init(this);
      R.init(M);
      O.init(this);
      this.J.init(this);
      this.ei = 1;
      this.Th();
      try {
        da = location.href;
      } catch (v) {
        q.b("CM82 ", v);
      }
      try {
        n = document.domain;
      } catch (v) {
        q.b("CM83 ", v);
      }
      a = null;
      try {
        a = frameElement;
      } catch (v) {
        q.warn("CM84 ", v);
      }
      window != window.top && a ? q.info("CM86 " + da + ", domain: " + n) : q.info("CM87 " + da);
      this.enable = !0;
      U.call(window, "error", function(a) {
        q.b("CM93 " + a.message, a.error);
      });
      U.call(window, "load", function(a) {
        try {
          d.Tc(a);
        } catch (Q) {
          q.b("CM95 ", Q);
        }
      }, !1);
      U.call(document, "DOMContentLoaded", function(a) {
        try {
          d.Tc(a, !0);
        } catch (Q) {
          q.b("CM97 ", Q);
        }
      }, !1);
      if ("interactive" == document.readyState || "complete" == document.readyState) {
        q.warn("CM98 "), this.Tc();
      }
      e.Aa() && this.bj(window);
    } catch (v) {
      q.b("CM101 ", v);
    }
  }, Ph:function(a) {
    "string" == typeof a ? this.l = JSON.parse(a) : this.l = a;
    a = this.l.option;
    a.properties = a.properties && JSON.parse(a.properties) || {};
    a.properties.emailInvitees = !0;
    a.properties.disableAutoTrust = !1;
    var b = e.ENV.account.appLevels && e.ENV.account.appLevels[this.l.originalApplicationID] || {};
    this.disabledFeatures = b.disabledFeatures || [];
    this.l.Nc = a.tokenizationAlgorithm || "RANDOM_UNICODE";
    this.l.showLock = !!a.showLock;
    this.l.eg = function(a) {
      if (a) {
        for (var Q = 0;this.downloadUrls && Q < this.downloadUrls.length;Q++) {
          if (-1 !== a.indexOf(this.downloadUrls[Q].url)) {
            return !0;
          }
        }
        return !1;
      }
    };
    M.getApplicationUsage({}, function(a, Q) {
      a ? q.error("CM102 " + a) : this.$f(Q);
    }.bind(this));
    -1 < this.l.domains[0].indexOf("mail.google") && (e.S() || (this.aa = r), a.Dh = !0, a.Ah = !0, a.properties.emailInvitees = !1);
    -1 < this.l.domains[0].indexOf("drive") && (H.init(this), this.aa = H, a.properties.limitFileUsage = !0);
    -1 < this.l.domains[0].indexOf("clio") && (N.init(this), this.aa = N, a.properties.limitFileUsage = !0, a.Gh = !0, a.Nl = !0, a.Ch = !0, "BASIC" == b.name && 0 == location.pathname.indexOf("/client_connect/") && (this.Df = [{name:"Communication Body", enabled:!0, isStandard:!0}, {name:"Communication Subject", enabled:!0, isStandard:!0}]));
    -1 < this.l.domains[0].indexOf("xyzzzzzz") && (a.zh = !0);
    if (ea || a.properties.exposeAPI) {
      a = window.CloudMask, window.CloudMask = I.j(this), a && (window.CloudMask.startSandbox = a.startSandbox);
    }
    this.aa && this.aa.init && this.aa.init(this);
  }, Oc:function() {
    return Promise.resolve(!0);
  }, A:function() {
    return this.disabled || !this.l ? !0 : 0 <= this.disabledFeatures.indexOf("compose") && !this.ji ? (this.Fb(!0), this.disabled) : !1;
  }, gc:function(a, b) {
    if (0 <= this.disabledFeatures.indexOf("files")) {
      return a && this.showNotification("FILES_DISABLED"), !0;
    }
    if (this.l.option.properties.limitFileUsage && this.oe()) {
      if (a) {
        if (b && window.sessionStorage.getItem("cloudmask.isFileLimitNotified")) {
          return !0;
        }
        "boolean" == typeof a ? z.na(window, z.ge(this.usage, "FILE"), null, null, this.usage) : z.na(window, z.ge(this.usage, a), null, null, this.usage);
        window.sessionStorage.setItem("cloudmask.isFileLimitNotified", !0);
      }
      return !0;
    }
    return !1;
  }, Fb:function(a, b) {
    this.disabled = a;
    this.ji = b;
  }, Qm:function() {
    return !0;
  }, bj:function(a) {
    U.call(a, "load", function() {
      var b = a.document, c = b.createElement("div");
      c.style.borderRadius = "6px 6px 0px 0px";
      c.style.position = "fixed";
      c.style.bottom = "0px";
      c.style.right = "5%";
      c.style.color = "#FFF";
      c.style.fontFamily = '"Open Sans",sans-serif';
      c.style.fontWeight = "500";
      c.style.textAlign = "center";
      c.style.padding = "12px";
      c.style.background = "#176DB8 none repeat scroll 0% 0%";
      c.style.border = "0px none";
      c.style.zIndex = "16000003";
      c.innerHTML = '<div class="cloudmask-icon"><span class="cloudmask-icon-lock"></span></div>CloudMask';
      var d = b.createElement("span");
      d.innerHTML = "&times;";
      d.style.marginLeft = "5px";
      U.call(d, "click", function() {
        a.document.body.removeChild(c);
      });
      c.appendChild(d);
      b.body.appendChild(c);
    });
  }, getTime:function() {
    return window.performance ? window.performance.now() : 0;
  }, He:function(a, c) {
    var b = this.a(a);
    delete b.fieldID;
    delete b.K;
    delete b.recordID;
    delete b.folderParents;
    delete b.Na;
    delete b.token;
    delete b.T;
    c && (b.recordID = c.recordID, b.fieldID = c.fieldID, b.folderParents = c.folderParents, b.Na = c.Na, b.T = c.T, b.part = c.part);
  }, Jk:function() {
    return "ACTIVE" != e.ENV.status ? Promise.resolve() : e.ENV.isGmailHelpShown || A.getItem("cloudmask.isGmailHelpShown") || "mail.google.com" != this.l.domains[0] ? e.ENV.isGDriveHelpShown || A.getItem("cloudmask.isGDriveHelpShown") || "drive.google.com" != this.l.domains[0] ? Promise.resolve() : (A.setItem("cloudmask.isGDriveHelpShown", !0), z.Lk()) : (A.setItem("cloudmask.isGmailHelpShown", !0), z.Mk());
  }, showNotification:function(a, b) {
    a && z.showNotification(window, e.ENV.notifications[a].message, e.ENV.notifications[a].type, null, b);
  }, Th:function() {
    window.__CLOUDMASK_KEY = v;
  }, ik:function() {
    this.Ce = [];
    this.Dg = [];
    this.Eb = {};
    this.Ne = {};
    this.Cf.forEach(p(function(a) {
      if (!(!a.conditions || a.deprecatedVersion && !this.gg(a.deprecatedVersion) || a.requiredVersion && this.gg(a.requiredVersion))) {
        if (a.properties = a.properties || {}, "string" == typeof a.properties && (a.properties = JSON.parse(a.properties)), "meta" == a.category) {
          "recordType" != a.operation ? q.b("CM103 " + a.name) : this.Dg.push(a);
        } else {
          if ("network" == a.category) {
            "query" != a.operation ? q.b("CM104 " + a.name) : this.Ce.push(a);
          } else {
            var b = -1;
            if (a.filter) {
              for (var c = 0;c < this.Zb.length;c++) {
                if (this.Zb[c].filter == a.filter) {
                  b = c;
                  break;
                }
              }
            }
            a.filter && -1 == b ? this.Zb.push({filter:a.filter, se:[a]}) : -1 < b && this.Zb[b].se.push(a);
            var d = "*", e = "*";
            a.conditions.forEach(function(a) {
              "className" == a.type ? d = a.value : "tagName" == a.type ? e = a.value : 0 <= ["textContent", "label", "selector", "xPath"].indexOf(a.type) && (a.value = K.Wc(a.value));
            });
            b = e + "-" + d;
            this.Eb[b] || (this.Eb[b] = []);
            this.Eb[b].push(a);
            this.Ne[a.category] || (this.Ne[a.category] = []);
            this.Ne[a.category].push(a);
          }
        }
      }
    }).bind(this));
  }, insertCSS:function() {
    try {
      if (!e.ra()) {
        var a = document, b = a.createElement("STYLE");
        b.type = "text/css";
        C.vc(b, z.Wf("css/cloudmask.font.css"));
        a.documentElement.appendChild(b);
      }
    } catch (c) {
      q.b("CM105 ", c);
    }
  }, wj:function(a, b, c, d, e) {
    try {
      var k = this, f = !1;
      if ("title" == b) {
        f = a.title && 0 <= a.title.toLowerCase().indexOf(c.toLowerCase());
      } else {
        if ("maxLength" == b) {
          f = a.maxLength && c >= a.maxLength;
        } else {
          if ("layoutPath" == b) {
            var n = this.Nh.getApplicationPreferences(this.l.originalApplicationID);
            !n.fields.length && this.Df && (n.fields = this.Df);
            return n.fields && n.fields.some(function(b) {
              if (!b.enabled) {
                return !1;
              }
              var d = b.match && b.match[c] && b.match[c].some(function(d, e) {
                var ca;
                if (b.isRegex) {
                  if (ca = window.RegExp(d).test(a[c])) {
                    k.a(a).fieldName = b.parent + ":" + (b.path ? b.path : b.match.id[e]);
                  }
                  return ca;
                }
                if (ca = d == a[c]) {
                  k.a(a).fieldName = b.parent + ":" + (b.path ? b.path : b.match.id[e]);
                }
                return ca;
              });
              d && b.recordType && (d = k.xj(a, e, b.recordType));
              return d;
            });
          }
          if ("label" == b) {
            var r = this.$d(a, e), f = r && 0 <= r.toLowerCase().indexOf(c.toLowerCase())
          } else {
            if ("xpath" == b) {
              f = d;
            } else {
              if ("selector" == b) {
                f = a.matches(c);
              } else {
                var v;
                (v = "textContent" == b ? C.ea(a) : a[b]) && "string" == typeof v || (v = a.getAttribute && a.getAttribute(b));
                v && (f = "/" == c[0] && "/" == c[c.length - 1] ? RegExp(c.substring(1, c.length - 1).toLowerCase()).test(v.toLowerCase()) : v.toLowerCase() == c.toLowerCase());
              }
            }
          }
        }
      }
      return f;
    } catch (l) {
      q.b("CM106 ", l);
    }
  }, xj:function(a, b, c) {
    Array.isArray(c) || (c = [c]);
    a = this.u(a, b);
    if (!a) {
      return !1;
    }
    var d = this.Sc(a);
    return d && c.some(function(a) {
      return d == a;
    });
  }, zj:function(a) {
    var b = this, c = window;
    try {
      a.forEach(function(a) {
        a.conditions && a.conditions.forEach(function(Q) {
          if ("xpath" == Q.type.toLowerCase()) {
            Q = c.document.evaluate(Q.value, c.document, null, 5, null);
            for (var d = null;d = Q.iterateNext();) {
              var e = b.pb(d);
              e.ma || (e.ma = []);
              var k = !1;
              e.ma.some(function(b) {
                b.c == a && (k = !0);
              });
              k || (e.ma.push({c:a, Pm:!1}), A.setItem(d.CMKey, e));
            }
          }
        });
      });
    } catch (d) {
      q.b("CM108 ", d);
    }
  }, ub:function(a) {
    if (!a) {
      return null;
    }
    a = this.pb(a);
    return a.recordID ? a.recordID : null;
  }, $d:function(a, b) {
    if (b && b.label) {
      return b.label;
    }
    if (C.hc(a)) {
      if (null == a.id) {
        return null;
      }
      for (var c = document.getElementsByTagName("LABEL"), d = 0;d < c.length;d++) {
        if (c[d].htmlFor == a.id) {
          return b = this.pb(a), b.label = C.ea(c[d]), b.label;
        }
      }
    }
    return null;
  }, pg:function(a, b) {
    var c = [];
    b.ma && b.ma.forEach(function(a) {
      c.push(a.c);
    });
    var d = a.nodeType == L.ELEMENT_NODE ? a : a.parentNode;
    if (d) {
      var e = d.tagName, k = d.className ? d.className : "*";
      k.trim && (k = k.trim());
      k = this.Eb[e + "-" + k] || ("*" == k ? null : this.Eb["*-" + k]);
      (e = this.Eb[e + "-*"]) && (k = k ? k.concat(e) : e);
      c && (k = k ? c.concat(k) : c);
      var f = this, q = !1, n = null, r = b.c, v = b.B, l = b.Ma || [];
      delete b.c;
      delete b.B;
      delete b.Ma;
      k && k.some(function(a) {
        var Q = !1, e = c && -1 < c.indexOf(a) ? !0 : !1;
        a.conditions && a.conditions.some(function(a) {
          "url" == a.type ? Q = RegExp(a.value).test(window.location.href) : Q = "tagName" == a.type || "className" == a.type || f.wj(d, a.type, a.value, e, b);
          if (!Q) {
            return !0;
          }
        });
        if (Q) {
          if ("Event" == a.category) {
            b.Ma = b.Ma || [], l.some(function(b) {
              return b.id == a.id;
            }) || (n = n || {}, n.event = !0, b.Ma.push(a)), a.properties && a.properties.nestedWindow && (b.Wm = !0);
          } else {
            if ("Part" == a.category) {
              if (v != a && (n = n || {}, n.part = !0), b.B = a, "Manage Version Part" == a.name || a.properties && a.properties.inheritFileID) {
                b.bg = !0;
              }
            } else {
              q || "Data Field" != a.category || (q = !0, r != a && (n = n || {}, n.data = !0), b.c = a);
            }
          }
        }
      });
      return n;
    }
  }, gg:function(a) {
    return e.ENV.version < a;
  }, ha:function(a, b) {
    if (null == b) {
      return !1;
    }
    for (var c = 0;c < b.length;c++) {
      var d = b[c], e = !1, k;
      for (k in d) {
        if (d.hasOwnProperty(k) && (k in a ? e = "maxLength" == k ? null != a.maxLength && 0 < a.maxLength && a.maxLength < d[k] : "title" == k ? null != a.title && 0 <= a.title.toLowerCase().indexOf(d[k].toLowerCase()) : a[k] == d[k] : "label" == k && (e = this.$d(a), e = null != e && 0 <= e.toLowerCase().indexOf(d[k].toLowerCase())), !e)) {
          break;
        }
      }
      if (e) {
        return !0;
      }
    }
    return !1;
  }, Pa:function(a) {
    if (a instanceof HTMLScriptElement || a instanceof HTMLStyleElement || a instanceof Comment) {
      return !1;
    }
    this.qa(a);
    var b = this.a(a);
    return b.c ? "ByPass" != b.c.algorithm : !this.ha(a, this.Rule.ByPass, b);
  }, Qg:function(a) {
    if (!(a instanceof HTMLScriptElement || a instanceof HTMLStyleElement || a instanceof Comment || this.A()) && this.Ba && E.je(a) && !Z.has(a) && (Z.add(a), 1 == Z.size)) {
      var b = this;
      z.sc(function() {
        Z.forEach(function(a) {
          b.qa(a, !0);
        });
        Z = new Set;
      });
    }
  }, bm:function(a) {
    for (var b = 0;b < a.length;b++) {
      this.qa(a[b]);
    }
  }, qa:function(a, b) {
    function c() {
      var b = d.pg(a, e);
      if (e.c) {
        if (!b || !b.data) {
          return b;
        }
        e.usage = e.c.format;
        e.isShowLock = e.c.isShowLock;
        e.isKeyField = e.c.isKeyField;
        e.ie = e.c.isAppReference;
        e.c.properties.path && (e.path = e.c.properties.path);
        return b;
      }
      d.ha(a, d.Rule.yl) && (e.usage = d.Usage.phone);
      d.ha(a, d.Rule.pl) && (e.usage = d.Usage.email);
      d.ha(a, d.Rule.zl) && (e.usage = d.Usage.postalcode);
      d.ha(a, d.Rule.Ml) && (e.usage = d.Usage.dl);
      d.ha(a, d.Rule.Date) && (e.usage = d.Usage.date);
      d.ha(a, d.Rule.Gl) && (e.usage = d.Usage.recordreference);
      d.ha(a, d.Rule.File) && (e.usage = d.Usage.file);
      d.ha(a, d.Rule.Kl) && (e.usage = d.Usage.search);
      d.ha(a, d.Rule.Subject) && (e.usage = d.Usage.subject);
      d.ha(a, d.Rule.ol) && (e.usage = d.Usage.editfilename);
      e.usage = d.Usage.text;
      return b;
    }
    var d = this;
    a = a.nodeType != L.ELEMENT_NODE && a.parentNode ? a.parentNode : a;
    var e = this.a(a), k;
    if (b || !e.usage || e.ma && e.usage == d.Usage.text) {
      k = c();
    }
    if (!k) {
      return e.usage;
    }
    k = k || {};
    k.event && O.Qh(a, e);
    if (k.part) {
      if (e.part || e.recordID) {
        q.warn("CM112 " + e.B.name), delete e.fieldID, delete e.K, delete e.recordID, delete e.folderParents, delete e.Na, delete e.token, delete e.part;
      }
      e.B && (e.part = a, e.B.properties = e.B.properties || {}, e.B.properties.recordType && (e.recordType = e.B.properties.recordType), this.Ih(a, e), e.De = e.B.action, e.B.properties.isComposeEnabled && this.Fb(!1, !0), e.B.properties.controlType && (this.A() || this.Jh(a, e)), E.Ij(e));
    }
    if (k.data) {
      e.c && e.c.properties && e.c.properties.registerSharingPoller && this.Wh(a);
      e.c && e.c.isKeyField && this.Vi(a, e);
      if (e.usage == F.Usage.recipient) {
        var f = this.vg.bind(this, !1), n = this.vg.bind(this, !0);
        E.Pj(a, e.c.properties.recordType, function() {
          d.Lj(a, e, d.u(a), f, n);
        });
      }
      if (!this.A() && this.l.option.Gh && C.hc(a) && e.c && "ByPass" != e.c.algorithm && !P.isReference(e.usage) && !P.Qa(e.usage)) {
        k = null;
        var r = a.labels && a.labels[0];
        r && (k = r.firstChild && r.firstChild.nodeValue ? r : r.querySelector("div.label-text"));
        k || (k = (k = a.closest("fieldset")) && k.querySelector("legend"));
        k && (k.dataset.cmShowLock = !0);
      }
    }
    return e.usage;
  }, Wh:function(a) {
    var b = this, c = this.a(a);
    c.le || this.A() || ((new window.MutationObserver(function(a) {
      a.forEach(function(a) {
        !a.addedNodes.length && a.removedNodes.length && b.aa && b.aa.Md && !b.A() && b.aa.Md().catch(function(a) {
          q.error("CM113 ", a);
        });
      });
    })).observe(a, {childList:!0}), c.le = !0);
  }, Om:function(a) {
    return 0 == W.indexOf(a);
  }, rj:function() {
    var a = this;
    U.call(window, "message", function(b) {
      if (!(M && M.onMessage && M.onMessage(b) || a.onMessage(b))) {
        var c = this, d = O.Xd(this, "message");
        (d = d && d[c.CMKey]) && d.forEach(function(a) {
          try {
            a.call(c, b);
          } catch (d) {
            q.error("CM114 ", d);
          }
        });
      }
    });
  }, Qd:function(a, b, c) {
    var d = a.defaultView;
    d.__CLOUDMASK_X = 1;
    b = b.call(a);
    a.am != d && (q.warn("CM115 "), a.defaultView.__CLOUDMASK_X ? (q.warn("CM116 "), c && this.Tc(null, !0)) : q.warn("CM117 "));
    return b;
  }, Fn:function() {
  }, dj:function(a) {
    a = this.a(a);
    return !a.recordID || a.recordID == F.G;
  }, createRecord:function() {
    return Number(this.Jg.oh());
  }, Vc:function(a) {
    return !!a.CMKey;
  }, a:function(a) {
    return this.pb(a);
  }, pb:function(a) {
    function b(a) {
      a = A.getItem(a);
      a || (console.log("Key not found in storage <<<"), a = {});
      return a;
    }
    if (!a) {
      return console.log("checkCloudMaskProperty called on a NULL elements <<<"), {};
    }
    var c = null;
    a.CMKey ? c = b.call(this, a.CMKey) : (a.CMKey = v + "-" + this.ei++, c = {CMKey:a.CMKey}, A.setItem(a.CMKey, c));
    (function() {
      if (a.nodeType == L.TEXT_NODE && a.parentNode) {
        var b = this.a(a.parentNode);
        c.usage = b.usage;
        c.c = b.c;
        c.c && (c.usage = c.c.format, c.isShowLock = c.c.isShowLock, c.isKeyField = c.c.isKeyField, c.ie = c.c.isAppReference);
      }
    }).call(this);
    return c;
  }, Bf:function(a) {
    var b = {};
    a = this.a(a);
    b.recordID = a.recordID;
    b.fieldID = a.fieldID;
    b.folderParents = a.folderParents;
    b.email = a.email;
    b.references = a.references;
    b.properties = a.B ? a.B.properties : null;
    b.mj = a.mj;
    return b;
  }, showLock:function(a, b, c) {
    a.className = a.className.replace("cloudmask-icon-lock", "");
    a.className = a.className.replace("cloudmask-icon-unlock", "");
    g(a, "fontFamily");
    b ? c && (a.className = a.className + " cloudmask-icon-unlock", b = getComputedStyle(a).fontFamily, w(a, {fontFamily:"CloudMask, " + b})) : (a.className = a.className + " cloudmask-icon-lock", b = getComputedStyle(a).fontFamily, w(a, {fontFamily:"CloudMask, " + b}));
  }, Ef:function(a) {
    a = this.u(a);
    this.a(a);
  }, Qj:function(a, b) {
    var c = this.Li(a);
    if (c) {
      var d = this.a(c);
      d.Ya = d.Ya || {};
      "WRAPPING_REQUIRED" == b && !d.Ef || d.Ya.cf || (d.Ya.cf = z.Kj(c).then(function() {
        delete d.Ya.cf;
      }).catch(function() {
        delete d.Ya.cf;
      }));
    } else {
      console.error("Received a save blocked event for a recordID without part", a);
    }
  }, onMessage:function(a) {
    if (!a || !a.data || a.data.key != Y) {
      return !1;
    }
    try {
      var b = a.data;
      if ("init" == b.type) {
        return "params" == b.operation && this.Nj(b), !0;
      }
      if ("SaveAlert" == b.type) {
        return this.Qj(b.recordID, b.reason), !0;
      }
    } catch (c) {
      console.error("Failed to handle CMDA posted message", c);
    }
  }, oe:function() {
    return this.af;
  }, $f:function(a) {
    z.Ik(a);
    this.usage = a;
    a = z.pj(a);
    var b = a != this.af;
    this.af = a;
    b && this.Jj(T.pf);
  }, Ih:function(a, b) {
    function c() {
      "undefined" != typeof b.B.properties.showUsage && (O.Xb(T.Ia, a, function(c, d) {
        if (!d.isClear) {
          this.oe() && (b.B.properties.showUsage && z.na(window, z.ge(this.usage), null, null, this.usage), this.Xa(a, !0));
          var e = this;
          this.Oc().catch(function() {
            e.Jc || (e.Jc = z.na(window, "AUTHORIZATION_REQUIRED"));
            e.Jc.then(function(b) {
              delete e.Jc;
              if ("AUTHORIZE" == b) {
                return e.Oc();
              }
              e.Xa(a, !0);
            }).catch(function() {
              delete e.Jc;
              e.Xa(a, !0);
            });
          });
        }
      }.bind(this)), O.Xb(T.pf, a, function() {
        b.isClear || this.Xa(a, !0);
      }.bind(this)));
    }
    function d(a) {
      var b = this;
      S.from(a).forEach(function(a) {
        a.ownerDocument && a.ownerDocument.contains(a) || e.call(b, a);
      });
    }
    function e(a) {
      f.delete(a);
      var b = this.a(a).Cb;
      void 0 !== b && n[b].members.delete(a);
    }
    var k = a.ownerDocument;
    if (k) {
      k.pa || (k.pa = []);
      -1 == k.pa.indexOf(a) && k.pa.push(a);
      k.Fc = k.Fc || new Set;
      k.Fd = k.Fd || [];
      var f = k.Fc, n = k.Fd;
      if (!f.has(a) && (f.add(a), c.call(this), "undefined" == typeof b.Cb)) {
        d.call(this, f);
        var k = !1, r = b.B.properties.restrictGroup;
        "boolean" == typeof r && (k = r);
        if (k || !S.from(f).some(p(function(c) {
          var d = a.compareDocumentPosition(c);
          if (!(d & window.Node.DOCUMENT_POSITION_CONTAINS || d & window.Node.DOCUMENT_POSITION_CONTAINED_BY)) {
            return !1;
          }
          c = this.a(c).Cb;
          d = n[c];
          if (d.Ng) {
            return !1;
          }
          b.Cb = c;
          d.members.add(a);
          a.contains(d.root) && (this.sk(d.root), d.root = a);
          return !0;
        }).bind(this))) {
          b.Cb = n.length, n.push({root:a, members:new Set([a]), Ng:r});
        }
      }
    } else {
      q.b("CM120 ");
    }
  }, Uf:function(a, b) {
    if ("undefined" == typeof b.Cb) {
      return {root:a, members:new Set([a]), Ng:!0};
    }
    var c = a.ownerDocument;
    if (c) {
      return c.Fd[b.Cb];
    }
    q.b("CM122 ");
  }, bc:function(a, b) {
    return this.Uf(a, b).members;
  }, Mi:function(a, b) {
    return this.Uf(a, b).root;
  }, dc:function(a, b, c) {
    a = this.bc(a, b);
    var d;
    S.from(a).some(p(function(a) {
      var b = this.a(a);
      if (b.recordType === c) {
        return d = {part:a, ua:b}, !0;
      }
    }).bind(this));
    return d;
  }, Bm:function(a, b, c) {
    a = this.bc(a, b);
    var d;
    S.from(a).some(p(function(a) {
      var b = this.a(a), e = b[c];
      if (e && (!Array.isArray(e) || e.length)) {
        return d = {part:a, ua:b}, !0;
      }
    }).bind(this));
    return d;
  }, Li:function(a) {
    var b = this, c;
    S.from(document.Fc).some(function(d) {
      if (b.a(d).recordID == a) {
        return c = d, !0;
      }
    });
    return c;
  }, Ff:function() {
    q.info("CM123 ");
    return this.Od = "disabled";
  }, Rd:function() {
    q.info("CM124 ");
    this.Od = "enabled";
  }, ig:function(a) {
    if (this.A()) {
      return !0;
    }
    a = this.u(a);
    return this.M(a).isClear;
  }, uj:function(a, b) {
    b.isClear || (this.Ff(), this.M(a, b));
  }, Xa:function(a, b, c, d) {
    this.ld(a, b, c);
    b = null;
    d && (b = this.a(a), b.sharingInfo = d);
  }, Se:function(a, b, c, d) {
    a = this.u(a);
    if (!a) {
      q.warn("CM125 ");
      return;
      throw Error("ElementPartMode failed to find part");
    }
    this.Xa(a, b, c, d);
  }, M:function(a, b, d, e, k) {
    function f(a) {
      var b = k || this.Od;
      a.Uc = !!b;
      a.Xc = "disabled" == b;
      this.Od = null;
    }
    function q(a) {
      return "undefined" === typeof a;
    }
    function r(a) {
      if (this.Pa(a)) {
        var b = this.a(a);
        if (b.recordID && b.recordID != F.G) {
          return z = !1, W = b, !0;
        }
        v.call(this, a, b) && (z = !0);
      }
    }
    function v(a, b, c) {
      b = b || this.a(a);
      if (a.nodeType == L.TEXT_NODE) {
        return b.isClear || c && (!a.nodeValue || 0 == a.nodeValue.trim().length);
      }
      if (C.hc(a)) {
        return b.isClear;
      }
      var d = !1;
      a = a.children && S.some.call(a.childNodes, p(function(a) {
        if (a.nodeType == L.TEXT_NODE || a.nodeType == L.ELEMENT_NODE) {
          if (d = !0, !v.call(this, a, this.a(a), !0)) {
            return !0;
          }
        }
      }).bind(this));
      return !(a || !c && !d);
    }
    function l(a) {
      a = this.qa(a);
      return a == this.Usage.text || a == this.Usage.phone || a == this.Usage.email || a == this.Usage.postalcode || a == this.Usage.dl || a == this.Usage.date || a == this.Usage.folder;
    }
    function I() {
      var b = this.bc(a, g);
      S.from(b).some(p(function(b) {
        if (b != a && (b = this.a(b), !q(b.Zc))) {
          return z = b.Zc, !z;
        }
      }).bind(this));
    }
    function u() {
      var b = this.bc(a, g);
      S.from(b).some(p(function(b) {
        b != a && this.M(b, null, d);
      }).bind(this));
    }
    var g = b || this.a(a), x = (g.B || {}).properties || {};
    g.Sb = g.Sb || new Set;
    var z, W = null, m = !1;
    b = !1;
    g.Uc && !k || f.call(this, g);
    this.qa(a);
    this.A() && (z = !0);
    if (g.Uc) {
      z = g.Xc;
    } else {
      var h;
      if (g.De) {
        for (h = a.ownerDocument.evaluate(g.De, a, null, window.XPathResult.ORDERED_NODE_ITERATOR_TYPE, null);(m = h.iterateNext()) && !r.call(this, m);) {
        }
      }
      (z || q(z)) && g.Ab && g.Ab.some(p(function(a) {
        return r.call(this, a);
      }).bind(this));
      if ((z || q(z)) && !g.De && !g.Ab && ("BODY" != a.tagName || g.B)) {
        h = a.querySelectorAll("input, textarea");
        for (var D = 0;D < h.length && !(m = h[D], C.fc(m) && l.call(this, m) && this.Pa(m) && r.call(this, m));++D) {
        }
      }
    }
    m = q(z) != q(g.Zc) || g.Zc != z;
    ((g.Zc = z) || q(z)) && !g.Uc && I.call(this);
    q(z) && (b = !0, g.wa && g.wa.c && g.wa.c.path ? z = g.wa.c.sharingType == n.wd : z = "undefined" != typeof x.defaultClear ? x.defaultClear : !0);
    h = g.isClear;
    x = g.recordID;
    (g.isClear = z) ? g.recordID = F.G : (g.recordID == F.G && delete g.recordID, W && (g.recordID = W.recordID), d && !g.recordID && (g.recordID = d(), g.recordID && g.sharingInfo && c.qo(g.recordID, g.sharingInfo)));
    b = {isClear:z, isDefault:b, recordID:g.recordID, previousRecordID:x, qj:W, ed:g};
    g.bn = b;
    ((h = q(h) || h != z) || e) && O.Pd(T.Ia, a, b);
    m && h && u.call(this);
    if (x && x != g.recordID) {
      var H = this;
      S.from(g.Sb).forEach(function(a) {
        H.a(a).recordID = g.recordID;
      });
    }
    return b;
  }, ld:function(a, b, c) {
    function d(a) {
      var e = this.a(a);
      e.Sb && e.Sb.forEach(p(function(a) {
        var b = this.a(a);
        delete a.CMKey;
        if (b.ma) {
          var c = b.ma, b = this.a(a);
          b.ma = c;
        }
      }).bind(this));
      if (c) {
        delete a.CMKey, this.a(a).ma = e.ma;
      } else {
        return delete e.Uc, delete e.Xc, delete e.sharingInfo, a = this.M(a, e, function() {
          return e.Kg;
        }, void 0, b ? "disabled" : "enabled"), a.isClear ? e.Kg = a.previousRecordID : delete e.Kg, a;
      }
    }
    a = this.bc(a, this.a(a));
    S.from(a).some(p(function(a) {
      d.call(this, a);
    }).bind(this));
  }, uk:function(a, b) {
    var c = this.u(a);
    this.ld(c, null, b);
  }, Nn:function(a) {
    this.a(a);
  }, Jj:function(a) {
    var b = document.Fc;
    b && S.from(b).forEach(function(b) {
      O.Pd(a, b);
    }.bind(this));
  }, Xk:function(a, b, c, d) {
    c != a && (d.recordID = b.recordID, b.Sb.add(c));
  }, od:function(a, b) {
    if (a) {
      if (b = b || this.a(a), ("BODY" != a.tagName || b.B) && !b.tg) {
        var c = this;
        z.sc(function() {
          c.M(a, b, null, !0);
          b.tg = !1;
        });
        b.tg = !0;
      }
    } else {
      q.b("CM126 ");
    }
  }, sb:function(a, b) {
    var c = b || this.a(a);
    if (!c.recordID) {
      c.part = c.part || this.u(a);
      if (!c.part) {
        q.b("CM127 " + a);
        c.recordID = F.G;
        return c.recordID;
        throw Error("Failed to find part for " + a);
      }
      var d = this.a(c.part);
      this.M(c.part, d, this.createRecord.bind(this));
      this.Xk(c.part, d, a, c);
    }
    return c.recordID;
  }, Lj:function(a, b, c, d, e) {
    if (!b.le) {
      var k, f;
      d && (k = new MutationObserver(function(c) {
        c.forEach(function(c) {
          "attributes" != c.type && "characterData" != c.type || d(a, b);
        });
      }), k.observe(a, {attributes:!0, attributeFilter:["value"], characterData:!0}));
      f = new MutationObserver(function(c) {
        c.forEach(function(c) {
          for (var d = 0;d < c.removedNodes.length;++d) {
            var q = c.removedNodes[d];
            if (q == a || q.contains(a)) {
              f.disconnect(), k && k.disconnect(), e && e(a, b);
            }
          }
        });
      });
      c = c || a.parentNode;
      f.observe(c, {childList:!0, subtree:!0});
      b.le = !0;
      d(a, b);
    }
  }, vg:function(a, b, c) {
    var d = this.u(b, c);
    if (d) {
      var e = this.a(d), k = this.M(d, e);
      !k.isClear && k.recordID || console.error("Recipient was for cleaer", b, k);
      E.Hk(d, e, c, !a && C.da(b));
    }
  }, Dk:function(a, b, c) {
    a = this.a(a);
    a.childrenRecords = a.childrenRecords || [];
    a.childrenRecords.push({redirectRecordID:b.recordID, redirectFieldID:b.fieldID, name:c});
    A.yc(a.recordID, a);
  }, Jm:function(a, b) {
    var c = this.a(a), c = this.dc(a, c, b);
    if (!c) {
      throw Error("Failed to find related part during hasChildRecord");
    }
    c = c.ua;
    return c.childrenRecords && c.childrenRecords.length;
  }, bi:function(a) {
    var b = this.a(a);
    b.elements && b.elements.forEach(p(function(a) {
      var c = this.a(a);
      c.c && (!(0 > c.c.name.indexOf("Email Body")) || c.c.properties && c.c.properties.saveContent) && (c.path = "body", c.fileLinks = [], c.fileLinks.push({name:"content-format"}), a = this.ta(a, C.da(a), !0, null, null, {fb:!0}), M.queueFileLink({recordID:c.recordID, fieldID:c.K, name:"content-format", data:a, isEncrypted:!0}), b.childrenRecords && b.childrenRecords.forEach(function(a) {
        c.fileLinks.push(a);
      }), A.xc(c.recordID, c.K, c));
    }).bind(this));
  }, setCurrentFilePart:function(a) {
    a ? this.currentFilePart = this.u(a) : this.currentFilePart = null;
    A.setItem("cloudmask.currentFilePart", this.currentFilePart);
  }, ko:function() {
    q.error("CM128 ");
  }, Hi:function(a) {
    console.log("checking input file part");
    var b = V.ui();
    console.log("activeelement is " + b);
    debugger;
    b && "BODY" != b.tagName && (a = b);
    b = this.a(a);
    return b.part ? b.part : this.u(a, b, !0);
  }, Di:function(a) {
    a = a.getBoundingClientRect();
    var b = a.left, c = a.top, d = window.scrollY ? window.scrollY : window.pageYOffset, b = b + (window.scrollX ? window.scrollX : window.pageXOffset), c = c + d;
    return {top:c, left:b, bottom:c + a.height, right:b + a.width};
  }, zm:function(a, b) {
    var c = a.getBoundingClientRect(), d = c.left, c = c.top, e = window.scrollY ? window.scrollY : window.pageYOffset, d = d + (window.scrollX ? window.scrollX : window.pageXOffset);
    return this.Tf(d, c + e, b);
  }, Tf:function(a, b, c) {
    var d = document;
    c = c ? null : d.body;
    for (var e = d.pa ? d.pa.length - 1 : -1;0 <= e;e--) {
      var k = d.pa[e];
      if (!C.xb(k) && k.nodeType != L.TEXT_NODE) {
        if ("BODY" == k.tagName) {
          c = k;
        } else {
          var f = k.getBoundingClientRect(), n = f.left, r = f.right, v = f.top, f = f.bottom, l = window.scrollX ? window.scrollX : window.pageXOffset, g = window.scrollY ? window.scrollY : window.pageYOffset, n = n + l, r = r + l, v = v + g, f = f + g;
          if (n < a && r > a && v < b && f > b) {
            return k;
          }
        }
      }
    }
    c ? q.warn("CM130 " + a + "," + b) : q.warn("CM131 " + a + "," + b);
    return c;
  }, u:function(a, b, c) {
    try {
      b = b || this.a(a);
      if (b.part && a != b.part) {
        return b.part;
      }
      b = this.Eh(a, b, c);
      return b.part;
    } catch (d) {
      q.b("CM132 ", d);
    }
  }, Eh:function(a, b, c) {
    if (!a) {
      return q.warn("CM133 "), b.part = null, b;
    }
    if (!a.ownerDocument) {
      return q.warn("CM134 " + a + ", key: " + a.CMKey + ", tagName: " + a.tagName + ", elem className: " + a.className), b.part = null, b;
    }
    if (a.ownerDocument instanceof window.DocumentFragment || a.ownerDocument instanceof window.XMLDocument) {
      return b.part = null, b;
    }
    if (a.ownerDocument && a.ownerDocument.body && !a.ownerDocument.body.contains(a.nodeType == L.TEXT_NODE ? a.parentNode : a)) {
      return c ? b.B ? (q.warn("CM137 " + a + ", tagName: " + a.tagName + ", elem className: " + a.className), b.part = a) : (q.warn("CM138 " + a + ", tagName: " + a.tagName + ", elem className: " + a.className), b.part = a.ownerDocument.body) : b.part = null, b;
    }
    if (b.B) {
      return b.part = a, b;
    }
    if (a.ownerDocument.pa && a.ownerDocument.pa.length) {
      for (c = a.ownerDocument.pa.length - 1;0 <= c;c--) {
        var d = a.ownerDocument.pa[c];
        if (a.nodeType == L.TEXT_NODE ? d.contains(a.parentNode) : d.contains(a)) {
          return b.part = d, b;
        }
      }
    }
    if ("FORM" == a.tagName) {
      return b.part = a, b;
    }
    d = a.ownerDocument.forms;
    for (c = 0;c < d.length;c++) {
      var e = d[c];
      if (e.contains(a)) {
        return b.part = e, b;
      }
    }
    if ((c = a.ownerDocument.body) && ("on" == c.ownerDocument.designMode || c.isContentEditable)) {
      q.warn("CM142 " + c.ownerDocument.designMode);
      q.warn("CM143 " + c.isContentEditable);
      if (window.parent != window) {
        c = window.frameElement;
        if (c == a) {
          throw Error("Detected infinite recursive getElementPart for editable body");
        }
        if (c) {
          return this.u(c.parentNode, b);
        }
        q.warn("CM144 ");
        return null;
      }
      q.warn("CM145 ");
    }
    b.part = c;
    return b;
  }, Jh:function(a, b) {
    function c(a, b) {
      if (!b.Vd) {
        var e = n && C.query(n, a)[0] || a, k = b.Vd = a.ownerDocument.createElement("span");
        k.id = "cloudmask-lock-span";
        k.style.cssText = "font-family: CloudMask, arial, sans-serif; " + k.style.cssText;
        k.className = "cloudmask-icon-lock cloudmask-" + this.l.name.toLowerCase() + "-fab";
        k.title = "CloudMask is enabled";
        var f = this.a(k), q = this;
        U.call(k, "click", function() {
          q.ld(a, f.If);
        });
        aa.call(e, k);
        f.sg = function(c, e) {
          e.isClear && e.previousRecordID && e.previousRecordID != F.G && this.updateRecordStatus(e.previousRecordID, "PENDING", b.recordType);
          f.If = !e.isClear;
          d(a, k, f.If);
        }.bind(this);
        O.Xb(T.Ia, a, f.sg);
        this.od(a);
      }
    }
    function d(a, b, c) {
      c ? (b.style.backgroundColor = "#004B8B", b.title = "CloudMask is enabled", b.style.transition = "color 0.7s", b.className = b.className.replace("cloudmask-icon-unlock", "cloudmask-icon-lock"), a = a.querySelectorAll("[data-cm-show-lock]"), Array.prototype.forEach.call(a, function(a) {
        e.showLock(a, !1, !0);
      })) : (b.style.backgroundColor = "#777", b.title = "CloudMask is disabled", b.style.transition = "color 0.7s", b.className = b.className.replace("cloudmask-icon-lock", "cloudmask-icon-unlock"), a = a.querySelectorAll("[data-cm-show-lock]"), Array.prototype.forEach.call(a, function(a) {
        e.showLock(a, !0, !0);
      }));
    }
    var e = this;
    if (this.Mi(a, b) == a) {
      var k = b.B.controlCondition;
      if (k) {
        var f = this.M(a, b);
        if (f.isDefault && 0 > k.indexOf("default") || f.isClear && 0 > k.indexOf("clear") || !f.isClear && 0 > k.indexOf("masked")) {
          return;
        }
      }
      var n = b.B.properties.controlLayoutElement, k = b.B.properties.controlType;
      "boolean" == typeof k || "FAB" == k ? c.call(this, a, b) : "ToggleBar" != k && q.b("CM146 " + k);
    }
  }, sk:function(a, b) {
    b = b || this.a(a);
    var c = b.Vd;
    c && (O.fi(T.Ia, a, this.a(c).sg), c.parentNode && c.parentNode.removeChild(c), delete b.Vd);
  }, Vi:function(a, b) {
    q.warn("CM147 " + b.c && b.c.name);
    if (!P.isReference(b.usage) && !P.Qa(b.usage) && b.usage != this.Usage.search) {
      var c = this.u(a, b);
      c ? (c = this.a(c), c.Ab = c.Ab || [], 0 > c.Ab.indexOf(a) && c.Ab.push(a)) : q.b("CM148 ");
    }
  }, Te:function(a) {
    var b = this.a(a);
    if (!b.K) {
      a = this.sb(a);
      if (!a) {
        return;
      }
      b.K = D.ac(a);
    }
    return b.K;
  }, oo:function(a, b) {
    a.K || (a.K = D.ac(b));
    return a.K;
  }, uc:function(a, b, c) {
    var d = this.a(a);
    P.Qa(d.usage) && (d.references = d.references || [], d.references.some(function(a) {
      return a.recordID == c && a.fieldID == b;
    }) || d.references.push({recordID:c, fieldID:b}));
    d.fieldID = b;
    d.recordID = c;
    this.Hb(a, d);
    var e = A.Oa(c, b);
    e && e.properties && (e = e.properties, e.folderParents && (d.folderParents = e.folderParents), e.Na && (d.Na = e.Na));
    a.nodeType == L.TEXT_NODE && a.parentNode && (a = this.a(a.parentNode), a.fieldID = b, a.recordID = c, a.folderParents = d.folderParents, a.Na = d.Na);
  }, Hb:function(a, b, c) {
    b = b || this.a(a);
    b.T = !0;
    a.dataset && (a.dataset.cmIsPrivate = !0);
    0 > this.ye.indexOf(a) && this.ye.push(a);
    !c && a.childNodes && a.childNodes.forEach(p(function(a) {
      a.nodeType != L.ELEMENT_NODE && a.nodeType != L.TEXT_NODE || this.Hb(a);
    }).bind(this));
  }, me:function(a, b) {
    b = b || this.a(a);
    return b.T ? !0 : this.ye.some(function(b) {
      return a.contains(b);
    });
  }, Fi:function(a) {
    return this.pb(a).fieldID;
  }, Yn:function(a) {
    a.focus();
    var b = a.ownerDocument.createEvent("KeyboardEvent");
    b.initKeyEvent("keypress", !0, !0, a.ownerDocument.defaultView, !1, !1, !1, !1, 13, 0);
    a.dispatchEvent(b);
  }, Ei:function(a) {
    return window.sessionStorage.getItem("cloudmask.box.userid." + a);
  }, ja:function(a, b, c, d) {
    if (a instanceof window.HTMLImageElement) {
      return d;
    }
    var e = this.qa(a), k = this.Pa(a), f = this.a(a), n = C.da(a);
    if (e == this.Usage.typeahead || n && e == this.Usage.search) {
      return this.Yk(n, a, f), d;
    }
    (function() {
      if (f.ie && (q.b("CM152 "), n && "undefined" != n)) {
        var b = this.u(a, f), c = this.a(b);
        c.Oh = n;
        var d = this.ub(b), e = f.bk;
        f.bk = n;
        !e && this.Zd(n) && this.uj(b, c);
        d == F.G && e != n && this.Og(n, e);
      }
    }).call(this);
    if (!k) {
      return delete f.token, delete f.isClear, d;
    }
    if (k = C.fc(a)) {
      var r = this.u(a, f), v = this.a(r);
      v.elements = v.elements || [];
      0 > v.elements.indexOf(a) && v.elements.push(a);
    }
    if (null == n || "" == n) {
      return delete f.token, d;
    }
    (P.isReference(e) || P.Qa(e)) && delete f.isClear;
    delete f.L;
    var l = this.handler.resolve(n, a, d, {wc:this.uc.bind(this), Le:function(a, d, k) {
      f.L = f.L ? f.L : [];
      f.L.push({recordID:a, fieldID:d});
      b.recordID || (b.recordID = a);
      k.forEach(function(a) {
        0 <= b.ka.indexOf(a) || b.ka.push(a);
      });
      b.elements.some(function(b) {
        return b.recordID == a && b.fieldID == d;
      }) || (k = {recordID:a, fieldID:d}, c && (k.usage = e), b.elements.push(k));
    }});
    d = l.state;
    l = l.hg;
    "undefined" == typeof f.isClear && (l || this.He(a), delete f.token, l && (f.token = n), f.isClear = !l, a.nodeType == L.TEXT_NODE && a.parentNode && this.He(a.parentNode, l && f), k && this.od(r, v));
    if (r = a.parentNode && this.a(a.parentNode)) {
      !k && f.recordID && f.recordID != F.G ? (r.isShowLock || this.l.showLock && -1 == a.parentNode.className.indexOf("active ng-binding")) && -1 == a.parentNode.className.indexOf(" cloudmask-icon-lock") && (a.parentNode.style.cssText = "font-family: CloudMask, arial, sans-serif; " + a.parentNode.style.cssText, a.parentNode.className = a.parentNode.className + " cloudmask-icon-lock") : !k && f.recordID && f.recordID == F.G && (r.isShowLock || this.l.showLock && -1 == a.parentNode.className.indexOf("active ng-binding")) &&
      (a.parentNode.className = a.parentNode.className.replace(" cloudmask-icon-lock", ""), a.parentNode.style.cssText = a.parentNode.style.cssText.replace("font-family: CloudMask, arial, sans-serif; ", ""));
    }
    e != this.Usage.subject || !l || 0 != n.indexOf("Re: ") && 0 != n.indexOf("Fwd: ") || (f.dd = C.da(a));
    if (P.Qa(e) || P.isReference(e)) {
      f.dd = C.da(a);
    }
    f.Ug && this.Ig(f);
    return d;
  }, Ig:function(a, b) {
    M.getFileLink({recordID:a.recordID, fieldID:a.fieldID, name:"thumbnail-94x94"}, function(c, d, e) {
      if (c) {
        return b(c);
      }
      a.Ug && a.Ug.forEach(function(a) {
        b ? b(e, a) : (a.removeAttribute("data-background-image"), a.style.backgroundImage = 'url("data:image/jpeg;base64,' + btoa(String.fromCharCode.apply(null, new Uint8Array(e))) + '")', a.style.backgroundSize = "32px");
      });
    });
  }, rk:function(a) {
    a = this.a(a);
    this.Og(null, a.Oh);
  }, Og:function(a, b) {
    M.setClearTextReference({Ko:a, Gn:b});
  }, Zd:function(a) {
    return z.Zd(a);
  }, Qn:function(a, b) {
    var c = b.indexOf(" OR ");
    0 <= c && (b = b.substring(0, c), "gsas_d" == a.className && (b += '"'));
    C.vc(a, b);
  }, Z:function(a, b, c, d, e) {
    if (!C.xb(a, "unMaskElement")) {
      this.a(a);
      this.qa(a);
      var k = this.Pa(a);
      c && c.call(a, b);
      this.Ba && k && (d || E.je(a)) && (b = {elements:[], ka:[]}, this.nb(a, this.ja, b, null, null, !0, e), 0 < b.elements.length && this.Lg(b));
    }
  }, jj:function(a) {
    if (this.A()) {
      return !1;
    }
    var b = this.a(a);
    this.u(a, b);
    return b.part ? this.a(b.part).Xc ? !1 : !0 : (q.warn("CM153 " + a.tagName + "." + a.className), !1);
  }, ze:function(a, b) {
    function c(a, b) {
      if (b.CMKey && (a.CMKey = b.CMKey, d.a(b).T)) {
        var f = e(b, !0);
        k(a, f);
        return;
      }
      for (var f = a.childNodes, n = b.childNodes, q = 0;q < f.length;q++) {
        c(f[q], n[q]);
      }
    }
    var d = this, e = C.da, k = C.vc, f = ga.call(a, !0);
    b && (this.jc = {fb:!0});
    try {
      c(f, a), delete this.jc;
    } catch (n) {
      throw delete this.jc, n;
    }
    return f;
  }, ta:function(a, b, c, d, e, k) {
    function f() {
      if (!v.fieldID) {
        return !1;
      }
      var a = A.Ki(v);
      return a && b != a ? !1 : v.token;
    }
    function n(a, b, c) {
      d && e && 0 > e.indexOf(a) && (R.Ic(d, b, c), e.push(a));
    }
    function r(a, b, c, d) {
      P.isReference(d.usage) || A.Ob(a, b, c, d);
      !d.folderParents && d.c && d.c.format == this.Usage.folder && (a = E.ee()) && a.length && (d.folderParents = a);
    }
    try {
      if (this.A() || C.xb(a, "PrivatizeElement")) {
        return b;
      }
      if (!this.Ba) {
        return q.warn("CM154 " + a.tagName + "." + a.className), b;
      }
      var v = this.a(a), l = this.qa(a);
      if ((!b || "" == b.trim()) && l != this.Usage.subject && l != F.Usage.recipient) {
        return b;
      }
      if (l == this.Usage.search) {
        return console.log("Found private element for search", v.token, l), v.token && b.trim() != v.Ua && (console.info("Resetting search token since val has changed", b, v.Wn), delete v.token, delete v.Ua), v.token || b;
      }
      this.u(a, v);
      if (!v.part) {
        return q.warn("CM155 " + a.tagName + "." + a.className), b;
      }
      var g = this.a(v.part);
      if (g.Xc || !(v.T || this.Pa(a) && C.fc(a))) {
        return b;
      }
      if (v.T && !C.fc(a) && v.token) {
        return v.token;
      }
      if (v.fg) {
        return n.call(this, a, b, v), v.token;
      }
      if (v.ie) {
        return b;
      }
      v.c && v.c.format == this.Usage.folder && E.rd(g, null, b);
      var I = this.M(v.part, g), u = I.isClear;
      if (P.isReference(l) || P.Qa(l)) {
        if (v.token && v.dd == b) {
          return u || n.call(this, a, b, v), v.token;
        }
        delete v.recordID;
        delete v.token;
        delete v.references;
        delete v.dd;
        if (P.isReference(l)) {
          return b;
        }
      }
      if (I.isClear) {
        return b;
      }
      v.recordType = this.Sc(v.part, g);
      this.sb(a);
      var z;
      if (c) {
        this.Hb(a, v, !0);
        if (!this.jc && f.call(this)) {
          return n.call(this, a, b, v), v.token;
        }
        k = k || this.jc || {};
        k.$e = "fragment";
        void 0 === k.fb && (k.fb = !(v.c && v.c.properties.wrapHTML), k.fb && g.B && g.B.properties.wrapHTML && (k.fb = !1));
        z = this.handler.O(b, a, v, {Kc:r.bind(this), kd:n.bind(this)}, k);
        this.jc || (v.token = z);
        return z;
      }
      this.Hb(a, v, !0);
      if (l == this.Usage.subject) {
        if (!b || "" == b.trim()) {
          b = "(no subject)";
        } else {
          if (b == v.dd && (0 == b.indexOf("Re: ") || 0 == b.indexOf("Fwd: "))) {
            return v.token;
          }
        }
      }
      if (f.call(this)) {
        return n.call(this, a, b, v), v.token;
      }
      k = k || {};
      return z = v.token = this.handler.O(b, a, v, {Kc:r.bind(this), kd:n.bind(this)}, k);
    } catch (x) {
      throw q.b("CM158 ", x), x;
    }
  }, Ie:function(a) {
    try {
      if (a.CMKey) {
        var b = this.a(a);
        if (!C.xb(a, "resetNode")) {
          b.isShowLock && a.className && (a.className = a.className.replace(" cloudmask-icon-lock", ""), a.style.cssText = a.style.cssText.replace("font-family: CloudMask, arial, sans-serif; ", ""));
          var c;
          for (c = 0;null != a.childNodes && c < a.childNodes.length;c++) {
            this.Ie(a.childNodes[c]);
          }
          var d = a.attributes;
          for (c = 0;d && c < d.length;c++) {
            d[c].CMKey = null;
          }
          if (a instanceof window.HTMLIFrameElement) {
            try {
              a.contentDocument && this.Ie(a.contentDocument.body);
            } catch (e) {
              q.b("CM161 ", e);
            }
          }
        }
      }
    } catch (e) {
      q.b("CM162 ", e);
    }
  }, Hn:function(a) {
    try {
      q.warn("CM163 " + a.tagName + ", className: " + a.className + ", href: " + a.href), U.call(a, "click", function(b) {
        try {
          q.warn("CM164 ");
          var c = O.Xd(a, "click")[this.CMKey];
          c && c.forEach(p(function(a) {
            a.call(this, b);
          }).bind(this));
          b.preventDefault();
          b.stopPropagation();
        } catch (d) {
          q.b("CM165 ", d), b.preventDefault();
        }
      }, !1);
    } catch (b) {
      q.b("CM166 ", b);
    }
  }, En:function(a) {
    var b = this.a(a);
    if (b.Xm) {
      return !1;
    }
    if (b.Vj) {
      return !0;
    }
    a = this.Di(a);
    var c = document.createElement("DIV");
    c.style.position = "absolute";
    c.style.top = a.top;
    c.style.left = a.left;
    c.style.backgroundColor = "red";
    c.style.width = "50px";
    c.style.height = "50px";
    document.addChild(c);
    b.Vj = c;
    return !0;
  }, nb:function(a, b, c, d, e, k, f) {
    if (a) {
      e || E.je(a) || q.error("CM168 ", a);
      var n = this.handler.transformNode(a);
      if (n) {
        return b = n.Ci(), this.ja(b, c, null, null), e = this.a(b), e.transform = n, n.ya = e, e.L || (n.Ba = !0), {transform:n, cn:d};
      }
      "A" == a.tagName && this.oc(a);
      if (!e && (e = this.a(a), a.nodeType == L.ELEMENT_NODE)) {
        var v = [];
        this.Zb.forEach(p(function(b) {
          try {
            if (0 == b.filter.indexOf("/")) {
              var c = b.filter.substring(1);
              a.parentNode && a.parentNode.querySelector(c) && v.push.apply(v, b.se);
            } else {
              a.querySelector(b.filter) && v.push.apply(v, b.se);
            }
          } catch (d) {
            q.b("CM172 " + b.filter, d);
          }
        }).bind(this));
        v.length && this.zj(v);
      }
      this.qa(a);
      if (a.nodeType == L.TEXT_NODE) {
        d = this.ja(a, c, null, d);
      } else {
        if (a instanceof window.HTMLIFrameElement) {
          if (q.warn("CM175 " + a.src), f) {
            try {
              this.nb(a.contentDocument.body, b, c, d, !0, k, f);
            } catch (r) {
              q.b("CM176 ", r);
            }
          }
        } else {
          if (!(a instanceof window.HTMLScriptElement || a instanceof window.HTMLStyleElement)) {
            if (C.hc(a)) {
              this.ja(a, c, !0);
            } else {
              if (a instanceof window.HTMLImageElement) {
                d = this.ja(a, c, null, d);
              } else {
                for (e = 0;null != a.childNodes && e < a.childNodes.length;e++) {
                  var l = a.childNodes[e];
                  if (!C.xb(l, "ProcessNode")) {
                    if ("FORM" == l.tagName) {
                      if (!k) {
                        continue;
                      }
                      this.zg(l, c, d, !0, k, f);
                      d = null;
                    }
                    if (l.nodeType == L.TEXT_NODE) {
                      d = this.ja(l, c, null, d);
                    } else {
                      if (l.nodeType == L.ELEMENT_NODE && (l = this.nb(l, b, c, d, !0, k, f), d = l.state, l.transform)) {
                        n = l.transform;
                        break;
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      n ? n.Uh(a) && (n.Ba && (n.Hg(aa, window.Node.prototype.removeChild), this.uc(a, n.ya.fieldID, n.ya.recordID)), d = n = null) : this.ck(a, b, c);
      return {state:d, transform:n};
    }
    q.warn("CM167 ");
  }, ck:function(a, b, c) {
    a = a.attributes;
    for (b = 0;a && b < a.length;b++) {
      if ("title" == a[b].name || "alt" == a[b].name) {
        this.ja(a[b], c);
      } else {
        if ("href" == a[b].name) {
          var d = new J(a[b].value);
          d.scheme && "https" != d.scheme && "http" != d.scheme && "javascript" != d.scheme && this.ja(a[b], c);
        }
      }
    }
  }, Lg:function(a, b) {
    var c = [];
    c.push(a);
    this.resolvePage(c, b);
  }, resolvePage:function(a, b) {
    for (var c = [], d = 0;d < a.length;d++) {
      c.push({partType:a[d].partType, recordType:a[d].recordType, elements:a[d].elements, applicationID:this.l.id, installationDetailID:e.ENV.installationDetailId});
    }
    var k = this;
    M.resolvePage(JSON.stringify(c), function(c) {
      try {
        if (!C.xb(window, "Window (Resolve Finish): " + v)) {
          var d = JSON.parse(c);
          k.wk(a, d, b);
        }
      } catch (e) {
        q.b("CM180 ", e);
      }
    });
  }, bind:function() {
    var a = [].slice.call(arguments, 1);
    return this.ah.apply(arguments[0], a);
  }, vo:function() {
  }, tm:function(a) {
    function b(a, c, d) {
      null != c[d] && "" != c[d] && a.push({type:d, value:c[d]});
    }
    var c = {}, d = this.a(a);
    this.pg(a, d);
    var e = [];
    b(e, a, "id");
    b(e, a, "name");
    b(e, a, "title");
    b(e, a, "type");
    b(e, a, "maxLength");
    a = this.$d(a);
    null != a && e.push({type:"label", value:a});
    c.c = encodeURIComponent(JSON.stringify({algorithm:null, conditions:e}));
    d && d.c && (c.Tn = d.c.id);
    return c;
  }, wk:function(a, b, c) {
    function d(a, b, c) {
      var n = null;
      if ("form" == a.partType && 0 < b.elements.length) {
        var n = a.Xj, v = f.a(n);
        if (v.jd) {
          var r = f.a(v.jd);
          r.recordID && (v.recordID = r.recordID);
        }
        n.recordType = b.recordType;
      }
      for (n = 0;n < b.elements.length;n++) {
        if ((v = e(b, b.elements[n].value, b.elements[n].recordID, b.elements[n].changeIdx)) || "" === v) {
          r = {usage:b.elements[n].usage, folderParents:b.elements[n].folderParents};
          if (b.elements[n].metaData) {
            var l = b.elements[n].metaData;
            if ("string" == typeof l) {
              try {
                l = JSON.parse(b.elements[n].metaData);
              } catch (g) {
              }
            }
            r.lines = l.lines;
          }
          A.Ob(b.elements[n].recordID, b.elements[n].fieldID, v, r);
        }
      }
      k(b.elements, a.ka);
      v = null;
      for (n = 0;n < a.ka.length;n++) {
        r = a.ka[n];
        try {
          var I = C.da(r);
        } catch (g) {
          q.b("CM187 " + n, g);
          continue;
        }
        l = this.a(r);
        if (l.transform) {
          if (!l.L) {
            continue;
          }
          var z = null, u = !1;
          l.L.forEach(function(a) {
            u = u || !b.elements.some(function(b) {
              if (a.recordID == b.recordID && a.fieldID == b.fieldID) {
                return b.reasonCode && (z = b.reasonCode), !0;
              }
            });
          });
          if (!u) {
            if (z) {
              l.transform.Qk(z);
            } else {
              this.handler.resolve(I, r, v, {wc:this.uc.bind(this)});
              var x = l.transform.Hg(aa, window.Node.prototype.removeChild);
              x ? this.uc(x, l.fieldID, l.recordID) : q.b("CM188 ");
            }
            delete l.L;
          }
        } else {
          v = this.handler.resolve(I, r, v, {wc:this.uc.bind(this)}).state;
        }
        try {
          c && top.opener && (top.opener.oa || (top.opener.oa = {}), top.opener.oa.qe || (top.opener.oa.qe = {}), top.opener.oa.qe[C.ea(r)] = I);
        } catch (g) {
          q.b("CM190 ", g);
        }
      }
    }
    function e(a, b, c, d) {
      try {
        var k = a.encryptedRecords[c + "-" + d];
        return k && k.clearData ? (D.set(c, a.lastFieldIDs[c]), k.clearData[b]) : null;
      } catch (f) {
        return q.b("CM191 ", f), null;
      }
    }
    function k(a, b) {
      if (1 != b.length || !b[0].ej) {
        var c = "/";
        a.forEach(function(a) {
          a.folderParents && a.folderParents.forEach(function(a) {
            var b = f.mask.Tb(f.Usage.text, a.recordID, a.fieldID);
            A.Oa(a.recordID, a.fieldID) || 0 <= c.indexOf(b) || (c += b + "/");
          });
        });
        if ("/" != c) {
          var d = {elements:[], ka:[]};
          f.ja(document.createTextNode(c), d);
          d.ka[0].ej = !0;
          f.Lg(d);
        }
      }
    }
    for (var f = this, n = 0;n < a.length;n++) {
      d.call(this, a[n], b[n], c);
    }
  }, Sc:function(a, b) {
    b = b || this.a(a);
    if (b.recordType) {
      return b.recordType;
    }
    if (a && "FORM" == a.tagName) {
      var c = a.action, d;
      this.Dg.some(function(e) {
        if (e.conditions.some(function(b) {
          if ("url" == b.type) {
            return d = (b = c.match(RegExp(b.value))) && b[1], b;
          }
          if ("id" == b.type) {
            return b.value == a.id;
          }
        })) {
          return b.recordType = e.properties.recordType || d, !0;
        }
      });
      return b.recordType;
    }
  }, zg:function(a, b, c, d, e, k) {
    var f = this, n = this.a(a);
    if (n.ne) {
      q.warn("CM194 " + a.id);
    } else {
      n.ne = !0;
      n.status = "NONE";
      n.useCase = "FORM";
      n.submit = a.submit;
      var v = this.u(a), v = this.a(v), v = this.Sc(a, v);
      a.submit = function() {
        try {
          f.Zf(this) && n.submit.call(this);
        } catch (a) {
          q.b("CM196 ", a);
        }
      };
      U.call(a, "submit", function(b) {
        try {
          var c = f.a(a);
          if ("DONE" == c.status) {
            q.warn("CM199 ");
          } else {
            var d = O.Xd(this, "submit");
            if (d[c.CMKey]) {
              var e = !1, k = b.stopPropagation;
              b.stopPropagation = function() {
                e = !0;
                k.call(this);
              };
              d[c.CMKey].some(p(function(a) {
                a.call(this, b);
                if (e) {
                  return !0;
                }
              }).bind(this));
              if (b.defaultPrevented || e) {
                q.warn("CM200 ");
                return;
              }
            }
            c.wg && !c.wg.call(this) ? (b.preventDefault(), b.stopPropagation()) : f.Zf(this) || (b.preventDefault(), b.stopPropagation());
          }
        } catch (n) {
          q.b("CM201 ", n), b.preventDefault();
        }
      }, !1);
      U.call(a, "click", function(b) {
        try {
          var c = f.a(a);
          c.jb = null;
          if ("DONE" == c.status) {
            q.warn("CM202 ");
          } else {
            var d = b.target;
            "BUTTON" != d.nodeName && ("INPUT" != d.nodeName || "submit" != d.type && "button" != d.type) || "Attach" == d.id || (c.jb = d, c.cj = f.ha(d, f.Rule.jl));
          }
        } catch (e) {
          q.b("CM203 ", e);
        }
      });
      v = {partType:"form", Xj:a, elements:[], ka:[], recordType:v};
      n.wg = a.onsubmit;
      a.onsubmit = null;
      this.nb(a, this.ja, b || v, c, d, e, k);
      return v;
    }
  }, te:function(a, b, c) {
    M.decryptURL({url:a, fileInfo:b}, function(a, b, d) {
      if (a) {
        return c(a);
      }
      b = JSON.parse(b);
      a = URL.createObjectURL(new Blob([d], {type:b.type}));
      c(null, a, b.fn);
    });
  }, oc:function(a, b, c) {
    function d(a, b) {
      var c = window.document.createElement("A");
      c.style.display = "none";
      b && X.call(c, "download", b);
      X.call(c, "href", a);
      fa.call(c);
    }
    if (!e.ra() && !e.S() && !e.Ra()) {
      return !1;
    }
    b = b || a.href;
    if (!b) {
      return !1;
    }
    b = function(a) {
      a = new J(a);
      return a.resolve(new J(window.location.href)).toString();
    }.call(this, b);
    var k = this, f = null, n = a.hasAttribute && a.hasAttribute("download") && a.getAttribute("download");
    if (n) {
      var v = this.handler.nd(n);
      v.length ? (f = {downloadAttributeToken:v[0]}, f.downloadAttributeToken.ext = "." + /(?:\.([^.]+))?$/.exec(n)[1]) : e.S() && (f = {downloadAttributeToken:{fileName:n}});
    }
    if (!f && !this.l.eg(b)) {
      return !1;
    }
    n = this.a(a);
    n.hb = b;
    a instanceof window.Window ? this.te(b, f, p(function(a, c, e) {
      a ? (q.warn("CM204 " + b), d(b)) : d(c, e);
    }).bind(this)) : a instanceof window.HTMLIFrameElement ? this.te(b, f, p(function(d, e, f) {
      d ? (q.warn("CM205 " + b), c.call(a)) : (a.ownerDocument.defaultView.cmBlob = e, a.ownerDocument.defaultView.fn = f, a.contentDocument.write("<html><head><script src='chrome-extension://" + k.extensionID + "/pages/frame-download.js'>\x3c/script></head><body></body></html>"));
    }).bind(this)) : n.$h || (U.call(a, "click", p(function(c) {
      if (e.S()) {
        return M.io(f), X.call(a, "href", b);
      }
      if (!c.Bh) {
        c.preventDefault();
        var d = new window.MouseEvent(c.type);
        d.Bh = !0;
        this.te(b, f, p(function(c, e, k) {
          c ? X.call(a, "href", b) : (X.call(a, "download", k), X.call(a, "href", e));
          a.dispatchEvent(d);
        }).bind(this));
      }
    }).bind(this), !1), n.$h = !0);
    return !0;
  }, handleSearch:function(a, b, c) {
    function d(a, b) {
      var c = null;
      "*" == a.charAt(a.length - 1) && (a = a.substring(0, a.length - 1));
      return ba.search({value:a, limit:b, offset:0}).then(function(d) {
        d = d || {};
        var f = {}, n = 0;
        Object.keys(d).some(function(a) {
          f[a] = d[a];
          n++;
          return n >= b;
        });
        d = f;
        c && "ByPass" != c || (c = e.l.Nc);
        var v;
        switch(c) {
          case "RANDOM_ASCII":
            v = e.mask.Da(a, d);
            break;
          case "RANDOM_UNICODE":
            v = e.ib.Da(a, d, e.l.option.zh, k);
            k && (v = v.replace(/\s+OR\s+/g, " " + k + " "));
            break;
          default:
            throw Error("Unknown algorithm");;
        }
        1 == b && '"' == v[0] && (v = v.substring(1, v.length - 1));
        return v;
      });
    }
    if (b.sf) {
      return Promise.resolve(!0);
    }
    var e = this, k = c.properties.searchOR, f = c.properties.searchLimit || 25, n, v;
    C.query(c.properties.searchInputSelector).some(function(a) {
      n = a;
      v = C.da(a);
      return !!v;
    });
    n || q.warn("CM208 ");
    v = v.trim();
    var r = e.a(n);
    if (r.Gf) {
      return delete r.Gf, Promise.resolve(!0);
    }
    delete r.Ua;
    delete r.token;
    if (!v) {
      return q.info("CM209 "), Promise.resolve(!0);
    }
    ba.searchCount({value:v, limit:null, start:null}).then(function(a) {
      q.info("CM210 " + v + " is " + a);
      if (a) {
        return z.Rk({count:a, value:v});
      }
    }).then(function(b) {
      if ("Yes" == b) {
        return q.info("CM211 "), d(v, f).then(function(b) {
          q.info("CM212 " + b);
          var c = e.a(n);
          c.token = b;
          c.Ua = v;
          r.Gf = !0;
          c = window.sessionStorage;
          c["cloudmask.searchToken"] = b;
          c["cloudmask.searchTerm"] = v;
          a.click();
        });
      }
      "No" == b ? q.info("CM214 ") : "Close" == b && q.info("CM215 ");
    }).catch(function(a) {
      q.b("CM216 ", a);
    });
    return Promise.resolve(!0);
  }, Yk:function(a, b, c) {
    if (a) {
      var d = a;
      c = c || this.a(b);
      var e = window.sessionStorage;
      !c.Ua && e["cloudmask.searchTerm"] && e["cloudmask.searchToken"] == a.trim() && (c.Ua = e["cloudmask.searchTerm"], c.token = e["cloudmask.searchToken"], console.info("restored search state from session storage...", a, c.Ua));
      c.Ua && (d = c.Ua, console.info("unmask restored...", a, d));
      delete e["cloudmask.searchToken"];
      delete e["cloudmask.searchTerm"];
      C.vc(b, d);
    }
  }, Zf:function(a) {
    function b(a) {
      for (var c = 0;c < a.length;c++) {
        var e = a[c];
        d.Pa(e) && (e.value = "");
      }
    }
    function c(a, b) {
      var e = d.a(a);
      b.recordType = d.Sc(a, e);
      e.recordType && b.recordType != e.recordType || e.recordType || q.warn("CM226 ");
      var e = a.elements, k = [];
      b.ka = [];
      b.Jn = {};
      var f = d.a(a);
      f.Wd = [];
      for (var n = 0;n < e.length;n++) {
        var v = e[n], r = b, l = d.a(v);
        if (C.hc(v) && d.Pa(v)) {
          var g = E.ee();
          if (g.length || l.c && l.c.format == d.Usage.folder || "file" == v.type) {
            l.folderParents = g;
          }
          g = C.ea(v);
          "file" == v.type && (g = z.Bb(g).name);
          r = d.ta(v, g, !1, r.dataElements, r.ka);
          l.fg = !0;
          "file" == v.type && k.push({token:r, fileName:g});
          r && l.usage != d.Usage.search && "file" != v.type && (l.token = r, f.Wd.push(v));
        }
      }
      f.Kf = k;
      b.dataElements.length && (b.recordID = d.sb(a));
      return !1;
    }
    var d = this, e = this.a(a);
    if ("DONE" == e.status || d.A()) {
      return q.warn("CM218 "), e.status = "NONE", !0;
    }
    e.status = "SUBMIT";
    var k = e.useCase, f = {dataElements:[], useCase:k};
    try {
      d.top.oa && (d.top.oa.qe = {});
    } catch (n) {
    }
    debugger;
    var v = !1;
    E.rd(e);
    if (this.M(a, e).isClear) {
      return q.warn("CM220 "), e.status = "DONE", !0;
    }
    e.cj ? b(a.elements) : "LOOKUP" != k && (v = c(a, f));
    if (R.kg(f)) {
      return q.warn("CM222 "), e.status = "DONE", !0;
    }
    R.save(f, e).then(function(b) {
      e.status = "DONE";
      if (!v) {
        if (e.Wd.length && e.Wd.forEach(function(a) {
          var b = d.a(a);
          C.vc(a, b.token);
        }), e.Kf.length && d.ek(a, f.recordID, e.Kf, b.userKey), "LOOKUP" == k && JSON.parse(b.element), e.jb) {
          if (e.jb.hasAttribute("disabled")) {
            e.jb.removeAttribute("disabled");
            var c = !0;
          }
          e.jb.click();
          e.jb = null;
          c && e.jb.setAttribute("disabled", !0);
        } else {
          a.submit();
        }
      }
    });
    return v;
  }, ek:function(a, b, c, d) {
    try {
      this.a(a).action = a.action;
      var e = new J(a.action);
      a.action = this.yk(e, b, c, d);
    } catch (k) {
      q.b("CM233 ", k);
    }
  }, yk:function(a, b, c, d) {
    try {
      "string" == typeof a && (a = new J(a));
      var e = a.resolve(new J(window.location.href));
      e.query = e.query ? e.query + "&" : "";
      e.query += "CLOUDMASK";
      b && (e.query += "&cmRecordID=" + b);
      d && (e.query += "&cmEncryptedSecret=" + d.encryptedSecret);
      for (b = 0;c && b < c.length;b++) {
        var k = c[b].fileName.lastIndexOf(".");
        d = "";
        0 < k && (d = c[b].fileName.substring(k));
        c[b].token && (e.query += "&cmToken=" + c[b].token + d);
        e.query += "&cmFileName=" + c[b].fileName.replace("&", "|*cm*|");
      }
      e.query += "&cmEnd";
      return e.toString();
    } catch (f) {
      q.b("CM234 ", f);
    }
  }, ln:function(a) {
    a = a.split("&");
    for (var b = "", c = 0;c < a.length;c++) {
      var d = a[c].indexOf("=");
      0 < c && (b += "&");
      b += a[c].slice(0, d + 1) + encodeURIComponent(a[c].slice(d + 1));
    }
    return b;
  }, rn:function(a, b, c) {
    c = a;
    a.startsWith("subject:") && (a = a.replace("subject:", ""));
    a.startsWith("-") && (a = a.replace("-", ""));
    0 < a.indexOf(" -") && (a = a.replace(" -", " "));
    var d = this.a(b), e = M.search(a) || [];
    switch(this.l.Nc) {
      case "RANDOM_ASCII":
        a && (d.Rj = a);
        c += this.mask.Da(a, e);
        break;
      case "RANDOM_UNICODE":
        a && (d.Rj = a);
        "Search OneDrive" == b.getAttribute("placeholder") ? (a = this.ib.Da(a, e), b = a.indexOf(" OR ") + 4, c = a.indexOf(" OR ", b), -1 == c && (c = a.length), c = a.substring(b, c)) : c += this.ib.Da(a, e);
        break;
    }
    return c;
  }, Lh:function(a, b) {
    var c = this.a(a), d;
    for (d in b) {
      c[d] = b[d];
    }
  }, ec:function(a) {
    var b = this;
    return new Promise(function(c, d) {
      try {
        b.vb(a, function(a) {
          c(a);
        });
      } catch (e) {
        d(e);
      }
    });
  }, vb:function(a, b) {
    function c(a) {
      return a.replace(/\\u([\d\w]{4})/gi, function(a, b) {
        return String.fromCharCode(parseInt(b, 16));
      });
    }
    function d(a) {
      function b() {
        k.Vc(f) && k.a(f).recordID ? (console.info("Encrypting file/blob for transfer/ajax"), n.push(k.J.Ti(f).then(function(b) {
          console.info("Finished Encrypting file/blob for transfer/ajax");
          a[c] = b;
        }))) : console.info("Skipping file/blob for a clear instance");
      }
      for (var c in a) {
        var f = a[c];
        f && (k.J.isFile(f) || k.J.wb(f) ? b() : f instanceof FileList ? console.error("NOT SUPPORTED: transfer of file list") : "object" == typeof f ? d(f) : "string" == typeof f ? e(f) : f.toString && e(f.toString()));
      }
    }
    function e(a) {
      try {
        var b = k.getTime();
        k.handler.Pg(a, function(a, b, c) {
          a || ((a = f[c.recordID]) || (f[c.recordID] = a = {recordID:c.recordID, dataElements:[]}), a.recordType = a.recordType || c.recordType, R.Ic(a.dataElements, b, c));
        });
        k.Mg += k.getTime() - b;
        var c = k.getTime() - b;
        10 < c && q.warn("CM241 " + c + ", length: " + a.length);
      } catch (d) {
        q.b("CM242 ", d);
      }
    }
    var k = this, f = {}, n = [];
    (function() {
      var b = null;
      if (a instanceof window.FormData) {
        for (var b = a, f = k.a(b).Pb, n = 0;n < f.length;n++) {
          var v = f[n];
          v.value instanceof window.File || v.value instanceof window.Blob || e(v.value);
        }
        delete k.a(b).Pb;
      } else {
        if ("object" == typeof a) {
          b = a, d(b);
        } else {
          try {
            b = decodeURIComponent(a);
          } catch (r) {
            q.b("CM240 ", r), b = a;
          }
          b = c(b);
          e(b);
        }
      }
    })(a);
    n.length || n.push(Promise.resolve());
    return Promise.all(n).then(function() {
      var a = Object.keys(f);
      if (!a.length) {
        return Promise.resolve();
      }
      console.info("Save triggered from Port/Ajax");
      a = a.map(function(a) {
        var b = f[a];
        q.info("CM236 " + a);
        if (R.kg(b) || a == F.G) {
          return Promise.resolve();
        }
        a = A.Vf(a);
        return R.save(b, a);
      });
      Promise.all(a).catch(function() {
        q.error("CM238 ");
      });
    }).then(function() {
      b(a);
    }).catch(function(a) {
      throw a;
    });
  }, Tc:function(a, b) {
    if (this.Ba && !b) {
      q.warn("CM244 " + v);
    } else {
      q.info("CM245 " + v);
      this.Ba = !0;
      for (var c = [], d = 0;d < document.forms.length;d++) {
        var e = this.zg(document.forms[d]);
        e && 0 < e.elements.length && c.push(e);
      }
      d = {elements:[], ka:[]};
      null != document.getElementsByTagName("title")[0] && this.nb(document.getElementsByTagName("title")[0], this.ja, d);
      this.nb(document.getElementsByTagName("body")[0], this.ja, d);
      0 < d.elements.length && c.push(d);
      0 < c.length && this.resolvePage(c);
      this.insertCSS();
      if (this.onReadyCallback) {
        window[this.onReadyCallback](I.j(this));
      }
    }
  }, Jb:function(a) {
    return this.handler.Jb(a);
  }, Kh:function(a, b) {
    if (!this.A() && !a.querySelector("span#cloudmask-sort-span")) {
      var c = this, d = this.pb(a);
      d.xf = b;
      var e = a.ownerDocument.createElement("span");
      e.id = "cloudmask-sort-span";
      e.style.marginLeft = "1em";
      e.style.Io = "none";
      e.style.color = "#f9f9f9";
      e.style.position = "fixed";
      e.style.bottom = "1em";
      e.style.right = "1em";
      e.style.backgroundColor = "#004B8B";
      e.style.cursor = "pointer";
      e.title = "Click here to see encrypted result";
      e.style["-webkit-user-select"] = "none";
      e.style["-moz-user-select"] = "none";
      e.style["-ms-user-select"] = "none";
      e.style["margin-right"] = "2em";
      e.style["font-size"] = "24px";
      e.style["z-index"] = "1";
      e.style.padding = "8px 0px 8px 16px";
      e.style.Lo = "middle";
      e.style.width = "37px";
      e.style.height = "37px";
      e.style.lineHeight = "37px";
      e.style.transition = ".3s";
      e.style.borderRadius = "50%";
      e.style.cssText = "font-family: CloudMask, arial, sans-serif; " + e.style.cssText;
      e.className = "cloudmask-icon-sort";
      U.call(e, "click", function() {
        c.Ye ? (console.log("changing sort to disbaled"), c.Ld(this, "disable")) : (console.log("changing sort to enabled"), c.Ld(this, "enable"), d.xf ? d.xf(e) : q.b("CM256 "));
      });
      aa.call(a, e);
      this.Ld(e, "disable");
    }
  }, Ld:function(a, b) {
    "disable" == b ? (this.Ye = !1, a.style.backgroundColor = "#777", a.title = "CloudMask sorting is disabled", a.style.transition = "color 0.7s") : "enable" == b ? (this.Ye = !0, a.style.backgroundColor = "#004B8B", a.title = "CloudMask is enabled", a.style.transition = "color 0.7s") : q.b("CM257 ");
  }, updateRecordStatus:function(a, b, c) {
    M.updateRecordStatus({recordID:a, status:b, recordType:c});
  }, handleShowNotification:function(a, b, c) {
    this.showNotification(c.properties.notificationCode);
  }, handleShowOverlay:function(a, b, c) {
    b = c.properties.page;
    var d = c.properties.position, e = c.properties.offset, k = a.getBoundingClientRect(), f = d ? {} : null;
    ["top", "right", "bottom", "left"].forEach(function(a) {
      var b = d && d[a];
      b && (f[a] = k[b]);
    });
    ["top", "right", "bottom", "left"].forEach(function(a) {
      var b = e && e[a];
      b && (f[a] += b);
    });
    return z.Pk(b, f, c.id);
  }, handleAddNode:function(a, b, c) {
    var d = this;
    (b = c.$i) || (c.properties.html ? b = Promise.resolve(c.properties.html) : b = z.ng("pages/" + c.properties.page));
    c.$i = b;
    return b.then(function(b) {
      var e = document.createElement("DIV");
      e.innerHTML = b;
      b = e.firstChild;
      var k = c.properties.setReferenceStyles, f = c.properties.referenceSelector, e = a;
      if (f && (e = C.hd(f, a), !e)) {
        q.error("CM258 ");
        return;
      }
      k && w(e, k);
      k = c.properties.position || "last";
      "last" == k ? e.appendChild(b) : "first" == k ? e.insertBefore(b, e.firstChild) : "after" == k ? e.nextSibling ? e.parentNode.insertBefore(b, e.nextSibling) : e.parentNode.appendChild(b) : "before" == k && e.parentNode.insertBefore(b, e);
      (e = c.properties.copyTargetStyles) && m(b, a, e);
      "enableNextPart" == c.properties.action && U.call(b, "click", function() {
        console.log("click setting next part of enabled.");
        d.Rd();
      });
      return b;
    });
  }, handleDetectUser:function(a, b, c) {
    b = c.properties.emailSelectors;
    c = [a];
    b && (c = C.query(b, a, !0));
    var d;
    c.some(function(a) {
      if (d = C.da(a) || "") {
        return 0 < d.toLowerCase().indexOf(e.ENV.email);
      }
    }) ? (this.Fb(!1), this.Jk()) : (q.warn("CM259 " + d), z.na(window, "USER_NOT_MATCHING", null, null, {Yl:d, userEmail:e.ENV.user.email}), this.Fb(!0));
  }, handleChangeNodes:function(a, b, c, d) {
    var e = c.properties.setStyle || {};
    C.query(c.properties.nodeSelectors, a, !0).forEach(function(a) {
      d.isClear ? g(a, Object.keys(e)) : w(a, e);
    });
  }, handleShowLock:function(a, b, c, d) {
    this.showLock(a, d.isClear);
    return Promise.resolve(!0);
  }, handleCommit:function(a, b, d) {
    q.info("CM260 ");
    var e = this, k = this.u(a);
    b = this.M(k);
    if (b.isClear) {
      return Promise.resolve(!0);
    }
    a = [];
    var f = b.ed, n = d.properties.targetRecordType, v;
    b = k;
    var r = f;
    if (n) {
      r = (v = this.dc(k, f, n)) && v.ua;
      if (!r) {
        return q.b("CM261 "), Promise.resolve(!1);
      }
      b = v.part;
    }
    a.push(r.recordID);
    n = E.ci(r);
    if (!n.recipients.length) {
      return q.warn("CM262 "), Promise.resolve(!1);
    }
    if (v = d.properties.parentRecordType) {
      v = this.dc(k, f, v);
      if (!v || !v.ua || !v.ua.recordID) {
        return q.b("CM263 "), Promise.resolve(!1);
      }
      r.parentRecordID = v.ua.recordID;
      a.push(v.ua.recordID);
    }
    var l = [];
    (k = d.properties.fileLinkSelector) && C.query(k).forEach(function(a) {
      var b = e.a(a);
      if (b.recordID != F.G) {
        a = C.ea(a);
        var c = z.Bb(a);
        l.push({redirectRecordID:b.recordID, redirectFieldID:b.fieldID, name:"attachment" + c.extension, format:"File", data:a, fileName:c.fileName, Y:c.extension});
      }
    });
    a = a.concat(z.Za(l.map(function(a) {
      return a.redirectRecordID;
    })));
    d = d.properties.bodySelector;
    k = b;
    if (d && (k = C.hd(d, b), !k)) {
      q.error("CM264 ");
      return;
    }
    l.push({name:"content-format"});
    var g = this.a(k);
    g.fileLinks = l;
    g.path = "body";
    d = this.ta(k, C.da(k), !0, null, null, {fb:!0});
    return Promise.all([c.zc(n, a), ba.queueFileLink({recordID:g.recordID, fieldID:g.K, name:"content-format", data:d, isEncrypted:!0}).then(function() {
      return R.updateRecord(r, [g]);
    })]);
  }, handleSharing:function(a, b, d) {
    console.info("Running sharing rule");
    var e = this;
    b = d.recordSelectors || d.properties.recordSelectors;
    var k;
    b && (k = C.query(b).map(function(a) {
      return e.a(a).recordID;
    }).filter(function(a) {
      if (a != F.G) {
        return a;
      }
    }), k = z.Za(k), console.info("Found records", k), k.length || (k = null));
    a = this.u(a);
    b = this.M(a);
    if (b.isClear && !k) {
      return Promise.resolve(!0);
    }
    var f = [];
    C.query(d.recipientSelectors || d.properties.recipientSelectors, a, !0).forEach(function(a) {
      a = C.da(a);
      f = f.concat(z.xg(a, !0));
    });
    f = z.Za(f);
    console.info("Found recipients", f);
    if (!f.length) {
      return Promise.resolve(!0);
    }
    d = b.ed.recordID;
    a = {propagateSharing:!0};
    a.recipients = f;
    a.recordIDs = k || [d];
    return c.zc(a);
  }, handleRemoveSharing:function(a, b, d) {
    console.info("Running remove sharing rule");
    a = this.u(a);
    b = this.M(a);
    if (b.isClear) {
      return Promise.resolve(!0);
    }
    b = b.ed.recordID;
    d = z.Za(C.query(d.recipientSelectors || d.properties.recipientSelectors, a, !0)).map(function(a) {
      return C.da(a);
    });
    console.info("Found recipients", d);
    return d.length ? c.Ge({recordIDs:[b], propagateSharing:!0}, d) : Promise.resolve(!0);
  }, handleDeleteRecord:function(a, b, c) {
    var d = c.properties.recordType;
    b = (c.properties.recordSelectors || []).map(function(a) {
      return {type:"query", value:a};
    });
    b.concat((c.properties.recordPaths || []).map(function(a) {
      return {type:"xPath", value:a};
    }));
    var e = null, k = this;
    (e = C.query(b, a, !0)) ? e.forEach.call(e, function(a) {
      a = k.a(a);
      a.recordID ? a.recordID != F.G && k.updateRecordStatus(a.recordID, "PENDING", d) : q.b("CM266 ");
    }) : q.b("CM265 " + c.name);
  }, handleCreateFolder:function(a, b, c) {
    function d() {
      this.Xa(f, !1);
      var a = this.sb(I);
      A.yc(a, v);
      k.call(this);
    }
    function e() {
      this.Xa(f, !0);
      k.call(this);
    }
    function k() {
      var a = new window.Event("input");
      I.dispatchEvent(a);
    }
    var f = this.u(b.target), v = this.a(f);
    c = c || v.B;
    var r = c.properties.folderSelector, l = c.properties.depthSelector, g = !!c.properties.replayEvent, I = null;
    try {
      return new Promise(function(c, k) {
        try {
          if (b.sf) {
            return c(!0);
          }
          q.info("CM267 ");
          var f = a.ownerDocument;
          I = f.querySelector(r);
          if (!I) {
            return c(!0);
          }
          var u = d.bind(this), x = e.bind(this);
          debugger;
          E.rd(v, null, C.da(I));
          var m = v.wa;
          if (m.sharingType == n.wd) {
            return q.info("CM268 "), x(), c(!0);
          }
          if (m.inheritRecordID == F.G) {
            var L = 0;
            l && (Array.prototype.forEach.call(f.querySelectorAll(l), function(a) {
              a.offsetParent && L++;
            }), q.info("CM270 " + L));
            if (L) {
              return q.info("CM273 "), x(), c(!0);
            }
            if (this.gc("FOLDER", !0)) {
              return q.warn("CM271 "), x(), c(!0);
            }
            q.info("CM272 ");
            var W = z.Ok().then(function(c) {
              if ("undefined" == typeof c) {
                return !1;
              }
              c ? x() : u();
              g && (c = new window.MouseEvent(b.type), c.sf = !0, a.dispatchEvent(c));
              return !g;
            }.bind(this));
            return g ? c(!1) : W.then(c, k);
          }
          if (this.gc("FOLDER")) {
            return q.warn("CM274 "), c(!1);
          }
          u();
          return c(!0);
        } catch (h) {
          return q.b("CM275 ", h), Promise.resolve(!1);
        }
      }.bind(this));
    } catch (u) {
      q.b("CM276 ", u);
      this.Xa(f, !0);
      return Promise.resolve(!0);
      q.b("CM277 ");
      return Promise.resolve(!1);
    }
  }};
}, {"../components/handler_base":21, "./actionTracker":1, "./app_api":2, "./application":3, "./cache_manager":5, "./clio_sharing":6, "./cloudmask_tokenization":7, "./cmUri":8, "./constants":12, "./elementEvent":13, "./elementNode":14, "./elementPart":15, "./elementRule":16, "./env":17, "./file_handler":18, "./gdrive_sharing":19, "./gmail_sharing":20, "./languageDictionary":23, "./localCache":24, "./log":25, "./messageBrokerBase":26, "./overloadMethods":31, "./overloadProperties":32, "./overloadRules":33,
"./recordRequest":35, "./reservation":36, "./sharing":37, "./sortHandler":38, "./utils":43}], 11:[function(h, B, a) {
  var p = h("./utils"), t = h("./sharing"), w = h("./log").j("CmdaProxy");
  a.ai = function(a) {
    var m = {getElementPart:a.u.bind(a), isFileFeaturesDisabled:a.gc.bind(a), handleFileSelection:a.J.Xi.bind(a.J), showNotification:a.showNotification.bind(a), checkCloudMaskProperty:a.Bf.bind(a), cm:a.Bf.bind(a), addToCloudMaskProperty:a.Lh.bind(a), createRecord:a.createRecord.bind(a), getRecordID:a.ub.bind(a), replaceThumbnail:a.Ig.bind(a), getEmailFromUserID:a.Ei.bind(a), setCurrentPartEnabled:a.Rd.bind(a), setCurrentPartDisabled:a.Ff.bind(a), isPartClearText:a.ig.bind(a), isDisabled:a.A.bind(a),
    getElementRecordID:a.sb.bind(a), releasePartClearTextReference:a.rk.bind(a), commitPart:a.bi.bind(a), showLock:a.showLock.bind(a), disableContentWrapping:a.Ef.bind(a), resetElementPart:a.uk.bind(a), isUsageFull:a.oe.bind(a), share:t.zc, removeSharing:t.Ge, messageBroker:{getRecordRecipients:a.h.getRecordRecipients.bind(a.h)}, utils:{checkApplicationPreferences:p.Xh.bind(null, a.Zk, a.l), showApplicationPreferences:p.Xe.bind(null, a.Zk, a.l)}, logger:{warn:w.warn.bind(w), severe:w.b.bind(w), info:w.info.bind(w),
    debug:w.debug.bind(w)}};
    if (a.aa) {
      for (var e in a.aa) {
        var f = a.aa[e];
        "function" == typeof f && (m[e] = f);
      }
    }
    return m;
  };
}, {"./log":25, "./sharing":37, "./utils":43}], 12:[function(h, B, a) {
  h = {G:9776, Usage:{text:"Text", phone:"Phone", email:"Email", number:"Number", postalcode:"PostalCode", date:"Date", amount:"Amount", recordreference:"RecordReference", file:"File", search:"Search", lookup:"Lookup", subject:"Subject", editfilename:"EditFileName", recipient:"Recipient", folder:"Folder", sharingFolder:"SharingFolder", folderReference:"FolderReference", typeahead:"TypeAHead", applicationReference:"ApplicationReference", body:"Body"}, Rule:{ByPass:[{type:"submit"}, {type:"reset"},
  {type:"password"}, {type:"image"}, {type:"button"}, {type:"checkbox"}, {type:"color"}, {type:"radio"}, {type:"hidden"}, {type:"select-multiple"}, {type:"select-one"}, {maxLength:10}, {name:"username"}, {label:"date"}, {label:"probability"}, {label:"amount"}, {label:"revenue"}]}};
  a.Ga = h;
  a.Usage = h.Usage;
  a.Rule = h.Rule;
  a.hh = ["image/jpeg", "image/gif", "image/png", "image/bmp"];
  a.mf = {wd:"bypass", df:"explicit", jh:"members"};
  a.Dc = {pf:"usageLimitReached", Ia:"modeChanged", lh:"nodeDetected", gf:"partAdded"};
}, {}], 13:[function(h, B, a) {
  function p(a, b, c) {
    u.call(b, a, function(a) {
      c(this, a.detail);
    });
  }
  function t(a, b) {
    var c = a.target, d = b.properties["event.keyCodes"];
    return d && !d.some(function(b) {
      return "string" != typeof b || (b = Number(b.substr(1)), a.ctrlKey || a.metaKey) ? a.keyCode == b : !1;
    }) || b.properties["event.text"] && !l.Bj(c, b.properties["event.text"]) || b.properties["event.target"] && (d = b.properties["event.target"], "string" == typeof d && (d = [d]), !d.some(function(a) {
      return l.matches(a, c);
    })) ? !1 : b.properties["event.heading"] && !l.Aj(b.properties["event.heading"], y.u(c)) || b.properties["event.part"] && !l.exists(b.properties["event.exists"], y.u(c)) || b.properties["event.enabled"] && y.ig(c) || b.properties.runOnce && f.ENV[b.properties.runOnce] ? !1 : !0;
  }
  function w(a) {
    var b = a.action, c = a.properties.appHandler;
    a = a.properties.template;
    c = y.aa && y.aa[c];
    !c && a && (c = (c = y["handle" + a]) && c.bind(y));
    !c && b && (c = eval(g(b)).bind(G));
    return c;
  }
  function g(a) {
    return "(function(target, event, rule, callback) {" + a + "});";
  }
  function m(a, b) {
    return k[(a.tagName || "WINDOW") + ":" + b];
  }
  function e(a, b, c, e, k, f) {
    try {
      f ? (console.log("Event handler proceeding for " + c), a.Ta[e].forEach(function(a) {
        a.call(b, k);
      })) : (d.warn("CM291 " + c), k.preventDefault(), k.stopPropagation());
    } catch (l) {
      d.b("CM292 " + c, l);
    }
  }
  var f = h("./env"), d = h("./log").j("elementEvent"), b = h("./cmda_proxy"), c = h("./overloadRules"), l = h("./elementNode"), E = h("./utils"), x = h("./constants").Dc, y, G, A = [], u, D;
  a.init = function(a) {
    y = a;
    G = b.ai(y);
    u = c.H("EventTarget", "addEventListener", !0);
    D = c.H("EventTarget", "removeEventListener", !0);
  };
  a.Xb = p;
  a.fi = function(a, b, c) {
    D.call(b, a, c);
  };
  a.Pd = function(a, b, c) {
    A.push({name:a, element:b, params:c});
    1 < A.length || setTimeout(function() {
      for (var a = A.length;a;) {
        A.forEach(function(a) {
          var b = new CustomEvent(a.name, {detail:a.params});
          a.element.dispatchEvent(b);
        }), A.splice(0, a), a = A.length;
      }
    }, 5);
  };
  a.Qh = function(a, b) {
    function c(b) {
      var d = b.eventType, e = w(b);
      u.call(a, d, function(c) {
        try {
          t(c, b) && e(a, c, b);
        } catch (d) {
          console.error("Global event action failed", d);
        }
      }, !0);
    }
    function e(a, b) {
      y.a(a);
      try {
        var c = w(b), k = {type:x.lh};
        t(k, b) && E.sc(function() {
          c(a, k, b);
        });
      } catch (f) {
        d.b("CM278 " + b.name, f);
      }
    }
    function k(b) {
      try {
        var c = w(b), e = y.u(a);
        if (!e) {
          throw Error("No part found for action");
        }
        var f = {type:x.Ia};
        p(x.Ia, e, function(d, e) {
          c(a, f, b, e);
        });
        y.od(e, null, c.bind(a, f, b));
      } catch (r) {
        d.b("CM279 " + b.name, r);
      }
    }
    function f(a, b) {
      function c(a, b) {
        if (b && n) {
          return n.call(this, a);
        }
      }
      var e = y.a(a);
      if ("onclick" != b.eventType) {
        d.warn("CM280 " + b.name);
      } else {
        if (!b.action) {
          d.warn("CM281 " + b.name);
        } else {
          if (!e.hj) {
            var k = b.action, n = a.onclick;
            e.hj = !0;
            a.onclick = function(d) {
              var e = eval(g(k)), f = c.bind(a, d);
              (d = e.call(G, a, d, b)) && d.then ? d.then(f) : f(!0);
            };
          }
        }
      }
    }
    b.Ma && (b.Td = b.Td || {}, b.Ma.forEach(function(d) {
      b.Td[d.id] || (b.Td[d.id] = !0, "GlobalEvent" == d.operation ? c(d) : "Custom" == d.operation ? d.properties && d.properties.eventType == x.Ia ? k(d) : -1 < d.name.indexOf("SortButton") ? y.Kh(a, w(d)) : e(a, d) : "onclick" == d.eventType && f(a, d));
    }));
  };
  var k = {"FORM:submit":[], "WINDOW:message":[]};
  a.Xd = m;
  a.Sf = function() {
    return F;
  };
  var F = [{target:"EventTarget", addEventListener:function(a, b, c, k, r, l) {
    try {
      if (this instanceof MessagePort) {
        return b.call(this, c, k, r, l);
      }
      var g = this;
      if (!g || r || a.A()) {
        return b.call(g, c, k, r, l);
      }
      var u = a.a(g), I = m(g, c);
      if (I) {
        I[u.CMKey] = I[u.CMKey] || [], -1 == I[u.CMKey].indexOf(k) ? I[u.CMKey].push(k) : console.warn("Found duplicate event callback", c);
      } else {
        a.qa(g);
        if (!u.Ma) {
          return b.call(g, c, k, r, l);
        }
        u.Ta = u.Ta || {};
        u.Ta[c] = u.Ta[c] || [];
        var x = c;
        f.S() && "touchstart" == x && (x = "click");
        var F = null;
        u.Ma.some(function(a) {
          if ("OverloadEvent" == a.operation && a.eventType == x) {
            return F = a, !0;
          }
        });
        if (!F) {
          return b.call(g, c, k, r, l);
        }
        var h = F.name;
        u.Ta[c].length || b.call(g, c, function(a) {
          try {
            if (t(a, F)) {
              var b = w(F), k = e.bind(null, u, g, h, c, a), f = b(g, a, F);
              if (f && f.then) {
                return f.then(k, function(a) {
                  console.error("Event handler error", a);
                  k(!1);
                });
              }
              k(!0);
            } else {
              console.log("Event being ignored because it failed its conditions as per rule: " + h), e(u, g, h, c, a, !0);
            }
          } catch (n) {
            d.b("CM287 " + h, n);
          }
        }, r, l);
        u.Ta[c].push(k);
      }
    } catch (D) {
      d.b("CM288 ", D);
    }
  }}, {target:"EventTarget", removeEventListener:function(a, b, c, e) {
    try {
      var k = a.a(this), f = m(this, c);
      (f = f && f[k.CMKey]) || (f = k.Ta && k.Ta[c]);
      var l = f ? f.indexOf(e) : -1;
      if (0 <= l) {
        f.splice(l, 1);
      } else {
        return b.call(this, c, e);
      }
    } catch (g) {
      return d.b("CM289 ", g), b.call(this, c, e);
    }
  }}];
}, {"./cmda_proxy":11, "./constants":12, "./elementNode":14, "./env":17, "./log":25, "./overloadRules":33, "./utils":43}], 14:[function(h, B, a) {
  function p(a) {
    return !a.xh && F && window && a.nodeType;
  }
  function t(a) {
    return p(a) ? w(a) : a.value;
  }
  function w(a) {
    if (a instanceof HTMLInputElement) {
      return n ? n.call(a) : a.value;
    }
    if (a instanceof HTMLTextAreaElement) {
      return q ? q.call(a) : a.value;
    }
    if (a.nodeType == Node.ELEMENT_NODE || a.nodeType == Node.TEXT_NODE) {
      return K ? K.call(a) : a.textContent || a.nodeValue;
    }
    if (a.nodeType == Node.ATTRIBUTE_NODE) {
      return a.nodeValue;
    }
    D.error("CM293 ", a);
  }
  function g(a, b) {
    if (a instanceof HTMLInputElement) {
      return !b && n ? n.call(a) : a.value;
    }
    if (a instanceof HTMLTextAreaElement) {
      return !b && q ? q.call(a) : a.value;
    }
    if (a.nodeType == Node.ELEMENT_NODE) {
      return r ? b ? u.Dj().call(a) : r.call(a) : a.innerHTML;
    }
    if (a.nodeType == Node.TEXT_NODE) {
      return !b && K ? K.call(a) : a.textContent || a.nodeValue;
    }
    if (!b && a.nodeType == Node.ATTRIBUTE_NODE) {
      return a.value;
    }
    D.error("CM294 ", a);
  }
  function m(a, b) {
    a instanceof HTMLInputElement ? z ? z.call(a, b) : a.value = b : a instanceof HTMLTextAreaElement ? N ? N.call(a, b) : a.value = b : a.nodeType == Node.ELEMENT_NODE ? H ? H.call(a, b) : a.innerHTML = b : a.nodeType == Node.TEXT_NODE ? C ? C.call(a, b) : a.textContent = b : a.nodeType == Node.ATTRIBUTE_NODE ? a.value = b : D.error("CM295 ", a);
  }
  function e(a) {
    for (var b = new DocumentFragment;a.firstChild;) {
      b.appendChild(a.firstChild);
    }
    return b;
  }
  function f(a, b, c) {
    if (!b.length) {
      return a;
    }
    var d = b.pop(), e = a.childNodes[d];
    if (c) {
      for (e = e || a.firstChild;e.nextSibling;) {
        a.removeChild(e.nextSibling);
      }
      0 > d && (a.removeChild(e), e = null);
    } else {
      for (;e.previousSibling;) {
        a.removeChild(e.previousSibling);
      }
    }
    return f(e, b, c);
  }
  function d(a, b, c) {
    c = c || [];
    if (a == b) {
      return c;
    }
    for (var e = a, k = -1;e;) {
      k++, e = e.previousSibling;
    }
    c.push(k);
    return d(a.parentNode, b, c);
  }
  function b(a, b) {
    return c(a, b).length;
  }
  function c(a, b, c, d) {
    function e(a) {
      return void 0 != this.text && !E(a, this.text) || this.visible && !a.offsetParent || this.matches && !l(this.matches, a) ? !1 : !0;
    }
    b = b || document;
    d = d || e;
    a instanceof Array || (a = [a]);
    var k = [];
    a.some(function(a) {
      var e = b;
      "string" == typeof a && (a = {type:"xPath", value:a});
      a.frame && (e = window[a.frame].document);
      a.value = A.Wc(a.value);
      d = d.bind(a);
      if ("query" == a.type) {
        return a = e.querySelectorAll(a.value), a.length && (k = k.concat(Array.prototype.slice.call(a).filter(d))), !c && a.length;
      }
      a = document.evaluate(a.value, e, null, window.XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);
      if (a.snapshotLength) {
        for (e = 0;e < a.snapshotLength;e++) {
          var f = a.snapshotItem(e);
          d(f) && k.push(f);
        }
      }
      return !c && a.snapshotLength;
    });
    return k;
  }
  function l(a, b) {
    a = A.Wc(a);
    b = b || document;
    return b.matches(a);
  }
  function E(a, b) {
    var c = t(a), c = c && c.trim();
    if (!b && !c) {
      return !0;
    }
    if (!b || !c) {
      return !1;
    }
    "string" == typeof b && (b = [b]);
    return b.some(function(a) {
      a = A.Wc(a);
      return c.match(new RegExp(a, "i"));
    });
  }
  function x(a) {
    return "INPUT" == a.tagName || "TEXTAREA" == a.tagName;
  }
  function y(a) {
    return G(0, "isContentEditable") ? !1 : "BODY" == a.tagName && "on" == a.ownerDocument.designMode || a.isContentEditable || a.nodeType == Node.TEXT_NODE && a.parentNode && a.parentNode.isContentEditable;
  }
  function G(a, b) {
    try {
      return !1;
    } catch (c) {
      return D.b("CM296 " + b), !0;
    }
  }
  h("./utils");
  var A = h("./languageDictionary"), u = h("./overloadRules"), D = h("./log").j("elementNode"), k = h("./localCache").$c;
  a.init = function(a) {
    F = a;
    n = u.get("HTMLInputElement", "value");
    z = u.set("HTMLInputElement", "value");
    q = u.get("HTMLTextAreaElement", "value");
    N = u.set("HTMLTextAreaElement", "value");
    r = u.get("Element", "innerHTML");
    H = u.set("Element", "innerHTML");
    K = u.get("Node", "textContent");
    C = u.set("Node", "textContent");
  };
  a.Te = function(a) {
    return p(a) ? F.Te(a) : (a.fieldID || (a.fieldID = k.ac(a.recordID)), a.fieldID);
  };
  a.ub = function(a, b) {
    return p(a) ? F.sb(a, b) : a.recordID;
  };
  a.Ji = function(a, b) {
    return p(a) ? g(a, b) : a.value;
  };
  a.Fk = function(a, b) {
    return p(a) ? m(a, b) : a.value = b;
  };
  a.cloneRange = function(a, b) {
    var c = a.startContainer == a.endContainer && 0 == a.startOffset && a.endOffset == a.endContainer.childNodes.length, k = b(a.commonAncestorContainer, !c);
    if (c) {
      return e(k);
    }
    var n = d(a.startContainer, a.commonAncestorContainer);
    a.startContainer.nodeType == Node.ELEMENT_NODE && n.unshift(a.startOffset);
    c = n[n.length - 1];
    n = f(k, n, !1);
    a.startContainer.nodeType == Node.TEXT_NODE && n.nodeValue && (n.nodeValue = n.nodeValue.substring(a.startOffset));
    n = d(a.endContainer, a.commonAncestorContainer);
    a.endContainer.nodeType == Node.ELEMENT_NODE && n.unshift(a.endOffset - 1);
    n[n.length - 1] -= c;
    c = f(k, n, !0);
    a.endContainer.nodeType == Node.TEXT_NODE && c.nodeValue && (c.nodeValue = c.nodeValue.substring(0, a.endOffset - 1));
    return e(k);
  };
  a.exists = b;
  a.query = c;
  a.matches = l;
  a.Bj = E;
  a.Aj = function(a, c) {
    a.type || ("string" == typeof a && (a = [a]), a = {type:"query", value:"[role='heading']", text:a});
    return b(a, c);
  };
  var F, n, z, q, N, r, H, K, C;
  a.ea = w;
  a.Ek = function(a, b) {
    C ? C.call(a, b) : a.textContent = b;
  };
  a.da = g;
  a.vc = m;
  a.Wa = function(a, b) {
    H ? H.call(a, b) : a.innerHTML = b;
  };
  a.de = function(a) {
    return r ? r.call(a) : a.innerHTML;
  };
  a.hd = function(a, b) {
    var d = c(a, b, !1, void 0);
    return d && d[0];
  };
  a.hc = x;
  a.fc = function(a) {
    return x(a) || y(a);
  };
  a.isContentEditable = y;
  a.xb = G;
}, {"./languageDictionary":23, "./localCache":24, "./log":25, "./overloadRules":33, "./utils":43}], 15:[function(h, B, a) {
  function p(a, c, d) {
    if (!a.wa || d && d != a.di) {
      a.di = d, d = (c = c || g()) && c.path || w(c, d), a.wa = E.Qi(c, d), b.yc(a.recordID, a);
    }
    return a.wa;
  }
  function t(a, c) {
    if (c = c || b.Vf(a)) {
      var d = [], f;
      for (f in c.recipients) {
        var n = c.recipients[f];
        d.push.apply(d, e.xg(n.value, !1, n.bcc));
      }
      return d.length ? d : null;
    }
  }
  function w(a, c) {
    var d = "/", e = null;
    a && (e = b.Oa(a.recordID, a.fieldID));
    e && (e.properties.folderParents && e.properties.folderParents.forEach(function(a) {
      var c = b.Oa(a.recordID, a.fieldID);
      if (!c) {
        throw Error("Failed to find parent folder in cache, recordID: " + a.recordID);
      }
      d += c.g + "/";
    }), d += e.g + "/");
    c && (d += c + "/");
    return d;
  }
  function g(a) {
    a = a || window;
    for (var b = null, c = 0;G.elementRules && c < G.elementRules.length;c++) {
      var d = G.elementRules[c];
      if (d.format == y.Usage.sharingFolder) {
        for (var e = 0;e < d.conditions.length;e++) {
          var l = d.conditions[e];
          if ("xpath" == l.type && (l = (l = f.query(l.value, a.document)) && l[0])) {
            var q = y.a(l);
            q && (b ? q.recordID && (b = l) : b = l);
          }
        }
      }
    }
    if (!b && a.parent != a) {
      try {
        if (a.parent.document) {
          return g(a.parent);
        }
      } catch (x) {
      }
    }
    if (!b) {
      return null;
    }
    a = y.a(b);
    b = y.M(a.part || y.u(b)).recordID;
    a.recordID && a.recordID != b && console.error("Folder sharing context return a different recordID", b, a.recordID);
    return {recordID:b, fieldID:a && a.fieldID ? a.fieldID : null};
  }
  function m(a, b, c) {
    var e = y.u(a), f = {part:e, ua:y.a(e)};
    b && (f = y.dc(e, f.ua, b));
    f && (A.splice(c, 1), d.Pd(l.gf, a, f));
  }
  var e = h("./utils"), f = h("./elementNode"), d = h("./elementEvent"), b = h("./localCache").V, c = h("./constants").Ga, l = h("./constants").Dc, E = h("./sharing"), x = h("./log").j("ElementPart"), y, G;
  a.init = function(a) {
    y = a;
    G = y.l;
  };
  a.je = function(a) {
    return !a.ownerDocument || !a.ownerDocument.defaultView || !a.ownerDocument.body || a.ownerDocument instanceof window.DocumentFragment || a.ownerDocument instanceof window.XMLDocument ? !1 : (a = a.nodeType == Node.TEXT_NODE ? a.parentNode : a) && (a.ownerDocument.body.contains(a) || a.ownerDocument.body == a || a.ownerDocument.head.contains(a)) ? !0 : !1;
  };
  a.rd = p;
  a.Hk = function(a, c, d, e) {
    if (d.c.properties.recordType && (c = (a = y.dc(a, c, d.c.properties.recordType)) && a.ua, !c)) {
      x.b("CM297 ");
      return;
    }
    c.recipients = c.recipients || {};
    e ? c.recipients[d.CMKey] = {value:e, bcc:d.c.properties.bcc} : delete c.recipients[d.CMKey];
    b.yc(c.recordID, c);
  };
  a.Oi = t;
  a.ci = function(a) {
    var c = p(a), d = c, d = e.Ue(c);
    d.recipients = [];
    d.bccRecipients = [];
    d.isCommitted = !0;
    var f = t(a.recordID, a) || [];
    c.isCommitted = !0;
    c.recipients = [];
    c.bccRecipients = [];
    f.forEach(function(a) {
      d.recipients.push(a.email);
      a.blindFlag && (d.bccRecipients = a.email);
    });
    delete a.recipients;
    b.yc(a.recordID, a);
    return d;
  };
  a.ee = function(a) {
    a = a || g();
    var d = [];
    if (a && a.recordID && a.fieldID && a.recordID != c.G) {
      var e = b.Rc(a.recordID, a.fieldID);
      if (!e) {
        return x.b("CM298 "), d;
      }
      if (!e.usage) {
        return x.b("CM299 "), d;
      }
      e.usage == y.Usage.folder && (e.folderParents && (d = e.folderParents.slice(0)), d.push({recordID:a.recordID, fieldID:a.fieldID}));
    }
    return d;
  };
  a.Rf = g;
  a.Pj = function(a, b, c) {
    var f = {element:a, recordType:b};
    A.push(f);
    d.Xb(l.gf, a, c);
    e.sc(function() {
      var c = A.indexOf(f);
      m(a, b, c);
    });
  };
  var A = [];
  a.Ij = function(a) {
    a.recordType && A.length && e.sc(function() {
      A.forEach(function(a, b) {
        m(a.element, a.recordType, b);
      });
    });
  };
}, {"./constants":12, "./elementEvent":13, "./elementNode":14, "./localCache":24, "./log":25, "./sharing":37, "./utils":43}], 16:[function(h, B, a) {
  var p = h("./constants").Ga;
  a.isReference = function(a) {
    return a == p.Usage.recordreference || a == p.Usage.folderReference;
  };
  a.Qa = function(a) {
    return a == p.Usage.lookup;
  };
}, {"./constants":12}], 17:[function(h, B, a) {
  function p() {
  }
  function t() {
    a.ENV.user && g();
    a.ENV.account && m();
    w();
    a.ENV.cmeMajorVersion = a.ENV.version.split(".")[0];
    a.ENV.agentURL = a.ENV.httpsBaseURL + "/agent";
    a.ENV.savePageURL = a.ENV.agentURL + "/SavePage";
    a.ENV.resolvePageURL = a.ENV.agentURL + "/ResolvePage";
    a.ENV.listAppURL = a.ENV.agentURL + "/listApplications";
    var b = a.ENV.httpsBaseURL.substring(8), b = 0 < b.indexOf(":") ? b.substring(0, b.indexOf(":")) : b;
    a.ENV.Lm = 0 < b.indexOf("/") ? b.substring(0, b.indexOf("/")) : b;
    a.ENV.manageRoot = a.ENV.httpsBaseURL + "/3";
    a.On = [a.ENV.httpsBaseURL];
  }
  function w() {
    a.ENV.securityOfficer = null;
    a.ENV.securityOfficers && (a.ENV.securityOfficers.length ? (a.ENV.securityOfficer = a.ENV.securityOfficers[0], a.ENV.securityOfficers.forEach(function(a) {
      D[a.email] = a;
    })) : a.ENV.securityOfficers = null);
  }
  function g() {
    a.ENV.userId = a.ENV.user.id;
    a.ENV.email = a.ENV.user.email;
    var b = null;
    a.ENV.user.firstName && (b = a.ENV.user.firstName);
    a.ENV.user.lastName && (b || (b = ""), b += " " + a.ENV.user.lastName);
    a.ENV.userName = b;
    a.ENV.status = a.ENV.user.status;
    a.ENV.deviceId || (a.ENV.deviceId = k.deviceId = 0);
    a.ENV.device = a.ENV.user.devices[a.ENV.deviceId];
    a.ENV.distinguishedName = a.ENV.device.dn;
    a.ENV.pendingAuthorization = Boolean(a.ENV.device.pendingAuthorization);
    a.ENV.sharedPendingData = Boolean(a.ENV.device.sharedPendingData);
    a.ENV.serialNumber = a.ENV.serialNumber || "1";
    D[a.ENV.email] = a.ENV.user;
  }
  function m() {
    a.ENV.Ol = a.ENV.account.id;
    a.ENV.wo = !a.ENV.account.em;
  }
  function e(b) {
    return new Promise(function(c) {
      c(a.nc.get(b));
    });
  }
  function f(b, c) {
    return new Promise(function(d, e) {
      a.nc.set(b, c, function(a) {
        if (a) {
          return e(a);
        }
        d();
      });
    });
  }
  function d(a, b) {
    var c = b || k;
    Object.keys(c).forEach(function(b) {
      0 > A.indexOf(b) ? delete k[b] : k[b] = a[b] = c[b];
    });
  }
  function b() {
    var b = a.ENV;
    b.preferencesJSON = null;
    d(b, a.ENV.preferences || {});
    a.ENV.preferencesJSON = k && JSON.stringify(k);
  }
  function c(b, c) {
    var d = {}, e = [];
    b.forEach(function(b) {
      e.push(function(c) {
        a.N.get(b, function(a, e) {
          if (a) {
            return c(a);
          }
          d[b] = e;
          c();
        });
      });
    });
    y.parallel(e, function(a) {
      c(a, d);
    });
  }
  function l(b, c) {
    var d = {};
    b.forEach(function(b) {
      var e = a.cb ? a.cb + b + "JSON" : b + "JSON", f = b + "JSON";
      if (c[e] && c[e].length) {
        var k = JSON.parse(c[e]);
        if ("string" == typeof k) {
          console.warn("Found a double stringified env object");
          try {
            k = JSON.parse(k);
          } catch (n) {
            console.error("Failed to parse (again) env object", n);
          }
        }
        a.ENV[b] = d[b] = k;
        a.ENV[f] = c[e];
      } else {
        d[b] = a.ENV[b] = a.ENV[f] = null;
      }
    });
    return d;
  }
  function E(b) {
    b.forEach(function(b) {
      var c = b + "JSON";
      delete a.ENV[b];
      delete a.ENV[c];
    });
  }
  function x(b) {
    var c = {};
    Object.keys(b).forEach(function(d) {
      var e = a.cb ? a.cb + d + "JSON" : d + "JSON", f = b[d];
      a.ENV[d] = f || null;
      a.ENV[d + "JSON"] = c[e] = f ? JSON.stringify(f) : null;
    });
    return c;
  }
  var y = h("async");
  a.ia = {Cd:1, xd:2, yd:3, Bd:4, $g:5, ih:6, vh:7};
  a.Cd = a.ia.Cd;
  a.xd = a.ia.xd;
  a.yd = a.ia.yd;
  a.Bd = a.ia.Bd;
  a.runtime = null;
  a.Aa = function() {
    return a.runtime == a.ia.Cd;
  };
  a.ra = function() {
    return a.runtime == a.ia.xd;
  };
  a.fa = function() {
    return a.runtime == a.ia.yd;
  };
  a.Vm = function() {
    return a.runtime == a.ia.Bd;
  };
  a.S = function() {
    return a.runtime == a.ia.$g;
  };
  a.Yc = function() {
    return a.runtime == a.ia.ih;
  };
  a.fj = function() {
    return a.Yc() || a.S();
  };
  a.Ra = function() {
    return a.runtime == a.ia.vh;
  };
  a.lg = !1;
  a.ENV = {};
  a.init = function(c, d, e, f) {
    function k() {
      a.N = n;
      var b = h("sdk/system").pathFor("ProfD");
      G.Cg("./cme.json", function(a, c) {
        if (a) {
          return f(a);
        }
        g(c, G.path.join(b, "/.cloudmask"));
      });
    }
    function l() {
      a.N = z;
      a.cb = "cloudmask.extension.";
      G.Cg(c + "/cme.json", function(b, c) {
        if (b) {
          return f(b);
        }
        g(c, a.cb, {extensionID:chrome.runtime.id});
      });
    }
    function g(k, n, l) {
      a.ENV = JSON.parse(k);
      if (e) {
        for (var q in e) {
          a.ENV[q] = e[q];
        }
      }
      var x = a.ENV.openIdProviders;
      x && Object.keys(x).forEach(function(b) {
        x[b].redirectUri && (x[b].redirectUri = x[b].redirectUri.replace("{httpsBaseURL}", a.ENV.httpsBaseURL));
      });
      try {
        var m = localStorage.CM_TEST_VERSION;
      } catch (L) {
        console.error("Test version fetch error", L);
      }
      a.ENV.version = m || h("../package.json").version;
      a.ENV.envJSON = k;
      a.ENV.Kb = n;
      a.ENV.zk = c;
      a.ENV.runtime = d;
      a.ENV.session = l || {};
      a.rc = a.Aa() && a.ENV.zk + "/applications.json";
      a.N.getAll(["preferences", "user", "account", "securityOfficers"], function(c) {
        if (c) {
          return f && f(c);
        }
        try {
          b(), t();
        } catch (d) {
          f(Error("Invalid Profile", d));
        }
        f && f(null, a.ENV);
      });
      return a.ENV;
    }
    e instanceof Function && (f = e, e = null);
    a.runtime = d;
    G = h("./file_utils");
    G.init(a.ia, d);
    if (a.Aa()) {
      a.N = n, c = G.path.normalize(c), g(G.readFileSync(c + "/cme.json"), G.path.normalize((process.env.USERPROFILE || process.env.HOME) + "/.cloudmask"));
    } else {
      if (a.fa()) {
        k();
      } else {
        if (a.ra()) {
          l();
        } else {
          if (a.S()) {
            return a.N = q, g(JSON.stringify(h("../resources/android/cme.json")), "com.cloudmask.cme.");
          }
          if (a.Yc()) {
            return a.N = q, g(JSON.stringify(h("../resources/ios/cme.json")), "com.cloudmask.cme.");
          }
          if (a.Ra()) {
            return a.N = N, g(JSON.stringify(h("../resources/web/cme.json")));
          }
        }
      }
    }
  };
  a.getInstallationDetail = function() {
    var b = {platform:a.ENV.platform, browserType:a.ENV.browserType, browserVersion:a.ENV.browserVersion, cloudmaskVersion:a.ENV.version, id:a.ENV.installationDetailId};
    window && window.navigator && (b.userAgent = window.navigator.userAgent);
    b.nickName = b.browserType + " on " + b.platform;
    a.Ra() && (b.nickName = "Web mode on " + b.nickName);
    return a.S() ? (window.cmProxy.getDeviceDetails(), u.Be.then(function(a) {
      a && (b.deviceDetails = a, b.nickName = a.brand ? a.brand.charAt(0).toUpperCase() + a.brand.slice(1) + " " + a.model : b.nickName);
      return b;
    })) : Promise.resolve(b);
  };
  a.reload = function() {
    return new Promise(function(c, d) {
      a.N.getAll(["preferences", "user", "account", "securityOfficers"], function(e) {
        if (e) {
          return d(e);
        }
        b();
        t();
        c(a.ENV);
      });
    });
  };
  a.Oe = function(b, c, d, e, f, k, n) {
    a.lg = !0;
    a.ENV = JSON.parse(c);
    a.ENV.version = localStorage.CM_TEST_VERSION || h("../package.json").version;
    a.nc.qg(a.ENV, JSON.parse(d));
    a.ENV.user = JSON.parse(e);
    a.ENV.account = JSON.parse(f);
    a.ENV.securityOfficers = JSON.parse(k);
    a.ENV.runtime = n;
    a.runtime = n;
    a.ENV.session = JSON.parse(b);
    t();
    return a.ENV;
  };
  a.ho = t;
  a.ro = g;
  a.$n = m;
  a.mo = function(b) {
    a.ENV.securityOfficers = b;
    w();
    a.N.set("securityOfficers", a.ENV.securityOfficers);
  };
  a.lo = function(b) {
    var c = 0;
    for (c;c < a.ENV.securityOfficers.length && a.ENV.securityOfficers[c].id != b.id;c++) {
    }
    a.ENV.securityOfficers[c] = b;
    w();
    a.N.set("securityOfficers", a.ENV.securityOfficers);
  };
  var G = null, A = "logMode isGmailHelpShown isGDriveHelpShown installationDetailId deviceId enablePeerTrust issuerDN serialNumber enrollment isCredentialExported gmail-feature-1 gmail-feature-2 gmail-feature-3".split(" "), u = {};
  u.Be = new Promise(function(a, b) {
    u.resolve = a;
    u.reject = b;
  });
  window.cmSetDeviceDetails = function(a) {
    u.resolve(a);
  };
  var D = {};
  a.eo = function(b) {
    b.email == a.ENV.user.email || a.ENV.securityOfficer && b.email == a.ENV.securityOfficer.email || (D[b.email] = b);
  };
  a.rm = function(a) {
    return D[a];
  };
  a.Va = function(b, c) {
    var d = b.preferences;
    d && (a.nc.qg(a.ENV, d), b.preferences = k);
    a.N.Va(b, c);
  };
  a.ao = function(b) {
    return new Promise(function(c) {
      a.Va(b, c);
    });
  };
  a.get = function(b) {
    return new Promise(function(c, d) {
      a.N.get(b, function(a, b) {
        if (a) {
          return d(a);
        }
        c(b);
      });
    });
  };
  a.set = function(b, c) {
    return new Promise(function(d, e) {
      a.N.set(b, c, function(a) {
        if (a) {
          return e(a);
        }
        d();
      });
    });
  };
  a.reset = function(b) {
    a.N.removeAll(["preferences", "user", "account", "securityOfficers"], function(c) {
      if (c) {
        return b(c);
      }
      k = {};
      A.forEach(function(b) {
        delete a.ENV[b];
      });
      delete a.ENV.userId;
      delete a.ENV.email;
      delete a.ENV.status;
      delete a.ENV.deviceId;
      delete a.ENV.device;
      delete a.ENV.distinguishedName;
      delete a.ENV.serialNumber;
      b();
    });
  };
  a.Sn = function() {
    var b;
    return e("installationDetailId").then(function(a) {
      b = a;
    }).then(function() {
      return new Promise(function(b) {
        a.reset(b);
      });
    }).then(function() {
      if (b) {
        return f("installationDetailId", b);
      }
    });
  };
  a.Am = e;
  a.no = f;
  var k = {};
  a.nc = {Kn:function() {
    a.N.get("preferences");
    b();
  }, set:function(b, c, d) {
    if (0 > A.indexOf(b)) {
      throw Error("Key (" + b + ") is not a permitted user preference.");
    }
    k[b] = c;
    a.ENV[b] = c;
    a.N.set("preferences", k, d);
  }, get:function(a) {
    return k[a];
  }, qg:function(a, b) {
    d(a, b);
  }};
  var F = {get:function() {
    throw Error("Not implemented");
  }, set:function() {
    throw Error("Not implemented");
  }, remove:function(a, b) {
    return this.set(a, null, b);
  }, getAll:function(a, b) {
    b || (b = p);
    try {
      var c = this, d = a.map(function(a) {
        return new Promise(function(b, d) {
          c.get(a, function(a, c) {
            a ? d(a) : b(c);
          });
        });
      }), e = Promise.all(d);
      e.then(function(b) {
        return b.reduce(function(b, c, d) {
          b[a[d]] = c;
          return b;
        }, {});
      }).then(b.bind(null, null), b);
      return e;
    } catch (f) {
      return b(f), Promise.reject(f);
    }
  }, Va:function(a, b) {
    b || (b = p);
    try {
      var c = this, d = Object.keys(a).map(function(b) {
        var d = a[b];
        return new Promise(function(a, e) {
          c.set(b, d, function(b) {
            b ? e(b) : a();
          });
        });
      }), e = Promise.all(d);
      e.then(b.bind(null, null), b);
      return e;
    } catch (f) {
      return b(f), Promise.reject(f);
    }
  }, removeAll:function(a, b) {
    b || (b = p);
    try {
      var c = a.reduce(function(a, b) {
        a[b] = null;
        return a;
      }, {});
      return this.Va(c, b);
    } catch (d) {
      return b(d), Promise.reject(d);
    }
  }}, n = {set:function(b, c, d) {
    a.ENV[b] = c;
    a.ENV[b + "JSON"] = c ? JSON.stringify(c) : null;
    G.writeFileSync(a.ENV.Kb + "/" + b + ".json", a.ENV[b + "JSON"]);
    d && d();
  }, get:function(b, c) {
    try {
      if (!a.ENV[b + "JSON"]) {
        var d = G.readFileSync(a.ENV.Kb + "/" + b + ".json");
        d.length && (a.ENV[b + "JSON"] = d, a.ENV[b] = JSON.parse(a.ENV[b + "JSON"]));
      }
      c(null, a.ENV[b]);
    } catch (e) {
      a.ENV[b + "JSON"] = null, a.ENV[b] = null, console.log("Failed to find JSON for: " + b, e), c(null, a.ENV[b]);
    }
  }, getAll:c, Va:function(a, b) {
    Object.keys(a).forEach(function(b) {
      n.set(b, a[b]);
    });
    b && b();
  }, removeAll:function(b, c) {
    var d = [];
    b.forEach(function(b) {
      var c = a.ENV.Kb + "/" + b + ".json";
      d.push(function(a) {
        G.Pn(c, function() {
          console.log("File: " + c + " successfully removed");
          a();
        }, function(b) {
          console.error("Failed to remove file: " + c, b);
          a(b);
        });
      });
    });
    y.parallel(d, function(a) {
      if (a) {
        return c && c(a);
      }
      E(b);
      c && c();
    });
  }}, z = {get:function(a, b) {
    z.getAll([a], function(c, d) {
      b(c, d[a]);
    });
  }, set:function(a, b, c) {
    var d = {};
    d[a] = b;
    z.Va(d, c);
  }, remove:function(a, b) {
    z.removeAll([a], b);
  }, getAll:function(b, c) {
    var d = {}, e = !0, f = [];
    b.forEach(function(b) {
      a.ENV.hasOwnProperty(b) ? d[b] = a.ENV[b] : e = !1;
      f.push(a.cb + b + "JSON");
    });
    e && c(null, d);
    chrome.storage.local.get(f, function(a) {
      if (chrome.runtime.lastError) {
        return console.log("Failed to fetch " + f + " from storage, error: " + chrome.runtime.lastError), c(chrome.runtime.lastError);
      }
      d = l(b, a);
      c(null, d);
    });
  }, Va:function(a, b) {
    var c = x(a);
    chrome.storage.local.set(c, function() {
      if (chrome.runtime.lastError) {
        return console.log("Failed to set multiple elements to storage, error: " + chrome.runtime.lastError), b && b(chrome.runtime.lastError);
      }
      b && b();
    });
  }, removeAll:function(b, c) {
    var d = [];
    b.forEach(function(b) {
      d.push(a.cb + b + "JSON");
    });
    chrome.storage.local.remove(d, function() {
      if (chrome.runtime.lastError) {
        return console.log("Failed to remove " + d + " from storage, error: " + chrome.runtime.lastError), c && c(chrome.runtime.lastError);
      }
      E(b);
      c && c();
    });
  }}, q = {get:function(b, c) {
    if (!a.ENV[b]) {
      var d = window.localStorage[a.ENV.Kb + b + "JSON"];
      a.ENV[b + "JSON"] = d ? d : null;
      a.ENV[b] = d ? JSON.parse(d) : null;
    }
    c(null, a.ENV[b]);
  }, set:function(b, c, d) {
    a.ENV[b] = c ? c : null;
    a.ENV[b + "JSON"] = JSON.stringify(c);
    c ? window.localStorage[a.ENV.Kb + b + "JSON"] = a.ENV[b + "JSON"] : delete window.localStorage[a.ENV.Kb + b + "JSON"];
    d && d();
  }, remove:function(a, b) {
    this.set(a, null, b);
  }, getAll:c, Va:function(a, b) {
    Object.keys(a).forEach(function(b) {
      this.set(b, a[b]);
    }.bind(this));
    b && b();
  }, removeAll:function(a, b) {
    a.forEach(function(a) {
      this.set(a, null);
    }.bind(this));
    b && b();
  }}, N = function() {
    function b() {
      function a() {
        console.debug("Trying to open env db");
        var b = window.indexedDB.open("env", 2);
        b.addEventListener("upgradeneeded", e);
        b.addEventListener("blocked", f);
        b.addEventListener("error", n);
        b.addEventListener("success", d);
        b.addEventListener("abort", k);
      }
      function d(a) {
        console.debug("env db onsuccess");
        c.db = a.target.result;
        c.resume();
      }
      function e(a) {
        console.debug("env db onupgradeneeded");
        a.target.result.createObjectStore("objects");
      }
      function f() {
        console.warn("env db blocked, trying again");
        a();
      }
      function k() {
        console.warn("env db onabort, trying again");
        a();
      }
      function n(a) {
        console.error("Could not open env db", a.target.error);
        throw a.target.error || Error("error opening env db");
      }
      a();
    }
    var c = new (h("./cm_indexeddb").fh), d = Object.create(F);
    d.get = function(d, e) {
      e || (e = p);
      a.ENV[d] ? e(null, a.ENV[d]) : (c.Id({stores:["objects"], operations:[{operation:"get", arguments:[d], events:{success:function(b) {
        b = b.target.result;
        a.ENV[d] = b;
        e(null, b);
      }, error:function(a) {
        e(a.target.error);
      }}}]}), c.db || b());
    };
    d.set = function(d, e, f) {
      f || (f = p);
      a.ENV[d] = e;
      c.Id({stores:["objects"], mode:"readwrite", operations:[{operation:"put", arguments:[e, d], events:{success:function(a) {
        f(null, a.target.result);
      }, error:function(a) {
        f(a.target.error);
      }}}]});
      c.db || b();
    };
    return d;
  }();
}, {"../package.json":45, "../resources/android/cme.json":46, "../resources/ios/cme.json":47, "../resources/web/cme.json":48, "./cm_indexeddb":9, "./file_utils":44, async:void 0, "sdk/system":void 0}], 18:[function(h, B, a) {
  function p() {
  }
  function t() {
    var a = this;
    return [{target:["Blob", "File"], slice:function(b, c, d, e, f) {
      try {
        return m.info("CM314 "), a.slice(this, c, d, e, f);
      } catch (l) {
        m.b("CM315 ", l);
      }
    }}, {target:"File", optional:!0, mozSlice:function(b, c, d, e, f) {
      try {
        return m.info("CM316 "), a.slice(this, c, d, e, f);
      } catch (l) {
        m.b("CM317 ", l);
      }
    }}, {target:"FormData", append:function(b, c, d, e, f) {
      try {
        m.info("CM318 ");
        var l = Array.prototype.slice.call(arguments, 2);
        if (b.A()) {
          return c.apply(this, l);
        }
        var g = b.a(this);
        g.Pb || (g.Pb = [], g.ug = 0);
        g.Pb.push({value:e, name:d, filename:f});
        if (a.wb(e) || a.isFile(e)) {
          g.ug++;
        } else {
          return c.apply(this, l);
        }
      } catch (x) {
        m.b("CM319 ", x);
      }
    }}, {target:"FileReader", readAsArrayBuffer:function(b, c, d) {
      try {
        m.info("CM320 "), a.getData(d, function(a, b) {
          a || c.call(this, b);
        }.bind(this));
      } catch (e) {
        m.b("CM321 ", e);
      }
    }}, {target:"FileReader", readAsText:function(b, c, d, e) {
      try {
        m.info("CM322 "), a.getData(d, function(a, b) {
          a || c.call(this, b, e);
        }.bind(this));
      } catch (f) {
        m.b("CM323 ", f);
      }
    }}, {target:"FileReader", readAsBinaryString:function(b, c, d) {
      try {
        m.info("CM324 "), a.getData(d, function(a, b) {
          a || c.call(this, b);
        }.bind(this));
      } catch (e) {
        m.b("CM325 ", e);
      }
    }}, {target:"FileReader", readAsDataURL:function(b, c, d) {
      try {
        m.info("CM326 "), a.getData(d, function(a, b) {
          a || c.call(this, b);
        }.bind(this));
      } catch (e) {
        m.b("CM327 ", e);
      }
    }}, {target:"DataTransferItem", getAsFile:function(a, b) {
      var c = b.call(this);
      a.Vc(this) && (a.a(c).part = a.a(this).part);
      return c;
    }}, {target:"DataTransferItem", webkitGetAsEntry:function(a, b) {
      console.log("webkitGetAsEntry called", this);
      var c = b.call(this);
      if (c && c.isFile) {
        var d = this.getAsFile().name, c = Object.create(Object.getPrototypeOf(c), {name:{value:d}, fullPath:{value:c.fullPath.substring(0, c.fullPath.lastIndexOf(c.name)) + d}, isFile:{value:!0}, isDirectory:{value:!1}, filesystem:{value:c.filesystem}})
      }
      return c;
    }}];
  }
  function w(a) {
    var b = this.i.a(a);
    return g.call(this, a, b).then(function(b) {
      var c;
      if (a.type || a.lastModifiedDate || a.lastModified) {
        c = {lastModified:a.lastModified || a.lastModifiedDate, type:a.type};
      }
      return new File([b], a.name, c);
    });
  }
  function g(a, b) {
    var c = this;
    b || (b = this.i.a(this.i.a(a).Ac));
    return new Promise(function(d, e) {
      c.save(null, a, b, function(a, b) {
        a ? e(a) : d(b);
      });
    });
  }
  var m = h("./log").j("FileHandler"), e = h("./env"), f = h("./utils"), d = h("./localCache").V, b = h("./localCache").$c, c = h("./overloadRules"), l = h("./elementPart"), E = h("./constants").Ga, x = h("./recordRequest");
  a.gh = p;
  a.Sf = t;
  var y, G, A, u, D;
  p.prototype = {init:function(a) {
    this.i = a;
    this.h = a.h;
    a.h.tb();
    this.s = a.l.option.properties.limitFileUsage;
    u = c.get("Blob", "size");
    D = c.get("File", "name");
    y = c.H("FormData", "append") || FormData.prototype.append;
    G = c.H("File", "slide") || c.H("Blob", "slide") || File.prototype.slice || Blob.prototype.slice;
    A = c.H("FileReader", "readAsArrayBuffer") || FileReader.prototype.readAsArrayBuffer;
  }, ke:function(a, b) {
    b = b || e.ra() && Object.prototype.toString.call(a);
    if (a instanceof window.FormData || "[object FormData]" == b) {
      return "FormData";
    }
  }, isFile:function(a, b) {
    b = b || e.ra() && Object.prototype.toString.call(a);
    if (a instanceof window.File || "[object File]" == b) {
      return "File";
    }
  }, wb:function(a, b) {
    b = b || e.ra() && Object.prototype.toString.call(a);
    if (a instanceof window.Blob || "[object Blob]" == b) {
      return "Blob";
    }
  }, gj:function(a) {
    var b = e.ra() && Object.prototype.toString.call(a);
    return this.ke(a, b) || this.wb(a, b) || this.isFile(a, b);
  }, Sk:function(a, b) {
    var c = this.i;
    if (c.A()) {
      return b.call(a);
    }
    var d;
    if (!c.J.isFile(a)) {
      return d = c.a(a), d.Ac ? d.Ac.size : b.call(a);
    }
    d = c.a(a);
    if (!d.part) {
      return !0;
      throw Error("File size getter called without a part");
    }
    return c.M(d.part).isClear ? b.call(a) : c.J.Qf(a);
  }, Ej:function(a, b) {
    var c = this.i;
    return c.A() ? b.call(a) : c.J.ud(a);
  }, Xi:function(a, b, c) {
    for (var d = 0, e = 0;e < a.length;e++) {
      var f = a[e], l = this.i.a(f);
      l.part = b;
      this.ud(f, l);
      this.Qf(f);
      this.ae(null, f, l, function(b, e) {
        b || (l.size = e.size, d++, d == a.length && c(!0));
      }.bind(this));
    }
  }, Qf:function(a) {
    m.debug("CM300 ");
    var b = this.i.a(a);
    if (b.size) {
      return b.size;
    }
    this.ud(a, b);
    b.Sj = u.call(a);
    b.size = this.h.be(a.type ? a.type : b.Y, b.Sj, b.recordID);
    m.info("CM301 " + b.size);
    return b.size;
  }, ud:function(a, c) {
    m.debug("CM302 ");
    var e = this.i, g = c || e.a(a);
    if (g.token) {
      return g.token + g.Y;
    }
    if (e.A()) {
      return D.call(a);
    }
    if (!g.part) {
      m.error("CM303 ");
      return D.call(a);
      throw Error("TokenizeFileName called without a part");
    }
    var q = e.M(g.part);
    if (q.isClear) {
      return D.call(a);
    }
    var x = q.ed, h = null, h = x.bg ? x.recordID : e.createRecord();
    m.debug("CM304 " + h);
    var u = b.ac(h);
    g.recordID = h;
    g.fieldID = u;
    g.usage = E.Usage.file;
    g.isFile = !0;
    var y = f.Bb(D.call(a));
    g.Y = y.extension;
    x.bg || e.Dk(g.part, g, "attachment" + g.Y);
    g.name = y.name;
    g.folderParents = l.ee(q.qj);
    g.folderParents.forEach(function(a) {
      a.part = null;
    });
    g.wa = l.rd(g, x);
    g.token = "RANDOM_UNICODE" == e.l.Nc ? e.ib.O(g.name, h, u, g) : e.mask.Tb(E.Usage.file, h, u);
    d.Ob(h, u, g.name, g);
    return g.token + g.Y;
  }, Ui:function(a, b, c) {
    var d = this.i, e = d.a(b), f = e.Pb;
    if (!f || !f.length) {
      return m.warn("CM305 "), c();
    }
    var l = e.ug, g = !1;
    f.forEach(function(e) {
      if (this.isFile(e.value) || this.wb(e.value)) {
        var f = d.a(e.value);
        f.si = {name:e.name, filename:e.value.name};
        f.recordID && f.recordID != E.G ? (e.fileName && e.fileName != f.name + f.Y && m.b("CM307 "), this.he(a, e.value, function(a, d, e) {
          y.call(b, e.name, d, e.filename);
          l--;
          (a || g && !l) && c(a);
        })) : (y.call(b, e.name, e.value, e.filename), l--, m.warn("CM306 "));
      }
    }.bind(this));
    d.vb(b, function() {
      (g = !0, !l) && c(void 0);
    });
  }, he:function(a, b, c) {
    m.info("CM308 ");
    var d = this.i.a(b), e = b, f = d, l = c;
    this.isFile(b) || (e = d.Ac, f = this.i.a(e), l = this.Si.bind(this, b, d, e.type, c), a = null);
    this.save(a, e, f, l);
  }, Si:function(a, b, c, d, e, f) {
    if (e) {
      return d(e);
    }
    try {
      d(null, G.call(f, b.start, b.end, c));
    } catch (l) {
      m.b("CM309 ", l), d(l);
    }
  }, save:function(a, b, c, d) {
    if (c.oi) {
      return this.ae(a, b, c, d);
    }
    var e = this;
    e.i.l.option.Dh && (c.fileLinks = [{name:"attachment" + c.Y}]);
    x.saveFileName(c, c.wa, e.s).then(function() {
      c.oi = !0;
      e.ae(a, b, c, d);
    }).catch(d);
  }, Ti:function(a) {
    if (this.isFile(a)) {
      return w.call(this, a);
    }
    if (this.wb(a)) {
      return g.call(this, a);
    }
    console.warn("File Hanlder clone called without a file or blob");
    return a;
  }, Gi:function(a, b) {
    a.folderParents && a.folderParents.length && !a.recipients ? this.h.getRecordRecipients(a.folderParents[a.folderParents.length - 1].recordID, function(c) {
      a.recipients = c;
      b(a);
    }) : b(a);
  }, ae:function(a, b, c, d) {
    m.debug("CM310 ");
    if (c.Sd) {
      return d(null, c.Sd);
    }
    if (a && this.h.lj) {
      return a.setRequestHeader("X-CloudMask-FilePost", c.token + c.Y + "," + c.name + c.Y + "," + c.recordID), d(null, b);
    }
    this.Gi(c, function(a) {
      this.ki(b, a, d);
    }.bind(this));
  }, getData:function(a, b) {
    var c = this.i, d = this.i.a(a);
    if (c.A() || this.dg(a)) {
      return b(null, a);
    }
    this.isFile(a) && this.ud(a, d);
    this.he(null, a, b);
  }, ki:function(a, c, d) {
    function f(a) {
      return e.fa() ? new DataView(a) : a;
    }
    this.mk(a, function(e, l) {
      if (e) {
        return d(e);
      }
      var g = a.type ? a.type : c.Y, x = c.si, g = {recordID:c.recordID, fieldID:c.fieldID, lastFieldID:b.get(c.recordID), type:g, recipients:c.recipients, extension:c.Y, linkName:c.fileLinks && c.fileLinks[0].name};
      this.h.encryptFileContent(g, f.call(this, l), function(e, f, l) {
        if (e) {
          return d(e);
        }
        f && (b.set(c.recordID, f.lastFieldID), c.metaData = f.metaData, c.pendingDataElements = [], f.dataElements.forEach(function(a) {
          a.value && (a.value = atob(a.value));
          c.pendingDataElements.push(a);
        }));
        c.Sd = new Blob([l], {type:a.type});
        d(null, c.Sd, x);
      }.bind(this));
    }.bind(this));
  }, mk:function(a, b) {
    var c = new FileReader;
    c.onload = function() {
      try {
        if (!c.result) {
          return b(Error("Failed to read file/blob content"));
        }
        m.debug("CM311 " + c.result.length);
        b(null, c.result);
      } catch (a) {
        m.b("CM312 ", a), b(a);
      }
    }.bind(this);
    A.call(c, a);
  }, Zl:function(a, b, c) {
    this.h.decryptFileContent(b, a, function(a, b, d) {
      if (a) {
        return c(a);
      }
      c(null, d);
    });
  }, slice:function(a, b, c, d, e) {
    var f = this.i.a(a);
    if (this.i.A() || this.dg(a, f)) {
      return b.call(a, c, d, e);
    }
    m.debug("CM313 " + c + ", end " + d);
    b = new Blob([""], {type:e || a.type});
    e = this.i.a(b);
    e.recordID = f.recordID;
    e.fieldID = f.fieldID;
    e.isFile = f.isFile;
    e.Y = f.Y;
    e.name = f.name;
    e.folderParents = f.folderParents;
    e.Ac = a;
    e.token = f.token;
    e.start = c;
    e.end = d;
    return b;
  }, dg:function(a, b) {
    var c = this.i;
    b = b || c.a(a);
    if (!this.isFile(a) && !b.Ac) {
      return !0;
    }
    if (!b.part) {
      return !0;
      throw Error("isClearSource called without a part");
    }
    return c.M(b.part).isClear;
  }, Wj:function() {
    return t.call(this);
  }};
}, {"./constants":12, "./elementPart":15, "./env":17, "./localCache":24, "./log":25, "./overloadRules":33, "./recordRequest":35, "./utils":43}], 19:[function(h, B, a) {
  function p() {
    var a = window.top, b = a.document.querySelectorAll(y);
    console.log("Found selected", b);
    var c = [];
    Array.prototype.forEach.call(a.document.querySelectorAll(G), function(a) {
      a.offsetParent && Array.prototype.some.call(b, function(b) {
        if (b.contains(a)) {
          return c.push(x.ub(a)), !0;
        }
      });
    });
    !c.length && (a = a.document.querySelector(A)) && (console.warn("Selected fallback", a), c.push(x.ub(a)));
    console.warn("Number of selected items: " + c.length);
    return c;
  }
  function t() {
    var a = g(), b = E.ea(a);
    if (k) {
      if (F != a) {
        console.warn("Speakable element has changed"), k.disconnect(), F = k = null;
      } else {
        return;
      }
    }
    F = a;
    k = new MutationObserver(function(c) {
      c.some(function() {
        var c = E.ea(a);
        b != c && (b = c, w(b));
      });
    });
    k.observe(a, {characterData:!0, childList:!0, subtree:!0});
  }
  function w(a) {
    var b = document.querySelectorAll(u), c = m(a);
    Array.prototype.some.call(b, function(b) {
      var d = E.ea(b);
      if (-1 < b.parentElement.className.indexOf("apps-share-chips-chip-warning")) {
        console.error("Found warning in recipient chip " + d);
      } else {
        b = x.a(b);
        if (b.email) {
          return b.email == c && console.warn("Speakable change is a duplicate: " + a), b.email == c;
        }
        console.warn("Adding email from speakable : " + c);
        b.email = c;
        return !0;
      }
    }) || console.warn("Ignoring speakable change: " + a);
  }
  function g() {
    var a = null;
    D.some(function(b) {
      var c = document, d = b;
      "object" == typeof b && (d.top && (c = window.top.document), d = b.Ak);
      a = c.querySelector(d);
      return !!a;
    });
    return a;
  }
  function m(a) {
    return (a = a.match(/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/gi)) && a[0] && a[0].toLowerCase();
  }
  function e() {
    var a = document.querySelectorAll(u), b = [];
    a.length && Array.prototype.forEach.call(a, function(a) {
      var c = E.ea(a);
      if (-1 < a.parentElement.className.indexOf("apps-share-chips-chip-warning")) {
        console.warn("Found warning in the recipient chip " + c);
      } else {
        var e = x.a(a);
        if (e.email) {
          d.$(b, e.email);
        } else {
          var f = c.match(/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/gi);
          f && f[0] ? (a = f[0].toLowerCase(), 0 <= b.indexOf(a) ? console.error("Detected duplicate email", a) : (e.email = a, d.$(b, e.email), console.warn("Adding email from chips " + e.email + " for " + c))) : console.error("Found no email for recipients ", a);
        }
      }
    });
    console.warn("The recipients", b);
    return b;
  }
  function f(a, d, e) {
    if (!d.length) {
      return console.warn("No recipients found for sharing"), x.Se(a, !0, !0), Promise.resolve(!0);
    }
    var f = {propagateSharing:!0};
    e.length ? (console.info("Sharing found selected ids", e), f.recordIDs = e.filter(function(a) {
      return a && a != l.G;
    })) : (e = c.Rf(), e.recordID && e.recordID != l.G && (console.info("Sharing did not find selected IDs, using current context"), f.recordIDs = [e.recordID]));
    if (!f.recordIDs) {
      return console.warn("Sharing did not find any protected record to share"), x.Se(a, !0, !0), Promise.resolve(!0);
    }
    f.recipients = d;
    x.Se(a, !1, !0, f);
    console.warn("Sharing " + f.recordIDs + " with recipients " + f.recipients);
    return b.zc(f);
  }
  h("./env");
  h("./log").j("gdrive_sharing");
  var d = h("./utils"), b = h("./sharing"), c = h("./elementPart"), l = h("./constants").Ga, E = h("./elementNode"), x;
  a.init = function(a) {
    x = a;
  };
  a.onCreateFolder = function(a, b, c) {
    return "BUTTON" == b.target.tagName ? (b.target.click(), Promise.resolve(!1)) : x.handleCreateFolder(a, b, c);
  };
  a.onSpeakable = function() {
    t();
    return Promise.resolve(!0);
  };
  a.onSharing = function(a) {
    var b = e(), c = p();
    console.log("Gdrive event. (focus, active)", document.hasFocus(), document.activeElement == a);
    return f(a, b, c);
  };
  a.onRemove = function() {
    var a = {propagateSharing:!0}, e = p();
    e.length ? a.recordIDs = e.filter(function(a) {
      return a != l.G;
    }) : (e = c.Rf(), e.recordID != l.G && (a.recordIDs = [e.recordID]));
    if (!a.recordIDs) {
      return console.warn("Removing without any protected records"), Promise.resolve(!0);
    }
    var f = [], e = window.document.querySelectorAll(".scope-icon-holder.scope-icon-disabled");
    console.warn("Found remove recipients nodes", e);
    Array.prototype.forEach.call(e, function(a) {
      a = E.ea(a.parentElement.lastChild.lastChild);
      d.$(f, a);
    });
    a.recipients = f;
    console.warn("Removing " + f + " from " + a.recordIDs);
    return b.Ge(a);
  };
  var y = ".a-Wa-ka[aria-selected=true]", G = ".l-Ab-T-r", A = ".drive-viewer-toolstrip-name", u = ".apps-share-chips-chip-content", D = [{top:!0, Ak:"#docs-aria-speakable"}, "#sharing-aria-speakable"], k = null, F = null;
}, {"./constants":12, "./elementNode":14, "./elementPart":15, "./env":17, "./log":25, "./sharing":37, "./utils":43}], 20:[function(h, B, a) {
  h("./base64");
  h("./log").j("gmail_sharing");
  var p = h("./utils");
  h("./app_api");
  h("./env");
  h("./overloadRules");
  h("./sharing");
  var t = h("./elementEvent"), w = h("./elementNode"), g = h("./constants").Dc, m;
  a.init = function(a) {
    m = a;
    m.h.tb();
  };
  a.Oc = function() {
    return (void 0).Oc();
  };
  a.Md = function() {
    return (void 0).Md();
  };
  var e, f;
  a.onFeature1 = function(a, b, c) {
    e = c.id;
    return m.handleShowOverlay(a, b, c).then(function(b) {
      e = null;
      p.setPreference(c.properties.runOnce, !0);
      "proceed" == b.toLowerCase() && (m.Rd(), a.dispatchEvent(new MouseEvent("mousedown")), a.dispatchEvent(new MouseEvent("mouseup")));
    });
  };
  a.onFeature2 = function(a, b, c) {
    if (!f) {
      return m.handleAddNode(a, b, c).then(function(a) {
        f = a;
        a.querySelector("#cm-btn").addEventListener("click", function() {
          p.setPreference(c.properties.runOnce, !0);
          e && p.tk(e);
          f.parentNode.removeChild(f);
        });
      });
    }
  };
  a.onAddToolbar = function(a, b, c) {
    var e = c.properties.isNewSelector, f = c.properties.fileLinkSelector;
    return m.handleAddNode(a, b, c).then(function(b) {
      var c = m.u(a), h = b.querySelector("#cm-switch-text"), p = b.querySelector("#cm-switch-checkbox");
      p.addEventListener("click", function(a) {
        w.hd(f, c) ? (m.showNotification("MODE_SWITCH_FILE_EXISTS"), a.preventDefault(), a.stopPropagation()) : m.ld(c, !p.checked);
      });
      t.Xb(g.Ia, c, function(a, d) {
        var f = w.hd(e, c);
        d.isClear ? f && (h.innerText = "Click to turn on CloudMask", b.style.backgroundColor = "#939292", p.checked = !1, b.style.display = "flex") : (h.innerText = "CloudMask protection is On", b.style.backgroundColor = "#629bd3", p.checked = !0, b.style.display = "flex", f || (p.disabled = !0));
      });
      m.od(c);
    });
  };
}, {"./app_api":2, "./base64":4, "./constants":12, "./elementEvent":13, "./elementNode":14, "./env":17, "./log":25, "./overloadRules":33, "./sharing":37, "./utils":43}], 21:[function(h, B, a) {
  function p(a, b, c) {
    l[a + (c ? ":" + c : "")] = b;
  }
  function t(a, b) {
    return new (l[a + ":" + b] || l[a] || w)(a, b);
  }
  function w(a, b) {
    this.usage = a;
    this.$e = b;
  }
  function g(a, b) {
    w.apply(this, arguments);
  }
  function m(a, b) {
    g.apply(this, arguments);
  }
  function e(a, b) {
    w.apply(this, arguments);
  }
  var f = h("./log").j("handler"), d = h("./constants").Usage, b = h("./tokenizer"), c, l = {};
  a.Ee = p;
  a.j = t;
  var E, x, y, G, A;
  a.init = function(a, d, e, f, l, g, m, p) {
    c = a;
    E = d;
    y = f;
    x = e;
    G = g;
    A = p;
    b.init(l, g, m, p);
    h("./handler_mail").init(E, x, y, G, A);
  };
  a.O = function(a, b, c, e, l) {
    var g = l && l.$e, x = l && l.fm, h = c.usage;
    h == d.subject && x && (h = d.text, f.warn("CM338 "));
    g = t(h, g);
    l = {Tl:e, options:l};
    g.qd(l, b, c);
    g.Qe(l, c);
    x = g.O(l, b, a, c);
    a = g.bb(l, a);
    e && (e.Kc && g.Hd(l, a, c, e.Kc), e.kd && g.yf(l, b, a, c, e.kd));
    return x;
  };
  a.xk = function(a) {
    return b.resolve(a, function() {
    }).value;
  };
  a.resolve = function(a, c, d, e) {
    var f = !1, l = !1;
    d = b.resolve(a, function(a, b, d, k, g) {
      f = !0;
      b && (l = l || !!d || "" === d, e && e.wc && e.wc(c, b, a), d || "" === d || (d = [], g && (d = g.slice(0)), d.push(c), e && e.Le && e.Le(a, b, d)));
    }, c, d);
    a = d.value;
    d = d.state;
    l && A(c, a);
    return {state:d, hg:f};
  };
  a.Pg = function(a, c) {
    var e = null;
    b.resolve(a, function(a, b, l, g) {
      if (!g) {
        return f.warn("CM339 " + a + ", " + b);
      }
      if (g.usage == d.recordreference || g.usage == d.folderReference || g.usage == d.search) {
        return f.warn("CM340 " + a + ", " + b);
      }
      if (!g.pe) {
        return f.warn("CM341 " + a + ", " + b);
      }
      if (!l && "" !== l) {
        return f.warn("CM342 " + a + ", " + b);
      }
      e || (e = g);
      c(null, l, g);
    });
  };
  a.nd = function(a) {
    var c = [];
    b.resolve(a, function(a, b) {
      c.push({recordID:Number(a), fieldID:Number(b)});
    });
    return c;
  };
  a.transformNode = function(a) {
    return t("Text", "fragment").transformNode({}, a);
  };
  a.Jb = function(a) {
    return t("Text", "fragment").Jb(a);
  };
  a.wrapData = function() {
    var a = t("Text", "fragment");
    return a.wrapData.apply(a, arguments);
  };
  a.Lb = w;
  w.prototype.qd = function(a, b) {
    a.recordID = G(b);
    a.fieldID = x(b);
  };
  w.prototype.Qe = function(a, b) {
    a.algorithm = b.c && b.c.algorithm ? b.c.algorithm : c;
  };
  w.prototype.O = function(a, c, d, e) {
    a.token = b.O(a.algorithm, d, a.recordID, a.fieldID, e);
    return a.token;
  };
  w.prototype.Hd = function(a, b, c, d) {
    d(a.recordID, a.fieldID, b, c);
  };
  w.prototype.yf = function(a, b, c, d, e) {
    e(b, c, d);
  };
  w.prototype.bb = function(a, b) {
    return b;
  };
  a.ul = g;
  p(d.recordreference, g);
  g.prototype = Object.create(w.prototype);
  g.prototype.qd = function(a, b, c) {
    a.recordID = c.recordID;
    a.fieldID = c.fieldID;
  };
  g.prototype.O = function(a, b, c, d) {
    return d.token;
  };
  g.prototype.Hd = function() {
  };
  a.sl = m;
  p(d.folderReference, m);
  m.prototype = Object.create(g.prototype);
  a.rl = e;
  p(d.folder, e);
  e.prototype = Object.create(w.prototype);
}, {"./constants":12, "./handler_mail":22, "./log":25, "./tokenizer":40}], 22:[function(h, B, a) {
  function p(a, b) {
    u.Lb.apply(this, arguments);
    this.prefix = H.prefix;
    this.Ea = H.Ea;
    this.za = H.za;
  }
  function t() {
    this.prefix = H.prefix;
    this.kb = new k.th(arguments);
    this.kb.$a = m;
    this.kb.Ha = p.prototype.Ha;
    this.Qb = new k.sh(arguments);
    this.Qb.$a = g;
    this.og = p.prototype.Cc;
  }
  function w() {
    this.prefix = H.prefix;
    this.Ea = H.Ea;
    this.za = H.za;
  }
  function g(a) {
    k.lf.apply(this, arguments);
    w.apply(this, arguments);
  }
  function m(a) {
    k.Dd.apply(this, arguments);
    w.apply(this, arguments);
  }
  function e(a, b) {
    p.apply(this, arguments);
  }
  function f() {
    try {
      e.prototype.Ed = F.cg("${httpsBaseURL}/render.html#/email"), F.ng("pages/email-body.html").then(function(a) {
        K = a;
        d();
      }).catch(function(a) {
        D.b("CM344 ", a);
      });
    } catch (a) {
      N && N.oj ? (K = '<div><div>This is my encrypted message (<span id="token">{TOKEN}</span>) then some other suffix. click <a id="viewerURL">here</a></div><div id="data"></div><div>about cloudmask</div>', d()) : console.error("Failed to get email body template", a);
    }
  }
  function d() {
    var a = window, c = a.document.createElement("DIV");
    c.innerHTML = K;
    a = y(a, c);
    c = a.indexOf("{TOKEN}");
    e.prototype.s = a.substr(0, c);
    e.prototype.ba = a.substr(c + 7);
    k.Gg("Resolver_BodyClearMessage_Factory", new b);
  }
  function b() {
    t.apply(this, arguments);
    this.prefix = e.prototype.s;
    this.kb.$a = E;
    this.kb.Ha = e.prototype.Ha;
    this.Qb.$a = l;
    this.og = e.prototype.Cc;
  }
  function c() {
    this.prefix = e.prototype.s;
    this.Ea = e.prototype.ba;
    this.za = " ";
    this.state.sd = !0;
  }
  function l(a) {
    g.apply(this, arguments);
    c.apply(this, arguments);
  }
  function E(a) {
    m.apply(this, arguments);
    c.apply(this, arguments);
  }
  function x(a, b) {
    u.Lb.apply(this, arguments);
  }
  function y(a, b, c) {
    c = c || [];
    var d = "", e = !0;
    G.call(this, a, b, function(a) {
      if (!e && d.length) {
        for (var b = a.parentNode;b && 0 <= ["SPAN", "B", "I", "U", "FONT"].indexOf(b.tagName);) {
          b = b && b.parentNode;
        }
        b && b.Fj || (b && (b.Fj = !0), c[c.length - 1] != d.length && c.push(d.length));
      }
      e = !1;
      a = n.ea(a);
      /^\s*$/.test(a) || (d += a);
    }, function(a) {
      0 <= ["BR"].indexOf(a.tagName) && (!c.length || c[c.length - 1] != d.length) && c.push(d.length);
    });
    c.length && c[c.length - 1] == d.length && c.pop();
    return d;
  }
  function G(a, b, c, d) {
    b = b.childNodes;
    for (var e = 0;null != b && e < b.length;e++) {
      var f = b[e];
      if (f.nodeType == q.TEXT_NODE) {
        c && c.call(this, f);
      } else {
        if (f instanceof a.HTMLScriptElement || f instanceof a.HTMLStyleElement) {
          continue;
        }
      }
      f.nodeType == q.ELEMENT_NODE && (d && d.call(this, f), G.call(this, a, f, c, d));
    }
  }
  var A = h("./env"), u = h("./handler_base"), D = h("./log").j("handler_mail");
  B = h("./constants").Usage;
  var k = h("./tokenizer"), F = h("./utils"), n = h("./elementNode"), z = h("./overloadRules");
  if ("undefined" === typeof q) {
    var q = {ELEMENT_NODE:1, ATTRIBUTE_NODE:2, TEXT_NODE:3}
  }
  var N, r;
  a.init = function(a, b, c) {
    N = a;
    r = c;
    f();
  };
  a.vl = p;
  u.Ee(B.subject, p);
  p.prototype = Object.create(u.Lb.prototype);
  p.prototype.O = function(a, b, c) {
    b = this.Xf(a, c);
    b = this.prefix + b + this.Ea;
    a.token = this.za ? k.Mh(c, b, this.za) : b;
    return a.token;
  };
  p.prototype.Xf = function(a, b) {
    return N && N.Ho ? k.vj(b, a.recordID, a.fieldID, this.Ha) : this.Cc + k.O("RANDOM_ASCII", b, a.recordID, a.fieldID);
  };
  p.prototype.Ha = 2;
  p.prototype.Cc = "#";
  var H = {prefix:"CloudMask (", Ea:") Protected Message ", za:"*"};
  k.Gg("Resolver_Subject", new t);
  t.prototype.zb = function(a, b, c, d, e, f) {
    var l = this.kb.zb.apply(this.kb, arguments);
    if (1 <= l) {
      return this.re = this.kb, l;
    }
    var k = this.Qb.zb.apply(this.Qb, arguments);
    if (1 <= k) {
      if (f(1 + d.token.length).substring(0, 2) == "(" + this.og) {
        return this.re = this.Qb, k;
      }
      k = -1;
    }
    return k > l ? k : l;
  };
  t.prototype.eb = function(a, b) {
    var c = this.re.eb.apply(this.re, arguments);
    c.state.ak = b.ak;
    return c;
  };
  w.prototype.Yg = function(a) {
    var b = this.prefix.length, c = this.Db(b + a);
    a && (c = c.substring(0, b));
    if (c == this.prefix) {
      return b + a;
    }
  };
  w.prototype.Ae = function(a) {
    if (!this.state.g && "" !== this.state.g) {
      return !1;
    }
    if (!this.nj(String.fromCharCode(a))) {
      return this.state.W = !0, !1;
    }
    if (this.state.o >= this.state.g.length) {
      return this.dk();
    }
    this.Fa();
    return !0;
  };
  w.prototype.nj = function(a) {
    this.state.Bc = this.state.Bc || 0;
    if (this.state.Bc < this.Ea.length) {
      if (this.Ea.charAt(this.state.Bc) != a) {
        return !1;
      }
      this.state.Bc++;
    } else {
      if (a != this.za) {
        return !1;
      }
    }
    return !0;
  };
  w.prototype.dk = function() {
    if (this.state.Bc <= this.Ea.length) {
      return !0;
    }
    this.state.W = !0;
    return !1;
  };
  w.prototype.yb = function() {
    return this.state.W;
  };
  w.prototype.end = function() {
    this.state.W = !0;
  };
  g.prototype = Object.create(k.lf.prototype);
  Object.keys(w.prototype).forEach(function(a) {
    g.prototype[a] = w.prototype[a];
  });
  g.prototype.process = function(a, b, c) {
    if (!this.state.$j) {
      this.state.$j = !0;
      var d;
      this.bb();
      if (this.state.g || "" === this.state.g) {
        d = this.Yg(this.state.token.length);
      }
      d ? (this.Fa(d), this.Fa()) : (this.state.W = !0, this.writer(String.fromCharCode(a)));
      this.gb();
      return !!d;
    }
    return this.Ae(a, b, c);
  };
  m.prototype = Object.create(k.Dd.prototype);
  Object.keys(w.prototype).forEach(function(a) {
    m.prototype[a] = w.prototype[a];
  });
  m.prototype.Je = function() {
    var a = this.Yg(0);
    if (!a) {
      return this.state.W = !0, !1;
    }
    this.Fa(a);
    return k.Dd.prototype.Je.call(this);
  };
  a.ql = e;
  u.Ee(B.body, e, "ClearMessage");
  e.prototype = Object.create(p.prototype);
  e.prototype.Qe = function(a) {
    a.algorithm = "RANDOM_UNICODE";
  };
  e.prototype.qd = function(a, b, c) {
    a.recordID = c.recordID;
    a.fieldID = c.K;
  };
  e.prototype.O = function(a, b, c) {
    c = this.Xf(a, c);
    var d, e, f, l, k;
    try {
      d = b.ownerDocument.defaultView;
      var g = d.document.createDocumentFragment();
      e = d.document.createElement("DIV");
      g.appendChild(e);
      n.Wa(e, K);
      f = g.getElementById("token");
      f.textContent = c;
      k = g.getElementById("viewerURL");
      k.href = this.Ed + "?recordId=" + a.recordID + "&lastFieldId=" + r(a.recordID);
      l = g.getElementById("data");
      n.Wa(l, a.Wg);
      return g.childNodes[0].innerHTML;
    } catch (x) {
      if (!N || !N.oj) {
        throw D.b("CM343 ", x), x;
      }
      d = window;
      for (b = d.document;b.body.firstChild;) {
        b.body.removeChild(b.body.firstChild);
      }
      e = b.createElement("DIV");
      n.Wa(e, K);
      b.body.appendChild(e);
      f = b.getElementById("token");
      f.textContent = c;
      k = b.getElementById("viewerURL");
      k.href = this.Ed + "?recordId=" + a.recordID + "&lastFieldId=" + r(a.recordID);
      l = b.getElementById("data");
      n.Wa(l, a.Wg);
      return e.innerHTML;
    }
  };
  e.prototype.Ha = 3;
  e.prototype.Cc = "~";
  var K;
  b.prototype = Object.create(t.prototype);
  c.prototype.Fa = function(a) {
    for (var b = "", c = a || 1, d = 0;d < c;d++) {
      b += this.state.g.charAt(this.state.o), this.state.o++, this.state.ya.lines && this.state.ya.lines.length && (this.state.lines || (this.state.lines = this.state.ya.lines.slice()), this.state.lines[0] == this.state.o && (b += " ", this.state.lines.shift()));
    }
    this.writer(b, a);
  };
  c.prototype.zf = function(a) {
    a && a.Gk(function(a) {
      if (this.state.recordID == a.recordID && this.state.fieldID == a.fieldID) {
        return a.g = this.state.g, a.ya = this.state.ya, a.o = this.state.o, a.sd = !0, a.lines = this.state.lines, this.state.W = !1, this;
      }
    }.bind(this), function() {
      this.state.W = !1;
      this.Fa.apply(a, arguments);
      this.state.o = a.state.o;
    }.bind(this), function(a) {
      if (this.za == String.fromCharCode(a)) {
        return this.state.W = !1, !0;
      }
    }.bind(this));
  };
  c.prototype.end = function(a) {
    k.rh.prototype.end.apply(this, arguments);
    this.state.W = !0;
  };
  l.prototype = Object.create(g.prototype);
  Object.keys(c.prototype).forEach(function(a) {
    l.prototype[a] = c.prototype[a];
  });
  E.prototype = Object.create(m.prototype);
  Object.keys(c.prototype).forEach(function(a) {
    E.prototype[a] = c.prototype[a];
  });
  a.tl = x;
  u.Ee(B.text + ":fragment", x);
  x.prototype = Object.create(u.Lb.prototype);
  x.prototype.Hd = function(a, b, c, d) {
    d(a.recordID, a.fieldID, b, c);
  };
  x.prototype.yf = function(a, b, c, d, e) {
    e(b, c, d);
  };
  x.prototype.bb = function(a) {
    return a.g;
  };
  x.prototype.O = function(a, b, c, d) {
    function e(a, c, d) {
      var f = u.j("Body", "ClearMessage");
      d = {Wg:d};
      f.qd(d, null, c);
      f.Qe(d, c);
      return f.O(d, b, a, c);
    }
    var f = b.ownerDocument.defaultView, l = b.ownerDocument.createElement("div");
    n.Wa(l, c);
    var k = [];
    c = y.call(this, f, l, k);
    a.g = c;
    k.length ? d.lines = k : delete d.lines;
    var g = u.Lb.prototype.O.call(this, a, b, c, d), x = 0, h = c.length;
    (function(a) {
      G.call(this, f, a, function(a) {
        var b = n.ea(a);
        if (b && !/^\s*$/.test(b)) {
          var c = g.slice(x, x + b.length);
          x += b.length;
          x == h && g.length > x && (c += g.slice(x));
          n.Ek(a, c);
        }
      });
    }).call(this, l);
    l = n.de(l);
    return a.options && a.options.fb ? l : e.call(this, c, d, l);
  };
  x.prototype.transformNode = function(a, b) {
    if ("A" != b.tagName || !b.href || 0 > b.href.indexOf(".cloudmask.com/render")) {
      return null;
    }
    if (b.yh) {
      return D.b("CM345 "), null;
    }
    b.yh = !0;
    try {
      for (var c = b.closest("td table").parentNode.parentNode.parentNode.lastChild.firstElementChild.firstElementChild, d = c, e = 0;9 > e;e++) {
        if (d = d.parentNode, !d) {
          D.b("CM346 ");
          break;
        }
      }
    } catch (f) {
      return D.b("CM347 "), null;
    }
    return {Uh:function(a) {
      return a == d;
    }, Hg:function(a, b) {
      if (d) {
        for (var e = d;e.firstChild;) {
          b.call(e, e.firstChild);
        }
        for (;c.firstChild;) {
          a.call(e, c.firstChild);
        }
        d = null;
        return e;
      }
      D.warn("CM348 ");
    }, Ci:function() {
      return c;
    }, Qk:function(a) {
      a = A.ENV.notifications[a] ? A.ENV.notifications[a].message : A.ENV.notifications.OTHER.message;
      var b = c.closest("tbody");
      n.Wa(b.children[1].querySelector("td"), "<span>" + a + "</span>");
      a = b.children[2].querySelector("a");
      n.Wa(a, "Learn more");
      z.set("HTMLAnchorElement", "href").call(a, "http://help.cloudmask.com/docs");
      a.removeAttribute("data-saferedirecturl");
    }};
  };
  x.prototype.wrapData = function(a, b, c, d) {
    var e = d || window;
    d = e.document.createDocumentFragment();
    e = e.document.createElement("DIV");
    d.appendChild(e);
    e.innerHTML = K;
    d.getElementById("token").textContent = a;
    d.getElementById("viewerURL").href = this.Ed + "?recordId=" + c + "&lastFieldId=" + r(c);
    d.getElementById("data").innerHTML = b;
    return d.childNodes[0].innerHTML;
  };
  x.prototype.Jb = function(a) {
    var b = document.createDocumentFragment(), c = document.createElement("DIV");
    b.appendChild(c);
    n.Wa(c, a);
    return (b = b.getElementById("data")) ? n.de(b) : a;
  };
}, {"./constants":12, "./elementNode":14, "./env":17, "./handler_base":21, "./log":25, "./overloadRules":33, "./tokenizer":40, "./utils":43}], 23:[function(h, B, a) {
  function p(a, g) {
    var h = {NEW_FOLDER:{en:"new\\s+folder"}, NEW_DRIVE:{en:"new\\s+team\\s+drive"}, COMPOSE:{en:"\\s*compose\\s*"}, SEND:{en:"send"}, SHARE:{en:"\\s*share\\s*"}, ADD_MEMBER:{en:"add\\s+.*\\s+member"}, SAVE:{en:"\\s*save\\s*"}, SHARE_MATTER:{en:"\\s*share\\s+matter\\s*"}, SHARE_BILL:{en:"\\s*share\\s+bill\\s*"}, FIND_CONTACT:{en:"find a contact"}};
    if (h[a]) {
      return h[a][g] || h[a].en;
    }
    console.warn("Failed to find sentence in dictionary", a);
  }
  var t = h("./utils");
  a.get = p;
  a.Wc = function(a) {
    return t.cg(a, function(a, h) {
      var e = p(h, "en");
      return e ? e : a;
    }, {startsWith:"\\{\\{", endsWith:"\\}\\}"});
  };
}, {"./utils":43}], 24:[function(h, B, a) {
  function p() {
    this.storage = {};
    this.qc = [];
    this.Fe = {};
  }
  function t(a, h, e, f) {
    var d = this.storage["cloudmask.cache.value." + a + "." + h];
    if (!d && (d = this.ce("cloudmask.cache.value." + a + "." + h), !d)) {
      return null;
    }
    a = d;
    return f ? a.slice(e, f) : a;
  }
  var w = h("./log").j("LocalCache");
  p.prototype = {setItem:function(a, h) {
    return this.Fe[a] ? (w.warn("CM349 " + a), this.Fe[a].storage[a] = h) : this.storage[a] = h;
  }, getItem:function(a) {
    var h = this.storage[a];
    h || (h = (h = this.ce(a)) || null);
    return h;
  }, Oa:function(a, h) {
    try {
      var e = t.call(this, a, h);
      return e || "" === e ? {g:e, properties:this.Rc(a, h)} : null;
    } catch (f) {
      w.b("CM350 ", f);
    }
  }, Ki:function(a) {
    return t.call(this, a.recordID, a.Uj || a.K || a.fieldID, a.ni, a.mm);
  }, Ob:function(a, h, e, f) {
    if (!f || !f.fg) {
      try {
        this.storage["cloudmask.cache.value." + a + "." + h] = e, f && this.xc(a, h, f);
      } catch (d) {
        w.b("CM351 ", d);
      }
    }
  }, $l:function(a, h) {
    delete this.storage["cloudmask.cache.value." + a + "." + h];
  }, Rc:function(a, h) {
    var e = this.storage["cloudmask.cache.prop." + a + "." + h];
    return e || (e = this.ce("cloudmask.cache.prop." + a + "." + h), e) ? e : null;
  }, xc:function(a, h, e) {
    var f = e.part, d = e.jd, b = e.Ya;
    e.part = null;
    e.jd = null;
    e.Ya = null;
    this.storage["cloudmask.cache.prop." + a + "." + h] = e;
    e.part = f;
    e.jd = d;
    e.Ya = b;
  }, Cj:function(a, h, e) {
    var f = this.Rc(a, h);
    if (f) {
      for (var d in e) {
        f[d] = e[d];
      }
    } else {
      f = e;
    }
    this.xc(a, h, f);
  }, yc:function(a, h) {
    return this.xc(a, "_", h);
  }, Vf:function(a) {
    return this.Rc(a, "_");
  }, nn:function(a, h) {
    return this.Cj(a, "_", h);
  }, ce:function(a) {
    try {
      for (var h = 0;h < this.qc.length;h++) {
        var e = this.qc[h].storage[a];
        if (e) {
          return this.Fe[a] = this.qc[h], e;
        }
      }
    } catch (f) {
      w.b("CM352 ", f);
    }
  }};
  a.V = new p;
  a.Eg = new function(a) {
    return {get:function(h, e) {
      return a.Oa(h, e);
    }, set:function(h, e, f) {
      a.Ob(h, e, f && f.g, f && f.properties);
      return f;
    }, Fm:function(a, e) {
      var f = this.get(a, e);
      return f && f.g;
    }, Rg:function(h, e, f) {
      a.Ob(h, e, f);
      return f;
    }};
  }(a.V);
  a.$c = new function(a) {
    return {get:function(h) {
      return Number(a.getItem("cloudmask.lastFieldID." + h) || 0);
    }, set:function(h, e) {
      if (e > this.get(h)) {
        return a.setItem("cloudmask.lastFieldID." + h, e);
      }
    }, ac:function(a) {
      return this.set(a, this.get(a) + 1);
    }};
  }(a.V);
}, {"./log":25}], 25:[function(h, B, a) {
  function p(a, b) {
    var d = {};
    "string" == typeof a ? d.event = a : d = g(d, a);
    d = g({type:"audit", timestamp:new Date, gn:"undefined" == typeof process ? "" : process.env.Ll, Hh:m.ENV.email, userId:m.ENV.userId, hi:b}, d);
    c.write(JSON.stringify(d) + "\n");
  }
  function t(a) {
    this.ba = a;
    this.logMode = m.ENV.logMode;
    this.logMode || (this.logMode = 2);
  }
  try {
    var w = h("chrome").components;
  } catch (l) {
  }
  var g = h("util")._extend, m = h("./env"), e = {};
  a.j = function(a) {
    e[a] || (e[a] = new t(a));
    return e[a];
  };
  var f = h("./audit_events.json");
  a.el = f;
  var d = [], b = {write:function(b) {
    if (m.Aa()) {
      var c;
      c = "Auditor undefined, queueing undelivered audit message: ";
      var e;
      e = JSON.parse(b);
      var g = e.event, h = f[e.event];
      h || (g = "UNKNOWN", h = f.uh);
      e = [e.timestamp || (new Date).toISOString(), g, h.severity, e.Hh, h.message, h == f.uh ? JSON.stringify(e) : JSON.stringify(e.hi)].join("\t");
      c = c + e;
      a.j("Auditor").warn(c);
      d.push(b);
    }
  }}, c = b;
  a.bo = function(a) {
    a ? (c = a, d.forEach(function(a) {
      c.write(a);
    }), d = []) : c = b;
  };
  a.Bk = p;
  t.prototype = {Wb:console, debug:function(a) {
    this.Gc(1, "DEBUG", function(a) {
      this.log(a);
    }, a);
  }, info:function(a) {
    this.Gc(2, "INFO", function(a) {
      this.info(a);
    }, a);
  }, warn:function(a) {
    this.Gc(3, "WARN", function(a) {
      this.warn(a);
    }, a);
  }, b:function(a, b) {
    this.Gc(4, "ERROR", function(a) {
      b ? this.error(a, b, b.stack) : this.error(a);
    }, a, b);
  }, notification:function(a, b, c, d) {
    return;
    if (m.fa()) {
      var e = w.classes["@mozilla.org/alerts-service;1"].getService(w.interfaces.nsIAlertsService), f = "chrome://mozapps/skin/extensions/alerticon-error.png";
      c && (f = "chrome://mozapps/skin/extensions/alerticon-info-positive.png");
      e.showAlertNotification(f, a, b, !1, "", null, "");
      d && (cmb.style.listStyleImage = "url(" + self.data.url("./images/group.png") + ")", cmb.setAttribute("tooltiptext", "Show CloudMask Sharing"));
    }
  }, fo:function() {
  }, Gc:function(a, b, c, d, e) {
    function f(a, b, c, d, e) {
      var l = new Date, l = l.getFullYear() + "-" + (l.getMonth() + 1) + "-" + l.getDate() + "-" + l.getHours() + ":" + l.getMinutes() + ":" + l.getSeconds() + ":" + l.getMilliseconds();
      d || (d = "moduleName");
      e && (d += ":" + e);
      a = l + "\t[" + a + "]\t\t" + b + "\t" + d;
      c && c.lineNumber && (a += "\nEXCEPTION: " + c.message + "; " + c.fileName + "; " + c.lineNumber + "\n" + c.stack);
      return a + "\n";
    }
    function g(a) {
      if (m.fa()) {
        if (!t.prototype.s) {
          var b = FileUtils.getFile("TmpD", ["CME_Log.txt"]);
          t.prototype.s = w.classes["@mozilla.org/network/file-output-stream;1"].createInstance(w.interfaces.nsIFileOutputStream);
          t.prototype.s.init(b, 26, 438, 0);
        }
        t.prototype.s.write(a, a.length);
      }
    }
    if (!(this.logMode > a)) {
      d = f(b, d, e, this.ba, this.ti);
      this.Wb && c.call(this.Wb, d);
      try {
        m.ENV.enableLog && g(d);
      } catch (h) {
        this.Wb && (this.Wb.error("Failed to sendLog (" + this.ba + ")", h), this.Wb.error(h.stack));
      }
    }
  }, Bk:p};
  t.prototype.log = t.prototype.info;
  t.prototype.error = t.prototype.b;
  t.prototype.mi = t.prototype.b;
}, {"./audit_events.json":44, "./env":17, chrome:void 0, util:void 0}], 26:[function(h, B, a) {
  function p(a, f, d) {
    if (a || "undefined" !== typeof window) {
      this.f = w, this.Rb = f, this.key = d ? d.key : null, this.lastFieldID = 0, this.utils = g, this.nf = this.utils.nf, this.lj = !1, this.sa = {}, this.s = [], this.window = a || window;
    }
  }
  a.mb = p;
  var t = h("./env"), w = h("./log").j("MessageBrokerBase"), g = h("./utils");
  h("./application");
  var m = "application/vnd.openxmlformats-officedocument.wordprocessingml.document docx image/png svg image/jpeg image/svg+xml pdf application/pdf".split(" ");
  a.Gj = function(a, f, d) {
    var b = window, c;
    c = t.ra() || t.fa() || t.Ra() ? new (h("./messageBroker_proxy2").Mb)(b, a, f, d) : t.S() ? new (h("./messageBroker_proxy3").Mb)(b, a, f, d) : new (h("./messageBroker_proxy").Mb)(b, a, f);
    g.Fg(function() {
      return c;
    });
    return c;
  };
  p.eb = function(a) {
    var f = h("./cloudmask_messsagebroker").MessageBroker, d = Array.prototype.slice.call(arguments);
    d.unshift(null);
    return new (f.bind.apply(f, d));
  };
  p.s = {setItem:function(a, f) {
    this[a] = f;
  }, getItem:function(a) {
    return this[a] ? this[a] : null;
  }};
  p.prototype = {ac:function() {
    this.lastFieldID++;
    return this.lastFieldID;
  }, jo:function() {
    this.f.warn("CM353 ");
  }, Ym:function(a) {
    return !t.ENV.disableSupportedDocuments && a && 0 <= m.indexOf(a.toLowerCase());
  }, be:function(a, f, d) {
    return g.be(f) + d.toString().length + g.eh.length + g.dh.length;
  }, Zn:function() {
    this.s.forEach(function(a) {
      this.f.info("CM354 " + this.window.location.hostname);
      this.postMessage(a.operation, a.requestData, a.Ub);
    }.bind(this));
    this.s = [];
  }, ec:function(a, f) {
    if (a.origin != this.Rb && 0 != this.Rb.indexOf(a.origin)) {
      this.f.info("CM355 " + a.origin);
    } else {
      try {
        var d = "string" === typeof a.data ? JSON.parse(a.data) : a.data;
        if ("Response" == d.type) {
          if (!f) {
            return this.f.b("CM356 ", d);
          }
          1 === f.length ? f.call(this, d.responseData) : f.call(this, null, d.responseData, d.buffer);
        } else {
          if ("Error" == d.type) {
            if (this.f.b("CM357 " + d.message), f || this.f.b("CM358 ", d), !f || 1 >= f.length) {
              this.utils.showNotification(this.window, d.message, "ERROR", null, this.nf);
            } else {
              var b = Error(d.message);
              b.name = d.name;
              b.code = d.code;
              f.call(this, b);
            }
          } else {
            "Notification" == d.type && this.sa[d.operation] ? (f = this.sa[d.operation], f.call(this, a.source, d.responseData, d.id)) : this.f.warn("CM359 ", d);
          }
        }
      } catch (c) {
        this.f.b("CM360 ", c);
      }
    }
  }, Bo:function() {
  }};
}, {"./application":3, "./cloudmask_messsagebroker":44, "./env":17, "./log":25, "./messageBroker_proxy":27, "./messageBroker_proxy2":28, "./messageBroker_proxy3":29, "./utils":43}], 27:[function(h, B, a) {
  function p() {
  }
  function t(a, f, d) {
    m.mb.apply(this, arguments);
  }
  function w(a, f, d, b) {
    var c = new XMLHttpRequest;
    c.bd = function() {
      var a = c.getResponseHeader("x-cloudmask-info"), a = a ? JSON.parse(a) : null;
      b(null, a, c.response);
    };
    c.ad = function() {
      this.f.b("CM363 " + a);
      b(Error("Error in post stream " + a));
    }.bind(this);
    c.open("POST", this.window.location.protocol + "//" + this.window.location.host + "/stream/" + a + "?" + this.key);
    c.setRequestHeader("x-cloudmask-info", JSON.stringify(f));
    c.responseType = "arraybuffer";
    c.send(d);
  }
  function g(a, f, d) {
    a = {type:"Request", target:"MessageBroker", operation:a, requestData:f};
    var b = new XMLHttpRequest;
    b.addEventListener("load", function() {
      this.ec({origin:this.Rb, data:b.responseText}, d);
    }.bind(this));
    b.open("POST", this.window.location.protocol + "//" + this.window.location.host + "/" + this.key, !0);
    b.send(JSON.stringify(a));
  }
  var m = h("./messageBrokerBase");
  h("./env");
  h("./utils");
  h("./cloudmask_xhr");
  a.Mb = t;
  t.prototype = Object.create(m.mb.prototype);
  t.prototype.reserveRecords = function(a, f) {
    g.call(this, "reserveRecords", a, f);
  };
  t.prototype.releaseRecords = function(a) {
    g.call(this, "releaseRecords", a, p);
  };
  t.prototype.renewRecords = function(a) {
    g.call(this, "renewRecords", a, p);
  };
  t.prototype.resolvePage = function(a, f) {
    g.call(this, "resolvePage", a, f);
  };
  t.prototype.savePage = function(a, f) {
    g.call(this, "savePage", a, f);
  };
  t.prototype.getUserStatus = function(a, f) {
    g.call(this, "getUserStatus", a, f);
  };
  t.prototype.importCertificates = function(a, f) {
    g.call(this, "importCertificates", a, f);
  };
  t.prototype.inviteUsers = function(a, f) {
    g.call(this, "inviteUsers", a, f);
  };
  t.prototype.trustUsers = function(a, f) {
    g.call(this, "trustUsers", a, f);
  };
  t.prototype.encryptFileContent = function(a, f, d) {
    w.call(this, "encryptFileContent", a, f, d);
  };
  t.prototype.decryptFileContent = function(a, f, d) {
    w.call(this, "decryptFileContent", a, f, d);
  };
  t.prototype.saveFileAttachment = function(a, f) {
    g.call(this, "importCertificates", a, f);
  };
  t.prototype.changeFileToken = function() {
    this.f.b("CM361 ");
  };
  t.prototype.search = function() {
    this.f.b("CM362 ");
  };
  t.prototype.getGroup = function(a, f) {
    g.call(this, "getGroup", a, f);
  };
  t.prototype.shareWithOthers = function(a, f) {
    g.call(this, "shareWithOthers", a, f);
  };
  t.prototype.setApplication = function() {
  };
  t.prototype.getRecordRecipients = function(a, f) {
    g.call(this, "getRecordRecipients", a, f);
  };
  t.prototype.saveFileName = function(a, f) {
    g.call(this, "saveFileName", a, f);
  };
  t.prototype.syncClearTextReferences = function(a) {
    g.call(this, "syncClearTextReferences", null, a);
  };
  t.prototype.setClearTextReference = function(a, f) {
    g.call(this, "setClearTextReference", a, f);
  };
  t.prototype.decryptURL = function(a, f) {
    g.call(this, "decryptURL", a, f);
  };
  t.prototype.getFileLink = function(a, f) {
    w.call(this, "getFileLink", a, null, function(a, b, c) {
      f(a, b, c);
    });
  };
}, {"./cloudmask_xhr":44, "./env":17, "./messageBrokerBase":26, "./utils":43}], 28:[function(h, B, a) {
  function p(a, b, c, d) {
    g.mb.apply(this, arguments);
    this.key = c.key;
    this.ob = d;
    var f = this;
    this.sa["ui-showApplicationPreferences"] = function() {
      e.Xe(this.window, this.ob).catch(function(a) {
        m.error("CM364 ", a);
      });
    }.bind(this);
    this.sa["ui-notification"] = function(a, b) {
      e.na(this.window, b.code, b.message, b.type);
    };
    this.sa["ui-renderResponse"] = function(a, b, c) {
      e.Wi(c, b);
    };
    this.sa["cm-app-usage-full"] = function(a, b) {
      f.i.$f(b);
    };
  }
  function t(a, c) {
    var g = [].slice.call(arguments, 2), h, m, p, u = g[g.length - 1];
    "function" === typeof u && (p = g.pop());
    if (u = g[g.length - 1]) {
      u instanceof ArrayBuffer ? m = g.pop() : u.buffer instanceof ArrayBuffer && (m = g.pop().buffer), m && (m = e.Jd(m));
    }
    1 === g.length ? h = g[0] : g.length && (h = g);
    g = {key:a, id:d = (d + 1) % Number.MAX_VALUE, type:"Request", operation:c, target:"MessageBroker", applicationId:this.ob.id, requestData:h, arguments:g, buffer:m};
    p && b.set(g.id, p);
    p = window;
    f.Ra() && (p = document.getElementById("cme-cmbf").contentWindow);
    w.call(p, g, p.location.origin);
  }
  var w = window.postMessage, g = h("./messageBrokerBase"), m = h("./log").j("Chrome MessageBroker"), e = h("./utils"), f = h("./env");
  a.Mb = p;
  p.prototype = Object.create(g.mb.prototype);
  p.prototype.onMessage = function(a) {
    if (!a || !a.data || a.data.key != this.key) {
      return !1;
    }
    try {
      if (m.debug("CM366 " + a, a), f.Ra() || a.origin == window.location.origin) {
        var c = a.data;
        if (c.key != this.key) {
          m.debug("CM368 " + c.key, c);
        } else {
          if ("Response" != c.type && "Error" != c.type && "Notification" != c.type) {
            m.debug("CM369 " + c.type, c);
          } else {
            "Notification" == c.type || c.id || m.warn("CM370 ", c.id, c);
            b.has(c.id) || m.warn("CM371 ", c.id, c);
            m.info("CM372 ");
            c.buffer && (c.buffer = e.Sg(c.buffer));
            var d = c.id ? b.get(c.id) : null;
            this.ec({data:c, origin:this.Rb}, d);
          }
        }
      } else {
        m.debug("CM367 ");
      }
    } catch (g) {
      m.error("CM365 ", g);
    }
    return !0;
  };
  p.prototype.Re = function(a) {
    this.i = a;
    this.sa["cmda-setDisabled"] = function(b, c) {
      a.Fb(c.disabled);
    };
  };
  var d = 0, b = new Map, c = "reserveRecords releaseRecords renewRecords resolvePage resolveFields savePage getUserStatus importCertificates inviteUsers trustUsers saveFileAttachment getGroup shareWithOthers getRecordRecipients saveFileName setClearTextReference encryptFileContent decryptFileContent decryptURL syncClearTextReferences setPreference searchCount getLocalProfile search setCurrentFilePart getSession queueFileLink resolveQuery saveQueryToCache getQueryFromCache updateRecordStatus trimRecordElements getEncryptedList getOAuthToken getLastFieldID setLastFieldID markAsProtected processFileLinks getApplicationUsage setSubscriptionPreferences updateRecord getPendingRecord".split(" ");
  c.forEach(function(a) {
    p.prototype[a] = function() {
      t.apply(this, [this.key, a].concat([].slice.call(arguments)));
    };
  });
  ["changeFileToken"].forEach(function(a) {
    p.prototype[a] = function() {
      m.b(a + " called but not implemented");
      throw Error(a + " called but not implemented");
    };
  });
  p.prototype.tb = function() {
    if (this.Ca) {
      return this.Ca;
    }
    var a = this;
    this.Ca = {};
    c.forEach(function(c) {
      a.Ca[c] = function() {
        var g = [].slice.call(arguments);
        return new Promise(function(h, m) {
          var p, u, t = g[g.length - 1];
          t && (t instanceof ArrayBuffer ? u = g.pop() : t.buffer instanceof ArrayBuffer && (u = g.pop().buffer), u && (u = e.Jd(u)));
          1 === g.length ? p = g[0] : g.length && (p = g);
          p = {key:a.key, id:d = (d + 1) % Number.MAX_VALUE, type:"Request", operation:c, target:"MessageBroker", applicationId:a.ob.id, requestData:p, arguments:g, buffer:u};
          b.set(p.id, function(a, b) {
            a ? m(a) : h(b);
          });
          u = window;
          f.Ra() && (u = document.getElementById("cme-cmbf").contentWindow);
          w.call(u, p, u.location.origin);
        });
      };
    });
    return this.Ca;
  };
  p.prototype.setApplication = function() {
  };
  p.prototype.getFileLink = function(a, b) {
    t(this.key, "getFileLink", a, function(a, c, d) {
      b(a, d);
    });
  };
}, {"./env":17, "./log":25, "./messageBrokerBase":26, "./utils":43}], 29:[function(h, B, a) {
  function p(a, c, d, f, p) {
    g.mb.apply(this, arguments);
    this.key = d.key;
    this.ob = f;
    var t = this;
    a.Lc.register("cmnativeinterfacerandomname");
    a.cmnativeinterfacerandomname_OnMessage = function(a) {
      var c = t;
      a = {data:a};
      m.debug("CM375 " + a, a);
      a = a.data;
      if (a.key != c.key) {
        m.error("CM376 " + a.key, a);
      } else {
        if ("Response" != a.type && "Error" != a.type && "Notification" != a.type) {
          m.error("CM377 " + a.type, a);
        } else {
          if ("Response" == a.type || a.id) {
            if (a.id && !b.has(a.id)) {
              m.error("CM379 ", a.id, a);
            } else {
              a.buffer && (a.buffer = e.Sg(atob(a.buffer)));
              var d = a.id ? b.get(a.id) : null;
              c.ec({data:a, origin:c.Rb}, d);
            }
          } else {
            m.error("CM378 ", a.id, a);
          }
        }
      }
    };
    h("./uriStream").aj();
    this.sa["ui-showApplicationPreferences"] = function() {
      e.Xe(this.window, this.ob).catch(function(a) {
        m.error("CM373 ", a);
      });
    }.bind(this);
    this.sa["ui-notification"] = function(a, b) {
      e.na(this.window, b.code, b.message, b.type);
    };
  }
  function t(a, c, g) {
    var h = [].slice.call(arguments, 3), m, p, t, D = h[h.length - 1];
    "function" === typeof D && (t = h.pop());
    if (D = h[h.length - 1]) {
      w.isBuffer(D) ? p = h.pop().toString("base64") : D instanceof ArrayBuffer ? p = h.pop() : D.buffer instanceof ArrayBuffer && (p = h.pop().buffer), p instanceof ArrayBuffer && (p = btoa(e.Jd(p)));
    }
    1 === h.length ? m = h[0] : h.length && (m = h);
    h = {key:a, id:d = (d + 1) % Number.MAX_VALUE, type:"Request", operation:c, target:"MessageBroker", applicationId:g.id, arguments:[m]};
    p && (h.buffer = p);
    t && b.set(h.id, t);
    f ? f[1].postMessage(JSON.stringify(h)) : window.Lc.post(JSON.stringify(h), h.operation);
  }
  var w = h("buffer").Buffer, g = h("./messageBrokerBase"), m = h("./log").j("Android MessageBroker"), e = h("./utils");
  B = h("./env");
  a.Mb = p;
  var f;
  B.Yc() && (window.Lc = {register:function() {
    this.post({key:"cmOnMessage"}, "register");
    return "cmOnMessage";
  }, post:function(a, b) {
    window.No.pn[b || "post"].postMessage(a);
  }, showNotification:function(a, b) {
    this.post({message:a, type:b}, "userNotification");
  }});
  p.prototype = Object.create(g.mb.prototype);
  p.prototype.Re = function(a) {
    this.sa["cmda-setDisabled"] = function(b, c) {
      a.Fb(c.disabled);
    };
  };
  var d = 0, b = new Map, c = "reserveRecords releaseRecords renewRecords resolvePage resolveFields savePage getUserStatus importCertificates inviteUsers trustUsers saveFileAttachment getGroup shareWithOthers getRecordRecipients saveFileName setClearTextReference encryptFileContent decryptFileContent decryptURL syncClearTextReferences setPreference searchCount getLocalProfile search setCurrentFilePart queryContacts getSession queueFileLink resolveQuery saveQueryToCache getQueryFromCache updateRecordStatus trimRecordElements getEncryptedList getOAuthToken setDownloadFileToken setMenu setTitle removeActionButtons reEnroll maskFileUri unmaskFileUri getViewerElement getViewerFileLink getLastFieldID setLastFieldID markAsProtected processFileLinks getApplicationUsage setSubscriptionPreferences updateRecord".split(" ");
  c.forEach(function(a) {
    p.prototype[a] = function() {
      t.apply(null, [this.key, a, this.ob].concat([].slice.call(arguments)));
    };
  });
  ["changeFileToken"].forEach(function(a) {
    p.prototype[a] = function() {
      m.b(a + " called but not implemented");
      throw Error(a + " called but not implemented");
    };
  });
  p.prototype.setApplication = function() {
  };
  p.prototype.getFileLink = function(a, b) {
    t(this.key, "getFileLink", a, function(a, c, d) {
      b(a, d);
    });
  };
  p.prototype.tb = function() {
    if (this.Ca) {
      return this.Ca;
    }
    var a = this;
    this.Ca = {};
    c.forEach(function(b) {
      a.Ca[b] = function() {
        return new Promise(function(c, d) {
          var e = [].slice.call(arguments);
          e.push(function(a, b) {
            a && d(a);
            b && c(b);
          });
          a[b].apply(a, e);
        });
      };
    });
    return this.Ca;
  };
}, {"./env":17, "./log":25, "./messageBrokerBase":26, "./uriStream":42, "./utils":43, buffer:void 0}], 30:[function(h, B) {
  B.exports = {CLOUDMASK_CHANGES:{title:"CloudMask Updated", message:"Please refresh page to activate CloudMask.", type:"WARN", persist:!0, action:"REFRESH"}, APPLICATIONS_LOADED:{title:"CloudMask Policies", message:"Please refresh page to apply security policies.", type:"WARN", persist:!0, action:"REFRESH"}, SUBSCRIPTION_LEVEL_CHANGED:{title:"CloudMask Subscription", message:"Please refresh page to apply subscription changes.", type:"WARN", persist:!0, action:"REFRESH"}, APPLICATION_ADDED:{title:"CloudMask Activated",
  message:"Please refresh page to enable CloudMask.", type:"WARN", persist:!0, action:"REFRESH"}, APPLICATION_REMOVED:{title:"CloudMask Removed", message:"Please refresh page to disable CloudMask.", type:"WARN", persist:!0, action:"REFRESH"}, APPLICATION_CHANGED:{title:"CloudMask Policies", message:"Please refresh page to apply new policies.", type:"WARN", persist:!0, action:"REFRESH"}, PREFERENCES_CHANGED:{title:"CloudMask Settings", message:"Please refresh page to apply new settings.", type:"WARN",
  persist:!0, action:"REFRESH"}, INLINE_IMAGES_BLOCKED:{message:"CloudMask does not support inline image(s). Please remove and add them as attachment(s).", type:"WARN"}, FILES_DISABLED:{title:"Upgrade to Premium Plan", message:"Encrypting files is not included in your current plan. Consider upgrading to Premium plan.", type:"WARN", action:"GO PREMIUM", url:"${manageRoot}/management/#/apps"}, N7:{title:"Try CloudMask for GDrive", message:"Saving a protected file to an unprotected folder. If you wish to collaborate securely with other CloudMask users, please use GDrive to share the file.",
  type:"WARN"}, N8:{title:"Use CloudMask for GDrive", message:"Saving an unprotected file to a protected folder. To encrypt file content, please upload it directly using GDrive.", type:"WARN"}, USER_NOT_MATCHING:{title:"CloudMask Disabled", message:"The email associated with this page does match your CloudMask email ${userEmail}.", type:"WARN", persist:!0}, N10:{message:"Attaching files from Google Drive is not currently supported by CloudMask.", type:"WARN"}, N13:{message:"Version management is not currently supported for CloudMask protected files.",
  type:"WARN"}, LINKS_NOT_SUPPORTED:{message:"Please note that links are not currently protected by CloudMask.", type:"WARN"}, FOLDER_UPLOAD_NOT_SUPPORTED:{message:"Please note that uploading folder within a CloudMask protected folder is not currently supported.", type:"WARN"}, N16:{message:"Please remove all the attachments before changing the mode.", type:"WARN"}, N17:{message:"An error occurred while fetching encrypted results.", type:"WARN"}, N18:{message:"Please remove the encrypted attachement(s).",
  type:"WARN"}, N19:{message:"Please note that communication's attachement(s) will not be encrypted by CloudMask.", type:"WARN"}, TRIAL_COUNT_LEFT:{message:"You have ${freeLeft} remaining free ${applicationName} records.", type:"WARN", persist:!0}, TRIAL_COUNT_FILE:{title:"Upgrade to Premium Plan", message:"You have no remaining free ${applicationName} files.", type:"WARN", action:"GO PREMIUM", url:"${manageRoot}/management/#/apps?upgradeApp=${applicationDomain}"}, TRIAL_COUNT_FOLDER:{title:"Upgrade to Premium Plan",
  message:"You have no remaining free ${applicationName} folders.", type:"WARN", action:"GO PREMIUM", url:"${manageRoot}/management/#/apps?upgradeApp=${applicationDomain}"}, TRIAL_COUNT_DONE:{title:"Upgrade to Premium Plan", message:"You have no remaining free ${applicationName} records.", type:"WARN", action:"GO PREMIUM", url:"${manageRoot}/management/#/apps?upgradeApp=${applicationDomain}"}, TRIAL_COUNT_DONE_FILE:{title:"Upgrade to Premium Plan", message:"You have reached the limit of free protected files.",
  type:"WARN", action:"GO PREMIUM", url:"${manageRoot}/management/#/apps?upgradeApp=${applicationDomain}"}, TRIAL_COUNT_DONE_FOLDER:{title:"Upgrade to Premium Plan", message:"You have reached the limit of free protected folders.", type:"WARN", action:"GO PREMIUM", url:"${manageRoot}/management/#/apps?upgradeApp=${applicationDomain}"}, TRIAL_DAYS_LEFT:{message:"Your ${applicationName} trial is expiring in ${daysLeft} days.", type:"WARN"}, TRIAL_DAYS_ALMOST:{message:"Your ${applicationName} trial is about to expire.",
  type:"WARN", persist:!0}, TRIAL_DAYS_DONE:{title:"CloudMask for ${applicationName} Trial", message:"You have reached the end of your trial. Go Premium to enjoy unlimited protection.", type:"WARN", action:"GO PREMIUM", url:"${manageRoot}/management/#/apps?upgradeApp=${applicationDomain}"}, TRIAL_DAYS_DONE_FILE:{title:"CloudMask for ${applicationName} Trial", message:"You have reached the end of your trial. Go Premium to encrypt unlimited files.", type:"WARN", action:"GO PREMIUM", url:"${manageRoot}/management/#/apps?upgradeApp=${applicationDomain}"},
  TRIAL_DAYS_DONE_FOLDER:{title:"CloudMask for ${applicationName} Trial", message:"You have reached the end of your trial. Go Premium to encrypt unlimited folders.", type:"WARN", persist:!0, action:"GO PREMIUM", url:"${manageRoot}/management/#/apps?upgradeApp=${applicationDomain}"}, "app-preferences-notOfficer":{message:"Please contact your CloudMask security officer to enable/disable protection on desired fields.", type:"WARN"}, "clio-app-preferences-notOfficer":{message:"Please contact your CloudMask security officer to enable/disable protection on desired Clio fields.",
  type:"WARN"}, NOT_A_RECIPIENT:{message:"You don't have access to read this message.", type:"WARN"}, DEVICE_NOT_AUTHORIZED:{message:"Your device must be authorized by one of your trusted devices in order to access this message.", type:"WARN"}, AWAITING_APPROVAL:{message:"Your organization administrator must approve your account in order to access this message.", type:"WARN"}, DeviceAuthorized:{title:"CloudMask Device Authorized", message:"This device can now have full access to your data.", type:"WARN"},
  DeviceRevoked:{title:"CloudMask Device Revoked", message:"This device has been revoked and can no longer access to your data.", type:"WARN"}, NOT_TRUSTED:{message:"To read this message, the sender must first trust your account.", type:"WARN"}, NOT_A_SUBSCRIBER:{message:"The sender of this message has not accepted your administration request.", type:"WARN"}, REMOVED:{message:"The sender of this message has removed your access.", type:"WARN"}, UNTRUSTED:{message:"The sender has revoked your access to all of their data.",
  type:"WARN"}, OTHER:{message:"You don't have access to read this message.", type:"WARN"}, INVITEDUSERS:{title:"CloudMask Trusted Contacts", message:"${contactEmail} has been invited to CloudMask.", type:"INFO", persist:!1, action:"MANAGE CONTACTS", url:"${manageRoot}/management/#/users"}, PENDINGUSERS:{title:"CloudMask Trusted Contacts", message:"${contactEmail} can't access protected data as they are not part of your trusted contacts.", type:"WARN", persist:!0, action:"MANAGE CONTACTS", url:"${manageRoot}/management/#/users"},
  TRUSTEDUSERS:{title:"CloudMask Trusted Contacts", message:"${contactEmail} is now a trusted contact.", type:"WARN", persist:!0, action:"MANAGE CONTACTS", url:"${manageRoot}/management/#/users"}, PENDINGNEWDEVICESUSERS:{title:"CloudMask Trusted Contacts", message:"${contactEmail} has added new devices. These devices will not access your data until you trust them.", type:"WARN", persist:!0, action:"MANAGE CONTACTS", url:"${manageRoot}/management/#/users"}, TRUSTEDNEWDEVICESUSERS:{title:"CloudMask Trusted Contacts",
  message:"New devices added by ${contactEmail} are now trusted.", type:"WARN", persist:!0, action:"MANAGE CONTACTS", url:"${manageRoot}/management/#/users"}, PENDINGRETRUSTUSERS:{title:"CloudMask Trusted Contacts", message:"${contactEmail} can't access protected data since you have untrusted it.", type:"WARN", persist:!0, action:"MANAGE CONTACTS", url:"${manageRoot}/management/#/users"}, RETRUSTEDUSERS:{title:"CloudMask Trusted Contacts", message:"${contactEmail} who was previously untrusted is now part of your trusted contacts.",
  type:"WARN", persist:!0, action:"MANAGE CONTACTS", url:"${manageRoot}/management/#/users"}, AUTHORIZATION_REQUIRED:{title:"Disabled Encrypted Mode", message:"To compose an encrypted message, you must first authorize CloudMask to access your email", type:"WARN", persist:!0, action:"AUTHORIZE"}, WRAPPING_REQUIRED:{title:"Plain Text Email Not Supported", message:"To compose an encrypted message, you must first turn off Plain Text mode.", type:"WARN", persist:!0, action:"SHOW ME", url:"http://help.cloudmask.com"},
  MODE_SWITCH_FILE_EXISTS:{message:"To change encryption mode, you must first remove the attachments.", type:"WARN"}};
}, {}], 31:[function(h, B, a) {
  var p = h("./env"), t = h("./log").j("Overload"), w = h("./elementNode"), g = h("./overloadRules"), m = h("./typeAheadHandler"), e = h("./actionTracker"), f = h("./recordRequest");
  a.Tj = [].concat([{target:"window", open:function(a, b, c, e, f) {
    try {
      if (t.debug("CM380 " + e + ", For URL: " + c), !c || !a.oc(this, c)) {
        var g = b.call(this, c, e, f);
        g && (this.qf = this.qf || [], this.qf.push(g));
        return g;
      }
    } catch (h) {
      t.b("CM381 ", h);
    }
  }}, {target:"document", open:function(a, b) {
    try {
      return t.warn("CM382 "), a.Qd(this, function() {
        return b.call(this);
      });
    } catch (c) {
      throw t.b("CM383 ", c), c;
    }
  }}, {target:"document", write:function(a, b, c) {
    try {
      return t.warn("CM384 " + c), a.Qd(this, function() {
        return b.call(this, c);
      }, !0);
    } catch (e) {
      throw t.b("CM385 ", e), e;
    }
  }}, {target:"document", writeln:function(a, b, c) {
    try {
      return t.warn("CM386 "), a.Qd(this, function() {
        return b.call(this, c);
      }, !0);
    } catch (e) {
      throw t.b("CM387 ", e), e;
    }
  }}], [{target:"Node", appendChild:function(a, b, c) {
    try {
      var e;
      a.Ie(c);
      if (c instanceof window.HTMLIFrameElement) {
        return e = b.call(this, c);
      }
      if (c instanceof window.DocumentFragment) {
        return e = b.call(this, c), a.u(this) && a.Z(this), e;
      }
      t.debug("CM391 " + this.nodeName + ", for child:" + c.nodeName);
      var f = b.call(this, c);
      a.u(this) && a.Z(c);
      return f;
    } catch (g) {
      t.b("CM393 ", g);
    }
  }}, {target:"Node", replaceChild:function(a, b, c, e) {
    try {
      var f = b.call(this, c, e);
      c instanceof window.HTMLIFrameElement ? t.warn("CM394 ") : a.Z(c);
      return f;
    } catch (g) {
      t.b("CM395 ", g);
    }
  }}, {target:"Node", insertBefore:function(a, b, c, e) {
    try {
      var f;
      c instanceof window.HTMLIFrameElement ? f = b.call(this, c, e) : c instanceof window.DocumentFragment ? (f = b.call(this, c, e), p.S() || p.Yc() || a.Z(this)) : (f = b.call(this, c, e), a.Z(c));
      return f;
    } catch (g) {
      t.b("CM399 ", g);
    }
  }}, {target:"Node", cloneNode:function(a, b, c) {
    return a.l.option.Ch && a.me(this) ? (t.warn("CM400 " + this.tagName + "." + this.className), a.ze(this)) : b.call(this, c);
  }}, {target:"Element", removeAttribute:function(a, b, c) {
    if ("placeholder" == c) {
      var e = a.a(this);
      if (e.T && e.usage == a.Usage.subject) {
        return;
      }
    }
    b.call(this, c);
  }}, {target:"Element", setAttribute:function(a, b, c, e) {
    var f = "A" == this.tagName && "href" == c;
    if ((f || "IFRAME" == this.tagName && "src" == c) && a.l.eg(e) || p.S() && f && this.hasAttribute("download")) {
      a.oc(this, e, function() {
        b.call(this, c, e);
      });
    } else {
      if ("placeholder" == c && !e && (f = a.a(this), f.T && f.usage == a.Usage.subject)) {
        return;
      }
      b.call(this, c, e);
      a.Qg(this);
    }
  }}, {target:"Element", setAttributeNS:function(a, b, c, e) {
    b.call(this, c, e);
  }}, {target:"Element", setAttributeNode:function(a, b, c, e) {
    b.call(this, c, e);
  }}, {target:"Element", setAttributeNodeNS:function(a, b, c, e) {
    b.call(this, c, e);
  }}, {target:["Element", "HTMLElement"], insertAdjacentHTML:function(a, b, c, e) {
    try {
      console.log("insertAdjacentHTML"), b.call(this, c, e), a.Z(this.parentNode, e);
    } catch (f) {
      t.b("CM405 ", f);
    }
  }}, {target:"HTMLElement", click:function(a, b) {
    this instanceof HTMLInputElement && "file" == this.type && e.Wk();
    b.call(this);
  }}, {target:"Range", cloneContents:function(a, b) {
    p.fj() && w.fc(this.commonAncestorContainer) && a.Hb(this.commonAncestorContainer);
    return a.me(this.commonAncestorContainer) ? w.cloneRange(this, a.ze.bind(a)) : b.call(this);
  }}], [{target:"MessagePort", postMessage:function(a, b, c, e) {
    var f = this;
    f.rf = f.rf || Promise.resolve();
    var g = {message:c, Do:e};
    f.rf.then(function() {
      return a.ec(g).catch(function(a) {
        console.error("MessagePort handleMessage", a);
      }).then(function() {
        b.call(f, c, e);
      });
    });
  }}]);
  a.wh = [{target:"XMLHttpRequest", open:function(a, b, c, e, f, g, h) {
    try {
      var p = a.a(this);
      p.Zg = e;
      p.method = c;
      a.A() || (a.Ye && (p.Gb = a.Gb.Ve(a.Ce, e), p.Gb && (p.onreadystatechange = this.onreadystatechange)), p.vd = m.Ve(a.Ce, e, this, a.handler.xk), p.vd && (e = p.vd.url));
      var w = Array.prototype.slice.call(arguments, 2);
      return b.apply(this, w);
    } catch (u) {
      throw t.b("CM415 ", u), u;
    }
  }}, {target:"XMLHttpRequest", setRequestHeader:function(a, b, c, e) {
    try {
      if (a.A()) {
        return b.call(this, c, e);
      }
      var g = a.a(this);
      g.dataElements = g.dataElements || [];
      g.headers = g.headers || [];
      g.headers.push({key:c, value:e});
      var h = decodeURIComponent(e);
      h && a.handler.Pg(h, function(a, b, c) {
        f.Ic(g.dataElements, b, c);
      });
      b.call(this, c, e);
    } catch (m) {
      throw t.b("CM416 ", m), m;
    }
  }}, {target:"XMLHttpRequest", send:function(a, b, c) {
    try {
      var e = this, f, h = a.a(e);
      if (a.A()) {
        return b.call(e, c);
      }
      if (h.vd) {
        return h.vd.send(a, e, h, c);
      }
      if (h.Gb) {
        return h.Gb.send(a, e, h);
      }
      a.vb(h.Zg, function() {
      });
      if (!c) {
        return b.call(e, c);
      }
      var m = a.J.gj(c);
      if (m && a.dj(c) && !a.J.ke(c)) {
        return t.warn("CM418 "), b.call(e, c);
      }
      if (!m) {
        return a.vb(c, function(a) {
          b.call(e, a);
        });
      }
      if (a.J.ke(c)) {
        return a.J.Ui(e, c, function(a) {
          if (!a) {
            if (p.Aa() || p.fa()) {
              f = g.H("XMLHttpRequest", "setRequestHeader"), f.call(e, "X-CloudMask", "Encrypted");
            }
            b.call(e, c);
          }
        });
      }
      if (a.J.isFile(c) || a.J.wb(c)) {
        return a.J.he(e, c, function(a, c) {
          if (!a) {
            if (p.Aa() || p.fa()) {
              f = g.H("XMLHttpRequest", "setRequestHeader"), f.call(e, "X-CloudMask", "Encrypted");
            }
            b.call(e, c);
          }
        });
      }
      t.b("CM423 ");
    } catch (w) {
      throw t.b("CM424 ", w), w;
    }
  }}, {target:"XMLHttpRequest", optional:!0, Xn:function(a, b, c) {
    try {
      if (c) {
        var e = this;
        a.vb(c, function(a) {
          return b.call(e, a);
        });
      } else {
        return b.call(this);
      }
    } catch (f) {
      throw t.b("CM427 ", f), f;
    }
  }}, {target:"window", fetch:function(a, b, c, e) {
    var f = Array.prototype.slice.call(arguments, 2), f = b.apply(this, f), g = e && e.body;
    g && "string" == typeof g && (t.info("CM428 "), a.vb(g, function() {
    }));
    return f;
  }}];
}, {"./actionTracker":1, "./elementNode":14, "./env":17, "./log":25, "./overloadRules":33, "./recordRequest":35, "./typeAheadHandler":41}], 32:[function(h, B, a) {
  function p(a, d, b) {
    var c = [];
    c.clear = function() {
      a.clear();
      c.splice(0);
    };
    c.add = function(e, g) {
      var h = a.add(e, g);
      h && (d.a(h).part = b, c.push(h));
      return h;
    };
    c.remove = function(b) {
      a.remove(b);
      c.splice(b, 0);
    };
    for (var e = 0;e < a.length;e++) {
      var g = a[e];
      d.a(g).part = b;
      c.push(g);
    }
    return c;
  }
  h("./utils");
  h("./env");
  var t = h("./log").j("Overload"), w = h("./elementNode"), g = h("./constants"), m = h("./overloadRules");
  a.jk = [{target:"HTMLInputElement", m:"value", v:function(a, d) {
    var b = d.call(this);
    a.a(this).pe = !0;
    return a.ta(this, b, !1);
  }, R:function(a, d, b) {
    delete a.a(this).references;
    a.Z(this, b, function(a) {
      d.call(this, a);
    });
  }}, {target:"HTMLInputElement", m:"placeholder", v:function(a, d) {
    return d.call(this);
  }, R:function(a, d, b) {
    if (!b) {
      var c = a.a(this);
      if (c.T && c.usage == a.Usage.subject) {
        return;
      }
    }
    d.call(this, b);
  }}, {target:"HTMLInputElement", m:"files", v:function(a, d) {
    var b = d.call(this);
    if (a.A() || !b || !b.length) {
      return b;
    }
    var c = a.Hi(this);
    if (!c) {
      t.b("CM433 ");
      return b;
      t.b("CM434 ");
      return e;
    }
    var g = a.M(c);
    if (!g.isClear && a.gc("FILE")) {
      return e;
    }
    for (var h = 0;h < b.length;h++) {
      var m = b[h];
      if (!g.isClear && m.webkitRelativePath && -1 < m.webkitRelativePath.indexOf("/")) {
        return a.showNotification("FOLDER_UPLOAD_NOT_SUPPORTED"), e;
      }
      a.a(m).part = c;
    }
    return b;
  }}, {target:"DragEvent", m:"dataTransfer", v:function(a, d) {
    var b = d.call(this);
    if (!b || !b.files || !b.files.length) {
      return b;
    }
    if (a.A()) {
      return b;
    }
    var c = a.Tf(this.clientX, this.clientY);
    if (!c) {
      t.b("CM436 ");
      return b;
      t.b("CM437 ");
      a.a(b).rb = !0;
      return b;
    }
    var e = a.M(c);
    a.a(b).part = c;
    if (e.isClear) {
      return b;
    }
    if (a.gc("FILE")) {
      return a.a(b).rb = !0, b;
    }
    for (var e = m.get("DataTransfer", "items").call(b), h = a.J.un, c = 0;h && c < e.length;c++) {
      var x = h.call(e[c]);
      if (x && x.isDirectory) {
        return a.showNotification("FOLDER_UPLOAD_NOT_SUPPORTED"), a.a(b).rb = !0, b;
      }
    }
    if (a.l.option.Ah) {
      for (var p, w, e = b.files, c = 0;c < e.length && (!p || !w);c++) {
        -1 < g.hh.indexOf(e[c].type) ? p = !0 : w = !0;
      }
      p && !w && (a.showNotification("INLINE_IMAGES_BLOCKED"), a.a(b).rb = !0);
    }
    return b;
  }}, {target:"DataTransfer", m:"files", v:function(a, d) {
    var b = d.call(this);
    if (b && a.Vc(this)) {
      if (a.a(this).rb) {
        return e;
      }
      for (var c = a.a(this).part, g = 0;c && g < b.length;g++) {
        a.a(b[g]).part = c;
      }
    }
    return b;
  }}, {target:"DataTransfer", m:"items", v:function(a, d) {
    var b = d.call(this);
    if (!b || !a.Vc(this)) {
      return b;
    }
    if (a.a(this).rb) {
      return b.clear(), b;
    }
    var c = a.a(this).part;
    return c ? p(b, a, c) : b;
  }}, {target:"DataTransfer", m:"types", v:function(a, d) {
    return a.a(this).rb ? [] : d.call(this);
  }}, {target:"HTMLTitleElement", m:"text", v:function(a, d) {
    var b = d.call(this);
    return a.ta(this, b, !1);
  }, R:function(a, d, b) {
    a.Z(this, b, function(a) {
      d.call(this, a);
    });
  }}, {target:["Document", "HTMLDocument"], m:"title", v:function(a, d) {
    var b = d.call(this), c = this.getElementsByTagName("title")[0], e = a.a(c);
    return e && e.T ? a.ta(c, b, !1) : b;
  }, R:function(a, d, b) {
    d.call(this, b);
    a.Z(this.getElementsByTagName("title")[0]);
  }}, {target:"Element", m:"outerHTML", v:function(a, d) {
    return d.call(this);
  }, R:function(a, d, b) {
    return d.call(this, b);
  }}, {target:["Element", "HTMLElement"], m:"innerHTML", v:function(a, d) {
    var b = a.Pa(this) && (w.isContentEditable(this) || a.me(this));
    b && !a.Ba && (b = !1);
    if (!b) {
      return d.call(this);
    }
    b = a.a(this);
    if (b.T || w.isContentEditable(this) && a.jj(this)) {
      var c = d.call(this);
      b.T || a.Hb(this);
      b.pe = !0;
      return a.ta(this, c, !0);
    }
    b = a.ze(this);
    return w.de(b);
  }, R:function(a, d, b) {
    var c = a.a(this);
    b && c && !a.ib.kj(b) && (c.folderParents = null, c.fieldID = null, c.recordID = null);
    a.Z(this, b, d);
  }}, {target:"HTMLTextAreaElement", m:"value", v:function(a, d) {
    var b = d.call(this);
    a.a(this).pe = !0;
    return a.ta(this, b, !1);
  }, R:function(a, d, b) {
    delete a.a(this).references;
    a.Z(this, b, function(a) {
      d.call(this, a);
    });
  }}, {target:["Node", "HTMLElement"], m:"textContent", v:function(a, d) {
    var b = d.call(this);
    return w.isContentEditable(this) || a.a(this).T ? a.ta(this, b, !1) : b;
  }, R:function(a, d, b) {
    a.Z(this, b, d);
  }}, {target:"Node", m:"nodeValue", v:function(a, d) {
    return d.call(this);
  }, R:function(a, d, b) {
    a.He(this);
    a.Z(this, b, function() {
      d.call(this, b);
    }.bind(this));
  }}, {target:"HTMLAnchorElement", m:"href", v:function(a, d) {
    var b = d.call(this), c = a.a(this);
    return c && c.hb ? c.hb : b;
  }, R:function(a, d, b) {
    b && b.constructor === String && a.oc(this, b) ? d.call(this, "") : (delete a.a(this).hb, d.call(this, b));
  }}, {target:"HTMLAnchorElement", m:"text", v:function(a, d) {
    var b = d.call(this);
    return b && a.Ba && w.isContentEditable(this) && a.u(this) ? a.ta(this, b, !1) : b;
  }, R:function(a, d, b) {
    a.Z(this, b, d);
  }}, {target:"HTMLIFrameElement", m:"src", v:function(a, d) {
    var b = d.call(this), c = a.a(this);
    return c && c.hb ? c.hb : b;
  }, R:function(a, d, b) {
    var c = this;
    b && b.constructor === String && a.oc(this, b, function() {
      delete a.a(c).hb;
      d.call(c, b);
    }) ? d.call(this, "") : (delete a.a(this).hb, d.call(this, b));
  }}, {target:"HTMLElement", m:"title", v:function(a, d) {
    var b = d.call(this), c = this.attributes.title;
    c && c.oa && c.oa.T && t.warn("CM454 " + b);
    return b;
  }, R:function(a, d, b) {
    d.call(this, b);
  }}, {target:"HTMLImageElement", m:"alt", v:function(a, d) {
    var b = d.call(this), c = this.attributes.alt;
    c && c.oa && c.oa.T && t.warn("CM457 " + b);
    return b;
  }, R:function(a, d, b) {
    d.call(this, b);
  }}, {target:"HTMLImageElement", m:"src", v:function(a, d) {
    return d.call(this);
  }, R:function(a, d, b) {
    return d.call(this, b);
  }}, {target:["Blob", "File"], m:"size", v:function(a, d) {
    return a.J.Sk(this, d);
  }}, {target:"File", m:"name", v:function(a, d) {
    return a.J.Ej(this, d);
  }}, {target:"Element", m:"className", v:function(a, d) {
    return d.call(this);
  }, R:function(a, d, b) {
    d.call(this, b);
    a.Qg(this);
  }}, {target:"KeyboardEvent", m:"char", optional:!0, v:function(a, d) {
    return d.call(this);
  }}, {target:"KeyboardEvent", m:"charCode", v:function(a, d) {
    return d.call(this);
  }}, {target:"KeyboardEvent", m:"key", v:function(a, d) {
    return d.call(this);
  }}, {target:"KeyboardEvent", m:"keyCode", v:function(a, d) {
    return d.call(this);
  }}, {target:"XMLHttpRequest", m:"responseXML", v:function(a, d) {
    return a.a(this).responseXML ? a.a(this).responseXML : d.call(this);
  }}, {target:"XMLHttpRequest", m:"response", v:function(a, d) {
    return a.a(this).response ? a.a(this).response : d.call(this);
  }}, {target:"XMLHttpRequest", m:"responseText", v:function(a, d) {
    return a.a(this).responseText ? a.a(this).responseText : d.call(this);
  }}, {target:"XMLHttpRequest", m:"onreadystatechange", R:function(a, d, b) {
    a = a.a(this);
    if (!a.Gb) {
      return d.call(this, b);
    }
    a.onreadystatechange = b;
  }, v:function(a, d) {
    var b = a.a(this);
    return b.onreadystatechange ? b.onreadystatechange : d.call(this);
  }}];
  var e = {length:0, item:function() {
    return null;
  }};
}, {"./constants":12, "./elementNode":14, "./env":17, "./log":25, "./overloadRules":33, "./utils":43}], 33:[function(h, B, a) {
  function p(a, f, d, b) {
    t(a, f, "methods", d, b);
  }
  function t(a, f, d, b, c) {
    m[a] = m[a] || {Gm:{}, so:{}, methods:{}};
    m[a][d] = m[a][d] || {};
    m[a][d][f] = {ue:b, bf:c};
  }
  function w(a, f, d) {
    return m[a] && m[a][d] && m[a][d][f];
  }
  h("./utils");
  h("./env");
  var g = h("./log").j("Overload");
  a.Rh = function(a, f) {
    function d(b, c, d, f, h, l) {
      var m = null, x = null, p = f && function() {
        try {
          return a.A() ? m.apply(this, arguments) : f.call(this, a, m);
        } catch (b) {
          throw g.b(c + ", " + d + ", getter: ", b), b;
        }
      }, u = h && function(b) {
        try {
          return a.A() ? x.apply(this, arguments) : h.call(this, a, x, b);
        } catch (f) {
          throw g.b(c + " " + d + " setter: ", f), f;
        }
      }, y = Object.getOwnPropertyDescriptor(b, d);
      if (y) {
        m = y.get;
        x = y.set;
        if (p) {
          if (m) {
            y.get = p;
          } else {
            return g.warn("CM485 " + c + ", " + d);
          }
        }
        if (u) {
          if (x) {
            y.set = u;
          } else {
            return g.warn("CM486 " + c + ", " + d);
          }
        }
        y.set || delete y.set;
        y.get || delete y.get;
        Object.defineProperty(b, d, y);
        t(l, d, "getters", m, p);
        t(l, d, "setters", x, u);
        return !0;
      }
      g.info("CM484 " + c + ", " + d);
    }
    function b(b, c, d, f, h) {
      var l = b[d];
      if (l) {
        if (h || b.hasOwnProperty(d)) {
          return b[d] = function() {
            try {
              return a.A() ? l.apply(this, arguments) : f.call.apply(f, [].concat([this, a, l], ha(arguments)));
            } catch (b) {
              throw g.b("CM491 " + c + "-" + d, b), b;
            }
          }, p(c, d, l, b[d]), !0;
        }
        g.warn("CM490 " + c + "-" + d);
      } else {
        g.info("CM489 " + c + "-" + d);
      }
    }
    console.log("Applying overload rules");
    for (var c = window, h = 0;h < f.length;h++) {
      var m = f[h], x = null;
      try {
        var y = [];
        "string" == typeof m.target ? y.push(m.target) : y = m.target;
        var w = !1;
        if (!m.m) {
          for (var A in m) {
            if (0 > ["property", "getter", "setter", "target", "optional"].indexOf(A)) {
              x = A;
              break;
            }
          }
          if (!x) {
            g.error("CM477 ", m);
            continue;
          }
          if ("function" != typeof m[x]) {
            g.error("CM478 ", m);
            continue;
          }
        }
        var u = null;
        y.forEach(function(a) {
          u || (u = a);
          var e, f = !1;
          if ("window" == a) {
            e = c, f = !0;
          } else {
            if ("document" == a) {
              e = document, f = !0;
            } else {
              if (e = c[a] && c[a].prototype, !e) {
                g.info("CM479 " + a + ", " + name);
                return;
              }
            }
          }
          w = x ? w || b(e, a, x, m[x], f) : w || d(e, a, m.m, m.v, m.R, u);
        });
        w || (m.optional ? g.info("CM480 " + JSON.stringify(y) + "," + (m.m || x)) : g.warn("CM481 " + JSON.stringify(y) + "," + (m.m || x)));
      } catch (D) {
        g.warn("CM482 " + m.target + ", " + m.m, D);
      }
    }
    console.log("Done overload rules");
  };
  var m = {};
  a.get = function(a, f) {
    var d = w(a, f, "getters");
    return d && d.ue;
  };
  a.Dj = function() {
    var a = w("Element", "innerHTML", "getters");
    return a && a.bf;
  };
  a.set = function(a, f) {
    var d = w(a, f, "setters");
    return d && d.ue;
  };
  a.sn = function(a, f) {
    var d = w(a, f, "setters");
    return d && d.bf;
  };
  a.Vn = p;
  a.H = function(a, f, d) {
    var b = w(a, f, "methods");
    return b && b.ue || d && window[a].prototype[f];
  };
  a.qn = function(a, f) {
    var d = w(a, f, "methods");
    return d && d.bf;
  };
}, {"./env":17, "./log":25, "./utils":43}], 34:[function(h, B, a) {
  (function(h, t) {
    "function" === typeof define && define.Pl ? define(["exports"], t) : "object" === typeof a && "string" !== typeof a.nodeName ? t(a) : (h.CLOUDMASK || (h.CLOUDMASK = {}), t(h.CLOUDMASK.part = {}));
  })(this, function(a) {
    function h(a, g, m) {
      this.config = a || {};
      this.fields = g || [];
      this.children = m || [];
    }
    h.prototype = {addField:function(a) {
      this.fields.push(a);
    }, addFields:function(a) {
      for (var g = 0;g < a.length;g++) {
        this.addField(a[g]);
      }
    }, addChild:function(a) {
      a instanceof h || console.warn("Adding an object that's not a part to the tree", a);
      a.parent = this;
      this.children.push(a);
    }, addChildren:function(a) {
      for (var g = 0;g < a.length;g++) {
        this.addChild(a[g]);
      }
    }};
    a.mh = h;
  });
}, {}], 35:[function(h, B, a) {
  function p(a, b) {
    return a.sharingType ? e.gk(a).then(function(c) {
      c || (m.warn("CM492 "), a.recipients && a.recipients.forEach(function(a) {
        b.push({email:a, userEmail:a});
      }), a.bccRecipients && a.bccRecipients.forEach(function(a) {
        b.push({email:a, userEmail:a, blindFlag:!0});
      }), delete a.recipients, delete a.bccRecipients, delete a.sharingOperation);
    }) : Promise.resolve();
  }
  function t(a, b, c) {
    if (c.recordID != w.G && !a.some(function(a) {
      return a.recordID == c.recordID && a.fieldID == (c.K || c.fieldID);
    })) {
      var e = c.recordID;
      if (d.isReference(c.usage) || d.Qa(c.usage)) {
        e = null;
      }
      var f = null;
      c.lines && (f = f || {}, f.lines = c.lines);
      a.push({path:c.path, value:b, usage:c.usage || w.Usage.text, folderParents:c.folderParents, recordID:e, previousFieldID:c.K ? c.fieldID : 0, fieldID:c.K || c.fieldID, fileLinks:c.fileLinks, metaData:f, references:c.references, isReference:d.isReference(c.usage) || d.Qa(c.usage), fieldName:c.fieldName || c.c && c.c.properties && c.c.properties.fieldName || null});
    }
  }
  var w = h("./constants").Ga, g = h("./utils"), m = h("./log").j("recordRequest"), e = h("./sharing"), f = h("./elementPart"), d = h("./elementRule"), b = h("./localCache").V, c;
  a.init = function(a) {
    c = a.tb();
  };
  a.save = function(a, b) {
    var d = b && b.wa || {}, e = f.Oi(a.recordID, b) || [];
    e.length || (e = null);
    return p(d, e).then(function() {
      return c.savePage({cmRequest:{dataElements:a.dataElements, recordType:a.recordType, recordID:a.recordID, groupIDs:d.groupID ? [d.groupID] : null, sharingRuleID:d.c ? d.c.sharingRuleID : null, pendingSharing:e, childrenRecords:b && b.childrenRecords, parentRecordID:b && b.parentRecordID}, recipients:d.recipients, bccRecipients:d.bccRecipients, sharingOperation:d.sharingOperation}).catch(function(a) {
        g.showNotification(window, a.message, "ERROR");
        throw a;
      });
    });
  };
  a.saveFileName = function(a, b, d) {
    var e = [];
    return p(b, e).then(function() {
      a.recipients = b.recipients;
      return c.saveFileName({fileProp:{fileName:a.name, recordID:a.recordID, fieldID:a.fieldID, folderParents:a.folderParents, metaData:a.metaData, groupID:b.groupID, recipients:b.recipients, fileLinks:a.fileLinks}, sharingRuleID:b.sharingRuleID, pendingSharing:e, pendingDataElements:a.pendingDataElements, isCommitted:d, isNewMessage:d});
    });
  };
  a.Un = function(a, b) {
    m.warn("CM493 ");
    return c.savePage({cmRequest:{dataElements:b, recordID:a}}).catch(function(a) {
      g.showNotification(window, a.message, "ERROR");
      throw a;
    });
  };
  a.updateRecord = function(a, d) {
    var e = [];
    d.forEach(function(a) {
      b.xc(a.recordID, a.K, a);
      t(e, null, a);
    });
    return c.updateRecord({recordID:a.recordID, parentRecordID:a.parentRecordID, applicationReference:a.applicationReference, dataElements:e});
  };
  a.Ic = t;
  a.kg = function(a) {
    return !a.dataElements.length || !a.dataElements.some(function(a) {
      return !a.isReference;
    });
  };
}, {"./constants":12, "./elementPart":15, "./elementRule":16, "./localCache":24, "./log":25, "./sharing":37, "./utils":43}], 36:[function(h, B, a) {
  function p(a, b, c, h) {
    c && (this.kf = c);
    h && (this.ff = h);
    this.f = w;
    this.h = a;
    b || "undefined" === typeof window || (b = window);
    this.ba = b ? b.location.protocol + b.location.hostname : "__agent_root__";
    a = this.sessionStorage = t.Pi();
    window.opener && window.top == window && (w.info("CM494 "), a.removeItem(g), a.removeItem(m), a.removeItem(e), a.removeItem(f));
    this.Ec();
  }
  B = h("./log");
  var t = h("./storage"), w = B.j("reservation"), g = "cloudmask.reservedReferences", m = "cloudmask.reservedRecords", e = "cloudmask.expiryTime", f = "cloudmask.timeoutID";
  p.prototype = {kf:20, ff:100, Ec:function(a) {
    function b() {
      if (a) {
        return a.apply(this, arguments);
      }
    }
    var c = this.Ja(), e = this.Gd(g, 0) + 1;
    this.sessionStorage.setItem(g, e);
    if (c.length >= this.ff) {
      return this.f.info("CM495 " + c.length + ", domain: " + this.ba), b();
    }
    this.f.info("CM496 " + this.ba);
    this.h.reserveRecords({hostname:this.ba, size:this.kf}, function(a, d) {
      if (a) {
        b(a);
      } else {
        c = this.Ja();
        this.f.info("CM497 " + this.ba);
        if (!d) {
          return this.f.warn("CM498 "), b();
        }
        this.wf(d.expiryPeriod);
        d.recordIDs.forEach(function(a) {
          0 <= c.indexOf(a) && this.f.error("CM499 " + a);
          c.push(a);
        }.bind(this));
        this.Hc(c);
        return b();
      }
    }.bind(this));
  }, ph:function() {
    var a = this.Ja();
    0 == a.length ? this.f.warn("CM500 ") : (this.sessionStorage.setItem(e, null), this.h.renewRecords(a, function(a) {
      this.wf(a);
    }.bind(this)));
  }, Hl:function() {
    var a = this.Ja("Reservation release called with emtpy session Storage"), b = this.Gd(g, 0);
    b--;
    this.sessionStorage.setItem(g, b);
    0 == b && (this.sessionStorage.removeItem(m), this.warn("Calling release of reservation..."), this.h.releaseRecords(a));
  }, fl:function(a) {
    var b = this.Ja();
    b.push(a);
    this.Hc(b);
  }, oh:function(a) {
    var b = this.Ja();
    if (!b.length) {
      throw this.Ec(function() {
        a && a();
      }), Error("Reserve Remove Failed to find record");
    }
    var c = b.splice(0, 1);
    this.f.info("CM501 " + c[0]);
    this.Hc(b);
    this.Ec();
    return c[0];
  }, ef:function(a) {
    var b = this;
    if (!a && this.s) {
      return console.warn("Found pending reserve... adding to chain"), b.Ka = b.Ka || 0, b.Ka++, this.s = this.s.then(function() {
        b.Ka--;
        b.Ka || (console.warn("At end of chain..."), delete b.s);
        return b.ef(!0);
      });
    }
    var c = !1;
    a = new Promise(function(a, d) {
      function e() {
        var c = f.shift();
        b.Hc(f);
        a(c);
      }
      var f = b.Ja();
      f && f.length ? e() : (c = !0, b.Ec(function(a) {
        a ? d(a) : ((f = b.Ja()) && f.length ? e() : d(Error("Could not get more recordIDs")), b.Ud = null, b.Mf = []);
      }));
    });
    c && !b.s && (b.s = a);
    return a;
  }, Ja:function(a) {
    return this.Gd(m, [], a);
  }, Hc:function(a) {
    this.sessionStorage.setItem(m, JSON.stringify(a));
  }, wf:function(a) {
    var b = this.Fh(), c = new Date;
    c.setHours(c.getHours() + a);
    if (!b || b > c) {
      b = c;
      this.sessionStorage.setItem(e, b);
      a = b - new Date;
      clearTimeout(this.sessionStorage.getItem(f));
      var g = this;
      a = setTimeout(function() {
        g.ph();
      }, a);
      this.sessionStorage.setItem(f, a);
    }
  }, Fh:function() {
    return this.sessionStorage.getItem(e);
  }, Gd:function(a, b, c) {
    (a = this.sessionStorage.getItem(a)) ? b = JSON.parse(a) : c && this.f.warn(c);
    return b;
  }};
  a.qh = p;
}, {"./log":25, "./storage":39}], 37:[function(h, B, a) {
  function p(a) {
    a.recipients = a.recipients || [];
    var b = Promise.resolve();
    if (a.ne || a.sharingType == d.wd) {
      return Promise.resolve(!0);
    }
    a.inheritRecordID && a.inheritRecordID != f.G && (m.info("CM505 " + a.inheritRecordID), b = l.getRecordRecipients(a.inheritRecordID).then(function(b) {
      m.info("CM506 " + a.inheritRecordID + ", " + b);
      e.rg(a.recipients, b);
    }));
    a.groupID && (b = b.then(function() {
      return l.getGroup({ID:a.groupID, Name:a.groupName}).then(function(b) {
        e.rg(a.recipients, b.members, "email");
        m.info("CM507 " + JSON.stringify(a.recipients));
        return a;
      });
    }));
    return b.then(function() {
      return t(a).then(function(b) {
        b && (a.ne = !0);
        return b;
      });
    });
  }
  function t(a) {
    var b, d = !1;
    void 0 != a.dm && (d = !1);
    a.recipients = a.recipients || [];
    var f = e.Of(c);
    f && -1 == a.recipients.indexOf(f) && f != g.ENV.email && a.recipients.push(f);
    f = a.recipients.indexOf(g.ENV.email);
    -1 < f && a.recipients.splice(f, 1);
    return a.recipients.length ? l.getUserStatus(a.recipients).then(function(a) {
      b = a;
      delete b.AWAITING_APPROVAL;
      var c = !1;
      Object.keys(b).forEach(function(a) {
        b[a].length ? "ACTIVE" != a && "INVITED" != a && (c = !0) : delete b[a];
      });
      return c ? d ? e.Nk(b) : {proceed:!0, inviteUsers:!0, trustUsers:!0, Xg:!0, Bg:!1} : {proceed:!0, Hj:!0};
    }).then(function(c) {
      if (!c.proceed) {
        return !1;
      }
      if (c.Hj) {
        return !0;
      }
      var e = [];
      if (b.NOT_INVITED && c.inviteUsers) {
        var f = b.NOT_INVITED;
        m.info("CM508 ", f);
        e.push(l.inviteUsers({emails:f, notify:E}).then(function() {
          a.invitedUsers = (a.invitedUsers || []).concat(f);
        }));
      }
      var g = [];
      b.NOT_TRUSTED && (c.trustUsers ? g = g.concat(b.NOT_TRUSTED) : a.pendingUsers = (a.pendingUsers || []).concat(b.NOT_TRUSTED));
      b.NEW_DEVICE && (c.Xg ? g = g.concat(b.NEW_DEVICE) : a.pendingNewDevicesUsers = (a.pendingNewDevicesUsers || []).concat(b.NEW_DEVICE));
      b.UNTRUSTED && (c.Bg ? g = g.concat(b.UNTRUSTED) : a.pendingRetrustUsers = (a.pendingRetrustUsers || []).concat(b.UNTRUSTED));
      g.length && e.push(l.trustUsers(g).then(function() {
        b.NOT_TRUSTED && c.trustUsers && (a.trustedUsers = (a.trustedUsers || []).concat(b.NOT_TRUSTED));
        b.NEW_DEVICE && c.Xg && (a.trustedNewDevicesUsers = (a.trustedNewDevicesUsers || []).concat(b.NEW_DEVICE));
        b.UNTRUSTED && c.Bg && (a.retrustedUsers = (a.retrustedUsers || []).concat(b.UNTRUSTED));
      }));
      return Promise.all(e).then(function() {
        a.gm || d || w(a);
        return !0;
      });
    }) : Promise.resolve(!0);
  }
  function w(a) {
    function b(a, c) {
      c && c.length && c.forEach(function(b) {
        e.Kk(a, {contactEmail:b});
      });
    }
    var c = "retrustedUsers pendingRetrustUsers trustedNewDevicesUsers pendingNewDevicesUsers trustedUsers pendingUsers invitedUsers".split(" ");
    if (Array.isArray(a)) {
      var d = a;
      a = {};
      d.forEach(function(b) {
        b && c.forEach(function(c) {
          b[c] && b[c].length && (a[c] = (a[c] || []).concat(b[c]));
        });
      });
      c.forEach(function(b) {
        a[b] = e.Za(a[b]);
      });
    }
    c.forEach(function(c) {
      b(c.toLocaleUpperCase(), a[c]);
    });
  }
  var g = h("./env");
  h("./constants");
  var m = h("./log").j("sharing"), e = h("./utils");
  h("./elementNode");
  var f = h("./constants").Ga, d = h("./constants").mf, b = h("./application"), c, l, E = !0;
  a.init = function(a, b, d) {
    c = b;
    E = (b.option.properties || {}).emailInvitees;
    l = d && d.tb();
  };
  a.Qi = function(a, f) {
    var g = {recipients:[], sharingType:d.df};
    g.inheritRecordID = a ? a.recordID : null;
    var h = b.yj(c, f);
    g.c = h.c;
    g.applicationSubscriptionID = e.yi(c);
    g.c && (g.sharingType = g.c.sharingType.toLowerCase());
    g.sharingType == d.jh && (g.groupID = g.c.groupID, g.groupName = g.c.groupName, g.groupID || (h = e.xi(c), g.groupID = h.id, g.groupName = h.name));
    return g;
  };
  a.zc = function(a, b, c, f, g) {
    a.sharingOperation = "add";
    a.sharingType = d.df;
    a.recipients = a.recipients || [];
    a.bccRecipients = a.bccRecipients || [];
    if (b || c || f) {
      a = e.Ue(a), e.$(a.recipients, c), e.$(a.recipients, f), e.$(a.bccRecipients, f), a.recordIDs = b;
    }
    if (!a.recordIDs) {
      throw Error("No records found for sharing");
    }
    return p(a).then(function(b) {
      return b ? g ? !0 : a.recipients.length ? l.shareWithOthers(a).then(function() {
        return !0;
      }).catch(function(a) {
        m.error("CM503 ", a);
        return !1;
      }) : (m.info("CM502 "), !0) : !1;
    });
  };
  a.Ge = function(a, b) {
    a.sharingOperation = "remove";
    a.recipients = a.recipients || [];
    e.$(a.recipients, b);
    if (!a.recipients.length) {
      throw Error("Remove did not find any valid emails", b);
    }
    return l.shareWithOthers(a).then(function() {
      return !0;
    }).catch(function(a) {
      m.error("CM504 ", a);
      return !1;
    });
  };
  a.gk = p;
  a.Yh = t;
  a.notify = w;
}, {"./application":3, "./constants":12, "./elementNode":14, "./env":17, "./log":25, "./utils":43}], 38:[function(h, B, a) {
  function p(a, g) {
    this.c = a;
    this.requestUrl = g;
    f = e.H("XMLHttpRequest", "open", !0);
    d = e.H("XMLHttpRequest", "setRequestHeader", !0);
    b = e.H("XMLHttpRequest", "send", !0);
  }
  function t(a) {
    a.sort(function(a, b) {
      var c = a.value.toUpperCase(), d = b.value.toUpperCase();
      return c < d ? -1 : c > d ? 1 : 0;
    });
  }
  "use scrict";
  var w = h("async"), g = h("./log").j("sortHandler"), m = h("./cmUri").parse, e = h("./overloadRules"), f, d, b;
  a.Ve = function(a, b) {
    var d = null;
    a && a.some(function(a) {
      var c = !1;
      if ("sort" == a.properties.template && (a.conditions.forEach(function(a) {
        "url" == a.type && (c = RegExp(a.value).test(b));
      }), c)) {
        if (a.properties) {
          if (a.properties.recordType) {
            return d = a, !0;
          }
          g.b("CM510 " + a.name);
        } else {
          g.b("CM509 " + a.name);
        }
      }
    });
    if (d) {
      var e = (new m(b)).resolve(new m(location.href));
      return new p(d, new URL(e.toString()));
    }
  };
  p.prototype.send = function(a, h, m) {
    function p(e, h) {
      var n = [], l = [], q = m.headers, u = B.requestUrl.href, u = new URL(u);
      A.ignoreParams.forEach(function(a) {
        u.searchParams.delete(a);
      });
      var r = u.pathname + u.search;
      e.forEach(function(e) {
        n.push(function(k) {
          try {
            var n = r + "." + e.recordID;
            B.fe(a, n, function(p, r) {
              if (p) {
                return g.b("CM511 ", p), k("Encrypted list cache error");
              }
              if (r) {
                return l.push({value:e.value, ab:JSON.parse(r)}), k();
              }
              var t = new XMLHttpRequest;
              t.onreadystatechange = function() {
                if (4 == t.readyState) {
                  if (200 == t.status || 304 == t.status) {
                    var b = JSON.parse(t.responseText)[A.fragmentParent];
                    b && b.length && (B.Pe(a, n, b[0]), l.push({value:e.value, ab:b[0]}));
                    k();
                  } else {
                    k("Invalid response: " + t.status);
                  }
                }
              };
              var u = a.ib.Da("", [e.recordID]).replace(/['"]+/g, "").substring(1), w = decodeURIComponent(m.Zg);
              h.startsWith && (w = w.replace(A.startsWith + "=" + h.startsWith, A.startsWith + "="));
              w = h.queryString ? w.replace(A.queryString + "=" + h.queryString, A.queryString + "=" + u) : w.replace(A.queryString + "=", A.queryString + "=" + u);
              f.call(t, "GET", w, !0);
              q.forEach(function(a) {
                d.call(t, a.key, a.value);
              });
              b.call(t, null);
            });
          } catch (p) {
            g.b("CM512 ", p);
          }
        });
      });
      w.parallel(n, function(a) {
        a && g.b("CM513 ");
        t(l);
        "desc" == h.order && l.reverse();
        var b = [];
        l.forEach(function(a) {
          b.push(a.ab);
        });
        y(b, h.limit, h.offset);
      });
    }
    function y(d, f, n) {
      var m = a.a(h);
      m.al = !0;
      e.get("XMLHttpRequest", "onreadystatechange").call(h, function(b) {
        g.info("CM514 ");
        if (4 == h.readyState) {
          g.info("CM515 ");
          var e = JSON.parse(h.responseText);
          A.totalProperties && A.totalProperties.forEach(function(a) {
            e[a] = d.length;
          });
          e.records = d.length > f ? d.slice(n, n + f) : d;
          a.Af = d;
          m.response = e;
          m.responseText = JSON.stringify(e);
        }
        m.onreadystatechange && m.onreadystatechange.call(h, b);
      });
      b.call(h, null);
    }
    var B = this, A = this.c.properties, u = {}, D = null, D = A.subType && this.requestUrl.searchParams.get(A.subType) || "DEFAULT";
    u.queryCode = A.queryCode ? A.queryCode[D] : "DEFAULT";
    A.startsWith && (D = this.requestUrl.searchParams.get(A.startsWith), D.length && (u.startsWith = D));
    A.offset && (u.offset = this.requestUrl.searchParams.get(A.offset));
    A.order && (u.order = this.requestUrl.searchParams.get(A.order));
    A.limit && (u.limit = this.requestUrl.searchParams.get(A.limit));
    A.queryString && (D = this.requestUrl.searchParams.get(A.queryString), D.length && (u.queryString = D));
    u.recordType = A.recordType;
    u.querySize = A.querySize || 200;
    if (0 < u.offset) {
      if (D = a.Af) {
        return y(D, u.offset, u.limit);
      }
    } else {
      delete a.Af;
    }
    a.h.getEncryptedList(u, function(d, e) {
      if (d) {
        return a.showNotification("N17"), b.call(h, null);
      }
      p(e, u);
    });
  };
  p.prototype.Pe = function(a, b, d) {
    b = {key:b, response:JSON.stringify(d)};
    a.h.saveQueryToCache(b);
  };
  p.prototype.fe = function(a, b, d) {
    a.h.getQueryFromCache(b, function(a, b) {
      d(a, b);
    });
  };
}, {"./cmUri":8, "./log":25, "./overloadRules":33, async:void 0}], 39:[function(h, B, a) {
  function p() {
    var a = h("chrome").components, e = a.classes["@mozilla.org/network/io-service;1"].getService(a.interfaces.nsIIOService), f = a.classes["@mozilla.org/scriptsecuritymanager;1"].getService(a.interfaces.nsIScriptSecurityManager), d = a.classes["@mozilla.org/dom/localStorage-manager;1"].getService(a.interfaces.nsIDOMStorageManager), a = a.classes["@mozilla.org/dom/sessionStorage-manager;1"].getService(a.interfaces.nsIDOMStorageManager), e = e.newURI(t.ENV.httpsBaseURL, "", null), f = [f.getCodebasePrincipal(e),
    t.ENV.httpsBaseURL, !1];
    4 == d.createStorage.length && f.unshift(null);
    w = d.createStorage.apply(d, f);
    g = a.createStorage.apply(a, f);
  }
  var t = h("./env"), w, g;
  B = {getItem:function(a) {
    return this[a];
  }, setItem:function(a, e) {
    return this[a] = e;
  }};
  "undefined" !== typeof window ? (w = window.localStorage, g = window.sessionStorage) : t.fa() ? p() : (w = Object.create(B), g = Object.create(B));
  a.Ii = function() {
    return w;
  };
  a.Pi = function() {
    return g;
  };
}, {"./env":17, chrome:void 0}], 40:[function(h, B, a) {
  function p(a, b) {
    b = b || C;
    b.size || (b.size = 0, b.F.forEach(function(a) {
      b.size += a.to - a.from + 1 - a.C.length;
    }));
    for (var c = "", d = a;d;) {
      c = t(d % b.size, b) + c, d = Math.floor(d / b.size);
    }
    return c;
  }
  function t(a, b) {
    var c = null, d = 0;
    b.F.some(function(b) {
      var e = b.to - b.from + 1 - b.C.length;
      if (d + e > a) {
        return c = w(a - d, b), !0;
      }
      d += e;
    });
    return c;
  }
  function w(a, b) {
    var c = 0;
    b.C.some(function(d) {
      if (d - b.from > a + c) {
        return !0;
      }
      c++;
    });
    return String.fromCharCode(b.from + a + c);
  }
  function g(a) {
    if (255 > a) {
      return null;
    }
    var b = null;
    R.some(function(c) {
      if (c.from <= a && c.to >= a && (b = m(a, c))) {
        return b.P = c, !0;
      }
    });
    return b;
  }
  function m(a, b) {
    var c = 0, d = null;
    b.F.some(function(b) {
      var f = b.to - b.from + 1 - b.C.length;
      if (b.from <= a && a <= b.to) {
        return d = e(a, b), d.value += c, !0;
      }
      c += f;
    });
    return d;
  }
  function e(a, b) {
    var c = 0, d = {lk:b};
    b.C.some(function(b) {
      if (b > a) {
        return !0;
      }
      b == a ? d.C = !0 : c++;
    }, this);
    d.value = a - b.from - c;
    return d;
  }
  function f(a, b, c, d) {
    b = p(b, C);
    c = p(c, C);
    a = 1E3 * (a && a.length % 2);
    a = a + 100 * d + 10 * b.length;
    a += c.length;
    return p(a, H) + b + c;
  }
  function d(a, b, c) {
    for (var d = b.length;d < a.length;d++) {
      b += c;
    }
    return b;
  }
  function b(a, b) {
    O[a] = b;
  }
  function c(a, b) {
    this.writer = a.writer;
    this.Db = a.Db;
    this.mc = a.mc;
    this.Vg = a.td;
    this.Kd = !0;
    this.state = b || {mode:0, recordID:0, fieldID:0, g:null, o:0, va:[], X:[], D:[], U:null, I:[]};
  }
  function l() {
    this.$a = E;
  }
  function E(a, b) {
    c.apply(this, arguments);
  }
  function x() {
    this.$a = y;
    this.Ha = 1;
  }
  function y(a, b) {
    c.apply(this, arguments);
    this.L = [];
  }
  function G() {
  }
  function A(a) {
    k.b("CM524 ");
    c.apply(this, arguments);
  }
  function u() {
    var a = this.state;
    a.fieldID = T.xa(a.X);
    this.bb();
    a.D.forEach(function(b) {
      res = a.g || "" === a.g ? res + a.g.charAt(a.o) : res + String.fromCharCode(b.code);
      a.o++;
    });
    this.td(a);
  }
  function D(a) {
    k.b("CM529 ");
    c.apply(this, arguments);
  }
  var k = h("./log").j("tokenizer"), F = h("./constants").Usage, n, z, q, N;
  a.init = function(a, b, c, d) {
    n = a;
    z = b;
    q = c;
    N = d;
  };
  a.co = function(a) {
    n = a;
  };
  a.O = function(a, b, c, e, g) {
    if (a && "RANDOM_UNICODE" != a) {
      a: {
        switch(g && g.usage) {
          case F.email:
            c = "_" + c + "@" + e + ".com";
            break a;
          case F.date:
            c = c.substring(0, 2) + "/" + c.substring(2, 4) + "/" + c.substring(4, 5) + e;
            break a;
          case F.amount:
            c = c + "." + e;
            break a;
          default:
            c = "__" + c + "_" + e;
            break a;
        }
        c = void 0;
      }
    } else {
      a = b, g && (g.g || "" === g.g) && (k.info("CM518 " + g.g), a = g.g), a && "" != a.trim() ? (c = f(a, c, e, K), c = d(a, c, String.fromCharCode(I.F[0].from))) : c = a;
    }
    return c;
  };
  a.resolve = function(a, b, c, d) {
    function e() {
      var a = r.process(u, w, t);
      r.yb() && (p = r, r = null);
      return a;
    }
    function f() {
      q || (q = [], Object.keys(O).forEach(function(a) {
        q.unshift({code:a, Jf:O[a], state:{}});
      }));
      var a = null;
      if (!q.some(function(b) {
        var c = b.Jf.zb(u, w, t, b.state, l, n);
        if (0 > c) {
          b.state = {};
        } else {
          if (0 < c) {
            return a = b, !0;
          }
        }
      })) {
        return !1;
      }
      p = p || r;
      r = a.Jf.eb({writer:h, Db:n, mc:l, td:b}, a.state);
      p && p.zf(r);
      q = null;
      return !0;
    }
    function h(a, b) {
      b && (m = m.substr(0, m.length - b));
      m += a;
    }
    function n(a) {
      return m.substr(m.length - a);
    }
    function l(b) {
      return b ? a.substr(t + 1, b) : a[t + 1];
    }
    var m = "", q, p;
    if (!a) {
      return a;
    }
    try {
      var r = d;
      r && r.resume({writer:h, Db:n, mc:l, td:b});
      for (var t = 0;t < a.length;t++) {
        var u = a.charCodeAt(t), w = g(u);
        if (!r || !e()) {
          var x = r && r.we;
          x && x.process(u, w, t) ? r = x : f() ? e() : r && r.We(u, w, t) || h(a[t]);
        }
      }
      r && (r.end(c), r.yb() && (r = null));
    } catch (D) {
      k.b("CM519 ", D);
    }
    return {value:m, state:r};
  };
  a.xl = 1;
  var r = {type:3, F:[{from:61441, to:61695, C:[]}]}, H = {type:1, F:[{from:13312, to:19893, C:[]}]}, K = 1, C = {type:2, F:[{from:45056, to:53247, C:[]}]}, I = {type:4, F:[{from:11024, to:11024, C:[]}]}, J, R;
  (function() {
    R = [r, H, C, I];
    R.forEach(function(a) {
      a.size = 0;
      a.from = a.F[0].from;
      a.to = a.F[a.F.length - 1].to;
      a.F.forEach(function(b) {
        b.C = b.C || [];
        b.size = b.to - b.from + 1 - b.C.length;
        a.size += b.size;
      });
    });
    J = r.F[0].from;
  })();
  a.xa = function(a) {
    var b = 0;
    a.forEach(function(c, d) {
      b += c.value * Math.pow(c.P.size, a.length - 1 - d);
    });
    return b;
  };
  a.xe = function(a) {
    var b = {};
    b.$b = a % 10;
    b.tc = Math.floor(a % 100 / 10);
    b.pc = Math.floor(a % 1E3 / 100);
    return b;
  };
  a.vj = f;
  a.Mh = d;
  var O = {};
  a.Gg = b;
  var T = a;
  a.rh = c;
  c.prototype.process = function() {
    return !1;
  };
  c.prototype.Fa = function(a) {
    if (this.cd) {
      return this.cd(a);
    }
    var b = null;
    a ? (b = this.state.g.substring(0, a), this.state.o += a) : (b = this.state.g.charAt(this.state.o), this.state.o++);
    this.writer(b, a);
  };
  c.prototype.yb = function() {
    return !1;
  };
  c.prototype.We = function(a) {
    return this.Sa ? this.Sa(a) : !1;
  };
  c.prototype.zf = function() {
  };
  c.prototype.end = function() {
    this.Sa = this.cd = this.uf = this.vf = this.ve = this.we = null;
  };
  c.prototype.Ke = function() {
  };
  c.prototype.gb = function() {
    this.Kd && (this.Vg(this.state.recordID, this.state.fieldID, this.state.g, this.state.ya, this.Ni()), this.Kd = !1);
  };
  c.prototype.Ni = function() {
    return this.L && this.L.reduce(function(a, b) {
      a.push(b.element);
      return a;
    }, []);
  };
  c.prototype.resume = function(a) {
    this.writer = a.writer;
    this.Db = a.Db;
    this.mc = a.mc;
    this.Vg = a.td;
    this.Kd = !0;
  };
  c.prototype.Gk = function(a, b, c) {
    this.ve = a;
    this.vf = b;
    this.uf = c;
  };
  c.prototype.bb = function() {
    if (this.ve) {
      if (this.we = this.ve(this.state)) {
        this.cd = this.vf;
        this.Sa = this.uf;
        return;
      }
      this.Sa = this.cd = null;
    }
    var a = n && n(this.state.recordID, this.state.fieldID);
    this.state.g = a && a.g;
    this.state.ya = a && a.properties;
  };
  b("Resolver_Ascii", new l);
  a.sh = l;
  var P = /__(\d+)_(\d+)/;
  l.prototype.zb = function(a, b, c, d, e) {
    a = String.fromCharCode(a);
    d.token = d.token || "";
    d.Ib = d.Ib || 0;
    if (!d.token || 1 == d.token.length) {
      if ("_" != a) {
        return -1;
      }
      d.token += a;
      d.Ib++;
      return 0;
    }
    e = e();
    0 <= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9].indexOf(Number(a)) && (d.token += a, 3 == d.Ib ? d.ag = !0 : d.Yi = !0);
    if ("_" == a && 2 == d.Ib) {
      if ("__" == d.token) {
        return 0;
      }
      d.token += a;
      d.Ib++;
      return 0;
    }
    return e && (0 <= [0, 1, 2, 3, 4, 5, 6, 7, 8, 9].indexOf(Number(e)) || "_" == e && !d.ag) ? 0 : 3 == d.Ib && d.ag && d.Yi && (e = P.exec(d.token)) ? (d.recordID = e[1], d.fieldID = e[2], 1) : -1;
  };
  l.prototype.eb = function(a, b) {
    var c = new this.$a(a);
    c.state.recordID = b.recordID;
    c.state.fieldID = b.fieldID;
    c.state.token = b.token;
    return c;
  };
  a.lf = E;
  E.prototype = Object.create(c.prototype);
  E.prototype.process = function(a) {
    this.bb();
    this.state.g || "" === this.state.g ? this.writer(this.state.g, this.state.token.length - 1) : this.writer(String.fromCharCode(a));
    this.gb();
  };
  E.prototype.yb = function() {
    return !0;
  };
  b("Resolver_Unicode", new x);
  a.th = x;
  x.prototype.zb = function(a, b, c, d) {
    if (!b || 1 != b.P.type) {
      return -1;
    }
    var e = T.xe(T.xa([b]));
    if (!this.Zh(e.pc)) {
      return -1;
    }
    d.code = a;
    d.vk = b;
    d.Zi = c;
    d.U = e;
    return 1;
  };
  x.prototype.Zh = function(a) {
    return a == this.Ha;
  };
  x.prototype.eb = function(a, b) {
    var c = new this.$a(a);
    c.state.mode = b.vk.P.type;
    c.state.U = b.U;
    c.state.D.push({code:b.code, la:!0});
    c.state.I.push(b.Zi);
    return c;
  };
  a.Dd = y;
  y.prototype = Object.create(c.prototype);
  y.prototype.process = function(a, b, c) {
    var d = b && b.P.type;
    return 1 == d ? this.fk(c) : 2 == d ? this.hk(a, b, c) : this.Ae(a, b, c);
  };
  y.prototype.fk = function(a) {
    this.state.W = this.state.I && this.state.I[0] != a;
    return !this.state.W;
  };
  y.prototype.hk = function(a, b, c) {
    k.debug("CM521 " + a);
    if (this.state.ij) {
      return this.state.W = !0, !1;
    }
    this.state.va.length < this.state.U.tc ? (this.state.va.push(b), this.state.D.push({code:a, la:!0}), this.state.I.push(c), this.state.va.length == this.state.U.tc && (this.state.recordID = T.xa(this.state.va))) : this.state.X.length < this.state.U.$b && (this.state.X.push(b), this.state.D.push({code:a, la:!0}), this.state.I.push(c), this.state.X.length == this.state.U.$b && (this.state.fieldID = T.xa(this.state.X)));
    this.state.fieldID && this.state.recordID && (this.bb(), this.state.ij = !0, this.cl(), this.gb());
    return !0;
  };
  y.prototype.Ae = function(a, b) {
    return b && 4 == b.P.type ? (this.gb(), k.debug("CM522 " + a), this.bl(a), !0) : !1;
  };
  y.prototype.bl = function(a) {
    this.state.g || "" === this.state.g ? (this.state.o >= this.state.g.length ? (!this.state.sd && k.b("CM523 "), !this.state.sd && this.writer(String.fromCharCode(a))) : this.Fa(), this.state.W = !this.state.sd && this.state.g.length == this.state.o) : this.writer(String.fromCharCode(a));
  };
  y.prototype.yb = function() {
    var a = this.state.W;
    a && this.end();
    return a;
  };
  y.prototype.We = function(a) {
    return this.Sa ? this.Sa(a) : this.state.recordID && this.state.fieldID ? !1 : (this.state.D.push({code:a, la:!1}), !0);
  };
  y.prototype.end = function(a) {
    c.prototype.end.apply(this, arguments);
    this.state.D.length && (this.state.D.forEach(function(a) {
      this.writer(String.fromCharCode(a.code));
    }.bind(this)), this.state.D = [], this.L.push({element:a, I:this.state.I}), this.state.I = [], this.gb());
  };
  y.prototype.cl = function() {
    (this.state.g || "" === this.state.g) && this.Je() || this.state.D.forEach(function(a) {
      this.writer(String.fromCharCode(a.code));
    }.bind(this));
    this.state.D = [];
    this.state.I = [];
  };
  y.prototype.Je = function() {
    this.Ke();
    this.state.D.forEach(function(a) {
      a.la ? this.Fa() : this.writer(String.fromCharCode(a.code));
    }.bind(this));
    return !0;
  };
  y.prototype.Ke = function() {
    var a = this.state.o;
    this.L.forEach(function(b) {
      if (this.state.g || "" === this.state.g) {
        var c = q(b.element), d = c;
        b.I.forEach(function(b) {
          d = d.substring(0, b) + this.state.g.charAt(a + b) + d.substring(b + 1);
        }.bind(this));
        d != c && N(b.element, d);
      }
      a += b.I.length;
    }.bind(this));
    this.state.L = [];
    this.state.o = a;
  };
  G.prototype.zb = function(a, b, c, d) {
    return b && 2 == b.P.type && (d.recordID = z(element));
  };
  G.prototype.eb = function(a) {
    return new A(a);
  };
  A.prototype.process = function(a, b) {
    var c = this.state;
    c.mode = b.P.type;
    if (2 == c.mode) {
      if (c.fieldID) {
        return !1;
      }
      c.X.push(b);
      c.D.push({code:a, la:!0});
      this.gb();
      return !0;
    }
    if (4 == c.mode) {
      return c.fieldID || u.apply(this), c.g || "" === c.g ? (c.g.length <= c.o && k.b("CM525 "), this.Fa()) : this.writer(String.fromCharCode(a)), this.gb(), !0;
    }
    k.b("CM527 ");
    return !1;
  };
  A.prototype.We = function(a) {
    if (this.Sa) {
      return this.Sa(a);
    }
    this.state.fieldID || u.apply(this, arguments);
    return !1;
  };
  A.prototype.end = function(a) {
    c.prototype.end.apply(this, arguments);
    this.state.fieldID || u.apply(this, arguments);
  };
  D.prototype.eb = function(a) {
    return new D(a);
  };
  D.prototype.process = function(a) {
    var b = a - J;
    this.writer(String.fromCharCode(V[b].value));
    V[b].fieldID = getFieldID(el);
    k.info("CM530 " + a + ", ID: " + b + ", fid: " + V[b].fieldID + ", el: " + el + ", value:" + V[b].value);
    V[b].Ub && V[b].Ub(id);
    return !0;
  };
  c.prototype.yb = function() {
    return !0;
  };
  var V = {};
}, {"./constants":12, "./log":25}], 41:[function(h, B, a) {
  function p(a, c, d, e) {
    y = E.H("XMLHttpRequest", "open", !0);
    G = E.H("XMLHttpRequest", "setRequestHeader", !0);
    A = E.H("XMLHttpRequest", "send", !0);
    u = E.H("Node", "appendChild", !0);
    this.querySize = e.querySize || 25;
    this.queryString = e.queryString || null;
    this.recordType = e.recordType || null;
    this.queryCode = e.c.properties.queryCode || "DEFAULT";
    this.Ag = this.recordType + "." + this.queryCode;
    this.url = a;
    this.c = e.c;
    this.La = b(this.c, c);
  }
  function t(a, b, c, d, e) {
    l.debug("CM551 " + Date.now());
    var f = [], g = (new window.DOMParser).parseFromString(a, "application/xml");
    a = g.getElementsByTagName(d.properties.fragment);
    for (var h = 0;h < a.length;h++) {
      var m = a[h].getElementsByTagName(e.sort_field)[0];
      m ? (f.push({recordID:"OriginalResponse_" + h, value:x.ea(m)}), b["OriginalResponse_" + h] = a[h].outerHTML) : l.b("CM552 ");
    }
    for (e = a.length - 1;0 <= e;e--) {
      g.documentElement.removeChild(a[e]);
    }
    c.push.apply(c, f);
    c.sort(function(a, b) {
      var c = a.value.toUpperCase(), d = b.value.toUpperCase();
      return c < d ? -1 : c > d ? 1 : 0;
    });
    c.forEach(function(a) {
      (a = (new window.DOMParser).parseFromString(b[a.recordID], "application/xml").getElementsByTagName(d.properties.fragment)[0]) ? u.call(g.getElementsByTagName(d.properties.fragmentParent)[0], a) : l.b("CM553 ");
    });
    l.debug("CM554 " + Date.now());
    return g;
  }
  function w(a, b, c, d, f) {
    var h = null;
    a = JSON.parse(a);
    var l = d.properties.fragmentPath, p = g(a, l) || [];
    p.forEach(function(a, d) {
      c.push({recordID:"OriginalResponse_" + d, value:a[f.sort_field]});
      b["OriginalResponse_" + d] = a;
    });
    e(c);
    c.forEach(function(a) {
      h = h || [];
      var c = null;
      (c = "string" === typeof b[a.recordID] ? g(JSON.parse(b[a.recordID]), l)[0] : b[a.recordID]) && h.push(c);
    });
    if (d = d.properties.totalCountPath) {
      d = m(a, d), d.parent[d.m] = h.length;
    }
    return l ? (p.splice(0), Array.prototype.push.apply(p, h), a) : h;
  }
  function g(a, b) {
    if (!b) {
      return a;
    }
    for (var c = b.split("/"), d = 0;d < c.length;d++) {
      a = a[[c[d]]];
    }
    return a;
  }
  function m(a, b) {
    for (var c = b.split("/"), d = 0;d < c.length - 1;d++) {
      a = a[[c[d]]];
    }
    return {parent:a, m:c[c.length - 1]};
  }
  function e(a) {
    a.sort(function(a, b) {
      var c = a.value.toUpperCase(), d = b.value.toUpperCase();
      return c < d ? -1 : c > d ? 1 : 0;
    });
  }
  function f(a, b) {
    a = a.replace(/[\[\]]/g, "\\$&");
    var c = (new RegExp("[?&]" + a + "(=([^&#]*)|&|#|$)")).exec(b);
    return c ? c[2] ? decodeURIComponent(c[2].replace(/\+/g, " ")) : "" : null;
  }
  function d(a, b, c, d) {
    return b.replace(a + "=" + c, a + "=" + d);
  }
  function b(a, b) {
    var c = a.properties.format;
    Array.isArray(c) || (c = [c]);
    var d = null;
    c.some(function(a) {
      var c = !a.test || RegExp(a.test).test(b);
      c && (d = a);
      return c;
    });
    return d;
  }
  "use scrict";
  var c = h("async"), l = h("./log").j("typeAheadHandler"), E = h("./overloadRules"), x = h("./elementNode"), y, G, A, u;
  a.Ve = function(a, b, c, d) {
    var e = null, g = null, h = null, m = null, t = null;
    a && a.some(function(a) {
      var c = !1;
      if ("sort" != a.properties.template && (a.conditions.forEach(function(a) {
        "recordType" == a.type && (m = a.value);
        "url" == a.type && (c = RegExp(a.value).test(b));
      }), c)) {
        if (a.properties) {
          t = d(b);
          g = a.properties.querySize;
          "string" == typeof g && (g = f(a.properties.querySize, t));
          g || l.warn("CM540 " + a.name);
          if (h = a.properties.queryString && f(a.properties.queryString, t)) {
            return e = a, !0;
          }
          l.b("CM541 " + a.name);
        } else {
          l.b("CM539 " + a.name);
        }
      }
    });
    if (e && (a = new p(t, b, 0, {c:e, querySize:g, queryString:h, recordType:m}), a.La)) {
      return a;
    }
  };
  p.prototype.send = function(a, b, e, f) {
    function g(b, c, d) {
      var e = !1, f = a.a(b);
      f.al = !0;
      var k = b.onreadystatechange;
      b.onreadystatechange = function(a) {
        if (4 == b.readyState) {
          if (e) {
            l.b("CM549 ");
          } else {
            if (e = !0, "XML" == h.La.type) {
              var g = t(b.response, c, d, h.c, h.La);
              f.response = g;
              f.responseXML = g;
              f.responseText = (new XMLSerializer).serializeToString(g.documentElement);
            } else {
              "JSON" == h.La.type ? (g = w(b.response, c, d, h.c, h.La), f.response = g, f.responseText = JSON.stringify(g)) : l.b("CM550 ");
            }
          }
        }
        k && k.call(this, a);
      };
      0 > A.toString().indexOf("native") && l.b("CM548 ");
      A.call(b, null);
    }
    var h = this;
    a.h.resolveQuery({recordType:this.recordType, queryCode:this.queryCode, queryString:this.queryString.trim().toLowerCase(), querySize:this.querySize}, function(e, m) {
      if (e) {
        return l.b("CM542 ", e), A.call(b, f);
      }
      if (!m || !m.length) {
        return A.call(b, f);
      }
      var p = [], t = {}, u = a.a(b).headers;
      l.info("CM543 " + Date.now());
      m.forEach(function(b) {
        p.push(function(c) {
          try {
            h.fe(a, b.recordID, h.La.type, function(e, f) {
              if (e) {
                return l.b("CM544 ", e), c("Async Job Error From Cache");
              }
              if (f) {
                return t[b.recordID] = f, c();
              }
              var g = new XMLHttpRequest, k = b.recordID;
              g.onreadystatechange = function() {
                4 == g.readyState && (200 == g.status || 304 == g.status ? (t[b.recordID] = g.response, -1 == g.response.indexOf(h.La.sort_field) ? a.updateRecordStatus(b.recordID, "DELETED", h.recordType) : h.Pe(a, b.recordID, g.response, h.La.type), c()) : c("Invalid response: " + g.status));
              };
              k = a.ib.Da("", [k]).replace(/['"]+/g, "").substring(1);
              y.call(g, "GET", d(h.c.properties.queryString, h.url, h.queryString, k), !0);
              u.forEach(function(a) {
                G.call(g, a.key, a.value);
              });
              A.call(g, null);
            });
          } catch (e) {
            l.b("CM545 ", e), c("Async Job Error");
          }
        });
      });
      c.parallel(p, function(a) {
        a && l.b("CM546 ");
        l.info("CM547 " + Date.now());
        g(b, t, m);
      });
    });
  };
  p.prototype.Pe = function(a, b, c, d) {
    a.h.saveQueryToCache({key:this.Ag + "." + b + "." + d, response:c});
  };
  p.prototype.fe = function(a, b, c, d) {
    a.h.getQueryFromCache(this.Ag + "." + b + "." + c, function(a, b) {
      d(a, b);
    });
  };
}, {"./elementNode":14, "./log":25, "./overloadRules":33, async:void 0}], 42:[function(h, B, a) {
  function p(a, f) {
    return new Promise(function(d, b) {
      w[++g] = {resolve:d, reject:b};
      f || (f = []);
      f.unshift(g);
      window.qb[a].apply(window.qb, f);
    });
  }
  var t = {}, w = {}, g = 0;
  a.aj = function() {
    window.cmnativeinterfacerandomname = window.cmnativeinterfacerandomname || {};
    window.cmnativeinterfacerandomname.uri = m;
  };
  a.Ck = function(a, f) {
    t[a] = t[a] || {};
    t[a].data = f;
  };
  a.Yd = function(a) {
    return t[a] && t[a].data;
  };
  a.release = function(a) {
    delete t[a];
  };
  a.kk = function(a) {
    return p("purge", [a]);
  };
  a.zi = function(e) {
    var f = a.Yd(e);
    return f ? Promise.resolve(f) : p("getBuffer", [e]).then(function() {
      return a.Yd(e);
    });
  };
  a.close = function() {
  };
  var m = {open:function(a, f) {
    var d = null;
    try {
      t[f] || (t[f] = {data:"", position:0}), console.log("Openning " + f);
    } catch (b) {
      d = b.message, console.error("Failed to open JsUri", b);
    }
    window.qb.An(a, d);
  }, read:function(a, f, d) {
    var b = null;
    try {
      var c = t[f];
      if (c.data.length <= c.position) {
        window.qb.Oj(a, null, null);
        return;
      }
      var g = c.data.substr(c.position, d);
      c.position += d;
    } catch (h) {
      b = h.message, console.error("Failed to read JsUri", h);
    }
    window.qb.Oj(a, b, g);
  }, write:function(a, f, d) {
    var b = null;
    try {
      t[f].data += d, console.log("Writing " + f + ", " + d.length);
    } catch (c) {
      b = c.message, console.error("Failed to write JsUri", c);
    }
    window.qb.Dn(a, b);
  }, close:function(a) {
    window.qb.zn(a, null);
  }, onResult:function(a, f) {
    var d = w[a];
    if (d) {
      if (f) {
        d.reject(f);
      } else {
        var b = [].slice.call(arguments, 2);
        d.resolve.apply(null, b);
      }
    } else {
      console.error("onResult called without previous request");
    }
  }};
}, {}], 43:[function(h, B, a) {
  (function(p, t) {
    function w() {
      throw Error("Failed to find compatible setPreference method");
    }
    function g() {
      throw Error("Failed to find compatible loadResourceRequest method");
    }
    function m(a) {
      for (var b in a) {
        e(a[b], q.ENV);
      }
      return a;
    }
    function e(a, b) {
      Object.keys(a).forEach(function(c) {
        "string" == typeof a[c] && (a[c] = f(a[c], b));
      });
      return a;
    }
    function f(a, b, c) {
      function d(a, c) {
        return b[c] ? b[c] : a;
      }
      b = b || q.ENV;
      c = c || {startsWith:"\\$\\{", endsWith:"\\}"};
      c = c.startsWith + "(\\w+)" + c.endsWith;
      "function" == typeof b && (d = b);
      return a.replace(new RegExp(c, "g"), d);
    }
    function d(a, b) {
      return -1 !== a.indexOf(b, a.length - b.length);
    }
    function b(a, b, c) {
      var d = [];
      (a = (a = a && a.trim()) && K.parseAddressList(a)) && a.forEach(function(a) {
        a.address = a.address && a.address.trim().toLowerCase();
        b ? d.push(a.address) : (a.name = a.name && a.name.trim(), d.push({name:a.name, userName:a.name, email:a.address, userEmail:a.address, blindFlag:c}));
      });
      return d;
    }
    function c(a, b) {
      Object.keys(b).forEach(function(c) {
        a[c] = b[c];
      });
      return a;
    }
    function l(a, b) {
      function c(d, e) {
        if (!(this instanceof c)) {
          return new c(d, e);
        }
        e || (e = b);
        return this.Be = new a(function(a, b) {
          try {
            return e && setTimeout(b.bind(null, Error("Rejecting promise because of timeout")), e), d(a, b);
          } catch (c) {
            b(c);
          }
        });
      }
      a || (a = p.Promise);
      c.resolve = a.resolve;
      c.reject = a.reject;
      c.all = a.all;
      c.race = a.race;
      c.prototype = a.prototype;
      return c;
    }
    function B(a, b) {
      function c(d) {
        if (!(this instanceof c)) {
          return new c(d);
        }
        d || (d = b);
        var e = this;
        e.Be = new a(function(a, b) {
          d && setTimeout(b.bind(null, Error("Rejecting promise because of timeout")), d);
          e.resolve = a;
          e.reject = b;
        });
        return e;
      }
      a || (a = p.Promise);
      return c;
    }
    function x(a, b, c, d, e, f) {
      d && (d = JSON.stringify(d));
      return new Promise(function(g, h) {
        var k = T++;
        P[k] = {resolve:g, reject:h};
        a.postMessage({type:"ui-render", id:k, url:"pages/" + c, isModal:b, params:d, position:e, pageId:f}, a.location.origin);
      });
    }
    function y(b, c) {
      return e(a.Ue(H[b]), c);
    }
    function G(b, c, d, e) {
      var f = a.getApplicationSubscriptionName(c);
      if (!a.isApplicationOfficer(c)) {
        return c = H[f + "app-preferences-notOfficer"] || H["app-preferences-notOfficer"], a.showNotification(b, c.message, c.type), d();
      }
      var g = c.originalApplicationID || c.id, k = h("./application").j();
      d = k.getApplicationPreferences(g);
      return x(b, !0, "application-preferences-" + f + ".html", {preferences:d, showPage:!e, appId:c.id, ManagerRootUri:q.ENV.manageRoot, originalApplicationId:c.originalApplicationID, extensionID:q.ENV.session.extensionID}).then(function() {
        I().getLocalProfile({}, function(a, b) {
          a || (q.ENV.user = b.user, k.getApplicationPreferences(g, !0));
        });
      });
    }
    function A(a) {
      a = decodeURIComponent(a);
      var b, c = a.toUpperCase().indexOf("FILENAME*=UTF-8''");
      if (-1 == c) {
        a = a.replace(/=\?UTF-8\?B\?/g, "");
        a = a.replace(/\?UTF-8\?B\?/g, "");
        a = a.replace(/\?=/g, "");
        c = a.indexOf('filename="');
        -1 < c && (c += 10);
        var d = a.indexOf('"', c);
        try {
          b = decodeURIComponent(escape(window.atob(a.substring(c, d))));
        } catch (e) {
          z.b("CM578 ", e), b = a.substring(c, d);
        }
      } else {
        b = a.substring(c + 17, a.length);
      }
      return b;
    }
    function u(a, b) {
      for (var c = q.ENV.user.subscriptions, d = 0;c && d < c.length;d++) {
        if (b) {
          if (c[d].applicationSubscriptionID == b) {
            return c[d];
          }
        } else {
          if ("ACTIVE" == c[d].status && c[d].applicationSubscription.applicationID == a) {
            return c[d];
          }
        }
      }
    }
    function D(a) {
      delete a.freeLeft;
      delete a.daysLeft;
      delete a.secondsLeft;
      if (a.enforce) {
        if (a.maximumFree) {
          var b = a.maximumFree - a.used;
          0 > b && (b = 0);
          a.freeLeft = b;
        } else {
          a.trialExpiry ? (a.secondsLeft = a.trialExpiry - Math.ceil(Date.now() / 1E3), 0 > a.secondsLeft && (a.secondsLeft = 0), a.daysLeft = Math.floor(a.secondsLeft / 86400)) : z.b("CM579 ");
        }
      }
      return a;
    }
    function k(a) {
      (q.ENV.user.subscriptions || []).forEach(function(b) {
        if ("ACTIVE" == b.status) {
          var c = b.applicationSubscription.usage;
          c.enforce && (c = D(c), c.applicationName = b.applicationSubscription.applicationFeature.name, c.applicationDomain = b.applicationSubscription.applicationFeature.domains[0], a(c));
        }
      });
    }
    function F(a) {
      var b = XMLHttpRequest, c;
      if (q.fa()) {
        if (!a) {
          var d = h("sdk/self"), b = b || h("sdk/net/xhr").XMLHttpRequest;
          g = function(a, c) {
            var e = new b;
            e.addEventListener("load", function() {
              c(null, e.response);
            }, !1);
            e.addEventListener("error", function() {
              c(Error("Could not load resource " + a));
            });
            e.open("GET", d.data.url("./" + a));
            e.send();
          };
          w = q.nc.set;
        }
      } else {
        q.S() ? (c = "__cmcdscreihsjkr43928cndslcur3cdscds__", g = function(b, c) {
          [{page:"css/cloudmask.font.css", Me:"cloudmask_font"}, {page:"invite.html", Me:"invite"}, {page:"pages/email-body.html", Me:"email_body"}].some(function(a) {
            a.page == b && (b = a.Me);
          });
          var d = a.Lc.Wf(b);
          if (!d) {
            return c("Failed to get resource");
          }
          c(null, d);
        }, w = function(a, b) {
          var c = {name:a, value:b};
          I().setPreference(c, function() {
          });
        }) : q.Aa() ? (c = "__cmcdscreihsjkr43928cndslcur3cdscds__", w = function(b, d) {
          var e = n.Mc();
          e.ad = function() {
            z.b("CM582 " + b);
          };
          var f = {};
          f[b] = d;
          e.open("POST", a.location.protocol + "//" + a.location.host + "/setPref?" + c);
          e.send(JSON.stringify(f));
        }) : q.ra() ? (g = function(a, c) {
          var d = new (b || XMLHttpRequest);
          d.addEventListener("load", function() {
            c(null, d.response);
          }, !1);
          d.addEventListener("error", function() {
            c(Error("Could not load resource " + a));
          });
          d.open("GET", "chrome-extension://" + q.ENV.session.extensionID + "/" + a);
          d.send();
        }, w = function(a, b) {
          var c = {name:a, value:b};
          I().setPreference(c, function() {
          });
        }) : q.Ra() && (g = function(a, c) {
          var d = new (b || XMLHttpRequest);
          d.addEventListener("load", function() {
            c(null, d.response);
          }, !1);
          d.addEventListener("error", function() {
            c(Error("Could not load resource " + a));
          });
          d.open("GET", "/cme/cme/" + a);
          d.send();
        }, w = function(a, b) {
          var c = {name:a, value:b};
          I().setPreference(c, function() {
          });
        });
      }
    }
    var n = h("./cloudmask_xhr"), z = h("./log").j("utils"), q = h("./env"), N = h("./storage"), r = h("./cloudmask_tokenization"), H = m(h("./notifications.json")), K = h("email-addresses"), C = h("./constants").Ga, I;
    a.Fg = function(a) {
      I = a;
    };
    a.cg = function(a, b, c) {
      return f(a, b, c);
    };
    try {
      var J = h("resource://gre/modules/ctypes.jsm").ctypes, R = h("resource://gre/modules/Services.jsm"), O = h("chrome").components;
      a.atob = R.atob;
      a.btoa = R.btoa;
    } catch (L) {
      a.atob = function(a) {
        return new t(a.toString(), "base64");
      }, a.btoa = function(a) {
        return (a instanceof t ? a : new t(a, "binary")).toString("base64");
      };
    }
    a.il = function(a, b) {
      var c = a.replace("-", "+").replace("_", "/");
      if (b || "=" === c[c.length - 1]) {
        return c;
      }
      switch(c.length % 4) {
        case 0:
          break;
        case 2:
          c += "==";
          break;
        case 3:
          c += "=";
          break;
        default:
          throw Error("Invalid base64url string!");;
      }
      return c;
    };
    a.hl = function(a, b) {
      a = a.replace("+", "-").replace("/", '_"');
      return b ? a : a.split("=")[0];
    };
    a.eh = "<%CLOUDMASK:";
    a.dh = "%>\n";
    a.Zm = function(a) {
      return q.ENV.device.openIDIssuer && a && a.some(function(a) {
        return q.ENV.device.openIDIssuer == a;
      });
    };
    a.kl = function(a) {
      z.info("CM555 " + a);
      var b = n.Mc(), c = null, d = !1;
      b.bd = function() {
        c = b.responseText;
      };
      b.ad = function() {
        z.b("CM556 ");
        d || z.notification("CM557 ", "Cannot connect to CloudMask Manager. Please verify your network.");
        d = !0;
      };
      b.open("GET", a);
      b.send();
      return c;
    };
    a.ll = function(a, b) {
      z.info("CM558 " + b);
      var c = n.Mc(), d = null;
      c.bd = function() {
        d = c.responseText;
      };
      c.open("POST", b, !1);
      c.send(a);
      return d;
    };
    a.jm = function(a) {
      return a.replace(/(\r\n|\n|\r)/gm, "").replace(/\\/g, "\\\\").replace(/'/g, "\\'");
    };
    a.startsWith = function(a, b) {
      return 0 == a.indexOf(b);
    };
    a.endsWith = d;
    a.Hf = function(a, b) {
      for (var c = 0;c < b.length;c++) {
        if (d(a, b[c])) {
          return !0;
        }
      }
      return !1;
    };
    a.be = function(a, b) {
      var c;
      switch(b) {
        case "THREEDES_CBC":
          c = 8;
          break;
        default:
          c = 16;
          break;
      }
      c = a + (c - a % c);
      var d = c % 3;
      c = 4 * (c + (d ? 3 - d : 0)) / 3;
      1 == q.ENV.cryptoMode ? (d = Math.floor(c / 64) + (c % 64 ? 1 : 0), d *= 2) : d = 0;
      return d + c;
    };
    a.qm = function(a) {
      a = a.replace(/cmRecipient=/g, "");
      a = a.split("&");
      a.splice(0, 1);
      return a;
    };
    a.xm = function(a) {
      a = a.replace(/cmToken=/g, "");
      var b = {}, c = [], d = [];
      a = a.split(",");
      c.push(a[0]);
      d.push(decodeURIComponent(a[1]));
      b[0] = c;
      b[1] = d;
      return b;
    };
    a.Rn = function(a, b, c, d, e) {
      var f = n.Mc();
      f.bd = function() {
        z.info("CM559 " + b);
        e && e(f.responseText);
      };
      f.ad = function() {
        z.b("CM560 " + a + " status is NOT 200 for request, " + b + ", " + f.status);
        z.notification("CM561 ", "Cannot connect to CloudMask Manager. Please verify your network.");
        e && e(f.responseText);
      };
      f.open(a, q.ENV.agentURL + b, d);
      f.send(c);
    };
    a.yo = function() {
      var a = O.classes["@mozilla.org/appshell/window-mediator;1"].getService(O.interfaces.nsIWindowMediator).getMostRecentWindow("navigator = browser").document.getElementById("cloudmask-sharing");
      a && a.click();
    };
    a.Jo = function(a) {
      var b, c, d, e, f, g;
      b = "";
      d = a.length;
      for (c = 0;c < d;) {
        switch(e = a.charCodeAt(c++), e >> 4) {
          case 0:
          ;
          case 1:
          ;
          case 2:
          ;
          case 3:
          ;
          case 4:
          ;
          case 5:
          ;
          case 6:
          ;
          case 7:
            b += a.charAt(c - 1);
            break;
          case 12:
          ;
          case 13:
            f = a.charCodeAt(c++);
            b += String.fromCharCode((e & 31) << 6 | f & 63);
            break;
          case 14:
            f = a.charCodeAt(c++);
            g = a.charCodeAt(c++);
            b += String.fromCharCode((e & 15) << 12 | (f & 63) << 6 | (g & 63) << 0);
            break;
        }
      }
      return b;
    };
    a.Em = function(a) {
      var b = [];
      a.filter(function(a) {
        a.recordID = Number(a.recordID);
        if (b.includes(a.recordID) || a.recordID == C.G) {
          return !1;
        }
        b.push(a.recordID);
        return !0;
      });
      return b;
    };
    a.xg = b;
    a.$ = function(a, c) {
      if (c) {
        if ("string" == typeof c) {
          if (!c.trim()) {
            return;
          }
          c = [c];
        }
        c.length && c.forEach(function(c) {
          var d = b(c, !0);
          d.length ? d.forEach(function(b) {
            0 > a.indexOf(b) && a.push(b);
          }) : z.error("CM562 ", c);
        });
      }
    };
    a.ctypes = {Co:function(b, c) {
      var d, e;
      switch(typeof b) {
        case "string":
          return a.Tg(b, c);
        case "object":
          if (b instanceof String) {
            return a.Tg(b, c);
          }
          if (t.isBuffer(b)) {
            d = new (J.unsigned_char.array(b.length));
            for (e = 0;e < b.length;e++) {
              d[e] = b[e];
            }
            return {yg:J.cast(d.addressOfElement(0), J.unsigned_char.ptr), size:d.length};
          }
          if ("[object DataView]" === Object.prototype.toString.call(b)) {
            d = new (J.unsigned_char.array(b.byteLength));
            for (e = 0;e < b.byteLength;e++) {
              d[e] = b.getUint8(e);
            }
            return {yg:J.cast(d.addressOfElement(0), J.unsigned_char.ptr), size:d.length};
          }
        ;
      }
      throw Error("Failed to cast data to ctypes: unknown type");
    }};
    a.Tg = function(a, b) {
      var c, d;
      if (b) {
        d = new (J.unsigned_char.array(a.length));
        for (c = 0;c < d.length;c++) {
          d[c] = a.charCodeAt(c);
        }
        c = J.cast(d.addressOfElement(0), J.unsigned_char.ptr);
        d = d.length;
      } else {
        d = new (J.jschar.array(a.length))(a), c = J.cast(d.addressOfElement(0), J.unsigned_char.ptr), d = 2 * d.length;
      }
      return {yg:c, size:d};
    };
    a.Rl = function(a, b, c) {
      if (0 === b) {
        return "";
      }
      a.constructor instanceof J.ArrayType && (a = a.addressOfElement(0));
      var d = "";
      if (c) {
        if (!b) {
          throw Error("size is mandatory");
        }
        a = J.cast(a, J.unsigned_char.array(b).ptr).contents;
        for (b = 0;b < a.length;b++) {
          d += String.fromCharCode(a[b]);
        }
      } else {
        if (b) {
          for (a = J.cast(a, J.jschar.array(b / 2).ptr).contents, b = 0;b < a.length;b++) {
            d += a[b];
          }
        } else {
          d = J.cast(a, J.jschar.ptr).readString();
        }
      }
      return d;
    };
    a.Ln = function(a, b) {
      var c = new XMLHttpRequest;
      c.onload = function() {
        return b(null, this.response);
      };
      c.responseType = "blob";
      c.open("GET", a);
      c.send();
    };
    a.Jd = function(a) {
      a = new DataView(a.buffer || a);
      for (var b = "", c = 0;c < a.byteLength;c++) {
        b += String.fromCharCode(a.getUint8(c));
      }
      return b;
    };
    a.Sg = function(a) {
      for (var b = new ArrayBuffer(a.length), b = new DataView(b), c = 0;c < a.length;c++) {
        b.setUint8(c, a.charCodeAt(c));
      }
      return b.buffer;
    };
    a.Ue = function(a) {
      return c({}, a);
    };
    a.uo = c;
    a.ri = function(a) {
      a = [].slice.call(a || this);
      return [].concat.apply([], a);
    };
    a.Za = function(a) {
      a = [].slice.call(a || this);
      return a.reduce(function(a, b) {
        -1 === a.indexOf(b) && a.push(b);
        return a;
      }, []);
    };
    a.rg = function(a, b, c) {
      b.forEach(function(b) {
        c && (b = b[c]);
        b = b.trim().toLowerCase();
        0 > a.indexOf(b) && a.push(b);
      });
    };
    a.isEqual = function v(a, b, c) {
      function d(a) {
        return -1 === c.indexOf(a);
      }
      if (a === b) {
        return !0;
      }
      var e = typeof a;
      if (e !== typeof b) {
        return !1;
      }
      if ("object" !== e) {
        return "function" === e ? (z.warn("CM563 "), e === typeof b) : !1;
      }
      if (null === a || null === b) {
        return !1;
      }
      if (e instanceof Date) {
        return a.getTime() === b.getTime();
      }
      var e = Object.keys(a), f = Object.keys(b);
      c && (e = e.filter(d), f = f.filter(d));
      return e.length != f.length || e.some(function(d) {
        return !v(a[d], b[d], c);
      }) ? !1 : !0;
    };
    a.lm = function(a, b) {
      return q.fa() ? O.utils.cloneInto(a, b) : a;
    };
    a.Jl = l;
    R = l();
    a.Il = R;
    a.nl = B;
    a.ml = B();
    a.Fl = function(a) {
      if (!a.length) {
        return Promise.resolve([]);
      }
      var b = {}, c = [];
      return a.reduce(function(a, d) {
        return a.then(function(a) {
          a !== b && c.push(a);
          return d();
        });
      }, Promise.resolve(b)).then(function(a) {
        c.push(a);
        return c;
      });
    };
    a.sc = function(a) {
      setTimeout(a, 0);
    };
    a.h;
    var T = 1, P = {};
    a.tk = function(a) {
      window.postMessage({type:"ui-remove", id:"ignore", pageId:a}, window.location.origin);
    };
    a.Pk = function(a, b, c) {
      return x(top, void 0, a, void 0, b, c);
    };
    a.Wi = function(a, b) {
      P[a].resolve(b);
      delete P[a];
    };
    a.Ok = function() {
      return x(window, !0, "createFolder.html").then(function(a) {
        if ("Yes" == a) {
          return z.info("CM568 "), !1;
        }
        if ("cancel" == a) {
          return z.info("CM569 "), !0;
        }
        if ("close" == a) {
          z.info("CM570 ");
        } else {
          throw Error("Invalid response from cloudmask model: " + a);
        }
      });
    };
    a.Rk = function(a) {
      return x(top, !1, "searchCount.html", {message:"We found " + a.count + " results for " + a.value + ".", type:"INFO"});
    };
    a.Nk = function(a) {
      var b = window;
      return q.S() ? window.tn.onShowPanel(a) : x(b, !0, "invite.html", a);
    };
    a.setPreference = function(a, b) {
      q.ENV[a] = b;
      return w.apply(null, arguments);
    };
    a.Mk = function() {
      return Promise.resolve();
    };
    a.Lk = function() {
      return Promise.resolve();
    };
    a.ym = y;
    a.showNotification = function(b, c, d, e, f) {
      return a.na(b, null, c, d, f);
    };
    a.Kk = function(b, c) {
      a.na(window, b, null, null, c);
    };
    a.na = function(a, b, c, d, e, f) {
      c = {message:c, type:d};
      b && (c = y(b, e));
      if (q.S()) {
        z.warn("CM575 ", c), window.Lc.showNotification(c.message, c.type);
      } else {
        return x(a, !1, "md-notification.html", c, f);
      }
    };
    a.Kj = function(b) {
      return Promise.resolve().then(function() {
        return a.na(window, "WRAPPING_REQUIRED", null, null, null, b);
      });
    };
    a.Xh = function(a, b, c) {
      G(a, b, c, !0);
    };
    a.Xe = G;
    a.xo = function(a, b, c) {
      return x(a, !0, "authorize-" + b + ".html", {email:q.ENV.user.email, app:c, httpsBaseURL:q.ENV.httpsBaseURL}).then(function(a) {
        if (a.li) {
          throw Error(a.li);
        }
      });
    };
    a.Zd = function(a) {
      return a ? N.Ii().getItem("cloudmask.cleartext.reference." + a) : !1;
    };
    a.sj = function() {
      q.ENV.notifications || (q.ENV.notifications = m(h("./notifications.json")));
    };
    a.Bb = function(a) {
      var b = a.split("\\");
      1 == b.length && (b = a.split("/"));
      var b = a = b[b.length - 1], c = b.lastIndexOf("."), d;
      0 >= c ? d = "" : (d = b.substring(c, b.length), 4 < d.length && z.warn("CM577 "), b = b.substring(0, c));
      return {fileName:a, extension:d, name:b};
    };
    a.wm = function(b) {
      var c;
      if (b) {
        b = A(b);
        b = a.Bb(b);
        (new r.jf).resolve(b.name, function(a) {
          c = a;
        }, null);
        if (!c || !c.recordID || !c.fieldID) {
          var d = b.name.match(/^__(\d+)_(\d+)$/);
          d && (c = {recordID:d[1], fieldID:d[2]});
        }
        c && (c.ext = b.extension);
      }
      return c;
    };
    a.getFileName = A;
    a.Ao = function(a, b) {
      if (!b) {
        return !1;
      }
      b = [].slice.call(b);
      return b.some(function(b) {
        return a.startsWith(b);
      });
    };
    a.getSubscriptionUsage = function(b) {
      return a.Qc(b).usage;
    };
    a.yi = function(a) {
      "object" == typeof a && (a = a.originalApplicationID);
      return (a = u(a)) && a.applicationSubscriptionID;
    };
    a.Qc = function(a, b) {
      a && "object" == typeof a && (a = a.originalApplicationID);
      var c = u(a, b);
      return c && c.applicationSubscription;
    };
    a.Eo = function(a) {
      var b = u(a.applicationID, a.applicationSubscriptionID);
      if (!b) {
        throw Error("Failed to find subscription", a);
      }
      b.applicationSubscription = a;
    };
    a.xi = function(b) {
      b = a.Qc(b.originalApplicationID);
      return {id:b.groupID, name:a.Ri(b)};
    };
    a.getApplicationSubscriptionName = function(a) {
      "object" == typeof a && (a = a.originalApplicationID);
      return (a = u(a).applicationSubscription.applicationFeature.name) && a.toLowerCase();
    };
    a.vi = function(a) {
      return "Group: " + a.name;
    };
    a.Ri = function(b) {
      return a.vi(b.applicationFeature);
    };
    a.Of = function(b) {
      b = a.Qc(b, void 0);
      if (!b.invalidReason && b.officer.email != q.ENV.user.email) {
        return b.officer.email;
      }
    };
    a.isApplicationOfficer = function(b) {
      return !a.Of(b);
    };
    a.hasApplicationPreferences = function(b) {
      b = "pages/application-preferences-" + a.getApplicationSubscriptionName(b) + ".html";
      return 0 <= Y.indexOf(b);
    };
    a.mg = function(a) {
      "object" == typeof a && (a = a.originalApplicationID);
      return u(a).invalidReason;
    };
    a.getUsageLeft = D;
    a.pj = function(a) {
      return a.enforce ? !a.freeLeft && !a.secondsLeft : !1;
    };
    a.ge = function(a, b) {
      var c = null;
      void 0 == a.freeLeft || a.freeLeft || (c = "TRIAL_COUNT_DONE");
      void 0 == a.secondsLeft || a.secondsLeft || (c = "TRIAL_DAYS_DONE");
      c && b && (c += "_" + b);
      return c;
    };
    a.Dm = function() {
      var a = [];
      k(function(b) {
        a.push(b);
      });
      return a;
    };
    a.getTrialMessages = function() {
      var a = [];
      k(function(b) {
        void 0 != b.freeLeft ? b.freeLeft ? a.push(y("TRIAL_COUNT_LEFT", b).message) : a.push(y("TRIAL_COUNT_DONE", b).message) : void 0 != b.secondsLeft && (b.daysLeft ? a.push(y("TRIAL_DAYS_LEFT", b).message) : b.secondsLeft ? a.push(y("TRIAL_DAYS_ALMOST", b).message) : a.push(y("TRIAL_DAYS_DONE", b).message));
      });
      return Promise.resolve(a);
    };
    a.Cm = function() {
      var a = [];
      k(function(b) {
        void 0 == b.daysLeft || 7 <= b.daysLeft || (b.wn = b.daysLeft ? "TRIAL_DAYS_LEFT" : b.secondsLeft ? "TRIAL_DAYS_ALMOST" : "TRIAL_DAYS_DONE", a.push(b));
      });
      return a;
    };
    a.Ik = function(a) {
      var b = u(a.applicationID);
      a.applicationName = b.applicationSubscription.applicationFeature.name;
      a.applicationDomain = b.applicationSubscription.applicationFeature.domains[0];
    };
    var V = null;
    a.Yf = function() {
      return V ? Promise.resolve(V) : q.get("UsageNotifications").then(function(a) {
        V = a;
      });
    };
    a.kn = function(b, c) {
      return a.Yf().then(function(a) {
        a = a || {};
        a[b] = a[b] || {};
        a[b][c] = !0;
        return q.set("UsageNotifications", a);
      }).catch(function(a) {
        console.error("Failed to save usageNotifications", a);
      });
    };
    a.nm = function(b) {
      return a.Yf().then(function(a) {
        if (a) {
          return delete a[b], q.set("UsageNotifications", a);
        }
      }).catch(function(a) {
        console.error("Failed to save usageNotifications", a);
      });
    };
    var Y = "css/cloudmask.font.css pages/invite.html pages/createFolder.html pages/toaster.html pages/gdriveHelp.html pages/gmailHelp.html pages/gmailHelpChrome.html pages/application-preferences-clio.html pages/searchCount.html".split(" "), S = {};
    a.Zj = function() {
      var b = window;
      F(b);
      a.sj();
      q.ra() || q.Aa() || !b && !q.fa() || (q.S() ? g("cloudmask_font", function(a, b) {
        if (a) {
          return z.b("CM580 ", a);
        }
        S["css/cloudmask.font.css"] = b;
      }) : Y.forEach(function(a) {
        g(a, function(b, c) {
          if (b) {
            return z.b("CM581 ", b);
          }
          S[a] = c;
        });
      }));
    };
    a.Wf = function(a) {
      return S[a];
    };
    a.ng = function(a) {
      return new Promise(function(b, c) {
        g(a, function(a, d) {
          if (a) {
            return c(a);
          }
          b(d);
        });
      });
    };
  }).call(this, "undefined" !== typeof global ? global : "undefined" !== typeof self ? self : "undefined" !== typeof window ? window : {}, h("buffer").Buffer);
}, {"./application":3, "./cloudmask_tokenization":7, "./cloudmask_xhr":44, "./constants":12, "./env":17, "./log":25, "./notifications.json":30, "./storage":39, buffer:void 0, chrome:void 0, "email-addresses":void 0, "resource://gre/modules/Services.jsm":void 0, "resource://gre/modules/ctypes.jsm":void 0, "sdk/net/xhr":void 0, "sdk/self":void 0}], 44:[function() {
}, {}], 45:[function(h, B) {
  B.exports = {title:"CloudMask", name:"cme", id:"cloudmask@cloudmask.com", version:"2.0.931", description:"CloudMask Security Add-On", author:"CloudMask Corp.", homepage:"http://www.cloudmask.com", "private":!0, main:"index.js", engines:{firefox:">=38.0a1", fennec:">=38.0a1"}, license:"CloudMask", dependencies:{async:"^1.4.0", buffer:"^4.5.0", cheerio:"^0.20.0", connect:"^3.4.0", contentstream:"^1.0.0", events:"^1.1.0", ip:"^0.3.3", "jpeg-js":"^0.1.1", jsrsasign:"0.0.3", jszip:"^2.5.0", mime:"^1.3.4",
  minimatch:"^3.0.0", mkdirp:"^0.5.1", "node-forge":"^0.6.38", nodemailer:"^4.0.1", pngjs:"^2.1.0", process:"^0.11.2", rfc2253:"^0.1.1", "stream-buffers":"^3.0.0", "stream-to-array":"^2.0.2", traverse:"^0.6.6", "ua-parser-js":"^0.7.12", util:"^0.10.3", wgxpath:"^1.1.0", xmldom:"^0.1.19", "xmlhttprequest-cookie":"^0.9.2", "email-addresses":"^3.0.01"}, devDependencies:{browserify:"^13.0.0", "fs-extra":"^0.26.5", "google-closure-compiler":"^20151216.1.0", jpm:"^1.0.0", mkdirp:"^0.5.0", ncp:"^2.0.0",
  rimraf:"^2.2.8", shx:"^0.2.2", unzip:"^0.1.11"}, browser:{"node-forge":"./vendor/forge.min.js"}, scripts:{test:'echo "Error: no test specified" && exit 1', clean:"rimraf build/dist && rimraf build/signed && rimraf build/dist/tmp", logmask:"java -jar ../log-mask/target/log-mask-0.0.1-SNAPSHOT-jar-with-dependencies.jar logger .logger", obfuscate:"java -jar ../compiler/target/compiler-0.0.1-SNAPSHOT-jar-with-dependencies.jar --compilation_level=ADVANCED_OPTIMIZATIONS --create_renaming_reports --create_source_map=%outname%_source_map.map --source_map_format=V3 --language_in=ECMASCRIPT6 --language_out=ECMASCRIPT5 --externs=externs/externs.json.js --externs=externs/externs.js --externs=externs/externs.cloudmask.js --externs=./node_modules/google-closure-compiler/contrib/externs/chrome_extensions.js --externs externs/nodejs/assert.js --externs externs/nodejs/buffer.js --externs externs/nodejs/child_process.js --externs externs/nodejs/cluster.js --externs externs/nodejs/crypto.js --externs externs/nodejs/dgram.js --externs externs/nodejs/dns.js --externs externs/nodejs/domain.js --externs externs/nodejs/events.js --externs externs/nodejs/fs.js --externs externs/nodejs/globals.js --externs externs/nodejs/http.js --externs externs/nodejs/https.js --externs externs/nodejs/net.js --externs externs/nodejs/os.js --externs externs/nodejs/path.js --externs externs/nodejs/punycode.js --externs externs/nodejs/querystring.js --externs externs/nodejs/readline.js --externs externs/nodejs/repl.js --externs externs/nodejs/stream.js --externs externs/nodejs/string_decoder.js --externs externs/nodejs/tls.js --externs externs/nodejs/tty.js --externs externs/nodejs/url.js --externs externs/nodejs/util.js --externs externs/nodejs/vm.js --externs externs/nodejs/zlib.js --formatting=PRETTY_PRINT",
  "build-ff:js":"browserify --exclude ./node-cm-crypto --ignore ./components/file-control.js --ignore ./components/file-sharing.js --ignore ./components/ms_cryptolib.js --ignore ./components/ie_provider.js --ignore ./components/forge_cryptolib.js --ignore ./components/search_chrome.js --ignore ./components/node_cryptolib.js --ignore ./components/crypto_provider.js --ignore ./components/crypto_android.js --ignore-missing --no-bundle-external firefox.js", "build-ff-deps":"browserify -r buffer -r events -r util -r crypto -r path -r process -r fs",
  "build-ff-dev:js":"npm run -s build-ff:js > build/dist/firefox/firefox.js && npm run ff-sandbox-dev", "prebuild-ff-dev:js":"mkdirp build/dist/firefox", "build-ff-prod:js":"npm run -s build-ff:js | npm run -s logmask | npm run -s obfuscate > build/dist/firefox/firefox.js", "prebuild-ff-prod:js":"mkdirp build/dist/firefox", "build-ff-prod":"npm run build-ff-prod:js && npm run copy-data && npm run copy-deps", "prebuild-ff-prod":"rimraf build/dist/firefox && mkdirp build/dist/firefox", "postbuild-ff-prod":"mkdirp build/tmp/firefox && move _source_map.map build/tmp/firefox/ff_source_map.map && move _props_map.out build/tmp/firefox/ff_props_map.out && move _vars_map.out build/tmp/firefox/ff_vars_map.out && move logmask_map.json build/tmp/firefox/ff_logmask_map.json",
  "build-ff":"npm run build-ff-dev:js && npm run copy-data && npm run copy-deps", "prebuild-ff":"rimraf build/dist/firefox && mkdirp build/dist/firefox && mkdirp build/dist/firefox/data", "copy-data":"node build/scripts/copy_data.js", "copy-deps":"node build/scripts/copy_deps.js", xpi:"npm run build-ff && cd build/dist/firefox && jpm xpi", "xpi-prod":"npm run build-ff-prod && cd build/dist/firefox && jpm xpi", prexpi:"mkdirp build/dist/firefox && rimraf build/dist/firefox/*.xpi", sign:"npm run xpi && node scripts/unzip.js && node scripts/sign.js",
  presign:"rimraf build/dist/signed && mkdirp build/dist/signed", "ff-sandbox-dev":"npm run -s build-sandbox-deps > build/dist/firefox/data/sandbox-deps.js && npm run -s build-sandbox:js > build/dist/firefox/data/sandbox.min.js", prechrome:"rimraf build/dist/chrome && mkdirp build/dist/chrome", chrome:"node build/scripts/chrome_resources.js && npm run chrome-js && npm run chrome-deps && npm run build-sandbox-chrome", "chrome-prod":"node build/scripts/chrome_resources.js && npm run chrome-deps && npm run chrome-js:prod && npm run build-sandbox-chrome-prod",
  "chrome-deps:js":"browserify -r buffer -r events -r rfc2253 -r util -r crypto -r jsrsasign -r jszip -r xmldom -r async -r mime -r stream-buffers -r pngjs -r jpeg-js -r traverse -r ua-parser-js -r ./vendor/forge.min.js:node-forge -r ./vendor/cmpdfjs/cmpdf.js:cmpdf -r email-addresses --ignore node-zlib-backport", "chrome-deps":"npm run -s chrome-deps:js > build/dist/chrome/deps.js", "build-chrome:js":'browserify --exclude "./node-cm-crypto" --no-bundle-external chrome.js', "chrome-js":"npm run build-chrome:js -s > build/dist/chrome/background.js",
  "chrome-js:prod":"npm run build-chrome:js -s | npm run -s logmask | npm run -s obfuscate > build/dist/chrome/background.js", "postchrome-js:prod":"mkdirp build/tmp/chrome && move _source_map.map build/tmp/chrome/background_source_map.map && move _props_map.out build/tmp/chrome/background_props_map.out && move _vars_map.out build/tmp/chrome/background_vars_map.out && move logmask_map.json build/tmp/chrome/background_logmask_map.json", "build-sandbox":"npm run build-sandbox-dev -s > agent/sandbox.min.js",
  "prebuild-sandbox-chrome":"mkdirp build/tmp/chrome", "build-sandbox-chrome":"npm run -s build-sandbox-dev > build/tmp/chrome/sandbox.min.js && node build/scripts/cat.js resources/etc/sandbox-closure.header.txt build/tmp/chrome/sandbox.min.js resources/etc/sandbox-closure.trailer.txt > build/dist/chrome/sandbox-closure.js", "prebuild-sandbox-chrome-prod":"mkdirp build/tmp/chrome", "build-sandbox-chrome-prod":"npm run build-sandbox-deps -s > build/tmp/chrome/sandbox-deps.js && npm run build-sandbox-prod -s > build/tmp/chrome/sandbox.min.js && node build/scripts/cat.js resources/etc/sandbox-closure.header.txt build/tmp/chrome/sandbox-deps.js build/tmp/chrome/sandbox.min.js resources/etc/sandbox-closure.trailer.txt > build/dist/chrome/sandbox-closure.js",
  "postbuild-sandbox-chrome-prod":"mkdirp build/tmp/chrome && move _source_map.map build/tmp/chrome/sandbox_source_map.map && move _props_map.out build/tmp/chrome/sandbox_props_map.out && move _vars_map.out build/tmp/chrome/sandbox_vars_map.out && move logmask_map.json build/tmp/chrome/sandbox_logmask_map.json", "build-sandbox:js":"browserify --ignore xmlhttprequest-cookie --ignore ./cme.js --ignore ./components/audit_events.json --ignore ./components/sse.js --ignore ./components/file-control.js --ignore ./components/proxy.js --ignore ./components/pollers.js --ignore ./components/openid.js --ignore ./components/cloudmask_messsagebroker.js --ignore ./components/policyVerifier.js --ignore ./components/ui_control.js --ignore ./components/crypto.js --ignore ./components/file_utils.js --ignore ./components/cloudmask_xhr.js --ignore ./components/updates.js --no-bundle-external sandbox.js",
  "build-sandbox-deps":"browserify -r buffer -r async -r mime -r util -r nodemailer/lib/mime-funcs -r nodemailer/lib/base64 -r email-addresses", "prebuild-sandbox-dev":"mkdirp build/tmp", "build-sandbox-dev":"npm run -s build-sandbox-deps > build/tmp/sandbox-deps.js && npm run -s build-sandbox:js > build/tmp/sandbox.js && node build/scripts/cat.js  build/tmp/sandbox-deps.js build/tmp/sandbox.js", "build-sandbox-prod":"npm run -s build-sandbox:js | npm run -s logmask | npm run -s obfuscate", "build-user-agent":"npm run build-user-agent:js -s > gen/user-agent.min.js",
  "build-user-agent:js":"browserify --bare --no-browser-field --no-bundle-external --ignore ./components/nss_cryptolib.js --external async ---external connect --external contentstream --external ip --external jsrsasign --external mime --external mkdirp --external stream-to-array --external traverse --external xmlhttprequest-cookie --ignore-missing agent/user-service.js", "build-user-agent:js:m":"browserify --node --external async ---external connect --external contentstream --external ip --external jsrsasign --external mime --external mkdirp --external stream-to-array --external traverse --external xmlhttprequest-cookie --ignore-missing agent/user-service.js | npm run obfuscate -s",
  "build-system-agent":"npm run build-system-agent:js -s > gen/system-agent.min.js", "build-system-agent:js":"browserify --bare --no-browser-field --no-bundle-external --ignore ./components/nss_cryptolib.js --external async ---external connect --external contentstream --external ip --external jsrsasign --external mime --external mkdirp --external stream-to-array --external traverse --external xmlhttprequest-cookie --ignore-missing agent/system-service.js", "build-system-agent:js:m":"browserify --node --external async ---external connect --external contentstream --external ip --external jsrsasign --external mime --external mkdirp --external stream-to-array --external traverse --external xmlhttprequest-cookie --ignore-missing agent/system-service.js | npm run obfuscate -s",
  "build-browser-httpHandler":"browserify --no-bundle-external --bare -r ./agent/httpHandler:httpHandler > ../CMEFireFox/components/httpHandler.js", "build-browser-deps":"browserify -r traverse -r async -r process -r buffer -r jpeg-js -r pngjs -r mime > ../CMEFireFox/components/vendor/nodeDeps.js", "android-background-deps:js":"browserify -r buffer -r events -r rfc2253 -r util -r crypto -r jsrsasign -r jszip -r xmldom -r async -r mime -r stream-buffers -r pngjs -r jpeg-js -r traverse -r email-addresses --ignore node-zlib-backport",
  "android-background-prod":'browserify --ignore cmpdf --exclude "./node-cm-crypto" --ignore ./components/file-control.js --ignore ./components/file-sharing.js --ignore ./components/ms_cryptolib.js --ignore ./components/ie_provider.js --ignore ./components/forge_cryptolib.js --ignore ./components/search_chrome.js --ignore ./components/node_cryptolib.js --ignore ./components/crypto_provider.js --ignore ./components/nss_cryptolib.js --ignore-missing --no-bundle-external android.js -o build/tmp/background.t.js && java -jar node_modules/google-closure-compiler/compiler.jar < build/tmp/background.t.js > build/dist/android/background.js',
  "android-background-deps":"npm run android-background-deps:js -s > build/dist/android/deps.js", "android-background-dev":"browserify --ignore cmpdf --exclude \"./node-cm-crypto\" --ignore ./components/file-control.js --ignore ./components/file-sharing.js --ignore ./components/ms_cryptolib.js --ignore ./components/ie_provider.js --ignore ./components/forge_cryptolib.js --ignore ./components/search_chrome.js --ignore ./components/node_cryptolib.js --ignore ./components/crypto_provider.js --ignore ./components/nss_cryptolib.js --ignore-missing android.js > build/dist/android/background.js && echo 'no dependencies file in dev build' > build/dist/android/deps.js",
  "android-sandbox-prod":"npm run build-sandbox && java -jar node_modules/google-closure-compiler/compiler.jar < agent/sandbox.min.js > build/dist/android/sandbox.min.js", "android-sandbox-dev":"npm run build-sandbox-dev -s > build/dist/android/sandbox.min.js", "android-resources":'bash -c "cp build/dist/android/deps.js ../CloudMask-Android/app/src/main/res/raw/deps.js && cp build/dist/android/sandbox.min.js ../CloudMask-Android/app/src/main/assets/sandbox.min.js && cp build/dist/android/background.js ../CloudMask-Android/app/src/main/res/raw/background_js.js && cp resources/common/pages/invite.html ../CloudMask-Android/app/src/main/res/raw && cp resources/common/css/cloudmask.font.css ../CloudMask-Android/app/src/main/res/raw/cloudmask_font.css && cp resources/common/pages/email-body.html ../CloudMask-Android/app/src/main/res/raw/email_body.html"',
  "preandroid-prod":"mkdirp build/dist/android", "android-prod":"npm run android-background-prod && npm run android-background-deps && npm run android-sandbox-prod && npm run android-resources", "preandroid-dev":"mkdirp build/dist/android", "android-dev":"npm run android-background-dev && npm run android-sandbox-dev && npm run android-resources", "ios-resources":"echo 1", "ios-sandbox-dev":"npm run build-sandbox-dev -s > build/dist/ios/sandbox.min.js", "ios-background-dev":"browserify --exclude \"./node-cm-crypto\" --ignore ./components/file-control.js --ignore ./components/file-sharing.js --ignore ./components/ms_cryptolib.js --ignore ./components/ie_provider.js --ignore ./components/crypto_android.js --ignore ./components/search_chrome.js --ignore ./components/node_cryptolib.js --ignore ./components/crypto_provider.js --ignore ./components/nss_cryptolib.js --ignore-missing ios.js > build/dist/ios/background.js && echo 'no dependencies file in dev build' > build/dist/ios/deps.js",
  "ios-dev":"npm run ios-background-dev && npm run ios-sandbox-dev && npm run ios-resources", "preweb:prod":"rimraf build/dist/web && rimraf build/tmp/web && rimraf ../cloudmaskmanager3/cloudmaskcme/src/main/webapp/cme && mkdirp build/dist/web && mkdirp build/tmp/web", "preweb:dev":"rimraf build/dist/web && rimraf build/tmp/web && rimraf ../cloudmaskmanager3/cloudmaskcme/src/main/webapp/cme && mkdirp build/dist/web && mkdirp build/tmp/web", "web:prod":"npm run -s web-cme | npm run -s logmask | npm run -s obfuscate > build/dist/web/cme.js && npm run -s web-cme:deps > build/dist/web/deps.js && npm run web-sandbox:prod && npm run web-resources && npm run web-copy-to-web",
  "web:dev":"npm run -s web-cme > build/dist/web/cme.js && npm run -s web-cme:deps > build/dist/web/deps.js && npm run web-sandbox:dev && npm run web-resources && npm run web-copy-to-web", "web-cme:deps":"browserify -r buffer -r events -r rfc2253 -r util -r crypto -r jsrsasign -r jszip -r xmldom -r async -r mime -r stream-buffers -r pngjs -r jpeg-js -r traverse -r ua-parser-js -r ./vendor/forge.min.js:node-forge -r ./vendor/cmpdfjs/cmpdf.js:cmpdf  -r email-addresses --ignore node-zlib-backport",
  "web-cme":'browserify --ignore cmpdf --exclude "./node-cm-crypto" --ignore ./components/file-control.js --ignore ./components/file-sharing.js --ignore ./components/ms_cryptolib.js --ignore ./components/ie_provider.js --ignore ./components/search_chrome.js --ignore ./components/node_cryptolib.js --ignore ./components/crypto_provider.js --ignore ./components/nss_cryptolib.js --ignore-missing --no-bundle-external web.js', "web-sandbox:js":"browserify --ignore xmlhttprequest-cookie --ignore ./cme.js --ignore ./components/audit_events.json --ignore ./components/sse.js --ignore ./components/file-control.js --ignore ./components/proxy.js --ignore ./components/pollers.js --ignore ./components/openid.js --ignore ./components/cloudmask_messsagebroker.js --ignore ./components/policyVerifier.js --ignore ./components/ui_control.js --ignore ./components/crypto.js --ignore ./components/file_utils.js --ignore ./components/cloudmask_xhr.js --ignore ./components/updates.js --ignore-missing ./sandbox.js",
  "web-sandbox:replace":'shx sed ";\\"REPLACE_ME\\"" "()" build/tmp/web/sandbox.js', "web-sandbox:dev":"npm run -s web-sandbox:js > build/tmp/web/sandbox.js && npm run -s web-sandbox:replace > build/dist/web/sandbox.js", "web-sandbox:prod":"npm run -s web-sandbox:js > build/tmp/web/sandbox.js && npm run -s web-sandbox:replace | npm run -s logmask | npm run -s obfuscate > build/dist/web/sandbox.js", "web-resources":"ncp resources/common build/dist/web && ncp resources/web build/dist/web", "web-copy-to-web":"ncp build/dist/web ../cloudmaskmanager3/cloudmaskcme/src/main/webapp/cme"}};
}, {}], 46:[function(h, B) {
  B.exports = {httpsBaseURL:"https://service.cloudmask.com", cryptoMode:6, logMode:3, skipAccountValidation:!0, disableAdvancedFeatures:!1, disableSupportedDocuments:!0, securityOfficerDN:"self", useSSE:!0, cloudMaskCertificate:["MIIC3jCCAcagAwIBAgIBATANBgkqhkiG9w0BAQsFADAjMSEwHwYDVQQDExg1OTI4NGI3ZjBhNDhjZTAyMDQ4OGJlOGMwHhcNMTcwNTI2MTUzNjMyWhcNMjcwNTI2MTUzNjMyWjAjMSEwHwYDVQQDExg1OTI4NGI3ZjBhNDhjZTAyMDQ4OGJlOGMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCHDheL1xE0tclJMnCxiEO5mootzuZ59bfzixehqL5D0qf8aD9r8JAhbCWZuNjhzUifIOYF5ND+z7EvAmt2hKJx30hefNvn2I8mG12cros4+MOctBs/q6+zl+JHt3OMD2YrbzDIFu5R1/eJ3B26dmruYcE5h82eH82H0HtMs08S+a5iLQUWTCv3RzWwFsybSN51i77Rt/+PZiinxxiTUhCSgLpM+gL20+2whgUZP+mOcrFwJ4XAn2mjitiJb/bid6L3+BogscDHnLTD2Zdz386Y+6+C21JMTs5AzuNONBxzy+RVxlKw/idEVG6j9OI0sFGVULhrCkiOwB7ZO1imLjSPAgMBAAGjHTAbMAwGA1UdEwQFMAMBAf8wCwYDVR0PBAQDAgTwMA0GCSqGSIb3DQEBCwUAA4IBAQBUPaY9/f6TC5Mad77a3gOkLBPW757iRGrODPuKQFMIufjhaGODNDgE1pzLK2XmHTHUxUL/KLHNGJ1FsHfF7QCS4cBJ2fxKfsLReeeo6jtXqIYa5FMOXhFXQmqRxMEIleHHVZ2/f3XxqIunxH+oCB6RSN92251dQNxkhOhwyGnYuXgBVf/VTAmcvED6Fz5z2u8pJp2i0lCoOw2GMVmSL/RBgKu8fjZAbdc5LhAc0UpwuoeIuhBbI56o/IfHcA17O2ob4C5HgZvkltR6MuNPZxvtH6bQGBBFyOdL3GE84bjwOTwDkQryVcGBGbPIqi5CIjkZv44glIT5vv56mlGdkT/3"],
  openIdProviders:{"accounts.google.com":{clientId:"107412892787-bq64j1ei2amqo7dcer0r2i5vsgmi84k2.apps.googleusercontent.com", clientSecret:"YxdBACPciBAS7PJdDcJouabK", discoveryURL:"https://accounts.google.com/.well-known/openid-configuration", redirectUri:"{httpsBaseURL}/3/enroll_a.html?issuer=accounts.google.com%26phase=enroll"}}};
}, {}], 47:[function(h, B) {
  B.exports = {httpsBaseURL:"https://qa.cloudmask.com", cryptoMode:5, logMode:3, skipAccountValidation:!0, disableAdvancedFeatures:!1, disableSupportedDocuments:!0, securityOfficerDN:"self", useSSE:!0, cloudMaskCertificate:["MIIC3jCCAcagAwIBAgIBATANBgkqhkiG9w0BAQsFADAjMSEwHwYDVQQDExg1OTI4NGI3ZjBhNDhjZTAyMDQ4OGJlOGMwHhcNMTcwNTI2MTUzNjMyWhcNMjcwNTI2MTUzNjMyWjAjMSEwHwYDVQQDExg1OTI4NGI3ZjBhNDhjZTAyMDQ4OGJlOGMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCHDheL1xE0tclJMnCxiEO5mootzuZ59bfzixehqL5D0qf8aD9r8JAhbCWZuNjhzUifIOYF5ND+z7EvAmt2hKJx30hefNvn2I8mG12cros4+MOctBs/q6+zl+JHt3OMD2YrbzDIFu5R1/eJ3B26dmruYcE5h82eH82H0HtMs08S+a5iLQUWTCv3RzWwFsybSN51i77Rt/+PZiinxxiTUhCSgLpM+gL20+2whgUZP+mOcrFwJ4XAn2mjitiJb/bid6L3+BogscDHnLTD2Zdz386Y+6+C21JMTs5AzuNONBxzy+RVxlKw/idEVG6j9OI0sFGVULhrCkiOwB7ZO1imLjSPAgMBAAGjHTAbMAwGA1UdEwQFMAMBAf8wCwYDVR0PBAQDAgTwMA0GCSqGSIb3DQEBCwUAA4IBAQBUPaY9/f6TC5Mad77a3gOkLBPW757iRGrODPuKQFMIufjhaGODNDgE1pzLK2XmHTHUxUL/KLHNGJ1FsHfF7QCS4cBJ2fxKfsLReeeo6jtXqIYa5FMOXhFXQmqRxMEIleHHVZ2/f3XxqIunxH+oCB6RSN92251dQNxkhOhwyGnYuXgBVf/VTAmcvED6Fz5z2u8pJp2i0lCoOw2GMVmSL/RBgKu8fjZAbdc5LhAc0UpwuoeIuhBbI56o/IfHcA17O2ob4C5HgZvkltR6MuNPZxvtH6bQGBBFyOdL3GE84bjwOTwDkQryVcGBGbPIqi5CIjkZv44glIT5vv56mlGdkT/3"],
  openIdProviders:{"accounts.google.com":{clientId:"107412892787-bq64j1ei2amqo7dcer0r2i5vsgmi84k2.apps.googleusercontent.com", discoveryURL:"https://accounts.google.com/.well-known/openid-configuration", redirectUri:"{httpsBaseURL}/2/enroll_a.html?issuer=accounts.google.com%26phase=enroll"}}, client_id:"107412892787-bq64j1ei2amqo7dcer0r2i5vsgmi84k2.apps.googleusercontent.com", client_secret:"YxdBACPciBAS7PJdDcJouabK"};
}, {}], 48:[function(h, B) {
  B.exports = {httpsBaseURL:"https://qa.cloudmask.com", cryptoMode:5, logMode:3, useSSE:!0, skipAccountValidation:!0, disableAdvancedFeatures:!1, disableSupportedDocuments:!1, securityOfficerDN:"self", cloudMaskCertificate:["MIIC3jCCAcagAwIBAgIBATANBgkqhkiG9w0BAQsFADAjMSEwHwYDVQQDExg1OTI4NGI3ZjBhNDhjZTAyMDQ4OGJlOGMwHhcNMTcwNTI2MTUzNjMyWhcNMjcwNTI2MTUzNjMyWjAjMSEwHwYDVQQDExg1OTI4NGI3ZjBhNDhjZTAyMDQ4OGJlOGMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCHDheL1xE0tclJMnCxiEO5mootzuZ59bfzixehqL5D0qf8aD9r8JAhbCWZuNjhzUifIOYF5ND+z7EvAmt2hKJx30hefNvn2I8mG12cros4+MOctBs/q6+zl+JHt3OMD2YrbzDIFu5R1/eJ3B26dmruYcE5h82eH82H0HtMs08S+a5iLQUWTCv3RzWwFsybSN51i77Rt/+PZiinxxiTUhCSgLpM+gL20+2whgUZP+mOcrFwJ4XAn2mjitiJb/bid6L3+BogscDHnLTD2Zdz386Y+6+C21JMTs5AzuNONBxzy+RVxlKw/idEVG6j9OI0sFGVULhrCkiOwB7ZO1imLjSPAgMBAAGjHTAbMAwGA1UdEwQFMAMBAf8wCwYDVR0PBAQDAgTwMA0GCSqGSIb3DQEBCwUAA4IBAQBUPaY9/f6TC5Mad77a3gOkLBPW757iRGrODPuKQFMIufjhaGODNDgE1pzLK2XmHTHUxUL/KLHNGJ1FsHfF7QCS4cBJ2fxKfsLReeeo6jtXqIYa5FMOXhFXQmqRxMEIleHHVZ2/f3XxqIunxH+oCB6RSN92251dQNxkhOhwyGnYuXgBVf/VTAmcvED6Fz5z2u8pJp2i0lCoOw2GMVmSL/RBgKu8fjZAbdc5LhAc0UpwuoeIuhBbI56o/IfHcA17O2ob4C5HgZvkltR6MuNPZxvtH6bQGBBFyOdL3GE84bjwOTwDkQryVcGBGbPIqi5CIjkZv44glIT5vv56mlGdkT/3"],
  openIdProviders:{"accounts.google.com":{clientId:"107412892787-bq64j1ei2amqo7dcer0r2i5vsgmi84k2.apps.googleusercontent.com", discoveryURL:"https://accounts.google.com/.well-known/openid-configuration", redirectUri:"{httpsBaseURL}/3/enroll.html?issuer=accounts.google.com%26phase=enroll"}}};
}, {}], 49:[function(h) {
  (function() {
    function B(p) {
      function g(a) {
        var b = location, c = [];
        c.push(b.hostname);
        var d = null;
        return a.some(function(a) {
          if (a.domains.some(function(a) {
            return c.some(function(b) {
              return -1 !== b.indexOf(a, b.length - a.length);
            });
          })) {
            if (a.byPassPages && a.byPassPages.some(function(a) {
              return -1 < b.pathname.indexOf(a.url) || 0 == b.hostname.indexOf(a.url) || b.href == a.url || -1 < b.search.indexOf(a.url);
            })) {
              return console.log("This page is bypassed by cloudmask " + b.href), !0;
            }
            d = a;
            return !0;
          }
        }) ? d : (console.warn("Skipping injection for hostname: " + b.hostname), !1);
      }
      function m(e) {
        if (window.__CLOUDMASK_KEY) {
          e = window.top == window ? -1 : [].indexOf.call(window.top.frames, window), console.log("CloudMask: skipping, sandbox appears to exist for frame: " + e);
        } else {
          var f = h("./components/env");
          f.Oe(d, b, t, c, l, x, B);
          f.ENV.device && "REVOKED" != f.ENV.device.status ? ("ACTIVE" != f.ENV.device.status && console.log("CloudMask cmda is being injected  for non active device: " + f.ENV.device.status), console.log("CloudMask sandbox init params"), f = h("./components/utils"), f.Zj(), f.mg(e) ? console.error("Application Subscription Has Invalid Signature") : a.init(e)) : console.log("CloudMask cmda is not injected because the device or the user is not active");
        }
      }
      var e = p.params, f = p.onReadyCallback;
      p = p.noOverload;
      var d = e.sessionJSON, b = e.envJSON, c = e.userJSON, l = e.accountJSON, t = e.preferencesJSON, x = e.securityOfficersJSON, y = e.applicationsJSON, B = e.runtime;
      if (f || p) {
        d = JSON.parse(d), d.onReadyCallback = f, d.noOverload = p, d = JSON.stringify(d);
      }
      e = JSON.parse(y);
      e instanceof Array ? (e = g(e)) && m(e) : m(e);
    }
    console.log("SANDBOX is here for: " + location);
    var a, p = window.location.href + ":" + (new Date).getTime().toString(), t = document.documentMode;
    a = new (h("./components/cmda").bh)("IE" + t, p, p);
    a.Nj = function(a) {
      B({params:a});
    };
  })();
}, {"./components/cmda":10, "./components/env":17, "./components/utils":43}]}, {}, [49]);

})()</script><head><title>U.S. Bankruptcy Court, Washington Western LIVE Database V5.1</title>
<link rel="stylesheet" type="text/css" href="/css/default.css"><script type="text/javascript" src="/lib/core.js"></script><script type="text/javascript">if (top!=self) {top.location.replace(location.href);}</script></head><body bgcolor="FFFFF0" text="000000" onload="SetFocus()"><div class="noprint"><img id="cmecfLogo" class="cmecfLogo" src="/graphics/cmecf-logo.gif" alt="CM/ECF" title=""><img src="/graphics/menubar-help.gif" alt="?" title="" class="helpImage" id="helpImage" onclick="CMECF.MainMenu.showHelpPage(''); return false" onmouseover="CMECF.MainMenu.helpImageOn()" onmouseout="CMECF.MainMenu.helpImageOff()"><div id="topmenu" class="yuimenubar"><div class="bd"><ul class="first-of-type"><li class="yuimenubaritem" style="width:9%"><a class="yuimenubaritemlabel" href="/cgi-bin/iquery.pl">Query</a></li><li class="yuimenubaritem" style="width:11%"><a class="yuimenubaritemlabel" href="/cgi-bin/DisplayMenu.pl?Reports&amp;id=-1">Reports</a></li><li class="yuimenubaritem" style="width:11%"><a class="yuimenubaritemlabel" href="/cgi-bin/DisplayMenu.pl?Utilities&amp;id=-1">Utilities</a></li><li class="yuimenubaritem" style="width:10%"><a class="yuimenubaritemlabel" href="/cgi-bin/login.pl?logout">Logout</a></li><li class="yuimenubaritem" style="margin-left:1.7%"><a class="yuimenubaritemlabel" href="http://www.wawb.uscourts.gov/training/index.html" target="_blank">Training</a></li></ul></div></div></div><script type="text/javascript">if (navigator.appVersion.indexOf("MSIE")==-1){window.setTimeout( function(){ CMECF.MainMenu.renderSimpleMenu(); }, 0);}else{CMECF.util.Event.addListener(window, "load", CMECF.MainMenu.renderSimpleMenu);}</script><div id="cmecfMainContent" style="height: 860px;"><input type="hidden" id="cmecfMainContentScroll" value="0"><script language="JavaScript">
		var IsForm = false;
		var FirstField;
		function SetFocus() {
			if(IsForm) {
				if(FirstField) {
					var ind = FirstField.indexOf('document.',0);
					if(ind == 0)
					{
						eval(FirstField);
					}
					else
					{
						var Code = "document.forms[0]."+FirstField+".focus();";
						eval(Code);
					}
				} else {
					var Cnt = 0;
					while(document.forms[0].elements[Cnt] != null) {
						if(document.forms[0].elements[Cnt].type != "hidden") {
							document.forms[0].elements[Cnt].focus();
							break;
						}
						Cnt += 1;
					}
				}
			}
			return(true);
		}
		</script>
<script type="text/JavaScript">
document.cookie="PDFHeaderReferer=576511284662349; path=/";
</script>
		<script type="text/javascript" src="/lib/widgits.js"></script>
		<script>
		var debtorPanel = null;

		function create_panel(clid, message) {
		    if (!debtorPanel) {
		        debtorPanel = new CMECF.widget.Panel('debtorPanel', {
				close:true,
				draggable:false,
				context:[clid, 'tl', 'br'],
				width: "250" + "px",
				height: "110" + "px",
				constraintoviewport:true
			});
			debtorPanel.setHeader("Barred Debtor Information");
			debtorPanel.setBody(message);
			debtorPanel.body.style.height = "8em";
			debtorPanel.render(document.body);
		    } else {
		        debtorPanel.show();
		    }
		}

		function close_panel() {
		    if (debtorPanel) {
		        debtorPanel.destroy();
		        debtorPanel = null;
		    }
		}
		</script>
		<table width="100%" align="right" border="0" cellspacing="5"><tbody><tr><td align="right"><h2> <font size="3">DebtEd, Dom, Repeat  </font></h2></td></tr></tbody></table><br><br><br><center><b><font size="+1">U.S. Bankruptcy Court<br>Western District of Washington (Tacoma)<br>Bankruptcy Petition #: 17-43611-BDL</font></b></center><table width="100%" border="0" cellspacing="1"><tbody><tr>	<td valign="top" width="50%"><font size="+0"><br><i>Assigned to:</i>       Brian D Lynch<br>Chapter          13<br>Voluntary<br>Asset<div class="noprint"><a href="/cgi-bin/SearchClaims.pl?caseid=646603;sc">Claims Register</a></div><br><br>	</font></td>
	<td valign="top" width="50%" align="right"><font size="+0"><table border="0" cellspacing="0" cellpadding="0" align="center"><tbody><tr><td align="right" valign="top"><i>Date filed:</i></td><td align="left" valign="top">&nbsp;&nbsp;09/27/2017</td></tr><tr><td align="right" valign="top"><i>Plan confirmed:</i></td><td align="left" valign="top">&nbsp;&nbsp;12/23/2017</td></tr><tr><td align="right" valign="top"><i>341 meeting:</i></td><td align="left" valign="top">&nbsp;&nbsp;11/09/2017</td></tr><tr><td align="right" valign="top"><i>Deadline for filing claims:</i></td><td align="left" valign="top">&nbsp;&nbsp;01/24/2018  </td></tr><tr><td align="right" valign="top"><i>Deadline for filing claims (govt.):</i></td><td align="left" valign="top">&nbsp;&nbsp;03/26/2018  </td></tr></tbody></table>	</font></td>
</tr>
</tbody></table><br><font size="5"><b></b>
		</font><table width="100%" border="0" cellspacing="1"><tbody><tr></tr><tr>	<td valign="top" width="50%"><font size="+0"><i><b>Debtor</b></i><br><b>Amy Aaron Carpenter</b>
<br>PO Box 1075
<br>Orting, WA 98360
<br>PIERCE-WA
<br>SSN / ITIN: xxx-xx-5977<br><br>	</font></td>
	<td valign="top" align="right"><font size="+0">represented by	</font></td>
<td valign="top" width="40%">
  	                    <font size="+0"><b>John A Sterbick</b>
<br>Sterbick and Associates, P.S.
<br>Attorney at Law
<br>1010 South I Street
<br>Tacoma, WA 98405
<br>253-383-0140
<br>Email:&nbsp;<a href="mailto:jsterbick@sterbick.com">jsterbick@sterbick.com</a><br><br></font></td></tr><tr>	<td valign="top" width="50%"><font size="+0"><i><b>Trustee</b></i><br><b>Michael G. Malaier</b>
<br>1551 Broadway, Ste 600
<br>Tacoma, WA 98402
<br>253-572-6600<br><br>	</font></td>
	<td valign="top" width="20%" align="right"><font size="+0">&nbsp;	</font></td>
<td valign="top" width="40%" nowrap="">
  	                    <font size="+0">&nbsp;</font></td></tr><tr>	<td valign="top" width="50%"><font size="+0"><i><b>US Trustee</b></i><br><b>United States Trustee</b>
<br>700 Stewart St Ste 5103
<br>Seattle, WA 98101
<br>(206) 553-2000	</font></td>
	<td valign="top" width="20%" align="right"><font size="+0">&nbsp;	</font></td>
	<td valign="top" width="40%"><font size="+0">&nbsp;	</font></td>
</tr></tbody></table><br><table border="1" cellpadding="10" cellspacing="0"><tbody><tr><th width="94" nowrap="">Filing Date</th>
<th colspan="2" align="center">#</th><th align="center">Docket Text</th></tr>
<tr><td width="94" nowrap="" valign="bottom">09/27/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,2"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px"><a href="/doc1/196031035110" oncontextmenu="this.href=&quot;https://ecf.wawb.uscourts.gov/doc1/196031035110&quot;">1</a> <br><nobr>(45&nbsp;pgs)</nobr></td><td valign="bottom">  Chapter 13 Voluntary Petition, Individual, <i></i>. Government Proof of Claim due by 03/26/2018. Filed by John A Sterbick of Sterbick and Associates, P.S. on behalf of Amy Aaron Carpenter (Sterbick, John) (Entered: 09/27/2017 at 15:49:00)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">09/27/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,8"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px"><a href="/doc1/196031035113" oncontextmenu="this.href=&quot;https://ecf.wawb.uscourts.gov/doc1/196031035113&quot;">2</a> <br><nobr>(4&nbsp;pgs)</nobr></td><td valign="bottom">  Chapter 13 Plan. Filed by John A Sterbick on behalf of Amy Aaron Carpenter. (Sterbick, John) (Entered: 09/27/2017 at 15:49:19)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">09/27/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,10"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px"><a href="/doc1/196031035118" oncontextmenu="this.href=&quot;https://ecf.wawb.uscourts.gov/doc1/196031035118&quot;">3</a> <br><nobr>(2&nbsp;pgs)</nobr></td><td valign="bottom">  Application to Pay Filing Fees in Installments <i></i>.. Filed by John A Sterbick on behalf of Amy Aaron Carpenter (Sterbick, John) (Entered: 09/27/2017 at 15:49:35)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">09/27/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,12"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px"><a href="/doc1/196031035121" oncontextmenu="this.href=&quot;https://ecf.wawb.uscourts.gov/doc1/196031035121&quot;">4</a> <br><nobr>(1&nbsp;pg)</nobr></td><td valign="bottom">  Certificate of Credit Counseling for Debtor <i></i>. Filed by John A Sterbick on behalf of Amy Aaron Carpenter. (Sterbick, John) (Entered: 09/27/2017 at 15:49:46)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">09/27/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,14"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px"><a href="/doc1/196031035124" oncontextmenu="this.href=&quot;https://ecf.wawb.uscourts.gov/doc1/196031035124&quot;">5</a> <br><nobr>(4&nbsp;pgs)</nobr></td><td valign="bottom">  Chapter 13 Statement of Your Current Monthly Income and Calculation of Commitment Period for 3 Years Form 122C-1. Disposable Income Is Not Determined <i></i>. Filed by John A Sterbick on behalf of Amy Aaron Carpenter. (Sterbick, John) (Entered: 09/27/2017 at 15:49:58)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">09/27/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,16"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px"><a href="/doc1/196031035127" oncontextmenu="this.href=&quot;https://ecf.wawb.uscourts.gov/doc1/196031035127&quot;">6</a></td><td valign="bottom">  Social Security Number(s) of Debtor(s) Submitted. PDF only viewable by court. Filed by John A Sterbick on behalf of Amy Aaron Carpenter. (Sterbick, John) (Entered: 09/27/2017 at 15:50:09)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">09/27/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>  &nbsp;</nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px">&nbsp;</td><td valign="bottom">  Receipt of filing fee for Chapter 13 Voluntary Petition (17-43611) [misc,1030] ( 100.00). Receipt number 24005907. Fee amount $ 100.00. (U.S. Treasury) (Entered: 09/27/2017 at 15:50:36)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">09/27/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,23"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px">7</td><td valign="bottom">  Meeting of Creditors &amp; Notice of Appointment of Interim Trustee Michael G. Malaier, with 341(a) meeting to be held on 10/26/2017 at 09:00 AM at Courtroom J, Union Station. Confirmation hearing to be held on 11/29/2017 at 01:30 PM at Judge Lynch's Courtroom I, Union Station. Proof of Claim due by 01/24/2018. Objections for Discharge and Reaffirmation Agreements due by 12/26/2017. (Sterbick, John) (Entered: 09/27/2017 at 15:50:47)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">09/27/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,25"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px">&nbsp;</td><td valign="bottom">  Creditor matrix uploaded/added 11 creditor(s). (admin) (Entered: 09/27/2017 at 16:02:04)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">09/27/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,27"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px">8</td><td valign="bottom">  ORDER Granting Payment of Filing Fee in Installments: Entry of an order of discharge will be held in abeyance until filing fees are paid in full. Mark L. Hatcher, Clerk. Text only order . Final Installment Payment due by 1/25/2018. (SLM) (Entered: 09/27/2017 at 16:02:08)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">09/27/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,29"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px"><a href="/doc1/196031035230" oncontextmenu="this.href=&quot;https://ecf.wawb.uscourts.gov/doc1/196031035230&quot;">9</a> <br><nobr>(2&nbsp;pgs)</nobr></td><td valign="bottom">  341 Meeting of Creditors Notice Sent to BNC for Mailing . (SLM) (Entered: 09/27/2017 at 16:02:16)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">09/28/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,31"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px">&nbsp;</td><td valign="bottom">  ** Repeat Filer ** for debtor Amy Aaron Carpenter Case Number <a href="https://ecf.utb.uscourts.gov/cgi-bin/DktRpt.pl?216793">04-23305</a>, Chapter 7  filed in Utah Bankruptcy Court  on 03/04/2004 , Standard Discharge  on 06/09/2004; Case Number <a href="https://ecf.utb.uscourts.gov/cgi-bin/DktRpt.pl?372835">14-24286</a>, Chapter 13  filed in Utah Bankruptcy Court  on 04/25/2014 , Dismissed for failure to make plan payments  on 09/14/2016.(Admin) (Entered: 09/28/2017 at 04:00:38)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">09/29/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,33"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px"><a href="/doc1/196031046356" oncontextmenu="this.href=&quot;https://ecf.wawb.uscourts.gov/doc1/196031046356&quot;">10</a> <br><nobr>(3&nbsp;pgs)</nobr></td><td valign="bottom">  BNC Certificate of Mailing - Meeting of Creditors (Related document(s)<a href="https://ecf.wawb.uscourts.gov/doc1/196031035230">9</a> 341 Meeting of Creditors Sent to BNC for Mailing). Notice Date 09/29/2017. (Admin.) (Entered: 09/29/2017 at 21:29:14)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">09/29/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,36"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px"><a href="/doc1/196031046357" oncontextmenu="this.href=&quot;https://ecf.wawb.uscourts.gov/doc1/196031046357&quot;">11</a> <br><nobr>(5&nbsp;pgs)</nobr></td><td valign="bottom">  BNC Certificate of Notice (Related document(s)<a href="https://ecf.wawb.uscourts.gov/doc1/196031035113">2</a> Chapter 13 Plan). Notice Date 09/29/2017. (Admin.) (Entered: 09/29/2017 at 21:29:14)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">10/26/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,39"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px">&nbsp;</td><td valign="bottom">  Statement Adjourning 341(a) Meeting of Creditors. Section 341(a) Meeting Continued on 11/9/2017 at 11:00 AM at Courtroom J, Union Station. For debtor to appear. Debtor absent. (Malaier, Michael) (Entered: 10/26/2017 at 11:13:19)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">11/09/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,41"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px">&nbsp;</td><td valign="bottom">  Statement Adjourning 341(a) Meeting of Creditors. Debtor appeared. (Malaier, Michael) (Entered: 11/09/2017 at 13:02:27)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">11/22/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,43"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px"><a href="/doc1/196031225184" oncontextmenu="this.href=&quot;https://ecf.wawb.uscourts.gov/doc1/196031225184&quot;">12</a> <br><nobr>(3&nbsp;pgs; 2&nbsp;docs)</nobr></td><td valign="bottom">  Amendment to Schedules J <i></i>. Filed by John A Sterbick on behalf of Amy Aaron Carpenter. (Attachments: # <a href="https://ecf.wawb.uscourts.gov/doc1/196131225185">1</a> Exhibit 106 declaration) (Sterbick, John) (Entered: 11/22/2017 at 08:19:40)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">11/22/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,45"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px"><a href="/doc1/196031225220" oncontextmenu="this.href=&quot;https://ecf.wawb.uscourts.gov/doc1/196031225220&quot;">13</a> <br><nobr>(2&nbsp;pgs)</nobr></td><td valign="bottom">  Change of Address <i></i> Filed by John A Sterbick on behalf of Amy Aaron Carpenter. (Sterbick, John) (Entered: 11/22/2017 at 08:25:57)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">11/22/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,47"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px"><a href="/doc1/196031225242" oncontextmenu="this.href=&quot;https://ecf.wawb.uscourts.gov/doc1/196031225242&quot;">14</a> <br><nobr>(10&nbsp;pgs; 4&nbsp;docs)</nobr></td><td valign="bottom">  Motion to Confirm Amended Plan <i></i>. Proof of Service. Filed by John A Sterbick on behalf of Amy Aaron Carpenter The Hearing date is set for 12/20/2017 at 01:30 PM at Judge Lynch's Courtroom I, Union Station. Response due by 12/13/2017. (Attachments: # <a href="https://ecf.wawb.uscourts.gov/doc1/196131225243">1</a> Proposed Order # <a href="https://ecf.wawb.uscourts.gov/doc1/196131225244">2</a> Exhibit amended plan # <a href="https://ecf.wawb.uscourts.gov/doc1/196131225245">3</a> Exhibit matrix) (Sterbick, John) (Entered: 11/22/2017 at 08:31:06)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">11/22/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,49"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px"><a href="/doc1/196031225257" oncontextmenu="this.href=&quot;https://ecf.wawb.uscourts.gov/doc1/196031225257&quot;">15</a> <br><nobr>(4&nbsp;pgs)</nobr></td><td valign="bottom">  Amended Chapter 13 Plan <i></i> (Related document(s)<a href="https://ecf.wawb.uscourts.gov/doc1/196031035113">2</a> Chapter 13 Plan). Filed by John A Sterbick on behalf of Amy Aaron Carpenter. (Sterbick, John) (Entered: 11/22/2017 at 08:31:37)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">11/22/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,52"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px"><a href="/doc1/196031225606" oncontextmenu="this.href=&quot;https://ecf.wawb.uscourts.gov/doc1/196031225606&quot;">16</a> <br><nobr>(4&nbsp;pgs)</nobr></td><td valign="bottom">  Amended Chapter 13 Plan <i>revised</i> (Related document(s)<a href="https://ecf.wawb.uscourts.gov/doc1/196031035113">2</a> Chapter 13 Plan). Filed by John A Sterbick on behalf of Amy Aaron Carpenter. (Sterbick, John) (Entered: 11/22/2017 at 09:19:43)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">11/22/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,55"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px"><a href="/doc1/196031225620" oncontextmenu="this.href=&quot;https://ecf.wawb.uscourts.gov/doc1/196031225620&quot;">17</a> <br><nobr>(9&nbsp;pgs; 2&nbsp;docs)</nobr></td><td valign="bottom">  Amendment to Schedules SOFA <i></i>. Filed by John A Sterbick on behalf of Amy Aaron Carpenter. (Attachments: # <a href="https://ecf.wawb.uscourts.gov/doc1/196131225621">1</a> Exhibit 106 declaration) (Sterbick, John) (Entered: 11/22/2017 at 09:22:52)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">11/22/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,57"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px">&nbsp;</td><td valign="bottom">  Chapter 13 Confirmation Hearing Continued.. Continued Confirmation hearing scheduled for 12/20/2017 at 01:30 PM at Judge Lynch's Courtroom I, Union Station. (Malaier, Michael) (Entered: 11/22/2017 at 11:38:17)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">12/06/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,60"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px">&nbsp;</td><td valign="bottom">  Receipt of Chapter 13 Installment Filing Fee - $210.00 by KL. Receipt Number 461595. (admin) (Entered: 12/07/2017 at 07:31:18)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">12/07/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,62"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px">&nbsp;</td><td valign="bottom">  Receipt of Filing Fee for Final Installment; Fee Paid in Full. (SLM) (Entered: 12/07/2017 at 08:50:13)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">12/10/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,65"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px"><a href="/doc1/196031281185" oncontextmenu="this.href=&quot;https://ecf.wawb.uscourts.gov/doc1/196031281185&quot;">18</a> <br><nobr>(1&nbsp;pg)</nobr></td><td valign="bottom">  Notice of Requirement to File Financial Management Course Certificate (admin) (Entered: 12/10/2017 at 02:40:39)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">12/13/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,67"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px">19</td><td valign="bottom">  Declaration of No Objection <i></i>. The Filer represents to the Court, under penalty of perjury, that Notice of the Motion linked to this entry was served on 11/22/2017 in accordance with the proof of service filed herein and that no objection to that Motion has been filed in the Office of the Clerk or received by the Filer. (Related document(s)<a href="https://ecf.wawb.uscourts.gov/doc1/196031225242">14</a> Motion to Confirm Amended Plan)... Filed by John A Sterbick of Sterbick and Associates, P.S. on behalf of Amy Aaron Carpenter. (Sterbick, John) (Entered: 12/13/2017 at 08:27:56)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">12/13/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,70"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px"><a href="/doc1/196031289294" oncontextmenu="this.href=&quot;https://ecf.wawb.uscourts.gov/doc1/196031289294&quot;">20</a> <br><nobr>(1&nbsp;pg)</nobr></td><td valign="bottom">  Received UNSIGNED Order Forwarded to Chambers for Judge's Signature. Filed by Sterbick, John. Related document  <a href="https://ecf.wawb.uscourts.gov/doc1/196031225242" onclick="goDLS('/doc1/196031225242','646603','47','','1','','','','','');return(false)">14</a>  (Entered: 12/13/2017 at 08:31:02)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">12/13/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,72"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px"><a href="/doc1/196031293215" oncontextmenu="this.href=&quot;https://ecf.wawb.uscourts.gov/doc1/196031293215&quot;">21</a> <br><nobr>(2&nbsp;pgs)</nobr></td><td valign="bottom">  BNC Certificate of Notice (Related document(s)<a href="https://ecf.wawb.uscourts.gov/doc1/196031281185">18</a> Notice to File Cert Fin Mgmt Course). Notice Date 12/13/2017. (Admin.) (Entered: 12/13/2017 at 21:25:59)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">12/14/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,75"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px">&nbsp;</td><td valign="bottom">  Minutes. Hearing Not Held. Order to be entered pursuant to Local Bankruptcy Rule 9013-1(f)(2). (related document(s):  <a href="https://ecf.wawb.uscourts.gov/doc1/196031225242" onclick="goDLS('/doc1/196031225242','646603','47','','1','','','','','');return(false)">14</a>  Motion to Confirm Amended Plan (PAA) (Entered: 12/14/2017 at 07:50:48)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">12/21/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,78"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px"><a href="/doc1/196031320225" oncontextmenu="this.href=&quot;https://ecf.wawb.uscourts.gov/doc1/196031320225&quot;">22</a> <br><nobr>(1&nbsp;pg)</nobr></td><td valign="bottom">  ORDER Granting Motion to Approve Confirmation of Amended Chapter 13 Plan Dated November 17, 2017. (Related document(s)<a href="https://ecf.wawb.uscourts.gov/doc1/196031225242">14</a> Motion)(SLM) (Entered: 12/21/2017 at 14:42:51)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">12/22/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,82"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px">&nbsp;</td><td valign="bottom">  Chapter 13 Trustee's Recommendation for Order Confirming Chapter 13 Plan, Document number 16. Filed by Michael G. Malaier on behalf of Michael G. Malaier. (Malaier, Michael) (Entered: 12/22/2017 at 10:21:01)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">12/23/2017</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,84"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px">23</td><td valign="bottom">  <b> ORDER </b> Confirming Chapter 13 Plan. <br><br> The Chapter 13 plan (Related document  <a href="https://ecf.wawb.uscourts.gov/doc1/196031225606" onclick="goDLS('/doc1/196031225606','646603','52','','1','','','','','');return(false)">16</a>  ) ("Plan") filed by the Debtor(s) ("Debtor") satisfies the requirements of 11 U.S.C. section 1325. Accordingly, it is hereby ordered that the Plan is confirmed. It is further ordered that: <br><br>(1) the Debtor shall incur no additional debt except after obtaining permission from the Trustee pursuant to Local Bankruptcy Rule 3015-2 or permission from the Court; <br><br>(2) the Debtor shall promptly notify the Trustee if the Debtor's projected gross annual income increases by more than 10% above the gross amount disclosed in the most recently filed Schedule I; <br><br>(3) the Debtor shall promptly comply with the Trustee's requests for financial information; <br><br>(4) the Debtor shall timely file required tax returns with the appropriate taxing authority during the life of the Plan; <br><br>(5) the Trustee shall charge the percentage fee as periodically set pursuant to 28 U.S.C. section 586(e); <br><br> (6) nothing in this order or the Plan shall restrict the Trustee from recovering on claims on avoidance actions or otherwise, including claims pursuant to 11 U.S.C. sections 544, 547, 548, 550 and/or 551 and the estate retains the right and standing to pursue all claims under the previously enumerated sections; <br><br>(7) all property of the Debtor and the estate shall remain under the exclusive jurisdiction of the Court; <br><br>(8) the attorney for the Debtor's compensation is approved in the lesser amount of $3,500 or the estimated amount listed in section IV.A.3 of the Plan; and <br><br> (9) each creditor (including successors and assigns) to which the Debtor is surrendering property in Section VI of the Plan is granted relief from the stays of 11 U.S.C. sections 362(a) and 1301(a) to enforce its security interest against the property identified in Section VI of the Plan including taking possession and sale. <br><br><b> Hereby ordered by Judge Brian D Lynch. <br><br></b><i> <font color="red"> This Notice of Electronic Filing is the Official ORDER for this entry. No document is attached.</font> </i> (Entered: 12/23/2017 at 02:16:03)</td></tr>
<tr><td width="94" nowrap="" valign="bottom">01/25/2018</td><td width="74" valign="top" align="right" style="border-right:0;padding-right:1px;padding-left:2px;white-space:nowrap"><nobr>   <a href="/cgi-bin/DisplayReceipt.pl?646603,91"><img src="/graphics/silverball.gif" width="14" height="14" border="0"></a> </nobr></td><td width="30" valign="top" align="left" style="border-left:0;padding-left:1px"><a href="/doc1/196031425642" oncontextmenu="this.href=&quot;https://ecf.wawb.uscourts.gov/doc1/196031425642&quot;">24</a> <br><nobr>(1&nbsp;pg)</nobr></td><td valign="bottom">  Change of Address Filed by Capital One Auto Finance . (SLM) (Entered: 01/26/2018 at 08:50:33)</td></tr>
</tbody></table><br><br><br><br>
			<script type="text/javascript">
				document.cookie = 'RECENT_CASES=' + "646603;";
			</script>
		<hr><center><table border="1" bgcolor="white" width="400"><tbody><tr><th colspan="4"><font size="+1" color="DARKRED">PACER Service Center </font></th></tr><tr><th colspan="4"><font color="DARKBLUE">Transaction Receipt </font></th></tr><tr></tr><tr></tr><tr><td colspan="4" align="CENTER"><font size="-1" color="DARKBLUE">02/21/2018 08:24:01</font></td></tr><tr><th align="LEFT"><font size="-1" color="DARKBLUE"> PACER Login: </font></th><td align="LEFT"><font size="-1" color="DARKBLUE"> [ REDACTED ] </font></td><th align="LEFT"><font size="-1" color="DARKBLUE"> Client Code: </font></th><td align="LEFT"><font size="-1" color="DARKBLUE">  </font></td></tr><tr><th align="LEFT"><font size="-1" color="DARKBLUE"> Description: </font></th><td align="LEFT"><font size="-1" color="DARKBLUE"> Docket Report </font></td><th align="LEFT"><font size="-1" color="DARKBLUE"> Search Criteria: </font></th><td align="LEFT"><font size="-1" color="DARKBLUE"> 17-43611-BDL Fil or Ent: filed   Doc From: 0 Doc To: 99999999 Term: included Links : included Headers: included  Format: html Page counts for documents: included </font></td></tr><tr><th align="LEFT"><font size="-1" color="DARKBLUE"> Billable Pages: </font></th><td align="LEFT"><font size="-1" color="DARKBLUE"> 3 </font></td><th align="LEFT"><font size="-1" color="DARKBLUE"> Cost: </font></th><td align="LEFT"><font size="-1" color="DARKBLUE"> 0.30 </font></td></tr><tr></tr><tr></tr></tbody></table></center><br><br></div></body>
